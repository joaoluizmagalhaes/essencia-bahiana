"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var u=require("vue"),ge=require("quasar"),p=require("vue/server-renderer"),er=require("quasar/wrappers"),Oc=require("pinia"),ht=require("vue-router");require("@emailjs/browser");var Lc=require("firebase/app");require("firebase/analytics");var Mc=require("firebase/auth"),Kr=require("firebase/firestore"),qc=require("firebase/functions"),Fc=require("vue-i18n"),Bc=require("axios");function $c(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var ua=$c(Bc);var ha=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const As=u.defineComponent({name:"App"});function Uc(t,e,n,r,s,o,i,a){const l=u.resolveComponent("router-view");e(p.ssrRenderComponent(l,r,null,n))}const Lo=As.setup;As.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/App.vue"),Lo?Lo(t,e):void 0};var jc=ha(As,[["ssrRender",Uc]]),Sr=er.store(()=>Oc.createPinia());const zc=[{path:"/",component:()=>Promise.resolve().then(function(){return eu}),children:[{path:"",component:()=>Promise.resolve().then(function(){return tu})},{path:"/politicas-de-privacidade",component:()=>Promise.resolve().then(function(){return nu})},{path:"/blog",component:()=>Promise.resolve().then(function(){return mp})},{path:"/blog/:categor/:id",component:()=>Promise.resolve().then(function(){return fp})}]},{path:"/:catchAll(.*)*",component:()=>Promise.resolve().then(function(){return _p})}];var br=er.route(function(){const t=ht.createMemoryHistory;return ht.createRouter({scrollBehavior:()=>({left:0,top:0}),routes:zc,history:t("/")})});const Hc=u.defineComponent({name:"AppWrapper",setup(t){return u.onMounted(()=>{const{proxy:{$q:e}}=u.getCurrentInstance();e.onSSRHydrated!==void 0&&e.onSSRHydrated()}),()=>u.h(jc,t)}});async function Gc(t,e,n){const r=t(Hc);r.use(ge.Quasar,e,n);const s=typeof Sr=="function"?await Sr({ssrContext:n}):Sr;r.use(s),typeof window<"u"&&window.__INITIAL_STATE__!==void 0&&(s.state.value=window.__INITIAL_STATE__,delete window.__INITIAL_STATE__);const o=u.markRaw(typeof br=="function"?await br({ssrContext:n,store:s}):br);return s.use(({store:i})=>{i.router=o}),{app:r,store:s,router:o}}var Kc={config:{},plugins:{Notify:ge.Notify,Loading:ge.Loading,Dialog:ge.Dialog,Screen:ge.Screen,Meta:ge.Meta}};const Qc="/",Wc=/^https?:\/\//;function Yc(t,e){if(typeof t=="string"&&Wc.test(t)===!0)return t;try{return e.resolve(t).href}catch{}return t}const{components:xp,directives:Ip,...Xc}=Kc,Jc=Promise.all([Promise.resolve().then(function(){return wp}),Promise.resolve().then(function(){return Ap})]).then(t=>t.map(e=>e.default).filter(e=>typeof e=="function"));var Zc=t=>new Promise(async(e,n)=>{const r=await Jc,{app:s,router:o,store:i}=await Gc(u.createApp,Xc,t);let a=!1;const l=(d,m)=>{a=!0,n({url:Yc(d,o),code:m})};for(let d=0;a===!1&&d<r.length;d++)try{await r[d]({app:s,router:o,store:i,ssrContext:t,redirect:l,urlPath:t.req.url,publicPath:Qc})}catch(m){n(m);return}if(a===!0)return;s.use(o);const c=t.req.url,{fullPath:h}=o.resolve(c);if(h!==c)return n({url:h});o.push(c).catch(()=>{}),o.isReady().then(()=>{if(o.currentRoute.value.matched.filter(m=>m.components!==void 0).flatMap(m=>Object.values(m.components)).length===0)return n({code:404});t.state=u.unref(i.state),e(s)}).catch(n)});const De={__name:"HeaderMenu",__ssrInlineRender:!0,setup(t){const{getScrollTarget:e,setVerticalScrollPosition:n}=ge.scroll,r=u.computed(()=>s.screen.lt.md),s=ge.useQuasar(),o=ht.useRouter(),i=u.ref("");function a(c,h=""){o.push(`/${c}`).then(()=>{h&&u.nextTick(()=>{const d=document.getElementById(h);d&&l(d)})})}function l(c){const h=e(c),d=c.offsetTop-90;n(h,d,1e3)}return(c,h,d,m)=>{const f=u.resolveComponent("q-tabs"),y=u.resolveComponent("q-tab");h(p.ssrRenderComponent(f,u.mergeProps({modelValue:i.value,"onUpdate:modelValue":T=>i.value=T,vertical:!!r.value,class:"text-primary"},m),{default:u.withCtx((T,x,O,$)=>{if(x)x(p.ssrRenderComponent(y,{name:"blog",label:"Blog",onClick:N=>a("blog")},null,O,$)),x(p.ssrRenderComponent(y,{name:"contato",label:"Contato",onClick:N=>a("","contact")},null,O,$));else return[u.createVNode(y,{name:"blog",label:"Blog",onClick:N=>a("blog")},null,8,["onClick"]),u.createVNode(y,{name:"contato",label:"Contato",onClick:N=>a("","contact")},null,8,["onClick"])]}),_:1},d))}}},Mo=De.setup;De.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/HeaderMenu.vue"),Mo?Mo(t,e):void 0};const xs={__name:"MainLayout",__ssrInlineRender:!0,setup(t){const e=u.ref(!1),n=u.ref(!1);u.ref(null);const r=ht.useRouter();u.onMounted(()=>{window.addEventListener("scroll",i)}),u.onUnmounted(()=>{window.removeEventListener("scroll",i)});function s(){e.value=!e.value}function o(a){r.push(`/${a}`)}const i=()=>{window.scrollY>20?n.value=!0:n.value=!1};return(a,l,c,h)=>{const d=u.resolveComponent("q-layout"),m=u.resolveComponent("q-toolbar"),f=u.resolveComponent("q-avatar"),y=u.resolveComponent("q-img"),T=u.resolveComponent("q-space"),x=u.resolveComponent("q-btn"),O=u.resolveComponent("q-drawer"),$=u.resolveComponent("q-page-container"),N=u.resolveComponent("router-view");l(p.ssrRenderComponent(d,u.mergeProps({view:"lHh Lpr lFf"},h),{default:u.withCtx((de,M,z,L)=>{if(M)M(p.ssrRenderComponent(m,{class:["h-20 md:h-36 fixed w-full z-50 top-0 p-7 bg-transparent font-sans font-bold ease-in-out duration-500",{"!bg-white md:!h-24 drop-shadow-md":n.value}]},{default:u.withCtx((ye,B,ee,H)=>{if(B)B(p.ssrRenderComponent(f,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":n.value}],onClick:Ct=>o("")},{default:u.withCtx((Ct,St,Rr,Cr)=>{if(St)St(p.ssrRenderComponent(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"},null,Rr,Cr));else return[u.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]}),_:1},ee,H)),B(`<h3 class="ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"${H}>Ess\xEAncia <span class="uppercase text-2xl md:text-3xl"${H}>Bahiana</span></h3>`),B(p.ssrRenderComponent(T,null,null,ee,H)),B(p.ssrRenderComponent(De,{class:"hidden lg:!flex"},null,ee,H)),B(p.ssrRenderComponent(x,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"},null,ee,H));else return[u.createVNode(f,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":n.value}],onClick:Ct=>o("")},{default:u.withCtx(()=>[u.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1},8,["class","onClick"]),u.createVNode("h3",{onClick:Ct=>o(""),class:"ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-2xl md:text-3xl",onClick:Ct=>o("")},"Bahiana",8,["onClick"])],8,["onClick"]),u.createVNode(T),u.createVNode(De,{class:"hidden lg:!flex"}),u.createVNode(x,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"})]}),_:1},z,L)),M(p.ssrRenderComponent(O,{modelValue:e.value,"onUpdate:modelValue":ye=>e.value=ye,overlay:"",side:"right",bordered:"",class:"q-py-lg flex flex-col"},{default:u.withCtx((ye,B,ee,H)=>{if(B)B(`<div class="mx-auto mb-5 w-full flex justify-evenly items-center"${H}>`),B(p.ssrRenderComponent(f,{class:"w-16 h-16 md:w-32 md:h-32"},{default:u.withCtx((Ct,St,Rr,Cr)=>{if(St)St(p.ssrRenderComponent(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"},null,Rr,Cr));else return[u.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]}),_:1},ee,H)),B(`<div class="text-lg text-primary font-bold font-sans"${H}>Ess\xEAncia <span class="uppercase text-xl"${H}>Bahiana</span></div></div><div${H}>`),B(p.ssrRenderComponent(De,null,null,ee,H)),B("</div>");else return[u.createVNode("div",{class:"mx-auto mb-5 w-full flex justify-evenly items-center"},[u.createVNode(f,{class:"w-16 h-16 md:w-32 md:h-32"},{default:u.withCtx(()=>[u.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1}),u.createVNode("div",{class:"text-lg text-primary font-bold font-sans"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-xl"},"Bahiana")])]),u.createVNode("div",null,[u.createVNode(De)])]}),_:1},z,L)),M(p.ssrRenderComponent($,null,{default:u.withCtx((ye,B,ee,H)=>{if(B)B(p.ssrRenderComponent(N,null,null,ee,H));else return[u.createVNode(N)]}),_:1},z,L));else return[u.createVNode(m,{class:["h-20 md:h-36 fixed w-full z-50 top-0 p-7 bg-transparent font-sans font-bold ease-in-out duration-500",{"!bg-white md:!h-24 drop-shadow-md":n.value}]},{default:u.withCtx(()=>[u.createVNode(f,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":n.value}],onClick:ye=>o("")},{default:u.withCtx(()=>[u.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1},8,["class","onClick"]),u.createVNode("h3",{onClick:ye=>o(""),class:"ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-2xl md:text-3xl",onClick:ye=>o("")},"Bahiana",8,["onClick"])],8,["onClick"]),u.createVNode(T),u.createVNode(De,{class:"hidden lg:!flex"}),u.createVNode(x,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"})]),_:1},8,["class"]),u.createVNode(O,{modelValue:e.value,"onUpdate:modelValue":ye=>e.value=ye,overlay:"",side:"right",bordered:"",class:"q-py-lg flex flex-col"},{default:u.withCtx(()=>[u.createVNode("div",{class:"mx-auto mb-5 w-full flex justify-evenly items-center"},[u.createVNode(f,{class:"w-16 h-16 md:w-32 md:h-32"},{default:u.withCtx(()=>[u.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1}),u.createVNode("div",{class:"text-lg text-primary font-bold font-sans"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-xl"},"Bahiana")])]),u.createVNode("div",null,[u.createVNode(De)])]),_:1},8,["modelValue","onUpdate:modelValue"]),u.createVNode($,null,{default:u.withCtx(()=>[u.createVNode(N)]),_:1})]}),_:1},c))}}},qo=xs.setup;xs.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/layouts/MainLayout.vue"),qo?qo(t,e):void 0};var eu=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"}));const vt={__name:"WhatsAppBtn",__ssrInlineRender:!0,props:{text:String},setup(t){const e=()=>{const r="https://wa.me/5511993271622";window.open(r,"_blank")};return(n,r,s,o)=>{const i=u.resolveComponent("q-btn"),a=u.resolveComponent("q-avatar"),l=u.resolveComponent("q-img");r(p.ssrRenderComponent(i,u.mergeProps({align:"left",size:"md",class:"py-2 rounded bg-white text-primary my-5 mt-auto shadow-2xl flex justify-start mx-auto",onClick:e},o),{default:u.withCtx((c,h,d,m)=>{if(h)h(p.ssrRenderComponent(a,{size:"40px",class:"mr-5"},{default:u.withCtx((f,y,T,x)=>{if(y)y(p.ssrRenderComponent(l,{src:"zap-icon.png",alt:"\xCDcone Whatsapp"},null,T,x));else return[u.createVNode(l,{src:"zap-icon.png",alt:"\xCDcone Whatsapp"})]}),_:1},d,m)),h(` ${p.ssrInterpolate(t.text)}`);else return[u.createVNode(a,{size:"40px",class:"mr-5"},{default:u.withCtx(()=>[u.createVNode(l,{src:"zap-icon.png",alt:"\xCDcone Whatsapp"})]),_:1}),u.createTextVNode(" "+u.toDisplayString(t.text),1)]}),_:1},s))}}},Fo=vt.setup;vt.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/WhatsAppBtn.vue"),Fo?Fo(t,e):void 0};const Vn={__name:"HeroComponent",__ssrInlineRender:!0,props:{image:String,firstTitle:String,secondTitle:String,subtitle:String},setup(t){const e=u.ref("Converse Conosco");return(n,r,s,o)=>{const i=u.resolveComponent("q-img");r(`<section${p.ssrRenderAttrs(u.mergeProps({class:"relative w-full h-screen overflow-hidden flex justify-center items-center"},o))}><div class="absolute top-0 left-0 w-full h-full">`),r(p.ssrRenderComponent(i,{src:t.image,alt:"Praia em Porto Seguro Bahia",class:"object-cover object-[85%] md:object-center w-full h-full"},null,s)),r(`</div><div class="absolute top-0 left-0 w-full h-full bg-black opacity-15"></div><div class="absolute top-0 max-w-2xl w-full h-full flex p-5 flex-col py-[200px] justify-center md:justify-start items-center text-center text-white z-10"><h1 class="text-5xl md:text-[80px] text-white font-bold mb-6 font-sans leading-3 shadow-primary drop-shadow-lg">${p.ssrInterpolate(t.firstTitle)} <span class="text-6xl md:text-[120px] leading-normal uppercase">${p.ssrInterpolate(t.secondTitle)}</span></h1><p class="text-3xl md:text-3xl text-shadow-outline text-white font-open">${p.ssrInterpolate(t.subtitle)}</p>`),r(p.ssrRenderComponent(vt,{text:e.value},null,s)),r("</div></section>")}}},Bo=Vn.setup;Vn.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/HeroComponent.vue"),Bo?Bo(t,e):void 0};const Is={__name:"SelectionBarItem",__ssrInlineRender:!0,props:{bgColor:String,icon:String,text:String},setup(t){return(e,n,r,s)=>{n(`<div${p.ssrRenderAttrs(u.mergeProps({class:`hover:scale-105 hover:shadow-2xl cursor-pointer ease-in-out duration-300 flex flex-col
  justify-center items-center ${t.bgColor} p-5`},s))}><img${p.ssrRenderAttr("src",t.icon)} alt="" class="w-20 h-20"><p class="text-white text-lg">${p.ssrInterpolate(t.text)}</p></div>`)}}},$o=Is.setup;Is.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/SelectionBarItem.vue"),$o?$o(t,e):void 0};const Nn={__name:"SelectionBar",__ssrInlineRender:!0,setup(t){const e=u.ref([{bgColor:"bg-secondary",icon:"drink.svg",text:"Festas"},{bgColor:"bg-accent",icon:"bus.svg",text:"Traslados"},{bgColor:"bg-secondary",icon:"boat.svg",text:"Passeios"},{bgColor:"bg-accent",icon:"beach.svg",text:"Praias"},{bgColor:"bg-secondary",icon:"dive.svg",text:"Mergulhos"},{bgColor:"bg-accent",icon:"food.svg",text:"Gastronomia"}]);return(n,r,s,o)=>{r(`<section${p.ssrRenderAttrs(u.mergeProps({class:"w-full h-auto md:h-44 bg-white flex justify-center"},o))}><div class="w-full grid grid-cols-3 md:grid-cols-6"><!--[-->`),p.ssrRenderList(e.value,i=>{r(p.ssrRenderComponent(Is,{bgColor:i.bgColor,icon:i.icon,text:i.text,key:i.text},null,s))}),r("<!--]--></div></section>")}}},Uo=Nn.setup;Nn.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/SelectionBar.vue"),Uo?Uo(t,e):void 0};const Rs={__name:"TransferCard",__ssrInlineRender:!0,props:{image:String,alt:String,title:String,text:String,customCss:String,order:Boolean},setup(t){const e=u.ref("Saiba mais");return(n,r,s,o)=>{r(`<figure${p.ssrRenderAttrs(u.mergeProps({class:"flex flex-row max-w-[1000px] px-6 mx-auto mb-20 justify-between"},o))}><img${p.ssrRenderAttr("src",t.image)}${p.ssrRenderAttr("alt",t.alt)} class="${p.ssrRenderClass(` w-full md:w-1/3 object-cover object-bottom aspect-square drop-shadow-md w-[315px] h-[315px] ${t.order?"md:order-2":""}`)}"><figcaption class="${p.ssrRenderClass(`w-full md:w-2/3 md:px-10 flex flex-col justify-start items-start py-6 ${t.customCss}`)}"><h2 class="text-sans font-bold text-secondary text-3xl md:text-4xl mb-6">${p.ssrInterpolate(t.title)}</h2><p class="text-white text-lg mb-6">${p.ssrInterpolate(t.text)}</p>`),r(p.ssrRenderComponent(vt,{text:e.value},null,s)),r("</figcaption></figure>")}}},jo=Rs.setup;Rs.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/TransferCard.vue"),jo?jo(t,e):void 0};const Dn={__name:"TransferSection",__ssrInlineRender:!0,setup(t){const e=u.ref([{image:"van-1.png",alt:"Van na praia.",title:"Traslados e Passeios Personalizados",text:"Explore as maravilhas de Porto Seguro com nossos passeios exclusivos e traslados confort\xE1veis. Seu parceiro ideal em turismo, garantindo aventuras inesquec\xEDveis e seguran\xE7a em cada viagem!",customCss:"",order:!1},{image:"van-2.png",alt:"Van na Praia do Espelho",title:"Explore o Cora\xE7\xE3o da Bahia com Estilo! ",text:"Porto Seguro espera por voc\xEA com suas praias deslumbrantes e hist\xF3ria rica. Desfrute de experi\xEAncias \xFAnicas com nossos tours especializados e servi\xE7os de traslado de primeira classe, projetados para proporcionar conforto e conveni\xEAncia em suas aventuras tropicais.",customCss:"md:pl-0 md:pr-20",order:!0},{image:"van-3.png",alt:"turistas felizes dentro da Van",title:"Viva a Magia de Porto Seguro!",text:"Embarque em uma jornada extraordin\xE1ria pelos encantos naturais e culturais de Porto Seguro. Oferecemos itiner\xE1rios personalizados e servi\xE7os de qualidade para tornar cada momento de sua viagem memor\xE1vel e cheio de descobertas.",customCss:"",order:!1}]),n=u.ref("Fa\xE7a uma cota\xE7\xE3o");return(r,s,o,i)=>{s(`<section${p.ssrRenderAttrs(u.mergeProps({class:"w-full min-h-[500px] bg-primary py-20"},i))}><div class="container flex flex-col mx-auto"><header class="px-6 max-w-[1000px] mb-16 md:mb-28"><h1 class="font-sans text-3xl md:text-6xl text-accent font-bold mb-2 md:mb-5">Explore Porto Seguro com Conforto e Seguran\xE7a</h1><p class="text-secondary text-lg md:text-2xl">Traslados e Passeios Personalizados</p></header><!--[-->`),p.ssrRenderList(e.value,a=>{s(p.ssrRenderComponent(Rs,{image:a.image,title:a.title,text:a.text,customCss:a.customCss,order:a.order,alt:a.alt,key:a.image},null,o))}),s('<!--]--><footer class="flex flex-col w-full max-w-[800px] px-6 md:mx-auto"><h2 class="text-accent text-3xl md:text-6xl font-bold mb-6 text-center md:text-left">Pronto para Descobrir Porto Seguro?</h2><p class="text-white text-lg md:text-xl mb-10">N\xE3o espere mais para planejar a viagem dos seus sonhos! Clique aqui e fa\xE7a j\xE1 a sua cota\xE7\xE3o de traslados via WhatsApp. R\xE1pido, f\xE1cil e seguro \u2013 seu Porto Seguro est\xE1 a apenas uma mensagem de dist\xE2ncia!</p>'),s(p.ssrRenderComponent(vt,{text:n.value},null,o)),s("</footer></div></section>")}}},zo=Dn.setup;Dn.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/TransferSection.vue"),zo?zo(t,e):void 0};const Ce={__name:"FooterComponent",__ssrInlineRender:!0,props:{copyRight:String,firstTitle:String,secondTitle:String},setup(t){ht.useRouter();function e(){const o="https://www.instagram.com/essencia.bahiana";window.open(o,"_blank")}function n(){const o="https://www.facebook.com/profile.php?id=61555489870691&mibextid=9R9pXO";window.open(o,"_blank")}function r(){const i="https://wa.me/5511993271622";window.open(i,"_blank")}function s(){const o="mailto:contato@essenciabahiana.com.br";window.open(o,"_blank")}return(o,i,a,l)=>{const c=u.resolveComponent("q-btn");i(`<footer${p.ssrRenderAttrs(u.mergeProps({elevated:"",class:"bg-primary w-full text-light-gray"},l))}><div class="q-px-lg q-py-md"><div class="flex flex-wrap justify-between items-center"><div class="flex items-center"><img src="/logo.svg" alt="Logo Essencia Bahiana" class="h-12 mr-4 bg-white rounded-full"><div class="text-2xl font-bold font-sans text-accent">${p.ssrInterpolate(t.firstTitle)} <span class="uppercase text-3xl font-bold">${p.ssrInterpolate(t.secondTitle)}</span></div></div><div class="flex items-center mx-auto md:mx-0">`),i(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"fa-brands fa-instagram",class:"text-xl text-accent",onClick:e},null,a)),i(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"fa-brands fa-facebook-f",class:"text-xl text-accent",onClick:n},null,a)),i(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"fa-brands fa-whatsapp",class:"text-xl text-accent",onClick:r},null,a)),i(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"email",class:"text-xl text-accent",onClick:s},null,a)),i(`</div></div><div class="text-center q-mt-md text-accent flex flex-col">${p.ssrInterpolate(t.copyRight)} <span class="cursor-pointer">Pol\xEDticas de Privacidade</span></div></div></footer>`)}}},Ho=Ce.setup;Ce.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/FooterComponent.vue"),Ho?Ho(t,e):void 0};const kn={__name:"ContactSection",__ssrInlineRender:!0,setup(t){ge.useQuasar();const e=u.ref(""),n=u.ref(""),r=u.ref(""),s=u.ref(""),o=u.ref(""),i=u.ref(null),a=u.ref(null),l=u.ref(null);return(c,h,d,m)=>{const f=u.resolveComponent("q-input"),y=u.resolveComponent("q-btn");h(`<div${p.ssrRenderAttrs(u.mergeProps({class:"contact-section bg-dark-page text-light-gray p-10",id:"contact"},m))}><div class="container mx-auto"><div class="text-center mb-10"><h2 class="text-6xl font-bold text-primary mb-2">Entre em Contato</h2><p class="text-secondary text-xl">Estamos prontos para atend\xEA-lo!</p></div><div class="grid grid-cols-1 gap-8"><div class="contact-info">`),h(p.ssrRenderComponent(vt,{text:"Converse pelo WhatsApp"},null,d)),h('</div><div class="contact-form"><p class="text-accent">Ou preencha o formul\xE1rio abaixo:</p><form>'),h(p.ssrRenderComponent(f,{filled:"",modelValue:e.value,"onUpdate:modelValue":T=>e.value=T,ref_key:"nameRef",ref:i,rules:[T=>!!T||"Nome \xE9 obrigat\xF3rio."],label:"Nome",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:o.value,"onUpdate:modelValue":T=>o.value=T,label:"E-mail",class:"mb-6",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:s.value,"onUpdate:modelValue":T=>s.value=T,label:"Telefone",class:"mb-6",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:n.value,"onUpdate:modelValue":T=>n.value=T,ref_key:"subjectRef",ref:a,rules:[T=>!!T||"Assunto \xE9 obrigat\xF3rio."],label:"Assunto",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,ref_key:"messageRef",ref:l,rules:[T=>!!T||"Mensagem \xE9 obrigat\xF3rio."],label:"Mensagem",type:"textarea",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(y,{label:"Enviar Mensagem",type:"submit",color:"secondary",class:"w-full"},null,d)),h("</form></div></div></div></div>")}}},Go=kn.setup;kn.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/ContactSection.vue"),Go?Go(t,e):void 0};const Cs={__name:"IndexPage",__ssrInlineRender:!0,setup(t){const e=u.ref("Ess\xEAncia"),n=u.ref("Bahiana"),r=u.ref("Descubra a Magia e a Cultura \xDAnica da Terra do Descobrimento"),s=u.ref("/hero.jpg"),o=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return ge.useMeta({title:"Ess\xEAncia BAHIANA",meta:{description:{name:"description",content:"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:"Porto Seguro, Pontos tur\xEDsticos em Porto Seguro, Passeios em Porto Seguro, Traslados em Porto Seguro, Turismo na Bahia, Viagens pela Bahia, Melhores experi\xEAncias em Porto Seguro, Roteiros de viagem em Porto Seguro, Atra\xE7\xF5es tur\xEDsticas na regi\xE3o, Servi\xE7o de transporte em Porto Seguro, Roteiro de viagem personalizado, Dicas de viagem para Porto Seguro, Destinos na Bahia, Planejamento de viagem, Experi\xEAncias memor\xE1veis na Bahia."},ogTitle:{property:"og:title",template(){return"Ess\xEAncia BAHIANA"}},ogDescription:{property:"og:description",template(){return"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."}},ogImage:{property:"og:image",template(){return"https://essenciabahiana.com.br/hero.jpg"}},twitterTitle:{property:"twitter:title",template(){return"Ess\xEAncia BAHIANA"}},twitterDescription:{property:"twitter:description",template(){return"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."}},twitterImage:{property:"twitter:image",template(){return"https://essenciabahiana.com.br/hero.jpg"}}}}),(i,a,l,c)=>{const h=u.resolveComponent("q-page");a(p.ssrRenderComponent(h,u.mergeProps({class:"flex flex-center w-full"},c),{default:u.withCtx((d,m,f,y)=>{if(m)m(p.ssrRenderComponent(Vn,{image:s.value,firstTitle:e.value,secondTitle:n.value,subtitle:r.value},null,f,y)),m(p.ssrRenderComponent(Nn,null,null,f,y)),m(p.ssrRenderComponent(Dn,null,null,f,y)),m(p.ssrRenderComponent(kn,null,null,f,y)),m(p.ssrRenderComponent(Ce,{firstTitle:e.value,secondTitle:n.value,copyRight:o.value},null,f,y));else return[u.createVNode(Vn,{image:s.value,firstTitle:e.value,secondTitle:n.value,subtitle:r.value},null,8,["image","firstTitle","secondTitle","subtitle"]),u.createVNode(Nn),u.createVNode(Dn),u.createVNode(kn),u.createVNode(Ce,{firstTitle:e.value,secondTitle:n.value,copyRight:o.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},l))}}},Ko=Cs.setup;Cs.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/IndexPage.vue"),Ko?Ko(t,e):void 0};var tu=Object.freeze(Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"}));const On={__name:"FaqSection",__ssrInlineRender:!0,props:{faqs:{question:String,answer:String}},setup(t){const e=t;return(n,r,s,o)=>{const i=u.resolveComponent("q-expansion-item"),a=u.resolveComponent("q-card"),l=u.resolveComponent("q-card-section");r(`<div${p.ssrRenderAttrs(u.mergeProps({class:"faq-container py-8"},o))}><div class="faq-title text-2xl font-bold mb-4 text-primary"> Perguntas Frequentes (FAQs) </div><div class="faq-content"><!--[-->`),p.ssrRenderList(e.faqs,(c,h)=>{r('<div class="faq-item mb-4 text-primary">'),r(p.ssrRenderComponent(i,{"expand-separator":"",label:c.question},{default:u.withCtx((d,m,f,y)=>{if(m)m(p.ssrRenderComponent(a,null,{default:u.withCtx((T,x,O,$)=>{if(x)x(p.ssrRenderComponent(l,{class:"text-secondary"},{default:u.withCtx((N,de,M,z)=>{if(de)de(`${p.ssrInterpolate(c.answer)}`);else return[u.createTextVNode(u.toDisplayString(c.answer),1)]}),_:2},O,$));else return[u.createVNode(l,{class:"text-secondary"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(c.answer),1)]),_:2},1024)]}),_:2},f,y));else return[u.createVNode(a,null,{default:u.withCtx(()=>[u.createVNode(l,{class:"text-secondary"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(c.answer),1)]),_:2},1024)]),_:2},1024)]}),_:2},s)),r("</div>")}),r("<!--]--></div></div>")}}},Qo=On.setup;On.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/FaqSection.vue"),Qo?Qo(t,e):void 0};const Ss={__name:"PrivacyPolicy",__ssrInlineRender:!0,setup(t){const e=u.ref([{question:"Como o Ess\xEAncia Bahiana utiliza o Google AdSense para coletar dados?",answer:"O Ess\xEAncia Bahiana utiliza o Google AdSense para exibir an\xFAncios que s\xE3o relevantes para os usu\xE1rios. O Google AdSense utiliza cookies e outras tecnologias de rastreamento para coletar informa\xE7\xF5es sobre as prefer\xEAncias dos usu\xE1rios e o tipo de conte\xFAdo que acessam. Essas informa\xE7\xF5es s\xE3o usadas para fornecer an\xFAncios direcionados, melhorando assim a experi\xEAncia do usu\xE1rio e permitindo a monetiza\xE7\xE3o do site.",open:!1},{question:"Quais s\xE3o os direitos do usu\xE1rio em rela\xE7\xE3o aos dados coletados pelo Ess\xEAncia Bahiana?",answer:"Usu\xE1rios do Ess\xEAncia Bahiana t\xEAm o direito de acessar, corrigir ou excluir seus dados pessoais a qualquer momento. Al\xE9m disso, os usu\xE1rios t\xEAm o direito de se opor ou restringir o processamento de seus dados e o direito \xE0 portabilidade de dados. Para exercer esses direitos, os usu\xE1rios podem entrar em contato diretamente com o Ess\xEAncia Bahiana atrav\xE9s dos canais de suporte fornecidos.",open:!1},{question:"Como posso gerenciar minhas prefer\xEAncias de cookies no Ess\xEAncia Bahiana?",answer:"Os usu\xE1rios podem gerenciar suas prefer\xEAncias de cookies nas configura\xE7\xF5es do navegador. Al\xE9m disso, o Ess\xEAncia Bahiana fornece informa\xE7\xF5es e op\xE7\xF5es para gerenciar prefer\xEAncias de cookies diretamente no site, permitindo que os usu\xE1rios escolham aceitar, recusar ou personalizar o uso de cookies conforme necess\xE1rio.",open:!1},{question:"Que medidas de seguran\xE7a o Ess\xEAncia Bahiana implementa para proteger os dados dos usu\xE1rios?",answer:"O Ess\xEAncia Bahiana implementa v\xE1rias medidas de seguran\xE7a para proteger os dados dos usu\xE1rios, incluindo criptografia de dados, firewalls e protocolos de seguran\xE7a para prevenir o acesso n\xE3o autorizado. Al\xE9m disso, realizamos treinamentos regulares de seguran\xE7a para nossa equipe e mantemos pol\xEDticas rigorosas para garantir a prote\xE7\xE3o e a privacidade dos dados dos usu\xE1rios.",open:!1},{question:"Como o Ess\xEAncia Bahiana lida com a privacidade das crian\xE7as?",answer:"O Ess\xEAncia Bahiana leva a privacidade das crian\xE7as a s\xE9rio e est\xE1 em conformidade com a Lei de Prote\xE7\xE3o \xE0 Privacidade Online de Crian\xE7as (COPPA). N\xE3o coletamos intencionalmente informa\xE7\xF5es de crian\xE7as menores de 13 anos. Se tivermos conhecimento de que informa\xE7\xF5es foram coletadas de uma crian\xE7a menor de 13 anos, tomaremos medidas imediatas para excluir tais informa\xE7\xF5es.",open:!1},{question:"O Ess\xEAncia Bahiana compartilha informa\xE7\xF5es com outros pa\xEDses?",answer:"O Ess\xEAncia Bahiana pode transferir informa\xE7\xF5es para pa\xEDses fora do Brasil, especialmente em rela\xE7\xE3o \xE0 integra\xE7\xE3o com o Google AdSense. No entanto, asseguramos que todas as transfer\xEAncias de dados s\xE3o realizadas em conformidade com as leis de prote\xE7\xE3o de dados aplic\xE1veis e que medidas de seguran\xE7a adequadas est\xE3o em vigor para proteger os dados durante a transfer\xEAncia e em seu destino final.",open:!1}]),n=u.ref("Ess\xEAncia"),r=u.ref("Bahiana"),s=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return(o,i,a,l)=>{const c=u.resolveComponent("q-page");i(p.ssrRenderComponent(c,u.mergeProps({class:"privacy-policy"},l),{default:u.withCtx((h,d,m,f)=>{if(d)d(`<div class="mt-48 container mx-auto"${f}><h1 class="text-6xl font-bold font-sans text-primary mb-10"${f}>Pol\xEDtica de Privacidade do Ess\xEAncia Bahiana</h1><p class="text-secondary text-lg mb-6"${f}>Saiba como o Ess\xEAncia Bahiana protege sua privacidade e dados pessoais, especialmente em conex\xE3o com o Google AdSense.</p><p class="text-secondary text-lg mb-6"${f}>Bem-vindo ao Ess\xEAncia Bahiana! Prezamos pela transpar\xEAncia e compromisso com a seguran\xE7a dos seus dados pessoais. Esta Pol\xEDtica de Privacidade explica como coletamos, utilizamos e compartilhamos informa\xE7\xF5es no \xE2mbito de nossos servi\xE7os, incluindo, mas n\xE3o se limitando \xE0 integra\xE7\xE3o com o Google AdSense.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Introdu\xE7\xE3o \xE0 Pol\xEDtica de Privacidade</h2><p class="text-secondary text-lg mb-6"${f}>A privacidade dos nossos usu\xE1rios \xE9 de extrema import\xE2ncia para n\xF3s. O Ess\xEAncia Bahiana est\xE1 comprometido em proteger as informa\xE7\xF5es pessoais coletadas quando voc\xEA acessa nosso conte\xFAdo e servi\xE7os. Esta se\xE7\xE3o esclarece o prop\xF3sito da nossa pol\xEDtica e a import\xE2ncia de sua privacidade para n\xF3s.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Coleta de Informa\xE7\xF5es</h2><p class="text-secondary text-lg mb-6"${f}>Entender quais informa\xE7\xF5es s\xE3o coletadas e como s\xE3o coletadas \xE9 fundamental. Aqui, explicamos os tipos de dados que o Ess\xEAncia Bahiana coleta, os m\xE9todos de coleta e como o consentimento do usu\xE1rio \xE9 obtido.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Uso das Informa\xE7\xF5es Coletadas</h2><p class="text-secondary text-lg mb-6"${f}>As informa\xE7\xF5es coletadas s\xE3o utilizadas para melhorar continuamente nossos servi\xE7os, personalizar a experi\xEAncia do usu\xE1rio e cumprir obriga\xE7\xF5es legais. Este segmento aborda detalhadamente esses aspectos.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Integra\xE7\xE3o com o Google AdSense</h2><p class="text-secondary text-lg mb-6"${f}>O Google AdSense permite monetizar o conte\xFAdo do site atrav\xE9s de an\xFAncios. Nesta se\xE7\xE3o, discutiremos como o Ess\xEAncia Bahiana integra o AdSense em suas opera\xE7\xF5es e como isso afeta a coleta e o uso de dados.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Compartilhamento e Divulga\xE7\xE3o de Informa\xE7\xF5es</h2><p class="text-secondary text-lg mb-6"${f}>\xC9 importante entender em que circunst\xE2ncias suas informa\xE7\xF5es podem ser compartilhadas. Aqui, explicamos quando e por que suas informa\xE7\xF5es podem ser divulgadas, seja para parceiros terceirizados ou por requisitos legais.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Medidas de Seguran\xE7a de Dados</h2><p class="text-secondary text-lg mb-6"${f}>A seguran\xE7a dos seus dados \xE9 uma prioridade. Neste segmento, abordamos as medidas de seguran\xE7a implementadas para proteger seus dados, incluindo criptografia e protocolos de seguran\xE7a.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Direitos do Usu\xE1rio e Controle de Dados</h2><p class="text-secondary text-lg mb-6"${f}>Voc\xEA tem direitos significativos em rela\xE7\xE3o aos seus dados pessoais. Aqui, explicamos como voc\xEA pode acessar, corrigir ou excluir suas informa\xE7\xF5es pessoais e quais s\xE3o seus direitos de portabilidade de dados.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Cookies e Tecnologias de Rastreamento</h2><p class="text-secondary text-lg mb-6"${f}>Cookies e outras tecnologias de rastreamento desempenham um papel crucial na personaliza\xE7\xE3o da experi\xEAncia online. Neste segmento, explicamos como essas tecnologias s\xE3o utilizadas no Ess\xEAncia Bahiana e como voc\xEA pode gerenciar suas prefer\xEAncias.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Privacidade de Crian\xE7as</h2><p class="text-secondary text-lg mb-6"${f}>A prote\xE7\xE3o de crian\xE7as online \xE9 extremamente importante. Aqui, discutimos as pol\xEDticas do Ess\xEAncia Bahiana em rela\xE7\xE3o \xE0 coleta e uso de dados de crian\xE7as, em conformidade com a COPPA.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Transfer\xEAncias Internacionais de Dados</h2><p class="text-secondary text-lg mb-6"${f}>Como as informa\xE7\xF5es podem ser transferidas internacionalmente, \xE9 crucial entender as pol\xEDticas e salvaguardas em vigor. Esta se\xE7\xE3o detalha como o Ess\xEAncia Bahiana lida com transfer\xEAncias de dados transfronteiri\xE7as.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Websites e Servi\xE7os de Terceiros</h2><p class="text-secondary text-lg mb-6"${f}>O Ess\xEAncia Bahiana pode conter links para sites externos. Aqui, explicamos como interagimos com esses sites de terceiros e a import\xE2ncia de revisar suas pol\xEDticas de privacidade.</p>`),d(p.ssrRenderComponent(On,{faqs:e.value},null,m,f)),d("</div>"),d(p.ssrRenderComponent(Ce,{firstTitle:n.value,secondTitle:r.value,copyRight:s.value},null,m,f));else return[u.createVNode("div",{class:"mt-48 container mx-auto"},[u.createVNode("h1",{class:"text-6xl font-bold font-sans text-primary mb-10"},"Pol\xEDtica de Privacidade do Ess\xEAncia Bahiana"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Saiba como o Ess\xEAncia Bahiana protege sua privacidade e dados pessoais, especialmente em conex\xE3o com o Google AdSense."),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Bem-vindo ao Ess\xEAncia Bahiana! Prezamos pela transpar\xEAncia e compromisso com a seguran\xE7a dos seus dados pessoais. Esta Pol\xEDtica de Privacidade explica como coletamos, utilizamos e compartilhamos informa\xE7\xF5es no \xE2mbito de nossos servi\xE7os, incluindo, mas n\xE3o se limitando \xE0 integra\xE7\xE3o com o Google AdSense."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Introdu\xE7\xE3o \xE0 Pol\xEDtica de Privacidade"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"A privacidade dos nossos usu\xE1rios \xE9 de extrema import\xE2ncia para n\xF3s. O Ess\xEAncia Bahiana est\xE1 comprometido em proteger as informa\xE7\xF5es pessoais coletadas quando voc\xEA acessa nosso conte\xFAdo e servi\xE7os. Esta se\xE7\xE3o esclarece o prop\xF3sito da nossa pol\xEDtica e a import\xE2ncia de sua privacidade para n\xF3s."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Coleta de Informa\xE7\xF5es"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Entender quais informa\xE7\xF5es s\xE3o coletadas e como s\xE3o coletadas \xE9 fundamental. Aqui, explicamos os tipos de dados que o Ess\xEAncia Bahiana coleta, os m\xE9todos de coleta e como o consentimento do usu\xE1rio \xE9 obtido."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Uso das Informa\xE7\xF5es Coletadas"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"As informa\xE7\xF5es coletadas s\xE3o utilizadas para melhorar continuamente nossos servi\xE7os, personalizar a experi\xEAncia do usu\xE1rio e cumprir obriga\xE7\xF5es legais. Este segmento aborda detalhadamente esses aspectos."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Integra\xE7\xE3o com o Google AdSense"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"O Google AdSense permite monetizar o conte\xFAdo do site atrav\xE9s de an\xFAncios. Nesta se\xE7\xE3o, discutiremos como o Ess\xEAncia Bahiana integra o AdSense em suas opera\xE7\xF5es e como isso afeta a coleta e o uso de dados."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Compartilhamento e Divulga\xE7\xE3o de Informa\xE7\xF5es"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"\xC9 importante entender em que circunst\xE2ncias suas informa\xE7\xF5es podem ser compartilhadas. Aqui, explicamos quando e por que suas informa\xE7\xF5es podem ser divulgadas, seja para parceiros terceirizados ou por requisitos legais."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Medidas de Seguran\xE7a de Dados"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"A seguran\xE7a dos seus dados \xE9 uma prioridade. Neste segmento, abordamos as medidas de seguran\xE7a implementadas para proteger seus dados, incluindo criptografia e protocolos de seguran\xE7a."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Direitos do Usu\xE1rio e Controle de Dados"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Voc\xEA tem direitos significativos em rela\xE7\xE3o aos seus dados pessoais. Aqui, explicamos como voc\xEA pode acessar, corrigir ou excluir suas informa\xE7\xF5es pessoais e quais s\xE3o seus direitos de portabilidade de dados."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Cookies e Tecnologias de Rastreamento"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Cookies e outras tecnologias de rastreamento desempenham um papel crucial na personaliza\xE7\xE3o da experi\xEAncia online. Neste segmento, explicamos como essas tecnologias s\xE3o utilizadas no Ess\xEAncia Bahiana e como voc\xEA pode gerenciar suas prefer\xEAncias."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Privacidade de Crian\xE7as"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"A prote\xE7\xE3o de crian\xE7as online \xE9 extremamente importante. Aqui, discutimos as pol\xEDticas do Ess\xEAncia Bahiana em rela\xE7\xE3o \xE0 coleta e uso de dados de crian\xE7as, em conformidade com a COPPA."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Transfer\xEAncias Internacionais de Dados"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Como as informa\xE7\xF5es podem ser transferidas internacionalmente, \xE9 crucial entender as pol\xEDticas e salvaguardas em vigor. Esta se\xE7\xE3o detalha como o Ess\xEAncia Bahiana lida com transfer\xEAncias de dados transfronteiri\xE7as."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Websites e Servi\xE7os de Terceiros"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"O Ess\xEAncia Bahiana pode conter links para sites externos. Aqui, explicamos como interagimos com esses sites de terceiros e a import\xE2ncia de revisar suas pol\xEDticas de privacidade."),u.createVNode(On,{faqs:e.value},null,8,["faqs"])]),u.createVNode(Ce,{firstTitle:n.value,secondTitle:r.value,copyRight:s.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},a))}}},Wo=Ss.setup;Ss.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/PrivacyPolicy.vue"),Wo?Wo(t,e):void 0};var nu=Object.freeze(Object.defineProperty({__proto__:null,default:Ss},Symbol.toStringTag,{value:"Module"}));const ke={__name:"ArticleBlogHomeHero",__ssrInlineRender:!0,props:{article:{title:String,imageURL:String,excerpt:String,containerStyle:String,titleStyle:String,excerptStyle:String,imageStyle:String}},setup(t){return(e,n,r,s)=>{const o=u.resolveComponent("q-img");n(`<article${p.ssrRenderAttrs(u.mergeProps({class:`w-full pb-6 md:pb-0 cursor-pointer ${t.article.containerStyle}`},s))}><figure class="relative figure-hover"><div class="relative w-full h-full overflow-hidden">`),n(p.ssrRenderComponent(o,{src:t.article.imageURL,class:`relative object-cover object-center relative z-10 image-hover ease-in-out duration-500 ${t.article.imageStyle}`,alt:t.article.title},null,r)),n(`</div><figcaption class="z-20 md:absolute bottom-0 py-3 md:p-6"><header><h1 class="${p.ssrRenderClass(`text-2xl md:text-shadow-outline font-bold font-sans ${t.article.titleStyle} md:text-white`)}">${p.ssrInterpolate(t.article.title)}</h1><p class="${p.ssrRenderClass(`text-lg md:text-white md:text-shadow-outline ${t.article.excerptStyle}`)}">${p.ssrInterpolate(t.article.excerpt)}</p></header></figcaption></figure></article>`)}}},Yo=ke.setup;ke.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/blog/ArticleBlogHomeHero.vue"),Yo?Yo(t,e):void 0};const Ln={__name:"BlogHero",__ssrInlineRender:!0,props:{dataHero:{id:String,title:String,imageURL:String,excerpt:String,containerStyle:String,imageStyle:String,titleStyle:String,excerptStyle:String}},setup(t){const e=t,n=u.ref([]);return u.onMounted(()=>{n.value=e.dataHero,n.value[0].containerStyle="md:pr-6",n.value[0].imageStyle=" md:h-[600px]",n.value[0].titleStyle="md:text-5xl",n.value[0].excerptStyle="md:text-lg",n.value[1].containerStyle="md:pb-3",n.value[1].imageStyle="md:h-[288px]",n.value[1].titleStyle="md:text-2xl",n.value[1].excerptStyle="md:text-md",n.value[2].containerStyle="md:pt-3",n.value[2].imageStyle="md:h-[288px]",n.value[2].titleStyle="md:text-2xl",n.value[2].excerptStyle="md:text-md"}),(r,s,o,i)=>{const a=u.resolveComponent("router-link");n.value.length>0?(s(`<div${p.ssrRenderAttrs(u.mergeProps({class:"mx-auto container flex flex-col md:flex-row md:h-[600px]"},i))}><div class="w-full md:w-7/12 px-6 md:px-0 box-border flex md:h-[600px]">`),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${n.value[0].id}`,class:"w-full"},{default:u.withCtx((l,c,h,d)=>{if(c)c(p.ssrRenderComponent(ke,{article:n.value[0]},null,h,d));else return[u.createVNode(ke,{article:n.value[0]},null,8,["article"])]}),_:1},o)),s('</div><div class="w-full md:w-5/12 px-6 md:px-0 mb-10 md:mb-0 box-border md:justify-between flex flex-col md:h-[unset]">'),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${n.value[1].id}`},{default:u.withCtx((l,c,h,d)=>{if(c)c(p.ssrRenderComponent(ke,{article:n.value[1]},null,h,d));else return[u.createVNode(ke,{article:n.value[1]},null,8,["article"])]}),_:1},o)),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${n.value[2].id}`},{default:u.withCtx((l,c,h,d)=>{if(c)c(p.ssrRenderComponent(ke,{article:n.value[2]},null,h,d));else return[u.createVNode(ke,{article:n.value[2]},null,8,["article"])]}),_:1},o)),s("</div></div>")):s("<!---->")}}},Xo=Ln.setup;Ln.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/blog/BlogHero.vue"),Xo?Xo(t,e):void 0};const Mn={__name:"ArticleBlogHomeBody",__ssrInlineRender:!0,props:{article:{title:String,imageURL:String,excerpt:String,id:String}},setup(t){return(e,n,r,s)=>{const o=u.resolveComponent("router-link"),i=u.resolveComponent("q-img");n(p.ssrRenderComponent(o,u.mergeProps({to:`/blog/o-que-fazer/${t.article.id}`,class:"w-full"},s),{default:u.withCtx((a,l,c,h)=>{if(l)l(`<article class="w-full mb-10 cursor-pointer px-6 md:px-0 border-b pb-6"${h}><figure class="flex"${h}><div class="w-full md:w-1/3 mb-5 md:mb-0"${h}>`),l(p.ssrRenderComponent(i,{src:t.article.imageURL,class:"w-full object-cover h-[250px]",alt:t.article.title},null,c,h)),l(`</div><figcaption class="w-full md:w-2/3 flex flex-col justify-end md:pl-10"${h}><header${h}><h2 class="text-2xl font-bold font-sans"${h}>${p.ssrInterpolate(t.article.title)}</h2><p class="text-lg"${h}>${p.ssrInterpolate(t.article.excerpt)}</p></header></figcaption></figure></article>`);else return[u.createVNode("article",{class:"w-full mb-10 cursor-pointer px-6 md:px-0 border-b pb-6"},[u.createVNode("figure",{class:"flex"},[u.createVNode("div",{class:"w-full md:w-1/3 mb-5 md:mb-0"},[u.createVNode(i,{src:t.article.imageURL,class:"w-full object-cover h-[250px]",alt:t.article.title},null,8,["src","alt"])]),u.createVNode("figcaption",{class:"w-full md:w-2/3 flex flex-col justify-end md:pl-10"},[u.createVNode("header",null,[u.createVNode("h2",{class:"text-2xl font-bold font-sans"},u.toDisplayString(t.article.title),1),u.createVNode("p",{class:"text-lg"},u.toDisplayString(t.article.excerpt),1)])])])])]}),_:1},r))}}},Jo=Mn.setup;Mn.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/blog/ArticleBlogHomeBody.vue"),Jo?Jo(t,e):void 0};const Ae={__name:"AdComponent",__ssrInlineRender:!0,props:{dataAdSlot:String},setup(t){const e=u.ref(null);return u.onMounted(()=>{}),(n,r,s,o)=>{r(`<div${p.ssrRenderAttrs(u.mergeProps({ref_key:"adContainer",ref:e,class:"w-full ad-container mx-auto p-6 max-w-[1000px]"},o))}><h4 class="font-bold text-secondary font-sans text-base">Publicidade:</h4>`),t.dataAdSlot==="side"?r('<div id="ezoic-pub-ad-placeholder-103"></div>'):r("<!---->"),t.dataAdSlot==="banner"?r('<div id="ezoic-pub-ad-placeholder-104"></div>'):r("<!---->"),r("</div>")}}},Zo=Ae.setup;Ae.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/blog/AdComponent.vue"),Zo?Zo(t,e):void 0};const ru={apiKey:"AIzaSyAD7kXLz2-aeXM8WV0Y8_dB3qhB46ZifJo",authDomain:"essencia-bahiana.firebaseapp.com",databaseURL:"https://essencia-bahiana-default-rtdb.firebaseio.com",projectId:"essencia-bahiana",storageBucket:"essencia-bahiana.appspot.com",messagingSenderId:"467804101964",appId:"1:467804101964:web:dd8538419c9232aa1703e9",measurementId:"G-9BP1S8J757"},bs=Lc.initializeApp(ru);qc.getFunctions(bs);Mc.getAuth(bs);const Ps=Kr.getFirestore(bs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},su=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],i=t[n++],a=t[n++],l=((s&7)<<18|(o&63)<<12|(i&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|i&63)}}return e.join("")},ma={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],i=s+1<t.length,a=i?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=o>>2,d=(o&3)<<4|a>>4;let m=(a&15)<<2|c>>6,f=c&63;l||(f=64,i||(m=64)),r.push(n[h],n[d],n[m],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(da(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):su(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||a==null||c==null||d==null)throw new ou;const m=o<<2|a>>4;if(r.push(m),c!==64){const f=a<<4&240|c>>2;if(r.push(f),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ou extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iu=function(t){const e=da(t);return ma.encodeByteArray(e,!0)},fa=function(t){return iu(t).replace(/\./g,"")},au=function(t){try{return ma.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=()=>lu().__FIREBASE_DEFAULTS__,uu=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hu=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&au(t[1]);return e&&JSON.parse(e)},du=()=>{try{return cu()||uu()||hu()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mu(){var t;const e=(t=du())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fu(){return!mu()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pa(){try{return typeof indexedDB=="object"}catch{return!1}}function pu(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu="FirebaseError";class Et extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gu,Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ga.prototype.create)}}class ga{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],i=o?_u(o,r):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new Et(s,a,r)}}function _u(t,e){return t.replace(yu,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yu=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class Fn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(b||(b={}));const vu={debug:b.DEBUG,verbose:b.VERBOSE,info:b.INFO,warn:b.WARN,error:b.ERROR,silent:b.SILENT},Eu=b.INFO,wu={[b.DEBUG]:"log",[b.VERBOSE]:"log",[b.INFO]:"info",[b.WARN]:"warn",[b.ERROR]:"error"},Tu=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=wu[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _a{constructor(e){this.name=e,this._logLevel=Eu,this._logHandler=Tu,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in b))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vu[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,b.DEBUG,...e),this._logHandler(this,b.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,b.VERBOSE,...e),this._logHandler(this,b.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,b.INFO,...e),this._logHandler(this,b.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,b.WARN,...e),this._logHandler(this,b.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,b.ERROR,...e),this._logHandler(this,b.ERROR,...e)}}const Au=(t,e)=>e.some(n=>t instanceof n);let ei,ti;function xu(){return ei||(ei=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Iu(){return ti||(ti=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ya=new WeakMap,Qr=new WeakMap,va=new WeakMap,Pr=new WeakMap,Vs=new WeakMap;function Ru(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(Me(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&ya.set(n,t)}).catch(()=>{}),Vs.set(e,t),e}function Cu(t){if(Qr.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});Qr.set(t,e)}let Wr={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qr.get(t);if(e==="objectStoreNames")return t.objectStoreNames||va.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Me(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Su(t){Wr=t(Wr)}function bu(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vr(this),e,...n);return va.set(r,e.sort?e.sort():[e]),Me(r)}:Iu().includes(t)?function(...e){return t.apply(Vr(this),e),Me(ya.get(this))}:function(...e){return Me(t.apply(Vr(this),e))}}function Pu(t){return typeof t=="function"?bu(t):(t instanceof IDBTransaction&&Cu(t),Au(t,xu())?new Proxy(t,Wr):t)}function Me(t){if(t instanceof IDBRequest)return Ru(t);if(Pr.has(t))return Pr.get(t);const e=Pu(t);return e!==t&&(Pr.set(t,e),Vs.set(e,t)),e}const Vr=t=>Vs.get(t);function Vu(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),a=Me(i);return r&&i.addEventListener("upgradeneeded",l=>{r(Me(i.result),l.oldVersion,l.newVersion,Me(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Nu=["get","getKey","getAll","getAllKeys","count"],Du=["put","add","delete","clear"],Nr=new Map;function ni(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nr.get(e))return Nr.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Du.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Nu.includes(n)))return;const o=async function(i,...a){const l=this.transaction(i,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Nr.set(e,o),o}Su(t=>({...t,get:(e,n,r)=>ni(e,n)||t.get(e,n,r),has:(e,n)=>!!ni(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ou(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ou(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yr="@firebase/app",ri="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe=new _a("@firebase/app"),Lu="@firebase/app-compat",Mu="@firebase/analytics-compat",qu="@firebase/analytics",Fu="@firebase/app-check-compat",Bu="@firebase/app-check",$u="@firebase/auth",Uu="@firebase/auth-compat",ju="@firebase/database",zu="@firebase/database-compat",Hu="@firebase/functions",Gu="@firebase/functions-compat",Ku="@firebase/installations",Qu="@firebase/installations-compat",Wu="@firebase/messaging",Yu="@firebase/messaging-compat",Xu="@firebase/performance",Ju="@firebase/performance-compat",Zu="@firebase/remote-config",eh="@firebase/remote-config-compat",th="@firebase/storage",nh="@firebase/storage-compat",rh="@firebase/firestore",sh="@firebase/firestore-compat",oh="firebase",ih="10.7.2",ah={[Yr]:"fire-core",[Lu]:"fire-core-compat",[qu]:"fire-analytics",[Mu]:"fire-analytics-compat",[Bu]:"fire-app-check",[Fu]:"fire-app-check-compat",[$u]:"fire-auth",[Uu]:"fire-auth-compat",[ju]:"fire-rtdb",[zu]:"fire-rtdb-compat",[Hu]:"fire-fn",[Gu]:"fire-fn-compat",[Ku]:"fire-iid",[Qu]:"fire-iid-compat",[Wu]:"fire-fcm",[Yu]:"fire-fcm-compat",[Xu]:"fire-perf",[Ju]:"fire-perf-compat",[Zu]:"fire-rc",[eh]:"fire-rc-compat",[th]:"fire-gcs",[nh]:"fire-gcs-compat",[rh]:"fire-fst",[sh]:"fire-fst-compat","fire-js":"fire-js",[oh]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,si=new Map;function ch(t,e){try{t.container.addComponent(e)}catch(n){Xe.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bn(t){const e=t.name;if(si.has(e))return Xe.debug(`There were multiple attempts to register component ${e}.`),!1;si.set(e,t);for(const n of lh.values())ch(n,t);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ns=new ga("app","Firebase",uh);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=ih;function Mt(t,e,n){var r;let s=(r=ah[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const a=[`Unable to register library "${s}" with version "${e}":`];o&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xe.warn(a.join(" "));return}Bn(new Fn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="firebase-heartbeat-database",mh=1,Ht="firebase-heartbeat-store";let Dr=null;function Ea(){return Dr||(Dr=Vu(dh,mh,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ht)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),Dr}async function fh(t){try{return await(await Ea()).transaction(Ht).objectStore(Ht).get(wa(t))}catch(e){if(e instanceof Et)Xe.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xe.warn(n.message)}}}async function oi(t,e){try{const r=(await Ea()).transaction(Ht,"readwrite");await r.objectStore(Ht).put(e,wa(t)),await r.done}catch(n){if(n instanceof Et)Xe.warn(n.message);else{const r=Ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xe.warn(r.message)}}}function wa(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=1024,gh=30*24*60*60*1e3;class _h{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vh(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ii();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=gh}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ii(),{heartbeatsToSend:r,unsentEntries:s}=yh(this._heartbeatsCache.heartbeats),o=fa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function ii(){return new Date().toISOString().substring(0,10)}function yh(t,e=ph){const n=[];let r=t.slice();for(const s of t){const o=n.find(i=>i.agent===s.agent);if(o){if(o.dates.push(s.date),ai(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ai(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pa()?pu().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fh(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return oi(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return oi(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ai(t){return fa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){Bn(new Fn("platform-logger",e=>new ku(e),"PRIVATE")),Bn(new Fn("heartbeat",e=>new _h(e),"PRIVATE")),Mt(Yr,ri,t),Mt(Yr,ri,"esm2017"),Mt("fire-js","")}Eh("");var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v,Ds=Ds||{},I=wh||self;function tr(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function on(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Th(t){return Object.prototype.hasOwnProperty.call(t,kr)&&t[kr]||(t[kr]=++Ah)}var kr="closure_uid_"+(1e9*Math.random()>>>0),Ah=0;function xh(t,e,n){return t.call.apply(t.bind,arguments)}function Ih(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function le(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?le=xh:le=Ih,le.apply(null,arguments)}function En(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Z(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,o){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return e.prototype[s].apply(r,i)}}function Ue(){this.s=this.s,this.o=this.o}var Rh=0;Ue.prototype.s=!1;Ue.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Rh!=0)&&Th(this)};Ue.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ta=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ks(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function li(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(tr(r)){const s=t.length||0,o=r.length||0;t.length=s+o;for(let i=0;i<o;i++)t[s+i]=r[i]}else t.push(r)}}function ce(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Ch=function(){if(!I.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};I.addEventListener("test",n,e),I.removeEventListener("test",n,e)}catch{}return t}();function Gt(t){return/^[\s\xa0]*$/.test(t)}function nr(){var t=I.navigator;return t&&(t=t.userAgent)?t:""}function we(t){return nr().indexOf(t)!=-1}function Os(t){return Os[" "](t),t}Os[" "]=function(){};function Sh(t,e){var n=Ed;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var bh=we("Opera"),dt=we("Trident")||we("MSIE"),Aa=we("Edge"),Xr=Aa||dt,xa=we("Gecko")&&!(nr().toLowerCase().indexOf("webkit")!=-1&&!we("Edge"))&&!(we("Trident")||we("MSIE"))&&!we("Edge"),Ph=nr().toLowerCase().indexOf("webkit")!=-1&&!we("Edge");function Ia(){var t=I.document;return t?t.documentMode:void 0}var Jr;e:{var Or="",Lr=function(){var t=nr();if(xa)return/rv:([^\);]+)(\)|;)/.exec(t);if(Aa)return/Edge\/([\d\.]+)/.exec(t);if(dt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Ph)return/WebKit\/(\S+)/.exec(t);if(bh)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Lr&&(Or=Lr?Lr[1]:""),dt){var Mr=Ia();if(Mr!=null&&Mr>parseFloat(Or)){Jr=String(Mr);break e}}Jr=Or}var Zr;if(I.document&&dt){var ci=Ia();Zr=ci||parseInt(Jr,10)||void 0}else Zr=void 0;var Vh=Zr;function Kt(t,e){if(ce.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(xa){e:{try{Os(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Nh[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Kt.$.h.call(this)}}Z(Kt,ce);var Nh={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),Dh=0;function kh(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++Dh,this.fa=this.ia=!1}function rr(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ls(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Oh(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Ra(t){const e={};for(const n in t)e[n]=t[n];return e}const ui="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ca(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let o=0;o<ui.length;o++)n=ui[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function sr(t){this.src=t,this.g={},this.h=0}sr.prototype.add=function(t,e,n,r,s){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var i=ts(t,e,r,s);return-1<i?(e=t[i],n||(e.ia=!1)):(e=new kh(e,this.src,o,!!r,s),e.ia=n,t.push(e)),e};function es(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=Ta(r,e),o;(o=0<=s)&&Array.prototype.splice.call(r,s,1),o&&(rr(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ts(t,e,n,r){for(var s=0;s<t.length;++s){var o=t[s];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return s}return-1}var Ms="closure_lm_"+(1e6*Math.random()|0),qr={};function Sa(t,e,n,r,s){if(r&&r.once)return Pa(t,e,n,r,s);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Sa(t,e[o],n,r,s);return null}return n=Bs(n),t&&t[an]?t.O(e,n,on(r)?!!r.capture:!!r,s):ba(t,e,n,!1,r,s)}function ba(t,e,n,r,s,o){if(!e)throw Error("Invalid event type");var i=on(s)?!!s.capture:!!s,a=Fs(t);if(a||(t[Ms]=a=new sr(t)),n=a.add(e,n,r,i,o),n.proxy)return n;if(r=Lh(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ch||(s=i),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Na(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Lh(){function t(n){return e.call(t.src,t.listener,n)}const e=Mh;return t}function Pa(t,e,n,r,s){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pa(t,e[o],n,r,s);return null}return n=Bs(n),t&&t[an]?t.P(e,n,on(r)?!!r.capture:!!r,s):ba(t,e,n,!0,r,s)}function Va(t,e,n,r,s){if(Array.isArray(e))for(var o=0;o<e.length;o++)Va(t,e[o],n,r,s);else r=on(r)?!!r.capture:!!r,n=Bs(n),t&&t[an]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=ts(o,n,r,s),-1<n&&(rr(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Fs(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ts(e,n,r,s)),(n=-1<t?e[t]:null)&&qs(n))}function qs(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[an])es(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Na(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Fs(e))?(es(n,t),n.h==0&&(n.src=null,e[Ms]=null)):rr(t)}}}function Na(t){return t in qr?qr[t]:qr[t]="on"+t}function Mh(t,e){if(t.fa)t=!0;else{e=new Kt(e,this);var n=t.listener,r=t.la||t.src;t.ia&&qs(t),t=n.call(r,e)}return t}function Fs(t){return t=t[Ms],t instanceof sr?t:null}var Fr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bs(t){return typeof t=="function"?t:(t[Fr]||(t[Fr]=function(e){return t.handleEvent(e)}),t[Fr])}function J(){Ue.call(this),this.i=new sr(this),this.S=this,this.J=null}Z(J,Ue);J.prototype[an]=!0;J.prototype.removeEventListener=function(t,e,n,r){Va(this,t,e,n,r)};function re(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ce(e,t);else if(e instanceof ce)e.target=e.target||t;else{var s=e;e=new ce(r,t),Ca(e,s)}if(s=!0,n)for(var o=n.length-1;0<=o;o--){var i=e.g=n[o];s=wn(i,r,!0,e)&&s}if(i=e.g=t,s=wn(i,r,!0,e)&&s,s=wn(i,r,!1,e)&&s,n)for(o=0;o<n.length;o++)i=e.g=n[o],s=wn(i,r,!1,e)&&s}J.prototype.N=function(){if(J.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rr(n[r]);delete t.g[e],t.h--}}this.J=null};J.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};J.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function wn(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,o=0;o<e.length;++o){var i=e[o];if(i&&!i.fa&&i.capture==n){var a=i.listener,l=i.la||i.src;i.ia&&es(t.i,i),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var $s=I.JSON.stringify;class qh{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function Fh(){var t=Us;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Bh{constructor(){this.h=this.g=null}add(e,n){const r=Da.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Da=new qh(()=>new $h,t=>t.reset());class $h{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Uh(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function jh(t){I.setTimeout(()=>{throw t},0)}let Qt,Wt=!1,Us=new Bh,ka=()=>{const t=I.Promise.resolve(void 0);Qt=()=>{t.then(zh)}};var zh=()=>{for(var t;t=Fh();){try{t.h.call(t.g)}catch(n){jh(n)}var e=Da;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Wt=!1};function or(t,e){J.call(this),this.h=t||1,this.g=e||I,this.j=le(this.qb,this),this.l=Date.now()}Z(or,J);v=or.prototype;v.ga=!1;v.T=null;v.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),re(this,"tick"),this.ga&&(js(this),this.start()))}};v.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function js(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}v.N=function(){or.$.N.call(this),js(this),delete this.g};function zs(t,e,n){if(typeof t=="function")n&&(t=le(t,n));else if(t&&typeof t.handleEvent=="function")t=le(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:I.setTimeout(t,e||0)}function Oa(t){t.g=zs(()=>{t.g=null,t.i&&(t.i=!1,Oa(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Hh extends Ue{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Oa(this)}N(){super.N(),this.g&&(I.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yt(t){Ue.call(this),this.h=t,this.g={}}Z(Yt,Ue);var hi=[];function La(t,e,n,r){Array.isArray(n)||(n&&(hi[0]=n.toString()),n=hi);for(var s=0;s<n.length;s++){var o=Sa(e,n[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Ma(t){Ls(t.g,function(e,n){this.g.hasOwnProperty(n)&&qs(e)},t),t.g={}}Yt.prototype.N=function(){Yt.$.N.call(this),Ma(this)};Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ir(){this.g=!0}ir.prototype.Ea=function(){this.g=!1};function Gh(t,e,n,r,s,o){t.info(function(){if(t.g)if(o)for(var i="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var d=h.split("_");i=2<=d.length&&d[1]=="type"?i+(h+"="+c+"&"):i+(h+"=redacted&")}}else i=null;else i=o;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+i})}function Kh(t,e,n,r,s,o,i){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+o+" "+i})}function it(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Wh(t,n)+(r?" "+r:"")})}function Qh(t,e){t.info(function(){return"TIMEOUT: "+e})}ir.prototype.info=function(){};function Wh(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var o=s[0];if(o!="noop"&&o!="stop"&&o!="close")for(var i=1;i<s.length;i++)s[i]=""}}}}return $s(n)}catch{return e}}var tt={},di=null;function ar(){return di=di||new J}tt.Ta="serverreachability";function qa(t){ce.call(this,tt.Ta,t)}Z(qa,ce);function Xt(t){const e=ar();re(e,new qa(e))}tt.STAT_EVENT="statevent";function Fa(t,e){ce.call(this,tt.STAT_EVENT,t),this.stat=e}Z(Fa,ce);function he(t){const e=ar();re(e,new Fa(e,t))}tt.Ua="timingevent";function Ba(t,e){ce.call(this,tt.Ua,t),this.size=e}Z(Ba,ce);function ln(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return I.setTimeout(function(){t()},e)}var lr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$a={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Hs(){}Hs.prototype.h=null;function mi(t){return t.h||(t.h=t.i())}function Ua(){}var cn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Gs(){ce.call(this,"d")}Z(Gs,ce);function Ks(){ce.call(this,"c")}Z(Ks,ce);var ns;function cr(){}Z(cr,Hs);cr.prototype.g=function(){return new XMLHttpRequest};cr.prototype.i=function(){return{}};ns=new cr;function un(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Yt(this),this.P=Yh,t=Xr?125:void 0,this.V=new or(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ja}function ja(){this.i=null,this.g="",this.h=!1}var Yh=45e3,za={},rs={};v=un.prototype;v.setTimeout=function(t){this.P=t};function ss(t,e,n){t.L=1,t.A=hr(Ne(e)),t.u=n,t.S=!0,Ha(t,null)}function Ha(t,e){t.G=Date.now(),hn(t),t.B=Ne(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Za(n.i,"t",r),t.o=0,n=t.l.J,t.h=new ja,t.g=El(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Hh(le(t.Pa,t,t.g),t.O)),La(t.U,t.g,"readystatechange",t.nb),e=t.I?Ra(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Xt(),Gh(t.j,t.v,t.B,t.m,t.W,t.u)}v.nb=function(t){t=t.target;const e=this.M;e&&xe(t)==3?e.l():this.Pa(t)};v.Pa=function(t){try{if(t==this.g)e:{const h=xe(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||Xr||this.g&&(this.h.h||this.g.ja()||_i(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?Xt(3):Xt(2)),ur(this);var n=this.g.da();this.ca=n;t:if(Ga(this)){var r=_i(this.g);t="";var s=r.length,o=xe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),qt(this);var i="";break t}this.h.i=new I.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==s-1});r.length=0,this.h.g+=t,this.o=0,i=this.h.g}else i=this.g.ja();if(this.i=n==200,Kh(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gt(a)){var c=a;break t}}c=null}if(n=c)it(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,os(this,n);else{this.i=!1,this.s=3,he(12),He(this),qt(this);break e}}this.S?(Ka(this,h,i),Xr&&this.i&&h==3&&(La(this.U,this.V,"tick",this.mb),this.V.start())):(it(this.j,this.m,i,null),os(this,i)),h==4&&He(this),this.i&&!this.J&&(h==4?gl(this.l,this):(this.i=!1,hn(this)))}else _d(this.g),n==400&&0<i.indexOf("Unknown SID")?(this.s=3,he(12)):(this.s=0,he(13)),He(this),qt(this)}}}catch{}finally{}};function Ga(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Ka(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=Xh(t,n),s==rs){e==4&&(t.s=4,he(14),r=!1),it(t.j,t.m,null,"[Incomplete Response]");break}else if(s==za){t.s=4,he(15),it(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else it(t.j,t.m,s,null),os(t,s);Ga(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,he(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zs(e),e.M=!0,he(11))):(it(t.j,t.m,n,"[Invalid Chunked Response]"),He(t),qt(t))}v.mb=function(){if(this.g){var t=xe(this.g),e=this.g.ja();this.o<e.length&&(ur(this),Ka(this,t,e),this.i&&t!=4&&hn(this))}};function Xh(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?rs:(n=Number(e.substring(n,r)),isNaN(n)?za:(r+=1,r+n>e.length?rs:(e=e.slice(r,r+n),t.o=r+n,e)))}v.cancel=function(){this.J=!0,He(this)};function hn(t){t.Y=Date.now()+t.P,Qa(t,t.P)}function Qa(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ln(le(t.lb,t),e)}function ur(t){t.C&&(I.clearTimeout(t.C),t.C=null)}v.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(Qh(this.j,this.B),this.L!=2&&(Xt(),he(17)),He(this),this.s=2,qt(this)):Qa(this,this.Y-t)};function qt(t){t.l.H==0||t.J||gl(t.l,t)}function He(t){ur(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,js(t.V),Ma(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function os(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||is(n.i,t))){if(!t.K&&is(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)jn(n),pr(n);else break e;Js(n),he(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ln(le(n.ib,n),6e3));if(1>=nl(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ge(n,11)}else if((t.K||n.g==t)&&jn(n),!Gt(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const h=c[3];h!=null&&(n.ra=h,n.l.info("VER="+n.ra));const d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const y=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var o=r.i;o.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Qs(o,o.h),o.h=null))}if(r.F){const T=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,q(r.I,r.F,T))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var i=t;if(r.wa=vl(r,r.J?r.pa:null,r.Y),i.K){rl(r.i,i);var a=i,l=r.L;l&&a.setTimeout(l),a.C&&(ur(a),hn(a)),r.g=i}else fl(r);0<n.j.length&&gr(n)}else c[0]!="stop"&&c[0]!="close"||Ge(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ge(n,7):Xs(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Xt(4)}catch{}}function Jh(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(tr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Zh(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(tr(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Wa(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(tr(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Zh(t),r=Jh(t),s=r.length,o=0;o<s;o++)e.call(void 0,r[o],n&&n[o],t)}var Ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ed(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var o=t[n].substring(0,r);s=t[n].substring(r+1)}else o=t[n];e(o,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function We(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof We){this.h=t.h,$n(this,t.j),this.s=t.s,this.g=t.g,Un(this,t.m),this.l=t.l;var e=t.i,n=new Jt;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),fi(this,n),this.o=t.o}else t&&(e=String(t).match(Ya))?(this.h=!1,$n(this,e[1]||"",!0),this.s=Nt(e[2]||""),this.g=Nt(e[3]||"",!0),Un(this,e[4]),this.l=Nt(e[5]||"",!0),fi(this,e[6]||"",!0),this.o=Nt(e[7]||"")):(this.h=!1,this.i=new Jt(null,this.h))}We.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Dt(e,pi,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Dt(e,pi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Dt(n,n.charAt(0)=="/"?rd:nd,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Dt(n,od)),t.join("")};function Ne(t){return new We(t)}function $n(t,e,n){t.j=n?Nt(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Un(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function fi(t,e,n){e instanceof Jt?(t.i=e,id(t.i,t.h)):(n||(e=Dt(e,sd)),t.i=new Jt(e,t.h))}function q(t,e,n){t.i.set(e,n)}function hr(t){return q(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Nt(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dt(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,td),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function td(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var pi=/[#\/\?@]/g,nd=/[#\?:]/g,rd=/[#\?]/g,sd=/[#\?@]/g,od=/#/g;function Jt(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function je(t){t.g||(t.g=new Map,t.h=0,t.i&&ed(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}v=Jt.prototype;v.add=function(t,e){je(this),this.i=null,t=wt(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Xa(t,e){je(t),e=wt(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ja(t,e){return je(t),e=wt(t,e),t.g.has(e)}v.forEach=function(t,e){je(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};v.ta=function(){je(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let o=0;o<s.length;o++)n.push(e[r])}return n};v.Z=function(t){je(this);let e=[];if(typeof t=="string")Ja(this,t)&&(e=e.concat(this.g.get(wt(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};v.set=function(t,e){return je(this),this.i=null,t=wt(this,t),Ja(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};v.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Za(t,e,n){Xa(t,e),0<n.length&&(t.i=null,t.g.set(wt(t,e),ks(n)),t.h+=n.length)}v.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),i=this.Z(r);for(r=0;r<i.length;r++){var s=o;i[r]!==""&&(s+="="+encodeURIComponent(String(i[r]))),t.push(s)}}return this.i=t.join("&")};function wt(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function id(t,e){e&&!t.j&&(je(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Xa(this,r),Za(this,s,n))},t)),t.j=e}var ad=class{constructor(t,e){this.g=t,this.map=e}};function el(t){this.l=t||ld,I.PerformanceNavigationTiming?(t=I.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(I.g&&I.g.Ka&&I.g.Ka()&&I.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ld=10;function tl(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function nl(t){return t.h?1:t.g?t.g.size:0}function is(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Qs(t,e){t.g?t.g.add(e):t.h=e}function rl(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}el.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function sl(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return ks(t.i)}var cd=class{stringify(t){return I.JSON.stringify(t,void 0)}parse(t){return I.JSON.parse(t,void 0)}};function ud(){this.g=new cd}function hd(t,e,n){const r=n||"";try{Wa(t,function(s,o){let i=s;on(s)&&(i=$s(s)),e.push(r+o+"="+encodeURIComponent(i))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function dd(t,e){const n=new ir;if(I.Image){const r=new Image;r.onload=En(Tn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=En(Tn,n,r,"TestLoadImage: error",!1,e),r.onabort=En(Tn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=En(Tn,n,r,"TestLoadImage: timeout",!1,e),I.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Tn(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function dr(t){this.l=t.ec||null,this.j=t.ob||!1}Z(dr,Hs);dr.prototype.g=function(){return new mr(this.l,this.j)};dr.prototype.i=function(t){return function(){return t}}({});function mr(t,e){J.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ws,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Z(mr,J);var Ws=0;v=mr.prototype;v.open=function(t,e){if(this.readyState!=Ws)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Zt(this)};v.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||I).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};v.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dn(this)),this.readyState=Ws};v.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Zt(this)),this.g&&(this.readyState=3,Zt(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof I.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ol(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ol(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}v.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?dn(this):Zt(this),this.readyState==3&&ol(this)}};v.Za=function(t){this.g&&(this.response=this.responseText=t,dn(this))};v.Ya=function(t){this.g&&(this.response=t,dn(this))};v.ka=function(){this.g&&dn(this)};function dn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Zt(t)}v.setRequestHeader=function(t,e){this.v.append(t,e)};v.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};v.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Zt(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var md=I.JSON.parse;function U(t){J.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=il,this.L=this.M=!1}Z(U,J);var il="",fd=/^https?$/i,pd=["POST","PUT"];v=U.prototype;v.Oa=function(t){this.M=t};v.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ns.g(),this.C=this.u?mi(this.u):mi(ns),this.g.onreadystatechange=le(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){gi(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),s=I.FormData&&t instanceof I.FormData,!(0<=Ta(pd,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,i]of n)this.g.setRequestHeader(o,i);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{cl(this),0<this.B&&((this.L=gd(this.g))?(this.g.timeout=this.B,this.g.ontimeout=le(this.ua,this)):this.A=zs(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){gi(this,o)}};function gd(t){return dt&&typeof t.timeout=="number"&&t.ontimeout!==void 0}v.ua=function(){typeof Ds<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,re(this,"timeout"),this.abort(8))};function gi(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,al(t),fr(t)}function al(t){t.F||(t.F=!0,re(t,"complete"),re(t,"error"))}v.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,re(this,"complete"),re(this,"abort"),fr(this))};v.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fr(this,!0)),U.$.N.call(this)};v.La=function(){this.s||(this.G||this.v||this.l?ll(this):this.kb())};v.kb=function(){ll(this)};function ll(t){if(t.h&&typeof Ds<"u"&&(!t.C[1]||xe(t)!=4||t.da()!=2)){if(t.v&&xe(t)==4)zs(t.La,0,t);else if(re(t,"readystatechange"),xe(t)==4){t.h=!1;try{const i=t.da();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=i===0){var s=String(t.I).match(Ya)[1]||null;!s&&I.self&&I.self.location&&(s=I.self.location.protocol.slice(0,-1)),r=!fd.test(s?s.toLowerCase():"")}n=r}if(n)re(t,"complete"),re(t,"success");else{t.m=6;try{var o=2<xe(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",al(t)}}finally{fr(t)}}}}function fr(t,e){if(t.g){cl(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||re(t,"ready");try{n.onreadystatechange=r}catch{}}}function cl(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(I.clearTimeout(t.A),t.A=null)}v.isActive=function(){return!!this.g};function xe(t){return t.g?t.g.readyState:0}v.da=function(){try{return 2<xe(this)?this.g.status:-1}catch{return-1}};v.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};v.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),md(e)}};function _i(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case il:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function _d(t){const e={};t=(t.g&&2<=xe(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Gt(t[r]))continue;var n=Uh(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const o=e[s]||[];e[s]=o,o.push(n)}Oh(e,function(r){return r.join(", ")})}v.Ia=function(){return this.m};v.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ul(t){let e="";return Ls(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Ys(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ul(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):q(t,e,n))}function bt(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function hl(t){this.Ga=0,this.j=[],this.l=new ir,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=bt("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=bt("baseRetryDelayMs",5e3,t),this.hb=bt("retryDelaySeedMs",1e4,t),this.eb=bt("forwardChannelMaxRetries",2,t),this.xa=bt("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new el(t&&t.concurrentRequestLimit),this.Ja=new ud,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}v=hl.prototype;v.ra=8;v.H=1;function Xs(t){if(dl(t),t.H==3){var e=t.W++,n=Ne(t.I);if(q(n,"SID",t.K),q(n,"RID",e),q(n,"TYPE","terminate"),mn(t,n),e=new un(t,t.l,e),e.L=2,e.A=hr(Ne(n)),n=!1,I.navigator&&I.navigator.sendBeacon)try{n=I.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&I.Image&&(new Image().src=e.A,n=!0),n||(e.g=El(e.l,null),e.g.ha(e.A)),e.G=Date.now(),hn(e)}yl(t)}function pr(t){t.g&&(Zs(t),t.g.cancel(),t.g=null)}function dl(t){pr(t),t.u&&(I.clearTimeout(t.u),t.u=null),jn(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&I.clearTimeout(t.m),t.m=null)}function gr(t){if(!tl(t.i)&&!t.m){t.m=!0;var e=t.Na;Qt||ka(),Wt||(Qt(),Wt=!0),Us.add(e,t),t.C=0}}function yd(t,e){return nl(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ln(le(t.Na,t,e),_l(t,t.C)),t.C++,!0)}v.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new un(this,this.l,t);let o=this.s;if(this.U&&(o?(o=Ra(o),Ca(o,this.U)):o=this.U),this.o!==null||this.O||(s.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ml(this,s,e),n=Ne(this.I),q(n,"RID",t),q(n,"CVER",22),this.F&&q(n,"X-HTTP-Session-Id",this.F),mn(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(ul(o)))+"&"+e:this.o&&Ys(n,this.o,o)),Qs(this.i,s),this.bb&&q(n,"TYPE","init"),this.P?(q(n,"$req",e),q(n,"SID","null"),s.aa=!0,ss(s,n,null)):ss(s,n,e),this.H=2}}else this.H==3&&(t?yi(this,t):this.j.length==0||tl(this.i)||yi(this))};function yi(t,e){var n;e?n=e.m:n=t.W++;const r=Ne(t.I);q(r,"SID",t.K),q(r,"RID",n),q(r,"AID",t.V),mn(t,r),t.o&&t.s&&Ys(r,t.o,t.s),n=new un(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=ml(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Qs(t.i,n),ss(n,r,e)}function mn(t,e){t.na&&Ls(t.na,function(n,r){q(e,r,n)}),t.h&&Wa({},function(n,r){q(e,r,n)})}function ml(t,e,n){n=Math.min(t.j.length,n);var r=t.h?le(t.h.Va,t.h,t):null;e:{var s=t.j;let o=-1;for(;;){const i=["count="+n];o==-1?0<n?(o=s[0].g,i.push("ofs="+o)):o=0:i.push("ofs="+o);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const h=s[l].map;if(c-=o,0>c)o=Math.max(0,s[l].g-100),a=!1;else try{hd(h,i,"req"+c+"_")}catch{r&&r(h)}}if(a){r=i.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function fl(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Qt||ka(),Wt||(Qt(),Wt=!0),Us.add(e,t),t.A=0}}function Js(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ln(le(t.Ma,t),_l(t,t.A)),t.A++,!0)}v.Ma=function(){if(this.u=null,pl(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ln(le(this.jb,this),t)}};v.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,he(10),pr(this),pl(this))};function Zs(t){t.B!=null&&(I.clearTimeout(t.B),t.B=null)}function pl(t){t.g=new un(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ne(t.wa);q(e,"RID","rpc"),q(e,"SID",t.K),q(e,"AID",t.V),q(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&q(e,"TO",t.qa),q(e,"TYPE","xmlhttp"),mn(t,e),t.o&&t.s&&Ys(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=hr(Ne(e)),n.u=null,n.S=!0,Ha(n,t)}v.ib=function(){this.v!=null&&(this.v=null,pr(this),Js(this),he(19))};function jn(t){t.v!=null&&(I.clearTimeout(t.v),t.v=null)}function gl(t,e){var n=null;if(t.g==e){jn(t),Zs(t),t.g=null;var r=2}else if(is(t.i,e))n=e.F,rl(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=ar(),re(r,new Ba(r,n)),gr(t)}else fl(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&yd(t,e)||r==2&&Js(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Ge(t,5);break;case 4:Ge(t,10);break;case 3:Ge(t,6);break;default:Ge(t,2)}}}function _l(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ge(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=le(t.pb,t);n||(n=new We("//www.google.com/images/cleardot.gif"),I.location&&I.location.protocol=="http"||$n(n,"https"),hr(n)),dd(n.toString(),r)}else he(2);t.H=0,t.h&&t.h.za(e),yl(t),dl(t)}v.pb=function(t){t?(this.l.info("Successfully pinged google.com"),he(2)):(this.l.info("Failed to ping google.com"),he(1))};function yl(t){if(t.H=0,t.ma=[],t.h){const e=sl(t.i);(e.length!=0||t.j.length!=0)&&(li(t.ma,e),li(t.ma,t.j),t.i.i.length=0,ks(t.j),t.j.length=0),t.h.ya()}}function vl(t,e,n){var r=n instanceof We?Ne(n):new We(n);if(r.g!="")e&&(r.g=e+"."+r.g),Un(r,r.m);else{var s=I.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new We(null);r&&$n(o,r),e&&(o.g=e),s&&Un(o,s),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&q(r,n,e),q(r,"VER",t.ra),mn(t,r),r}function El(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new U(new dr({ob:n})):new U(t.va),e.Oa(t.J),e}v.isActive=function(){return!!this.h&&this.h.isActive(this)};function wl(){}v=wl.prototype;v.Ba=function(){};v.Aa=function(){};v.za=function(){};v.ya=function(){};v.isActive=function(){return!0};v.Va=function(){};function zn(){if(dt&&!(10<=Number(Vh)))throw Error("Environmental error: no available transport.")}zn.prototype.g=function(t,e){return new pe(t,e)};function pe(t,e){J.call(this),this.g=new hl(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Gt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gt(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Tt(this)}Z(pe,J);pe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;he(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=vl(t,null,t.Y),gr(t)};pe.prototype.close=function(){Xs(this.g)};pe.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=$s(t),t=n);e.j.push(new ad(e.fb++,t)),e.H==3&&gr(e)};pe.prototype.N=function(){this.g.h=null,delete this.j,Xs(this.g),delete this.g,pe.$.N.call(this)};function Tl(t){Gs.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Z(Tl,Gs);function Al(){Ks.call(this),this.status=1}Z(Al,Ks);function Tt(t){this.g=t}Z(Tt,wl);Tt.prototype.Ba=function(){re(this.g,"a")};Tt.prototype.Aa=function(t){re(this.g,new Tl(t))};Tt.prototype.za=function(t){re(this.g,new Al)};Tt.prototype.ya=function(){re(this.g,"b")};function vd(){this.blockSize=-1}function ve(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Z(ve,vd);ve.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Br(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var o=t.g[3],i=e+(o^n&(s^o))+r[0]+3614090360&4294967295;e=n+(i<<7&4294967295|i>>>25),i=o+(s^e&(n^s))+r[1]+3905402710&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(n^o&(e^n))+r[2]+606105819&4294967295,s=o+(i<<17&4294967295|i>>>15),i=n+(e^s&(o^e))+r[3]+3250441966&4294967295,n=s+(i<<22&4294967295|i>>>10),i=e+(o^n&(s^o))+r[4]+4118548399&4294967295,e=n+(i<<7&4294967295|i>>>25),i=o+(s^e&(n^s))+r[5]+1200080426&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(n^o&(e^n))+r[6]+2821735955&4294967295,s=o+(i<<17&4294967295|i>>>15),i=n+(e^s&(o^e))+r[7]+4249261313&4294967295,n=s+(i<<22&4294967295|i>>>10),i=e+(o^n&(s^o))+r[8]+1770035416&4294967295,e=n+(i<<7&4294967295|i>>>25),i=o+(s^e&(n^s))+r[9]+2336552879&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(n^o&(e^n))+r[10]+4294925233&4294967295,s=o+(i<<17&4294967295|i>>>15),i=n+(e^s&(o^e))+r[11]+2304563134&4294967295,n=s+(i<<22&4294967295|i>>>10),i=e+(o^n&(s^o))+r[12]+1804603682&4294967295,e=n+(i<<7&4294967295|i>>>25),i=o+(s^e&(n^s))+r[13]+4254626195&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(n^o&(e^n))+r[14]+2792965006&4294967295,s=o+(i<<17&4294967295|i>>>15),i=n+(e^s&(o^e))+r[15]+1236535329&4294967295,n=s+(i<<22&4294967295|i>>>10),i=e+(s^o&(n^s))+r[1]+4129170786&4294967295,e=n+(i<<5&4294967295|i>>>27),i=o+(n^s&(e^n))+r[6]+3225465664&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^n&(o^e))+r[11]+643717713&4294967295,s=o+(i<<14&4294967295|i>>>18),i=n+(o^e&(s^o))+r[0]+3921069994&4294967295,n=s+(i<<20&4294967295|i>>>12),i=e+(s^o&(n^s))+r[5]+3593408605&4294967295,e=n+(i<<5&4294967295|i>>>27),i=o+(n^s&(e^n))+r[10]+38016083&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^n&(o^e))+r[15]+3634488961&4294967295,s=o+(i<<14&4294967295|i>>>18),i=n+(o^e&(s^o))+r[4]+3889429448&4294967295,n=s+(i<<20&4294967295|i>>>12),i=e+(s^o&(n^s))+r[9]+568446438&4294967295,e=n+(i<<5&4294967295|i>>>27),i=o+(n^s&(e^n))+r[14]+3275163606&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^n&(o^e))+r[3]+4107603335&4294967295,s=o+(i<<14&4294967295|i>>>18),i=n+(o^e&(s^o))+r[8]+1163531501&4294967295,n=s+(i<<20&4294967295|i>>>12),i=e+(s^o&(n^s))+r[13]+2850285829&4294967295,e=n+(i<<5&4294967295|i>>>27),i=o+(n^s&(e^n))+r[2]+4243563512&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^n&(o^e))+r[7]+1735328473&4294967295,s=o+(i<<14&4294967295|i>>>18),i=n+(o^e&(s^o))+r[12]+2368359562&4294967295,n=s+(i<<20&4294967295|i>>>12),i=e+(n^s^o)+r[5]+4294588738&4294967295,e=n+(i<<4&4294967295|i>>>28),i=o+(e^n^s)+r[8]+2272392833&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^n)+r[11]+1839030562&4294967295,s=o+(i<<16&4294967295|i>>>16),i=n+(s^o^e)+r[14]+4259657740&4294967295,n=s+(i<<23&4294967295|i>>>9),i=e+(n^s^o)+r[1]+2763975236&4294967295,e=n+(i<<4&4294967295|i>>>28),i=o+(e^n^s)+r[4]+1272893353&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^n)+r[7]+4139469664&4294967295,s=o+(i<<16&4294967295|i>>>16),i=n+(s^o^e)+r[10]+3200236656&4294967295,n=s+(i<<23&4294967295|i>>>9),i=e+(n^s^o)+r[13]+681279174&4294967295,e=n+(i<<4&4294967295|i>>>28),i=o+(e^n^s)+r[0]+3936430074&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^n)+r[3]+3572445317&4294967295,s=o+(i<<16&4294967295|i>>>16),i=n+(s^o^e)+r[6]+76029189&4294967295,n=s+(i<<23&4294967295|i>>>9),i=e+(n^s^o)+r[9]+3654602809&4294967295,e=n+(i<<4&4294967295|i>>>28),i=o+(e^n^s)+r[12]+3873151461&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^n)+r[15]+530742520&4294967295,s=o+(i<<16&4294967295|i>>>16),i=n+(s^o^e)+r[2]+3299628645&4294967295,n=s+(i<<23&4294967295|i>>>9),i=e+(s^(n|~o))+r[0]+4096336452&4294967295,e=n+(i<<6&4294967295|i>>>26),i=o+(n^(e|~s))+r[7]+1126891415&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~n))+r[14]+2878612391&4294967295,s=o+(i<<15&4294967295|i>>>17),i=n+(o^(s|~e))+r[5]+4237533241&4294967295,n=s+(i<<21&4294967295|i>>>11),i=e+(s^(n|~o))+r[12]+1700485571&4294967295,e=n+(i<<6&4294967295|i>>>26),i=o+(n^(e|~s))+r[3]+2399980690&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~n))+r[10]+4293915773&4294967295,s=o+(i<<15&4294967295|i>>>17),i=n+(o^(s|~e))+r[1]+2240044497&4294967295,n=s+(i<<21&4294967295|i>>>11),i=e+(s^(n|~o))+r[8]+1873313359&4294967295,e=n+(i<<6&4294967295|i>>>26),i=o+(n^(e|~s))+r[15]+4264355552&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~n))+r[6]+2734768916&4294967295,s=o+(i<<15&4294967295|i>>>17),i=n+(o^(s|~e))+r[13]+1309151649&4294967295,n=s+(i<<21&4294967295|i>>>11),i=e+(s^(n|~o))+r[4]+4149444226&4294967295,e=n+(i<<6&4294967295|i>>>26),i=o+(n^(e|~s))+r[11]+3174756917&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~n))+r[2]+718787259&4294967295,s=o+(i<<15&4294967295|i>>>17),i=n+(o^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+o&4294967295}ve.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,o=0;o<e;){if(s==0)for(;o<=n;)Br(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[s++]=t.charCodeAt(o++),s==this.blockSize){Br(this,r),s=0;break}}else for(;o<e;)if(r[s++]=t[o++],s==this.blockSize){Br(this,r),s=0;break}}this.h=s,this.i+=e};ve.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function k(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var o=t[s]|0;r&&o==e||(n[s]=o,r=!1)}this.g=n}var Ed={};function eo(t){return-128<=t&&128>t?Sh(t,function(e){return new k([e|0],0>e?-1:0)}):new k([t|0],0>t?-1:0)}function Ie(t){if(isNaN(t)||!isFinite(t))return at;if(0>t)return ne(Ie(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=as;return new k(e,0)}function xl(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ne(xl(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ie(Math.pow(e,8)),r=at,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),i=parseInt(t.substring(s,s+o),e);8>o?(o=Ie(Math.pow(e,o)),r=r.R(o).add(Ie(i))):(r=r.R(n),r=r.add(Ie(i)))}return r}var as=4294967296,at=eo(0),ls=eo(1),vi=eo(16777216);v=k.prototype;v.ea=function(){if(_e(this))return-ne(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:as+r)*e,e*=as}return t};v.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Pe(this))return"0";if(_e(this))return"-"+ne(this).toString(t);for(var e=Ie(Math.pow(t,6)),n=this,r="";;){var s=Gn(n,e).g;n=Hn(n,s.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Pe(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};v.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Pe(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function _e(t){return t.h==-1}v.X=function(t){return t=Hn(this,t),_e(t)?-1:Pe(t)?0:1};function ne(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new k(n,~t.h).add(ls)}v.abs=function(){return _e(this)?ne(this):this};v.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var o=r+(this.D(s)&65535)+(t.D(s)&65535),i=(o>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=i>>>16,o&=65535,i&=65535,n[s]=i<<16|o}return new k(n,n[n.length-1]&-2147483648?-1:0)};function Hn(t,e){return t.add(ne(e))}v.R=function(t){if(Pe(this)||Pe(t))return at;if(_e(this))return _e(t)?ne(this).R(ne(t)):ne(ne(this).R(t));if(_e(t))return ne(this.R(ne(t)));if(0>this.X(vi)&&0>t.X(vi))return Ie(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var o=this.D(r)>>>16,i=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=i*l,An(n,2*r+2*s),n[2*r+2*s+1]+=o*l,An(n,2*r+2*s+1),n[2*r+2*s+1]+=i*a,An(n,2*r+2*s+1),n[2*r+2*s+2]+=o*a,An(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new k(n,0)};function An(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Pt(t,e){this.g=t,this.h=e}function Gn(t,e){if(Pe(e))throw Error("division by zero");if(Pe(t))return new Pt(at,at);if(_e(t))return e=Gn(ne(t),e),new Pt(ne(e.g),ne(e.h));if(_e(e))return e=Gn(t,ne(e)),new Pt(ne(e.g),e.h);if(30<t.g.length){if(_e(t)||_e(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ls,r=e;0>=r.X(t);)n=Ei(n),r=Ei(r);var s=nt(n,1),o=nt(r,1);for(r=nt(r,2),n=nt(n,2);!Pe(r);){var i=o.add(r);0>=i.X(t)&&(s=s.add(n),o=i),r=nt(r,1),n=nt(n,1)}return e=Hn(t,s.R(e)),new Pt(s,e)}for(s=at;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Ie(n),i=o.R(e);_e(i)||0<i.X(t);)n-=r,o=Ie(n),i=o.R(e);Pe(o)&&(o=ls),s=s.add(o),t=Hn(t,i)}return new Pt(s,t)}v.gb=function(t){return Gn(this,t).h};v.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new k(n,this.h&t.h)};v.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new k(n,this.h|t.h)};v.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new k(n,this.h^t.h)};function Ei(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new k(n,t.h)}function nt(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],o=0;o<r;o++)s[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new k(s,t.h)}zn.prototype.createWebChannel=zn.prototype.g;pe.prototype.send=pe.prototype.u;pe.prototype.open=pe.prototype.m;pe.prototype.close=pe.prototype.close;lr.NO_ERROR=0;lr.TIMEOUT=8;lr.HTTP_ERROR=6;$a.COMPLETE="complete";Ua.EventType=cn;cn.OPEN="a";cn.CLOSE="b";cn.ERROR="c";cn.MESSAGE="d";J.prototype.listen=J.prototype.O;U.prototype.listenOnce=U.prototype.P;U.prototype.getLastError=U.prototype.Sa;U.prototype.getLastErrorCode=U.prototype.Ia;U.prototype.getStatus=U.prototype.da;U.prototype.getResponseJson=U.prototype.Wa;U.prototype.getResponseText=U.prototype.ja;U.prototype.send=U.prototype.ha;U.prototype.setWithCredentials=U.prototype.Oa;ve.prototype.digest=ve.prototype.l;ve.prototype.reset=ve.prototype.reset;ve.prototype.update=ve.prototype.j;k.prototype.add=k.prototype.add;k.prototype.multiply=k.prototype.R;k.prototype.modulo=k.prototype.gb;k.prototype.compare=k.prototype.X;k.prototype.toNumber=k.prototype.ea;k.prototype.toString=k.prototype.toString;k.prototype.getBits=k.prototype.D;k.fromNumber=Ie;k.fromString=xl;var wd=function(){return new zn},Td=function(){return ar()},$r=lr,Ad=$a,xd=tt,wi={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xn=Ua,Id=U,Rd=ve,lt=k;const Ti="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}me.UNAUTHENTICATED=new me(null),me.GOOGLE_CREDENTIALS=new me("google-credentials-uid"),me.FIRST_PARTY=new me("first-party-uid"),me.MOCK_USER=new me("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let At="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je=new _a("@firebase/firestore");function Vt(){return Je.logLevel}function E(t,...e){if(Je.logLevel<=b.DEBUG){const n=e.map(to);Je.debug(`Firestore (${At}): ${t}`,...n)}}function Se(t,...e){if(Je.logLevel<=b.ERROR){const n=e.map(to);Je.error(`Firestore (${At}): ${t}`,...n)}}function en(t,...e){if(Je.logLevel<=b.WARN){const n=e.map(to);Je.warn(`Firestore (${At}): ${t}`,...n)}}function to(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(t="Unexpected state"){const e=`FIRESTORE (${At}) INTERNAL ASSERTION FAILED: `+t;throw Se(e),new Error(e)}function W(t,e){t||C()}function V(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class w extends Et{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(me.UNAUTHENTICATED))}shutdown(){}}class bd{constructor(e){this.t=e,this.currentUser=me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new Ve;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ve,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ve)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(W(typeof r.accessToken=="string"),new Cd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return W(e===null||typeof e=="string"),new me(e)}}class Pd{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=me.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Vd{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Pd(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(me.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dd{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{o.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const i=o.token!==this.R;return this.R=o.token,E("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(W(typeof n.token=="string"),this.R=n.token,new Nd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=kd(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%e.length))}return r}}function D(t,e){return t<e?-1:t>e?1:0}function mt(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return X.fromMillis(Date.now())}static fromDate(e){return X.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new X(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?D(this.nanoseconds,e.nanoseconds):D(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.timestamp=e}static fromTimestamp(e){return new R(e)}static min(){return new R(new X(0,0))}static max(){return new R(new X(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r){n===void 0?n=0:n>e.length&&C(),r===void 0?r=e.length-n:r>e.length-n&&C(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=e.get(s),i=n.get(s);if(o<i)return-1;if(o>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class F extends tn{construct(e,n,r){return new F(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new w(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new F(n)}static emptyPath(){return new F([])}}const Od=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ae extends tn{construct(e,n,r){return new ae(e,n,r)}static isValidIdentifier(e){return Od.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ae.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ae(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new w(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new w(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new w(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(i=!i,s++):a!=="."||i?(r+=a,s++):(o(),s++)}if(o(),i)throw new w(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ae(n)}static emptyPath(){return new ae([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e){this.path=e}static fromPath(e){return new A(F.fromString(e))}static fromName(e){return new A(F.fromString(e).popFirst(5))}static empty(){return new A(F.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&F.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return F.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new F(e.slice()))}}function Ld(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=R.fromTimestamp(r===1e9?new X(n+1,0):new X(n,r));return new Fe(s,A.empty(),e)}function Md(t){return new Fe(t.readTime,t.key,-1)}class Fe{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fe(R.min(),A.empty(),-1)}static max(){return new Fe(R.max(),A.empty(),-1)}}function qd(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=A.comparator(t.documentKey,e.documentKey),n!==0?n:D(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t){if(t.code!==_.FAILED_PRECONDITION||t.message!==Fd)throw t;E("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&C(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new g((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof g?n:g.resolve(n)}catch(n){return g.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):g.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):g.reject(n)}static resolve(e){return new g((n,r)=>{n(e)})}static reject(e){return new g((n,r)=>{r(e)})}static waitFor(e){return new g((n,r)=>{let s=0,o=0,i=!1;e.forEach(a=>{++s,a.next(()=>{++o,i&&o===s&&n()},l=>r(l))}),i=!0,o===s&&n()})}static or(e){let n=g.resolve(!1);for(const r of e)n=n.next(s=>s?g.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new g((r,s)=>{const o=e.length,i=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(h=>{i[c]=h,++a,a===o&&r(i)},h=>s(h))}})}static doWhile(e,n){return new g((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ve,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ft(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=so(r.target.error);this.V.reject(new Ft(e,s))}}static open(e,n,r,s){try{return new ro(n,e.transaction(s,r))}catch(o){throw new Ft(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Ud(n)}}class Ke{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Ke.S(qn())===12.2&&Se("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),ze(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pa())return!1;if(Ke.C())return!0;const e=qn(),n=Ke.S(e),r=0<n&&n<10,s=Ke.v(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const i=o.target.result;n(i)},s.onblocked=()=>{r(new Ft(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const i=o.target.error;i.name==="VersionError"?r(new w(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new w(_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new Ft(e,i))},s.onupgradeneeded=o=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const i=o.target.result;this.p.N(i,s.transaction,o.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const o=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.O(e);const a=ro.open(this.db,e,o?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),g.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&i<3;if(E("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class $d{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ze(this.k.delete())}}class Ft extends w{constructor(e,n){super(_.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function fn(t){return t.name==="IndexedDbTransactionError"}class Ud{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ze(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),ze(this.store.add(e))}get(e){return ze(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),ze(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),ze(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new g((i,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{i(l.target.result)}})}{const o=this.cursor(r),i=[];return this.G(o,(a,l)=>{i.push(l)}).next(()=>i)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new g((s,o)=>{r.onerror=i=>{o(i.target.error)},r.onsuccess=i=>{s(i.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(o,i,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new g((r,s)=>{n.onerror=o=>{const i=so(o.target.error);s(i)},n.onsuccess=o=>{const i=o.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():r()}):r()}})}G(e,n){const r=[];return new g((s,o)=>{e.onerror=i=>{o(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void s();const l=new $d(a),c=n(a.primaryKey,a.value,l);if(c instanceof g){const h=c.catch(d=>(l.done(),g.reject(d)));r.push(h)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>g.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ze(t){return new g((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=so(r.target.error);n(s)}})}let Ai=!1;function so(t){const e=Ke.S(qn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ai||(Ai=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}oo._e=-1;function _r(t){return t==null}function Kn(t){return t===0&&1/t==-1/0}function jd(t){return typeof t=="number"&&Number.isInteger(t)&&!Kn(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Rl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e,n){this.comparator=e,this.root=n||te.EMPTY}insert(e,n){return new j(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,te.BLACK,null,null))}remove(e){return new j(this.comparator,this.root.remove(e,this.comparator).copy(null,null,te.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new In(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new In(this.root,e,this.comparator,!1)}getReverseIterator(){return new In(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new In(this.root,e,this.comparator,!0)}}class In{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class te{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??te.RED,this.left=s??te.EMPTY,this.right=o??te.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new te(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return te.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return te.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,te.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,te.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw C();const e=this.left.check();if(e!==this.right.check())throw C();return e+(this.isRed()?0:1)}}te.EMPTY=null,te.RED=!0,te.BLACK=!1;te.EMPTY=new class{constructor(){this.size=0}get key(){throw C()}get value(){throw C()}get color(){throw C()}get left(){throw C()}get right(){throw C()}copy(e,n,r,s,o){return this}insert(e,n,r){return new te(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.comparator=e,this.data=new j(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ii(this.data.getIterator())}getIteratorFrom(e){return new Ii(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof se)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new se(this.comparator);return n.data=e,n}}class Ii{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.fields=e,e.sort(ae.comparator)}static empty(){return new Oe([])}unionWith(e){let n=new se(ae.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Oe(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mt(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Cl("Invalid base64 string: "+o):o}}(e);return new ue(n)}static fromUint8Array(e){const n=function(s){let o="";for(let i=0;i<s.length;++i)o+=String.fromCharCode(s[i]);return o}(e);return new ue(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return D(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ue.EMPTY_BYTE_STRING=new ue("");const zd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Be(t){if(W(!!t),typeof t=="string"){let e=0;const n=zd.exec(t);if(W(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:K(t.seconds),nanos:K(t.nanos)}}function K(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ze(t){return typeof t=="string"?ue.fromBase64String(t):ue.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ao(t){const e=t.mapValue.fields.__previous_value__;return io(e)?ao(e):e}function nn(t){const e=Be(t.mapValue.fields.__local_write_time__.timestampValue);return new X(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,r,s,o,i,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class rn{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new rn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function et(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?io(t)?4:Gd(t)?9007199254740991:10:C()}function be(t,e){if(t===e)return!0;const n=et(t);if(n!==et(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nn(t).isEqual(nn(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const i=Be(s.timestampValue),a=Be(o.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Ze(s.bytesValue).isEqual(Ze(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return K(s.geoPointValue.latitude)===K(o.geoPointValue.latitude)&&K(s.geoPointValue.longitude)===K(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return K(s.integerValue)===K(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const i=K(s.doubleValue),a=K(o.doubleValue);return i===a?Kn(i)===Kn(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return mt(t.arrayValue.values||[],e.arrayValue.values||[],be);case 10:return function(s,o){const i=s.mapValue.fields||{},a=o.mapValue.fields||{};if(xi(i)!==xi(a))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(a[l]===void 0||!be(i[l],a[l])))return!1;return!0}(t,e);default:return C()}}function sn(t,e){return(t.values||[]).find(n=>be(n,e))!==void 0}function ft(t,e){if(t===e)return 0;const n=et(t),r=et(e);if(n!==r)return D(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return D(t.booleanValue,e.booleanValue);case 2:return function(o,i){const a=K(o.integerValue||o.doubleValue),l=K(i.integerValue||i.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Ri(t.timestampValue,e.timestampValue);case 4:return Ri(nn(t),nn(e));case 5:return D(t.stringValue,e.stringValue);case 6:return function(o,i){const a=Ze(o),l=Ze(i);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,i){const a=o.split("/"),l=i.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=D(a[c],l[c]);if(h!==0)return h}return D(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,i){const a=D(K(o.latitude),K(i.latitude));return a!==0?a:D(K(o.longitude),K(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,i){const a=o.values||[],l=i.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=ft(a[c],l[c]);if(h)return h}return D(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,i){if(o===Rn.mapValue&&i===Rn.mapValue)return 0;if(o===Rn.mapValue)return 1;if(i===Rn.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=i.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const m=D(l[d],h[d]);if(m!==0)return m;const f=ft(a[l[d]],c[h[d]]);if(f!==0)return f}return D(l.length,h.length)}(t.mapValue,e.mapValue);default:throw C()}}function Ri(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return D(t,e);const n=Be(t),r=Be(e),s=D(n.seconds,r.seconds);return s!==0?s:D(n.nanos,r.nanos)}function pt(t){return cs(t)}function cs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Be(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ze(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return A.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=cs(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const i of r)o?o=!1:s+=",",s+=`${i}:${cs(n.fields[i])}`;return s+"}"}(t.mapValue):C()}function Ci(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function us(t){return!!t&&"integerValue"in t}function lo(t){return!!t&&"arrayValue"in t}function Si(t){return!!t&&"nullValue"in t}function bi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ur(t){return!!t&&"mapValue"in t}function Bt(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pn(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bt(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bt(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Gd(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.value=e}static empty(){return new Te({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ur(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bt(n)}setAll(e){let n=ae.emptyPath(),r={},s=[];e.forEach((i,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}i?r[a.lastSegment()]=Bt(i):s.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Ur(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return be(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ur(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){pn(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Te(Bt(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e,n,r,s,o,i,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new ie(e,0,R.min(),R.min(),R.min(),Te.empty(),0)}static newFoundDocument(e,n,r,s){return new ie(e,1,n,R.min(),r,s,0)}static newNoDocument(e,n){return new ie(e,2,n,R.min(),R.min(),Te.empty(),0)}static newUnknownDocument(e,n){return new ie(e,3,n,R.min(),R.min(),Te.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(R.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Te.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Te.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=R.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ie&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this.position=e,this.inclusive=n}}function Pi(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],i=t.position[s];if(o.field.isKeyField()?r=A.comparator(A.fromName(i.referenceValue),n.key):r=ft(i,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vi(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!be(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n="asc"){this.field=e,this.dir=n}}function Kd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{}class Q extends Sl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Wd(e,n,r):n==="array-contains"?new Jd(e,r):n==="in"?new Zd(e,r):n==="not-in"?new em(e,r):n==="array-contains-any"?new tm(e,r):new Q(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Yd(e,r):new Xd(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ft(n,this.value)):n!==null&&et(this.value)===et(n)&&this.matchesComparison(ft(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return C()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ee extends Sl{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ee(e,n)}matches(e){return bl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function bl(t){return t.op==="and"}function Pl(t){return Qd(t)&&bl(t)}function Qd(t){for(const e of t.filters)if(e instanceof Ee)return!1;return!0}function hs(t){if(t instanceof Q)return t.field.canonicalString()+t.op.toString()+pt(t.value);if(Pl(t))return t.filters.map(e=>hs(e)).join(",");{const e=t.filters.map(n=>hs(n)).join(",");return`${t.op}(${e})`}}function Vl(t,e){return t instanceof Q?function(r,s){return s instanceof Q&&r.op===s.op&&r.field.isEqual(s.field)&&be(r.value,s.value)}(t,e):t instanceof Ee?function(r,s){return s instanceof Ee&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,i,a)=>o&&Vl(i,s.filters[a]),!0):!1}(t,e):void C()}function Nl(t){return t instanceof Q?function(n){return`${n.field.canonicalString()} ${n.op} ${pt(n.value)}`}(t):t instanceof Ee?function(n){return n.op.toString()+" {"+n.getFilters().map(Nl).join(" ,")+"}"}(t):"Filter"}class Wd extends Q{constructor(e,n,r){super(e,n,r),this.key=A.fromName(r.referenceValue)}matches(e){const n=A.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yd extends Q{constructor(e,n){super(e,"in",n),this.keys=Dl("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Xd extends Q{constructor(e,n){super(e,"not-in",n),this.keys=Dl("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Dl(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>A.fromName(r.referenceValue))}class Jd extends Q{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lo(n)&&sn(n.arrayValue,this.value)}}class Zd extends Q{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sn(this.value.arrayValue,n)}}class em extends Q{constructor(e,n){super(e,"not-in",n)}matches(e){if(sn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sn(this.value.arrayValue,n)}}class tm extends Q{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sn(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n=null,r=[],s=[],o=null,i=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=i,this.endAt=a,this.ce=null}}function Ni(t,e=null,n=[],r=[],s=null,o=null,i=null){return new nm(t,e,n,r,s,o,i)}function co(t){const e=V(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hs(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),_r(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>pt(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>pt(r)).join(",")),e.ce=n}return e.ce}function uo(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Kd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vl(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vi(t.startAt,e.startAt)&&Vi(t.endAt,e.endAt)}function ds(t){return A.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n=null,r=[],s=[],o=null,i="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function rm(t,e,n,r,s,o,i,a){return new gn(t,e,n,r,s,o,i,a)}function ho(t){return new gn(t)}function Di(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kl(t){return t.collectionGroup!==null}function $t(t){const e=V(t);if(e.le===null){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new se(ae.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Wn(o,r))}),n.has(ae.keyField().canonicalString())||e.le.push(new Wn(ae.keyField(),r))}return e.le}function Re(t){const e=V(t);return e.he||(e.he=sm(e,$t(t))),e.he}function sm(t,e){if(t.limitType==="F")return Ni(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Wn(s.field,o)});const n=t.endAt?new Qn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qn(t.startAt.position,t.startAt.inclusive):null;return Ni(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ms(t,e){const n=t.filters.concat([e]);return new gn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fs(t,e,n){return new gn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yr(t,e){return uo(Re(t),Re(e))&&t.limitType===e.limitType}function Ol(t){return`${co(Re(t))}|lt:${t.limitType}`}function rt(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Nl(s)).join(", ")}]`),_r(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>pt(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>pt(s)).join(",")),`Target(${r})`}(Re(t))}; limitType=${t.limitType})`}function vr(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):A.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of $t(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,a,l){const c=Pi(i,a,l);return i.inclusive?c<=0:c<0}(r.startAt,$t(r),s)||r.endAt&&!function(i,a,l){const c=Pi(i,a,l);return i.inclusive?c>=0:c>0}(r.endAt,$t(r),s))}(t,e)}function om(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ll(t){return(e,n)=>{let r=!1;for(const s of $t(t)){const o=im(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function im(t,e,n){const r=t.field.isKeyField()?A.comparator(e.key,n.key):function(o,i,a){const l=i.data.field(o),c=a.data.field(o);return l!==null&&c!==null?ft(l,c):C()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return C()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){pn(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Rl(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=new j(A.comparator);function $e(){return am}const Ml=new j(A.comparator);function kt(...t){let e=Ml;for(const n of t)e=e.insert(n.key,n);return e}function lm(t){let e=Ml;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qe(){return Ut()}function ql(){return Ut()}function Ut(){return new xt(t=>t.toString(),(t,e)=>t.isEqual(e))}new j(A.comparator);const cm=new se(A.comparator);function P(...t){let e=cm;for(const n of t)e=e.add(n);return e}const um=new se(D);function hm(){return um}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kn(e)?"-0":e}}function Bl(t){return{integerValue:""+t}}function dm(t,e){return jd(e)?Bl(e):Fl(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this._=void 0}}function mm(t,e,n){return t instanceof ps?function(s,o){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&io(o)&&(o=ao(o)),o&&(i.fields.__previous_value__=o),{mapValue:i}}(n,e):t instanceof Yn?$l(t,e):t instanceof Xn?Ul(t,e):function(s,o){const i=pm(s,o),a=ki(i)+ki(s.Ie);return us(i)&&us(s.Ie)?Bl(a):Fl(s.serializer,a)}(t,e)}function fm(t,e,n){return t instanceof Yn?$l(t,e):t instanceof Xn?Ul(t,e):n}function pm(t,e){return t instanceof gs?function(r){return us(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ps extends Er{}class Yn extends Er{constructor(e){super(),this.elements=e}}function $l(t,e){const n=jl(e);for(const r of t.elements)n.some(s=>be(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xn extends Er{constructor(e){super(),this.elements=e}}function Ul(t,e){let n=jl(e);for(const r of t.elements)n=n.filter(s=>!be(s,r));return{arrayValue:{values:n}}}class gs extends Er{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function ki(t){return K(t.integerValue||t.doubleValue)}function jl(t){return lo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gm(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Yn&&s instanceof Yn||r instanceof Xn&&s instanceof Xn?mt(r.elements,s.elements,be):r instanceof gs&&s instanceof gs?be(r.Ie,s.Ie):r instanceof ps&&s instanceof ps}(t.transform,e.transform)}class Ye{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ye}static exists(e){return new Ye(void 0,e)}static updateTime(e){return new Ye(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sn(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mo{}function zl(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ym(t.key,Ye.none()):new fo(t.key,t.data,Ye.none());{const n=t.data,r=Te.empty();let s=new se(ae.comparator);for(let o of e.fields)if(!s.has(o)){let i=n.field(o);i===null&&o.length>1&&(o=o.popLast(),i=n.field(o)),i===null?r.delete(o):r.set(o,i),s=s.add(o)}return new wr(t.key,r,new Oe(s.toArray()),Ye.none())}}function _m(t,e,n){t instanceof fo?function(s,o,i){const a=s.value.clone(),l=Li(s.fieldTransforms,o,i.transformResults);a.setAll(l),o.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):t instanceof wr?function(s,o,i){if(!Sn(s.precondition,o))return void o.convertToUnknownDocument(i.version);const a=Li(s.fieldTransforms,o,i.transformResults),l=o.data;l.setAll(Hl(s)),l.setAll(a),o.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,n):function(s,o,i){o.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function jt(t,e,n,r){return t instanceof fo?function(o,i,a,l){if(!Sn(o.precondition,i))return a;const c=o.value.clone(),h=Mi(o.fieldTransforms,l,i);return c.setAll(h),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof wr?function(o,i,a,l){if(!Sn(o.precondition,i))return a;const c=Mi(o.fieldTransforms,l,i),h=i.data;return h.setAll(Hl(o)),h.setAll(c),i.convertToFoundDocument(i.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,i,a){return Sn(o.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,n)}function Oi(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&mt(r,s,(o,i)=>gm(o,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fo extends mo{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wr extends mo{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Hl(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Li(t,e,n){const r=new Map;W(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],i=o.transform,a=e.data.field(o.field);r.set(o.field,fm(i,a,n[s]))}return r}function Mi(t,e,n){const r=new Map;for(const s of t){const o=s.transform,i=n.data.field(s.field);r.set(s.field,mm(o,i,e))}return r}class ym extends mo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&_m(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jt(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jt(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ql();return this.mutations.forEach(s=>{const o=e.get(s.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=n.has(s.key)?null:a;const l=zl(i,a);l!==null&&r.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(R.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),P())}isEqual(e){return this.batchId===e.batchId&&mt(this.mutations,e.mutations,(n,r)=>Oi(n,r))&&mt(this.baseMutations,e.baseMutations,(n,r)=>Oi(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G,S;function Gl(t){if(t===void 0)return Se("GRPC error has no .code"),_.UNKNOWN;switch(t){case G.OK:return _.OK;case G.CANCELLED:return _.CANCELLED;case G.UNKNOWN:return _.UNKNOWN;case G.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case G.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case G.INTERNAL:return _.INTERNAL;case G.UNAVAILABLE:return _.UNAVAILABLE;case G.UNAUTHENTICATED:return _.UNAUTHENTICATED;case G.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case G.NOT_FOUND:return _.NOT_FOUND;case G.ALREADY_EXISTS:return _.ALREADY_EXISTS;case G.PERMISSION_DENIED:return _.PERMISSION_DENIED;case G.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case G.ABORTED:return _.ABORTED;case G.OUT_OF_RANGE:return _.OUT_OF_RANGE;case G.UNIMPLEMENTED:return _.UNIMPLEMENTED;case G.DATA_LOSS:return _.DATA_LOSS;default:return C()}}(S=G||(G={}))[S.OK=0]="OK",S[S.CANCELLED=1]="CANCELLED",S[S.UNKNOWN=2]="UNKNOWN",S[S.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",S[S.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",S[S.NOT_FOUND=5]="NOT_FOUND",S[S.ALREADY_EXISTS=6]="ALREADY_EXISTS",S[S.PERMISSION_DENIED=7]="PERMISSION_DENIED",S[S.UNAUTHENTICATED=16]="UNAUTHENTICATED",S[S.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",S[S.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",S[S.ABORTED=10]="ABORTED",S[S.OUT_OF_RANGE=11]="OUT_OF_RANGE",S[S.UNIMPLEMENTED=12]="UNIMPLEMENTED",S[S.INTERNAL=13]="INTERNAL",S[S.UNAVAILABLE=14]="UNAVAILABLE",S[S.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=new lt([4294967295,4294967295],0);function qi(t){const e=Tm().encode(t),n=new Rd;return n.update(e),new Uint8Array(n.digest())}function Fi(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new lt([n,r],0),new lt([s,o],0)]}class po{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ot(`Invalid padding: ${n}`);if(r<0)throw new Ot(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ot(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ot(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=lt.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(lt.fromNumber(r)));return s.compare(Am)===1&&(s=new lt([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=qi(e),[r,s]=Fi(n);for(let o=0;o<this.hashCount;o++){const i=this.de(r,s,o);if(!this.Ae(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new po(o,s,n);return r.forEach(a=>i.insert(a)),i}insert(e){if(this.Te===0)return;const n=qi(e),[r,s]=Fi(n);for(let o=0;o<this.hashCount;o++){const i=this.de(r,s,o);this.Re(i)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ot extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,_n.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tr(R.min(),s,new j(D),$e(),P())}}class _n{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _n(r,n,P(),P(),P())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class Kl{constructor(e,n){this.targetId=e,this.fe=n}}class Ql{constructor(e,n,r=ue.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Bi{constructor(){this.ge=0,this.pe=Ui(),this.ye=ue.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=P(),n=P(),r=P();return this.pe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:C()}}),new _n(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Ui()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,W(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class xm{constructor(e){this.Le=e,this.ke=new Map,this.qe=$e(),this.Qe=$i(),this.Ke=new j(D)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:C()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const o=s.target;if(ds(o))if(r===0){const i=new A(o.path);this.We(n,i,ie.newNoDocument(i,R.min()))}else W(r===1);else{const i=this.Ze(n);if(i!==r){const a=this.Xe(e),l=a?this.et(a,e,i):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let i,a;try{i=Ze(r).toUint8Array()}catch(l){if(l instanceof Cl)return en("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new po(i,s,o)}catch(l){return en(l instanceof Ot?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const i=this.Le.nt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((o,i)=>{const a=this.Ye(i);if(a){if(o.current&&ds(a.target)){const l=new A(a.target.path);this.qe.get(l)!==null||this.st(i,l)||this.We(i,l,ie.newNoDocument(l,e))}o.De&&(n.set(i,o.ve()),o.Fe())}});let r=P();this.Qe.forEach((o,i)=>{let a=!0;i.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,i)=>i.setReadTime(e));const s=new Tr(e,n,this.Ke,this.qe,r);return this.qe=$e(),this.Qe=$i(),this.Ke=new j(D),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Bi,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new se(D),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Bi),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $i(){return new j(A.comparator)}function Ui(){return new j(A.comparator)}const Im=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Rm=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Cm=(()=>({and:"AND",or:"OR"}))();class Sm{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _s(t,e){return t.useProto3Json||_r(e)?e:{value:e}}function ys(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wl(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ct(t){return W(!!t),R.fromTimestamp(function(n){const r=Be(n);return new X(r.seconds,r.nanos)}(t))}function Yl(t,e){return vs(t,e).canonicalString()}function vs(t,e){const n=function(s){return new F(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Xl(t){const e=F.fromString(t);return W(nc(e)),e}function jr(t,e){const n=Xl(e);if(n.get(1)!==t.databaseId.projectId)throw new w(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new A(Zl(n))}function Jl(t,e){return Yl(t.databaseId,e)}function bm(t){const e=Xl(t);return e.length===4?F.emptyPath():Zl(e)}function ji(t){return new F(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Zl(t){return W(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Pm(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:C()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(W(h===void 0||typeof h=="string"),ue.fromBase64String(h||"")):(W(h===void 0||h instanceof Uint8Array),ue.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const h=c.code===void 0?_.UNKNOWN:Gl(c.code);return new w(h,c.message||"")}(i);n=new Ql(r,s,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jr(t,r.document.name),o=ct(r.document.updateTime),i=r.document.createTime?ct(r.document.createTime):R.min(),a=new Te({mapValue:{fields:r.document.fields}}),l=ie.newFoundDocument(s,o,i,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new bn(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jr(t,r.document),o=r.readTime?ct(r.readTime):R.min(),i=ie.newNoDocument(s,o),a=r.removedTargetIds||[];n=new bn([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jr(t,r.document),o=r.removedTargetIds||[];n=new bn([],o,s,null)}else{if(!("filter"in e))return C();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,i=new wm(s,o),a=r.targetId;n=new Kl(a,i)}}return n}function Vm(t,e){return{documents:[Jl(t,e.path)]}}function Nm(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Jl(t,s);const o=function(c){if(c.length!==0)return tc(Ee.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const i=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:st(m.field),direction:Om(m.dir)}}(h))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const a=_s(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function Dm(t){let e=bm(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){W(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(d){const m=ec(d);return m instanceof Ee&&Pl(m)?m.getFilters():[m]}(n.where));let i=[];n.orderBy&&(i=function(d){return d.map(m=>function(y){return new Wn(ot(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,_r(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(d){const m=!!d.before,f=d.values||[];return new Qn(f,m)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const m=!d.before,f=d.values||[];return new Qn(f,m)}(n.endAt)),rm(e,s,i,o,a,"F",l,c)}function km(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return C()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ec(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ot(n.unaryFilter.field);return Q.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ot(n.unaryFilter.field);return Q.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ot(n.unaryFilter.field);return Q.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ot(n.unaryFilter.field);return Q.create(i,"!=",{nullValue:"NULL_VALUE"});default:return C()}}(t):t.fieldFilter!==void 0?function(n){return Q.create(ot(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return C()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ee.create(n.compositeFilter.filters.map(r=>ec(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return C()}}(n.compositeFilter.op))}(t):C()}function Om(t){return Im[t]}function Lm(t){return Rm[t]}function Mm(t){return Cm[t]}function st(t){return{fieldPath:t.canonicalString()}}function ot(t){return ae.fromServerFormat(t.fieldPath)}function tc(t){return t instanceof Q?function(n){if(n.op==="=="){if(bi(n.value))return{unaryFilter:{field:st(n.field),op:"IS_NAN"}};if(Si(n.value))return{unaryFilter:{field:st(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bi(n.value))return{unaryFilter:{field:st(n.field),op:"IS_NOT_NAN"}};if(Si(n.value))return{unaryFilter:{field:st(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:st(n.field),op:Lm(n.op),value:n.value}}}(t):t instanceof Ee?function(n){const r=n.getFilters().map(s=>tc(s));return r.length===1?r[0]:{compositeFilter:{op:Mm(n.op),filters:r}}}(t):C()}function nc(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n,r,s,o=R.min(),i=R.min(),a=ue.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Le(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Le(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Le(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Le(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e){this.ct=e}}function Fm(t){const e=Dm({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fs(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this._n=new $m}addToCollectionParentIndex(e,n){return this._n.add(n),g.resolve()}getCollectionParents(e,n){return g.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return g.resolve()}deleteFieldIndex(e,n){return g.resolve()}deleteAllFieldIndexes(e){return g.resolve()}createTargetIndexes(e,n){return g.resolve()}getDocumentsMatchingTarget(e,n){return g.resolve(null)}getIndexType(e,n){return g.resolve(0)}getFieldIndexes(e,n){return g.resolve([])}getNextCollectionGroupToUpdate(e){return g.resolve(null)}getMinOffset(e,n){return g.resolve(Fe.min())}getMinOffsetFromCollectionGroup(e,n){return g.resolve(Fe.min())}updateCollectionGroup(e,n,r){return g.resolve()}updateIndexEntries(e,n){return g.resolve()}}class $m{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new se(F.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new se(F.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new gt(0)}static Bn(){return new gt(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.changes=new xt(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ie.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?g.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&jt(r.mutation,s,Oe.empty(),X.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,P()).next(()=>r))}getLocalViewOfDocuments(e,n,r=P()){const s=Qe();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let i=kt();return o.forEach((a,l)=>{i=i.insert(a,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=Qe();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,P()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((i,a)=>{n.set(i,a)})})}computeViews(e,n,r,s){let o=$e();const i=Ut(),a=function(){return Ut()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof wr)?o=o.insert(c.key,c):h!==void 0?(i.set(c.key,h.mutation.getFieldMask()),jt(h.mutation,c,h.mutation.getFieldMask(),X.now())):i.set(c.key,Oe.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>i.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new jm(h,(d=i.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ut();let s=new j((i,a)=>i-a),o=P();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const a of i)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Oe.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||P()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=ql();h.forEach(m=>{if(!o.has(m)){const f=zl(n.get(m),r.get(m));f!==null&&d.set(m,f),o=o.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,d))}return g.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return A.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kl(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const i=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):g.resolve(Qe());let a=-1,l=o;return i.next(c=>g.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(h)?g.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,P())).next(h=>({batchId:a,changes:lm(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new A(n)).next(r=>{let s=kt();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let i=kt();return this.indexManager.getCollectionParents(e,o).next(a=>g.forEach(a,l=>{const c=function(d,m){return new gn(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,m)=>{i=i.insert(d,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(i=>{o.forEach((l,c)=>{const h=c.getKey();i.get(h)===null&&(i=i.insert(h,ie.newInvalidDocument(h)))});let a=kt();return i.forEach((l,c)=>{const h=o.get(l);h!==void 0&&jt(h.mutation,c,Oe.empty(),X.now()),vr(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return g.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ct(s.createTime)}}(n)),g.resolve()}getNamedQuery(e,n){return g.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:Fm(s.bundledQuery),readTime:ct(s.readTime)}}(n)),g.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.overlays=new j(A.comparator),this.hr=new Map}getOverlay(e,n){return g.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qe();return g.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.ht(e,n,o)}),g.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),g.resolve()}getOverlaysForCollection(e,n,r){const s=Qe(),o=n.length+1,i=new A(n.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&s.set(l.getKey(),l)}return g.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new j((c,h)=>c-h);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=o.get(c.largestBatchId);h===null&&(h=Qe(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Qe(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return g.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Em(n,r));let o=this.hr.get(n);o===void 0&&(o=P(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.Pr=new se(Y.Ir),this.Tr=new se(Y.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Y(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Y(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new A(new F([])),r=new Y(n,e),s=new Y(n,e+1),o=[];return this.Tr.forEachInRange([r,s],i=>{this.Ar(i),o.push(i.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new A(new F([])),r=new Y(n,e),s=new Y(n,e+1);let o=P();return this.Tr.forEachInRange([r,s],i=>{o=o.add(i.key)}),o}containsKey(e){const n=new Y(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Y{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return A.comparator(e.key,n.key)||D(e.pr,n.pr)}static Er(e,n){return D(e.pr,n.pr)||A.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new se(Y.Ir)}checkEmpty(e){return g.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new vm(o,n,r,s);this.mutationQueue.push(i);for(const a of s)this.wr=this.wr.add(new Y(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return g.resolve(i)}lookupMutationBatch(e,n){return g.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),o=s<0?0:s;return g.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return g.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return g.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Y(n,0),s=new Y(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,s],i=>{const a=this.Sr(i.pr);o.push(a)}),g.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new se(D);return n.forEach(s=>{const o=new Y(s,0),i=new Y(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,i],a=>{r=r.add(a.pr)})}),g.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;A.isDocumentKey(o)||(o=o.child(""));const i=new Y(new A(o),0);let a=new se(D);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},i),g.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){W(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return g.forEach(n.mutations,s=>{const o=new Y(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Y(n,0),s=this.wr.firstAfterOrEqual(r);return g.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,g.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e){this.vr=e,this.docs=function(){return new j(A.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,i=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return g.resolve(r?r.document.mutableCopy():ie.newInvalidDocument(n))}getEntries(e,n){let r=$e();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():ie.newInvalidDocument(s))}),g.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=$e();const i=n.path,a=new A(i.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||qd(Md(h),r)<=0||(s.has(h.key)||vr(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return g.resolve(o)}getAllFromCollectionGroup(e,n,r,s){C()}Fr(e,n){return g.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wm(this)}getSize(e){return g.resolve(this.size)}}class Wm extends Um{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),g.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this.persistence=e,this.Mr=new xt(n=>co(n),uo),this.lastRemoteSnapshotVersion=R.min(),this.highestTargetId=0,this.Or=0,this.Nr=new go,this.targetCount=0,this.Br=gt.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),g.resolve()}getLastRemoteSnapshotVersion(e){return g.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return g.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),g.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),g.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new gt(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,g.resolve()}updateTargetData(e,n){return this.qn(n),g.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,g.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Mr.forEach((i,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),g.waitFor(o).next(()=>s)}getTargetCount(e){return g.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return g.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),g.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(i=>{o.push(s.markPotentiallyOrphaned(e,i))}),g.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),g.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return g.resolve(r)}containsKey(e,n){return g.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){this.Lr={},this.overlays={},this.kr=new oo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ym(this),this.indexManager=new Bm,this.remoteDocumentCache=function(s){return new Qm(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new qm(n),this.$r=new Hm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Gm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Km(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);const s=new Jm(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(o=>this.referenceDelegate.Wr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Gr(e,n){return g.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class Jm extends Bd{constructor(e){super(),this.currentSequenceNumber=e}}class _o{constructor(e){this.persistence=e,this.zr=new go,this.jr=null}static Hr(e){return new _o(e)}get Jr(){if(this.jr)return this.jr;throw C()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),g.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),g.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),g.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return g.forEach(this.Jr,r=>{const s=A.fromPath(r);return this.Yr(e,s).next(o=>{o||n.removeEntry(s,R.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return g.or([()=>g.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=P(),s=P();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new yo(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return fu()?8:Ke.v(qn())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ji(e,n).next(i=>{o.result=i}).next(()=>{if(!o.result)return this.Hi(e,n,s,r).next(i=>{o.result=i})}).next(()=>{if(o.result)return;const i=new Zm;return this.Ji(e,n,i).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,i,a.size)})}).next(()=>o.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Vt()<=b.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",rt(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),g.resolve()):(Vt()<=b.DEBUG&&E("QueryEngine","Query:",rt(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Vt()<=b.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",rt(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Re(n))):g.resolve())}ji(e,n){if(Di(n))return g.resolve(null);let r=Re(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fs(n,null,"F"),r=Re(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const i=P(...o);return this.zi.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,i,l.readTime)?this.ji(e,fs(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return Di(n)||s.isEqual(R.min())?g.resolve(null):this.zi.getDocuments(e,r).next(o=>{const i=this.Zi(n,o);return this.Xi(n,i,r,s)?g.resolve(null):(Vt()<=b.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rt(n)),this.es(e,i,n,Ld(s,-1)).next(a=>a))})}Zi(e,n){let r=new se(Ll(e));return n.forEach((s,o)=>{vr(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ji(e,n,r){return Vt()<=b.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",rt(n)),this.zi.getDocumentsMatchingQuery(e,n,Fe.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(i=>{o=o.insert(i.key,i)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new j(D),this.rs=new xt(o=>co(o),uo),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function nf(t,e,n,r){return new tf(t,e,n,r)}async function rc(t,e){const n=V(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const i=[],a=[];let l=P();for(const c of s){i.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:i,addedBatchIds:a}))})})}function sc(t){const e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function rf(t,e){const n=V(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const i=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const m=s.get(d);if(!m)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,d)));let f=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ue.EMPTY_BYTE_STRING,R.min()).withLastLimboFreeSnapshotVersion(R.min()):h.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(h.resumeToken,r)),s=s.insert(d,f),function(T,x,O){return T.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,f,h)&&a.push(n.Qr.updateTargetData(o,f))});let l=$e(),c=P();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(sf(o,i,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(R.min())){const h=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return g.waitFor(a).next(()=>i.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.ns=s,o))}function sf(t,e,n){let r=P(),s=P();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let i=$e();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(R.min())?(e.removeEntry(a,l.readTime),i=i.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),i=i.insert(a,l)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:i,ls:s}})}function of(t,e){const n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(o=>o?(s=o,g.resolve(s)):n.Qr.allocateTargetId(r).next(i=>(s=new Le(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Es(t,e,n){const r=V(t),s=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!fn(i))throw i;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function zi(t,e,n){const r=V(t);let s=R.min(),o=P();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,c,h){const d=V(l),m=d.rs.get(h);return m!==void 0?g.resolve(d.ns.get(m)):d.Qr.getTargetData(c,h)}(r,i,Re(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(i,a.targetId).next(l=>{o=l})}).next(()=>r.ts.getDocumentsMatchingQuery(i,e,n?s:R.min(),n?o:P())).next(a=>(af(r,om(e),a),{documents:a,hs:o})))}function af(t,e,n){let r=t.ss.get(e)||R.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}class Hi{constructor(){this.activeTargetIds=hm()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lf{constructor(){this.no=new Hi,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Hi,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cn=null;function zr(){return Cn===null?Cn=function(){return 268435456+Math.round(2147483648*Math.random())}():Cn++,"0x"+Cn.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe="WebChannelConnection";class df extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get wo(){return!1}So(n,r,s,o,i){const a=zr(),l=this.bo(n,r.toUriEncodedString());E("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,i),this.Co(n,l,c,s).then(h=>(E("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw en("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}vo(n,r,s,o,i,a){return this.So(n,r,s,o,i)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+At}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,i)=>n[i]=o),s&&s.headers.forEach((o,i)=>n[i]=o)}bo(n,r){const s=uf[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const o=zr();return new Promise((i,a)=>{const l=new Id;l.setWithCredentials(!0),l.listenOnce(Ad.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case $r.NO_ERROR:const h=l.getResponseJson();E(oe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),i(h);break;case $r.TIMEOUT:E(oe,`RPC '${e}' ${o} timed out`),a(new w(_.DEADLINE_EXCEEDED,"Request time out"));break;case $r.HTTP_ERROR:const d=l.getStatus();if(E(oe,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const f=m==null?void 0:m.error;if(f&&f.status&&f.message){const y=function(x){const O=x.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(O)>=0?O:_.UNKNOWN}(f.status);a(new w(y,f.message))}else a(new w(_.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new w(_.UNAVAILABLE,"Connection failed."));break;default:C()}}finally{E(oe,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(s);E(oe,`RPC '${e}' ${o} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=zr(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=wd(),a=Td(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=o.join("");E(oe,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=i.createWebChannel(h,l);let m=!1,f=!1;const y=new hf({lo:x=>{f?E(oe,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(E(oe,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),E(oe,`RPC '${e}' stream ${s} sending:`,x),d.send(x))},ho:()=>d.close()}),T=(x,O,$)=>{x.listen(O,N=>{try{$(N)}catch(de){setTimeout(()=>{throw de},0)}})};return T(d,xn.EventType.OPEN,()=>{f||E(oe,`RPC '${e}' stream ${s} transport opened.`)}),T(d,xn.EventType.CLOSE,()=>{f||(f=!0,E(oe,`RPC '${e}' stream ${s} transport closed`),y.Vo())}),T(d,xn.EventType.ERROR,x=>{f||(f=!0,en(oe,`RPC '${e}' stream ${s} transport errored:`,x),y.Vo(new w(_.UNAVAILABLE,"The operation could not be completed")))}),T(d,xn.EventType.MESSAGE,x=>{var O;if(!f){const $=x.data[0];W(!!$);const N=$,de=N.error||((O=N[0])===null||O===void 0?void 0:O.error);if(de){E(oe,`RPC '${e}' stream ${s} received error:`,de);const M=de.status;let z=function(B){const ee=G[B];if(ee!==void 0)return Gl(ee)}(M),L=de.message;z===void 0&&(z=_.INTERNAL,L="Unknown error status: "+M+" with message "+de.message),f=!0,y.Vo(new w(z,L)),d.close()}else E(oe,`RPC '${e}' stream ${s} received:`,$),y.mo($)}}),T(a,xd.STAT_EVENT,x=>{x.stat===wi.PROXY?E(oe,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===wi.NOPROXY&&E(oe,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}}function Hr(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t){return new Sm(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r=1e3,s=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,n-r);s>0&&E("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n,r,s,o,i,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new oc(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===_.RESOURCE_EXHAUSTED?(Se(n.toString()),Se("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===_.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new w(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ff extends mf{constructor(e,n,r,s,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=Pm(this.serializer,e),r=function(o){if(!("targetChange"in o))return R.min();const i=o.targetChange;return i.targetIds&&i.targetIds.length?R.min():i.readTime?ct(i.readTime):R.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=ji(this.serializer),n.addTarget=function(o,i){let a;const l=i.target;if(a=ds(l)?{documents:Vm(o,l)}:{query:Nm(o,l).ut},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=Wl(o,i.resumeToken);const c=_s(o,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo(R.min())>0){a.readTime=ys(o,i.snapshotVersion.toTimestamp());const c=_s(o,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=km(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=ji(this.serializer),n.removeTarget=e,this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new w(_.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,i])=>this.connection.So(e,vs(n,r),s,o,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(_.UNKNOWN,o.toString())})}vo(e,n,r,s,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.vo(e,vs(n,r),s,i,a,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new w(_.UNKNOWN,i.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class gf{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Se(n),this.g_=!1):E("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(i=>{r.enqueueAndForget(async()=>{vn(this)&&(E("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=V(l);c.v_.add(4),await yn(c),c.x_.set("Unknown"),c.v_.delete(4),await xr(c)}(this))})}),this.x_=new gf(r,s)}}async function xr(t){if(vn(t))for(const e of t.F_)await e(!0)}async function yn(t){for(const e of t.F_)await e(!1)}function ic(t,e){const n=V(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),wo(n)?Eo(n):It(n).Jo()&&vo(n,e))}function ac(t,e){const n=V(t),r=It(n);n.C_.delete(e),r.Jo()&&lc(n,e),n.C_.size===0&&(r.Jo()?r.Xo():vn(n)&&n.x_.set("Unknown"))}function vo(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(R.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}It(t).c_(e)}function lc(t,e){t.O_.Oe(e),It(t).l_(e)}function Eo(t){t.O_=new xm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),It(t).start(),t.x_.p_()}function wo(t){return vn(t)&&!It(t).Ho()&&t.C_.size>0}function vn(t){return V(t).v_.size===0}function cc(t){t.O_=void 0}async function yf(t){t.C_.forEach((e,n)=>{vo(t,e)})}async function vf(t,e){cc(t),wo(t)?(t.x_.S_(e),Eo(t)):t.x_.set("Unknown")}async function Ef(t,e,n){if(t.x_.set("Online"),e instanceof Ql&&e.state===2&&e.cause)try{await async function(s,o){const i=o.cause;for(const a of o.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,i),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ki(t,r)}else if(e instanceof bn?t.O_.$e(e):e instanceof Kl?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(R.min()))try{const r=await sc(t.localStore);n.compareTo(r)>=0&&await function(o,i){const a=o.O_.it(i);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.C_.get(c);h&&o.C_.set(c,h.withResumeToken(l.resumeToken,i))}}),a.targetMismatches.forEach((l,c)=>{const h=o.C_.get(l);if(!h)return;o.C_.set(l,h.withResumeToken(ue.EMPTY_BYTE_STRING,h.snapshotVersion)),lc(o,l);const d=new Le(h.target,l,c,h.sequenceNumber);vo(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){E("RemoteStore","Failed to raise snapshot:",r),await Ki(t,r)}}async function Ki(t,e,n){if(!fn(e))throw e;t.v_.add(1),await yn(t),t.x_.set("Offline"),n||(n=()=>sc(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{E("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await xr(t)})}async function Qi(t,e){const n=V(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");const r=vn(n);n.v_.add(3),await yn(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await xr(n)}async function wf(t,e){const n=V(t);e?(n.v_.delete(2),await xr(n)):e||(n.v_.add(2),await yn(n),n.x_.set("Unknown"))}function It(t){return t.N_||(t.N_=function(n,r,s){const o=V(n);return o.R_(),new ff(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Po:yf.bind(null,t),To:vf.bind(null,t),u_:Ef.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),wo(t)?Eo(t):t.x_.set("Unknown")):(await t.N_.stop(),cc(t))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ve,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const i=Date.now()+r,a=new To(e,n,i,s,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uc(t,e){if(Se("AsyncQueue",`${e}: ${t}`),fn(t))return new w(_.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e?(n,r)=>e(n,r)||A.comparator(n.key,r.key):(n,r)=>A.comparator(n.key,r.key),this.keyedMap=kt(),this.sortedSet=new j(this.comparator)}static emptySet(e){return new ut(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ut;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.L_=new j(A.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):C():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _t{constructor(e,n,r,s,o,i,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,o){const i=[];return n.forEach(a=>{i.push({type:0,doc:a})}),new _t(e,n,ut.emptySet(n),i,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this.q_=void 0,this.Q_=[]}}class Af{constructor(){this.queries=new xt(e=>Ol(e),yr),this.onlineState="Unknown",this.K_=new Set}}async function hc(t,e){const n=V(t),r=e.query;let s=!1,o=n.queries.get(r);if(o||(s=!0,o=new Tf),s)try{o.q_=await n.onListen(r)}catch(i){const a=uc(i,`Initialization of query '${rt(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&Ao(n)}async function dc(t,e){const n=V(t),r=e.query;let s=!1;const o=n.queries.get(r);if(o){const i=o.Q_.indexOf(e);i>=0&&(o.Q_.splice(i,1),s=o.Q_.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function xf(t,e){const n=V(t);let r=!1;for(const s of e){const o=s.query,i=n.queries.get(o);if(i){for(const a of i.Q_)a.W_(s)&&(r=!0);i.q_=s}}r&&Ao(n)}function If(t,e,n){const r=V(t),s=r.queries.get(e);if(s)for(const o of s.Q_)o.onError(n);r.queries.delete(e)}function Ao(t){t.K_.forEach(e=>{e.next()})}class mc{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _t(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=_t.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this.key=e}}class pc{constructor(e){this.key=e}}class Rf{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=P(),this.mutatedKeys=P(),this.ua=Ll(e),this.ca=new ut(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new Wi,s=n?n.ca:this.ca;let o=n?n.mutatedKeys:this.mutatedKeys,i=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const m=s.get(h),f=vr(this.query,d)?d:null,y=!!m&&this.mutatedKeys.has(m.key),T=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let x=!1;m&&f?m.data.isEqual(f.data)?y!==T&&(r.track({type:3,doc:f}),x=!0):this.Ia(m,f)||(r.track({type:2,doc:f}),x=!0,(l&&this.ua(f,l)>0||c&&this.ua(f,c)<0)&&(a=!0)):!m&&f?(r.track({type:0,doc:f}),x=!0):m&&!f&&(r.track({type:1,doc:m}),x=!0,(l||c)&&(a=!0)),x&&(f?(i=i.add(f),o=T?o.add(h):o.delete(h)):(i=i.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const h=this.query.limitType==="F"?i.last():i.first();i=i.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ca:i,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const i=e.Pa.k_();i.sort((h,d)=>function(f,y){const T=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return C()}};return T(f)-T(y)}(h.type,d.type)||this.ua(h.doc,d.doc)),this.Ta(r),s=s!=null&&s;const a=n&&!s?this.Ea():[],l=this.aa.size===0&&this.current&&!s?1:0,c=l!==this._a;return this._a=l,i.length!==0||c?{snapshot:new _t(this.query,e.ca,o,i,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Wi,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=P(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new pc(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new fc(r))}),n}Ra(e){this.oa=e.hs,this.aa=P();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return _t.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class Cf{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Sf{constructor(e){this.key=e,this.ma=!1}}class bf{constructor(e,n,r,s,o,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.fa={},this.ga=new xt(a=>Ol(a),yr),this.pa=new Map,this.ya=new Set,this.wa=new j(A.comparator),this.Sa=new Map,this.ba=new go,this.Da={},this.Ca=new Map,this.va=gt.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function Pf(t,e){const n=Mf(t);let r,s;const o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),s=o.view.Va();else{const i=await of(n.localStore,Re(e)),a=n.sharedClientState.addLocalQueryTarget(i.targetId);r=i.targetId,s=await Vf(n,e,r,a==="current",i.resumeToken),n.isPrimaryClient&&ic(n.remoteStore,i)}return s}async function Vf(t,e,n,r,s){t.Ma=(d,m,f)=>async function(T,x,O,$){let N=x.view.ha(O);N.Xi&&(N=await zi(T.localStore,x.query,!1).then(({documents:L})=>x.view.ha(L,N)));const de=$&&$.targetChanges.get(x.targetId),M=$&&$.targetMismatches.get(x.targetId)!=null,z=x.view.applyChanges(N,T.isPrimaryClient,de,M);return Xi(T,x.targetId,z.da),z.snapshot}(t,d,m,f);const o=await zi(t.localStore,e,!0),i=new Rf(e,o.hs),a=i.ha(o.documents),l=_n.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=i.applyChanges(a,t.isPrimaryClient,l);Xi(t,n,c.da);const h=new Cf(e,n,i);return t.ga.set(e,h),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}async function Nf(t,e){const n=V(t),r=n.ga.get(e),s=n.pa.get(r.targetId);if(s.length>1)return n.pa.set(r.targetId,s.filter(o=>!yr(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Es(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ac(n.remoteStore,r.targetId),ws(n,r.targetId)}).catch(no)):(ws(n,r.targetId),await Es(n.localStore,r.targetId,!0))}async function gc(t,e){const n=V(t);try{const r=await rf(n.localStore,e);e.targetChanges.forEach((s,o)=>{const i=n.Sa.get(o);i&&(W(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.ma=!0:s.modifiedDocuments.size>0?W(i.ma):s.removedDocuments.size>0&&(W(i.ma),i.ma=!1))}),await yc(n,r,e)}catch(r){await no(r)}}function Yi(t,e,n){const r=V(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((o,i)=>{const a=i.view.U_(e);a.snapshot&&s.push(a.snapshot)}),function(i,a){const l=V(i);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const m of d.Q_)m.U_(a)&&(c=!0)}),c&&Ao(l)}(r.eventManager,e),s.length&&r.fa.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Df(t,e,n){const r=V(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Sa.get(e),o=s&&s.key;if(o){let i=new j(A.comparator);i=i.insert(o,ie.newNoDocument(o,R.min()));const a=P().add(o),l=new Tr(R.min(),new Map,new j(D),i,a);await gc(r,l),r.wa=r.wa.remove(o),r.Sa.delete(e),xo(r)}else await Es(r.localStore,e,!1).then(()=>ws(r,e,n)).catch(no)}function ws(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||_c(t,r)})}function _c(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(ac(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),xo(t))}function Xi(t,e,n){for(const r of n)r instanceof fc?(t.ba.addReference(r.key,e),kf(t,r)):r instanceof pc?(E("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||_c(t,r.key)):C()}function kf(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ya.add(r),xo(t))}function xo(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new A(F.fromString(e)),r=t.va.next();t.Sa.set(r,new Sf(n)),t.wa=t.wa.insert(n,r),ic(t.remoteStore,new Le(Re(ho(n.path)),r,"TargetPurposeLimboResolution",oo._e))}}async function yc(t,e,n){const r=V(t),s=[],o=[],i=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{i.push(r.Ma(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const h=yo.Ki(l.targetId,c);o.push(h)}}))}),await Promise.all(i),r.fa.u_(s),await async function(l,c){const h=V(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>g.forEach(c,m=>g.forEach(m.qi,f=>h.persistence.referenceDelegate.addReference(d,m.targetId,f)).next(()=>g.forEach(m.Qi,f=>h.persistence.referenceDelegate.removeReference(d,m.targetId,f)))))}catch(d){if(!fn(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const f=h.ns.get(m),y=f.snapshotVersion,T=f.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(m,T)}}}(r.localStore,o))}async function Of(t,e){const n=V(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());const r=await rc(n.localStore,e);n.currentUser=e,function(o,i){o.Ca.forEach(a=>{a.forEach(l=>{l.reject(new w(_.CANCELLED,i))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yc(n,r.us)}}function Lf(t,e){const n=V(t),r=n.Sa.get(e);if(r&&r.ma)return P().add(r.key);{let s=P();const o=n.pa.get(e);if(!o)return s;for(const i of o){const a=n.ga.get(i);s=s.unionWith(a.view.la)}return s}}function Mf(t){const e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Df.bind(null,e),e.fa.u_=xf.bind(null,e.eventManager),e.fa.xa=If.bind(null,e.eventManager),e}class Ji{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ar(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return nf(this.persistence,new ef,e.initialUser,this.serializer)}createPersistence(e){return new Xm(_o.Hr,this.serializer)}createSharedClientState(e){return new lf}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class qf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yi(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Of.bind(null,this.syncEngine),await wf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Af}()}createDatastore(e){const n=Ar(e.databaseInfo.databaseId),r=function(o){return new df(o)}(e.databaseInfo);return function(o,i,a,l){return new pf(o,i,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,i,a){return new _f(r,s,o,i,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Yi(this.syncEngine,n,0),function(){return Gi.D()?new Gi:new cf}())}createSyncEngine(e,n){return function(s,o,i,a,l,c,h){const d=new bf(s,o,i,a,l,c);return h&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=V(r);E("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await yn(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Se("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=me.UNAUTHENTICATED,this.clientId=Il.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{E("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(E("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ve;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=uc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gr(t,e){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rc(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zi(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $f(t);E("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Qi(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Qi(e.remoteStore,s)),t._onlineComponents=e}function Bf(t){return t.name==="FirebaseError"?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function $f(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gr(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Bf(n))throw n;en("Error using user provided cache. Falling back to memory cache: "+n),await Gr(t,new Ji)}}else E("FirestoreClient","Using default OfflineComponentProvider"),await Gr(t,new Ji);return t._offlineComponents}async function Uf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),await Zi(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),await Zi(t,new qf))),t._onlineComponents}async function Ec(t){const e=await Uf(t),n=e.eventManager;return n.onListen=Pf.bind(null,e.syncEngine),n.onUnlisten=Nf.bind(null,e.syncEngine),n}function jf(t,e,n={}){const r=new Ve;return t.asyncQueue.enqueueAndForget(async()=>function(o,i,a,l,c){const h=new vc({next:m=>{i.enqueueAndForget(()=>dc(o,d));const f=m.docs.has(a);!f&&m.fromCache?c.reject(new w(_.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&m.fromCache&&l&&l.source==="server"?c.reject(new w(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new mc(ho(a.path),h,{includeMetadataChanges:!0,Z_:!0});return hc(o,d)}(await Ec(t),t.asyncQueue,e,n,r)),r.promise}function zf(t,e,n={}){const r=new Ve;return t.asyncQueue.enqueueAndForget(async()=>function(o,i,a,l,c){const h=new vc({next:m=>{i.enqueueAndForget(()=>dc(o,d)),m.fromCache&&l.source==="server"?c.reject(new w(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new mc(a,h,{includeMetadataChanges:!0,Z_:!0});return hc(o,d)}(await Ec(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t,e,n){if(!n)throw new w(_.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Hf(t,e,n,r){if(e===!0&&r===!0)throw new w(_.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ta(t){if(!A.isDocumentKey(t))throw new w(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function na(t){if(A.isDocumentKey(t))throw new w(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ir(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":C()}function Jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ir(t);throw new w(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wc((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(_.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(_.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(_.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Io{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ra({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ra(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Sd;switch(r.type){case"firstParty":return new Vd(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ea.get(n);r&&(E("ComponentProvider","Removing Datastore"),ea.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rt(this.firestore,e,this._query)}}class fe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qe(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fe(this.firestore,e,this._key)}}class qe extends Rt{constructor(e,n,r){super(e,n,ho(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fe(this.firestore,null,new A(e))}withConverter(e){return new qe(this.firestore,e,this._path)}}function Gf(t,e,...n){if(t=zt(t),Tc("collection","path",e),t instanceof Io){const r=F.fromString(e,...n);return na(r),new qe(t,null,r)}{if(!(t instanceof fe||t instanceof qe))throw new w(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(F.fromString(e,...n));return na(r),new qe(t.firestore,null,r)}}function Kf(t,e,...n){if(t=zt(t),arguments.length===1&&(e=Il.newId()),Tc("doc","path",e),t instanceof Io){const r=F.fromString(e,...n);return ta(r),new fe(t,null,new A(r))}{if(!(t instanceof fe||t instanceof qe))throw new w(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(F.fromString(e,...n));return ta(r),new fe(t.firestore,t instanceof qe?t.converter:null,new A(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new oc(this,"async_queue_retry"),this._u=()=>{const n=Hr();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Hr();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=Hr();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Ve;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!fn(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const s=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(r);throw Se("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const s=To.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(s),s}au(){this.ru&&C()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}class Ro extends Io{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new Qf}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xc(this),this._firestoreClient.terminate()}}function Ac(t){return t._firestoreClient||xc(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xc(t){var e,n,r;const s=t._freezeSettings(),o=function(a,l,c,h){return new Hd(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wc(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Ff(t._authCredentials,t._appCheckCredentials,t._queue,o),((n=s.localCache)===null||n===void 0?void 0:n._offlineComponentProvider)&&((r=s.localCache)===null||r===void 0?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yt(ue.fromBase64String(e))}catch(n){throw new w(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yt(ue.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ae(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return D(this._lat,e._lat)||D(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=/^__.*__$/;function Cc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw C()}}class So{constructor(e,n,r,s,o,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new So(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Au({path:r,Vu:!1});return s.mu(e),s}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Ts(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(Cc(this.du)&&Wf.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Yf{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ar(e)}Su(e,n,r,s=!1){return new So({du:e,methodName:n,wu:r,path:ae.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xf(t){const e=t._freezeSettings(),n=Ar(t._databaseId);return new Yf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Jf(t,e,n,r=!1){return bo(n,t.Su(r?4:3,e))}function bo(t,e){if(Sc(t=zt(t)))return ep("Unsupported field value:",e,t),Zf(t,e);if(t instanceof Rc)return function(r,s){if(!Cc(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,s){const o=[];let i=0;for(const a of r){let l=bo(a,s.gu(i));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),i++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dm(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=X.fromDate(r);return{timestampValue:ys(s.serializer,o)}}if(r instanceof X){const o=new X(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ys(s.serializer,o)}}if(r instanceof Co)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yt)return{bytesValue:Wl(s.serializer,r._byteString)};if(r instanceof fe){const o=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(o))throw s.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yl(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${Ir(r)}`)}(t,e)}function Zf(t,e){const n={};return Rl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pn(t,(r,s)=>{const o=bo(s,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Sc(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof X||t instanceof Co||t instanceof yt||t instanceof fe||t instanceof Rc)}function ep(t,e,n){if(!Sc(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ir(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}const tp=new RegExp("[~\\*/\\[\\]]");function np(t,e,n){if(e.search(tp)>=0)throw Ts(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ic(...e.split("."))._internalPath}catch{throw Ts(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ts(t,e,n,r,s){const o=r&&!r.isEmpty(),i=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||i)&&(l+=" (found",o&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new w(_.INVALID_ARGUMENT,a+t+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rp extends bc{data(){return super.data()}}function Pc(t,e){return typeof e=="string"?np(t,e):e instanceof Ic?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Po{}class op extends Po{}function ip(t,e,...n){let r=[];e instanceof Po&&r.push(e),r=r.concat(n),function(o){const i=o.filter(l=>l instanceof No).length,a=o.filter(l=>l instanceof Vo).length;if(i>1||i>0&&a>0)throw new w(_.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Vo extends op{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Vo(e,n,r)}_apply(e){const n=this._parse(e);return Vc(e._query,n),new Rt(e.firestore,e.converter,ms(e._query,n))}_parse(e){const n=Xf(e.firestore);return function(o,i,a,l,c,h,d){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new w(_.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){oa(d,h);const f=[];for(const y of d)f.push(sa(l,o,y));m={arrayValue:{values:f}}}else m=sa(l,o,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||oa(d,h),m=Jf(a,i,d,h==="in"||h==="not-in");return Q.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class No extends Po{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new No(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ee.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let i=s;const a=o.getFlattenedFilters();for(const l of a)Vc(i,l),i=ms(i,l)}(e._query,n),new Rt(e.firestore,e.converter,ms(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function sa(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new w(_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kl(e)&&n.indexOf("/")!==-1)throw new w(_.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(F.fromString(n));if(!A.isDocumentKey(r))throw new w(_.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ci(t,new A(r))}if(n instanceof fe)return Ci(t,n._key);throw new w(_.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ir(n)}.`)}function oa(t,e){if(!Array.isArray(t)||t.length===0)throw new w(_.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vc(t,e){const n=function(s,o){for(const i of s)for(const a of i.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(_.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(_.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ap{convertValue(e,n="none"){switch(et(e)){case 0:return null;case 1:return e.booleanValue;case 2:return K(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ze(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw C()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pn(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Co(K(e.latitude),K(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ao(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nn(e));default:return null}}convertTimestamp(e){const n=Be(e);return new X(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=F.fromString(e);W(nc(r));const s=new rn(r.get(1),r.get(3)),o=new A(r.popFirst(5));return s.isEqual(n)||Se(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nc extends bc{constructor(e,n,r,s,o,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pn extends Nc{data(e={}){return super.data(e)}}class lp{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Lt(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pn(this._firestore,this._userDataWriter,r.key,r,new Lt(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(a=>{const l=new Pn(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Lt(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Pn(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Lt(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),h=i.indexOf(a.doc.key)),{type:cp(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return C()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){t=Jn(t,fe);const e=Jn(t.firestore,Ro);return jf(Ac(e),t._key).then(n=>dp(e,t,n))}class Dc extends ap{constructor(e){super(),this.firestore=e}convertBytes(e){return new yt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fe(this.firestore,null,n)}}function hp(t){t=Jn(t,Rt);const e=Jn(t.firestore,Ro),n=Ac(e),r=new Dc(e);return sp(t._query),zf(n,t._query).then(s=>new lp(e,r,t,s))}function dp(t,e,n){const r=n.docs.get(e._key),s=new Dc(t);return new Nc(t,s,e._key,r,new Lt(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){At=s})(hh),Bn(new Fn("firestore",(r,{instanceIdentifier:s,options:o})=>{const i=r.getProvider("app").getImmediate(),a=new Ro(new bd(r.getProvider("auth-internal")),new Dd(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new w(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rn(c.options.projectId,h)}(i,s),i);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Mt(Ti,"4.4.1",e),Mt(Ti,"4.4.1","esm2017")})();const Do={__name:"BlogHome",__ssrInlineRender:!0,setup(t){const e=u.ref([]),n=u.ref([]);u.ref([{id:"espelho",title:"Praia do Espelho: Um Espet\xE1culo da Natureza",imageURL:"espelho-blog-hero.jpg",excerpt:"Explore \xE1guas cristalinas e areias reluzentes. Um verdadeiro para\xEDso que reflete a serenidade do c\xE9u.",content:"<p>A Praia do Espelho, localizada na costa sul da Bahia, \xE9 uma verdadeira joia escondida, um recanto de beleza natural que atrai visitantes de todos os cantos em busca de suas \xE1guas cristalinas e areias reluzentes. Conhecida por ser um dos destinos mais cobi\xE7ados do Brasil, a Praia do Espelho \xE9 o cen\xE1rio perfeito para quem deseja relaxar e se conectar com a natureza, oferecendo uma experi\xEAncia inigual\xE1vel de tranquilidade e beleza.</p><img src='url_to_image_1.jpg' alt='Praia do Espelho' style='float:left;width:50%;margin-right:20px;'><p>Ao planejar sua viagem para este para\xEDso, considere a import\xE2ncia de um passeio bem organizado e um servi\xE7o de traslado confi\xE1vel. Afinal, o conforto e a seguran\xE7a durante o trajeto s\xE3o essenciais para aproveitar ao m\xE1ximo o que a Praia do Espelho tem a oferecer. Com op\xE7\xF5es variadas, voc\xEA pode escolher o passeio que mais se adequa ao seu estilo, seja para explorar as belezas naturais de forma tranquila ou para adicionar um toque de aventura \xE0s suas f\xE9rias.</p><img src='url_to_image_2.jpg' alt='Atividades na Praia do Espelho' style='float:right;width:50%;margin-left:20px;'><p>Ao chegar \xE0 Praia do Espelho, prepare-se para ser recebido por um cen\xE1rio de tirar o f\xF4lego. As \xE1guas de tons azul-turquesa formam uma paleta de cores fascinante com o c\xE9u, enquanto a areia branca e reluzente completa o quadro, refletindo a luz do sol de forma m\xE1gica. N\xE3o \xE9 \xE0 toa que a praia recebeu esse nome: a natureza aqui parece se contemplar, criando um espet\xE1culo de reflexos que encanta todos os visitantes.</p><p>Para os amantes de atividades ao ar livre, a Praia do Espelho oferece uma variedade de op\xE7\xF5es. Desde passeios de barco, mergulho entre os recifes de corais, at\xE9 caminhadas ecol\xF3gicas pelas trilhas que revelam a flora e fauna locais, h\xE1 sempre uma forma especial de se conectar com este para\xEDso. Al\xE9m disso, a regi\xE3o conta com uma excelente infraestrutura de restaurantes e acomoda\xE7\xF5es, garantindo que sua estadia seja t\xE3o confort\xE1vel quanto memor\xE1vel.</p><p>Por fim, ao escolher a Praia do Espelho como seu pr\xF3ximo destino, lembre-se de que um passeio bem planejado \xE9 a chave para uma experi\xEAncia inesquec\xEDvel. Com servi\xE7os especializados em passeios e traslados, voc\xEA poder\xE1 desfrutar de cada momento sem preocupa\xE7\xF5es, mergulhando de cabe\xE7a na tranquilidade e na beleza que s\xF3 este lugar pode oferecer. Reserve j\xE1 o seu passeio e prepare-se para viver momentos \xFAnicos na Praia do Espelho, um verdadeiro espet\xE1culo da natureza.</p>",containerStyle:"md:pr-6",imageStyle:" md:h-[600px]",titleStyle:"md:text-5xl",excerptStyle:"md:text-lg"},{id:"caraiva",title:"Cara\xEDva: Encanto R\xFAstico \xE0 Beira-Mar",imageURL:"caraiva-blog-hero.jpg",excerpt:"Descubra a simplicidade encantadora de Cara\xEDva, onde ruas de areia e casas coloridas desenham o cen\xE1rio.",content:"<p>Cara\xEDva \xE9 um verdadeiro ref\xFAgio para quem busca paz e contato com a natureza. Localizada no sul da Bahia, esta vila encantadora \xE9 rodeada por um cen\xE1rio exuberante, onde o rio encontra o mar, e as ruas de areia se alinham com casas coloridas e \xE1rvores frondosas. A singularidade de Cara\xEDva oferece uma experi\xEAncia aut\xEAntica para os viajantes, tornando-a um destino imperd\xEDvel para quem deseja se desligar do mundo moderno e mergulhar em uma atmosfera tranquila e acolhedora.</p><img src='url_to_image_caraiva_1.jpg' alt='Vista de Cara\xEDva' style='float:left;width:50%;margin-right:20px;'><p>Organizar sua viagem para Cara\xEDva significa planejar uma fuga memor\xE1vel do cotidiano. Aqui, a oferta de passeios \xE9 variada e promete encantar todos os tipos de aventureiros. Desde passeios de barco pelo rio Cara\xEDva, explorando manguezais e apreciando o p\xF4r do sol, at\xE9 caminhadas pelas praias deslumbrantes e trilhas que revelam a rica biodiversidade da regi\xE3o. Com servi\xE7os especializados em traslados e passeios, os visitantes podem explorar o melhor de Cara\xEDva com conforto e seguran\xE7a.</p><img src='url_to_image_caraiva_2.jpg' alt='Passeio em Cara\xEDva' style='float:right;width:50%;margin-left:20px;'><p>A vida noturna de Cara\xEDva \xE9 t\xE3o cativante quanto seus dias ensolarados. As ruas se iluminam com a energia vibrante dos restaurantes, bares e festas que exibem a rica cultura e a hospitalidade local. A culin\xE1ria \xE9 um espet\xE1culo \xE0 parte, com pratos que trazem o sabor fresco do mar e ingredientes locais, prometendo uma verdadeira jornada gastron\xF4mica para os visitantes.</p><p>O servi\xE7o de traslado em Cara\xEDva \xE9 pensado para garantir que sua viagem seja t\xE3o relaxante quanto o destino em si. Os visitantes podem contar com um transporte confort\xE1vel e seguro, facilitando o acesso \xE0s diversas belezas que a vila tem a oferecer. Seja para chegar \xE0 vila ou para se deslocar durante sua estadia, os servi\xE7os de traslado proporcionam a comodidade e a efici\xEAncia necess\xE1rias para uma viagem sem preocupa\xE7\xF5es.</p><p>Reservar uma viagem para Cara\xEDva \xE9 garantir um lugar no para\xEDso. As belezas naturais, a cultura vibrante e a tranquilidade do lugar criam o cen\xE1rio perfeito para uma escapada inesquec\xEDvel. N\xE3o perca a chance de conhecer um dos destinos mais encantadores do Brasil. Entre em contato agora mesmo e planeje sua aventura em Cara\xEDva, onde cada momento promete ser uma p\xE1gina de um livro de mem\xF3rias preciosas.</p>",containerStyle:"md:pb-3",imageStyle:"md:h-[288px]",titleStyle:"md:text-2xl",excerptStyle:"md:text-md"},{id:"trancoso",title:"Trancoso: Beleza e Charme Hist\xF3rico",imageURL:"quadrado-blog-hero.jpg",excerpt:"Mergulhe na eleg\xE2ncia de Trancoso, um lugar onde praias deslumbrantes encontram um rico patrim\xF4nio cultural.",containerStyle:"md:pt-3",imageStyle:"md:h-[288px]",titleStyle:"md:text-2xl",excerptStyle:"md:text-md"}]),u.ref([{id:"arraial-dajuda",title:"Descubra Arraial d'Ajuda: Um Para\xEDso Escondido",imageURL:"arraial-blog.jpeg",excerpt:"Arraial d'Ajuda: praias deslumbrantes, cultura rica e natureza vibrante.",content:""},{id:"passarela-do-alcool",title:"Passarela do \xC1lcool: O Cora\xE7\xE3o Noturno de Porto Seguro",imageURL:"passarela-blog.jpeg",excerpt:"A alma das noites de Porto Seguro, com bares, artesanato e muita vida.",content:""},{id:"toa-toa",title:"Toa Toa: Divers\xE3o e M\xFAsica \xE0 Beira-Mar",imageURL:"toa-toa-blog.jpeg",excerpt:"Divers\xE3o garantida com m\xFAsica, dan\xE7a e gastronomia \xE0 beira-mar.",content:""},{id:"axe-moi",title:"Ax\xE9 Moi: O Palco da Alegria em Porto Seguro",imageURL:"axe-blog.jpeg",excerpt:"Ax\xE9 Moi: o epicentro de festas, m\xFAsica ao vivo e cultura bahiana.",content:""}]),u.onBeforeMount(()=>{e.value=[],n.value=[];const i=Gf(Ps,"blog"),a=ip(i);hp(a).then(l=>{l.forEach(c=>{c.data().featured?e.value.push({id:c.id,...c.data()}):n.value.push({id:c.id,...c.data()})})}),ge.useMeta({title:"Ess\xEAncia BAHIANA | Blog",meta:{description:{name:"description",content:"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:"Porto Seguro, Pontos tur\xEDsticos em Porto Seguro, Passeios em Porto Seguro, Traslados em Porto Seguro, Turismo na Bahia, Viagens pela Bahia, Melhores experi\xEAncias em Porto Seguro, Roteiros de viagem em Porto Seguro, Atra\xE7\xF5es tur\xEDsticas na regi\xE3o, Servi\xE7o de transporte em Porto Seguro, Roteiro de viagem personalizado, Dicas de viagem para Porto Seguro, Destinos na Bahia, Planejamento de viagem, Experi\xEAncias memor\xE1veis na Bahia."},ogTitle:{property:"og:title",template(){return"Ess\xEAncia BAHIANA | Blog"}},ogDescription:{property:"og:description",template(){return"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"}},ogImage:{property:"og:image",template(){return"https://essenciabahiana.com.br/hero.jpg"}},twitterTitle:{property:"twitter:title",template(){return"Ess\xEAncia BAHIANA | Blog"}},twitterDescription:{property:"twitter:description",template(){return"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"}},twitterImage:{property:"twitter:image",template(){return"https://essenciabahiana.com.br/hero.jpg"}}}})});const r=u.ref("Ess\xEAncia"),s=u.ref("Bahiana"),o=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return(i,a,l,c)=>{const h=u.resolveComponent("q-page");a(p.ssrRenderComponent(h,u.mergeProps({class:"blog-home"},c),{default:u.withCtx((d,m,f,y)=>{if(m)m(`<main class="my-28 md:mt-48 md:mb-10 flex flex-col"${y}>`),e.value.length>0?m(p.ssrRenderComponent(Ln,{dataHero:e.value},null,f,y)):m("<!---->"),m(p.ssrRenderComponent(Ae,{dataAdSlot:"banner"},null,f,y)),m(`<div class="flex container mx-auto"${y}>`),n.value?(m(`<section class="w-full md:w-9/12"${y}><!--[-->`),p.ssrRenderList(n.value,T=>{m(p.ssrRenderComponent(Mn,{article:T,key:T.title},null,f,y))}),m("<!--]--></section>")):m("<!---->"),m(`<aside class="w-full md:w-3/12"${y}>`),m(p.ssrRenderComponent(Ae,{dataAdSlot:"side"},null,f,y)),m("</aside></div></main>"),m(p.ssrRenderComponent(Ce,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,f,y));else return[u.createVNode("main",{class:"my-28 md:mt-48 md:mb-10 flex flex-col"},[e.value.length>0?(u.openBlock(),u.createBlock(Ln,{key:0,dataHero:e.value},null,8,["dataHero"])):u.createCommentVNode("",!0),u.createVNode(Ae,{dataAdSlot:"banner"}),u.createVNode("div",{class:"flex container mx-auto"},[n.value?(u.openBlock(),u.createBlock("section",{key:0,class:"w-full md:w-9/12"},[(u.openBlock(!0),u.createBlock(u.Fragment,null,u.renderList(n.value,T=>(u.openBlock(),u.createBlock(Mn,{article:T,key:T.title},null,8,["article"]))),128))])):u.createCommentVNode("",!0),u.createVNode("aside",{class:"w-full md:w-3/12"},[u.createVNode(Ae,{dataAdSlot:"side"})])])]),u.createVNode(Ce,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},l))}}},ia=Do.setup;Do.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/BlogHome.vue"),ia?ia(t,e):void 0};var mp=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"}));const Zn={__name:"InstagramFeed",__ssrInlineRender:!0,props:{id:String},setup(t){const e=u.ref([]),n=u.ref([]);u.onMounted(async()=>{try{const o=Kr.doc(Ps,"configuration","instagramToken"),i=await Kr.getDoc(o);if(i.exists()){const l=i.data().token,h=await fetch(`https://graph.instagram.com/me/media?fields=id,caption,media_url&access_token=${l}&limit=${1}`);if(!h.ok){console.error(`Erro na API: ${h.status} ${h.statusText}`);const y=await h.json();console.error(y);return}const d=await h.json();n.value=d.data;const m=n.value.map(async y=>{const T=await r(y.media_url);return{...y,type:T}}),f=await Promise.all(m);e.value=f}else console.error("Documento do token n\xE3o encontrado.")}catch(o){console.error("Erro ao carregar o feed do Instagram ou ao acessar o Firestore:",o)}});async function r(o){return(await fetch(o,{method:"HEAD"})).headers.get("Content-Type")}function s(){const o="https://www.instagram.com/essencia.bahiana";window.open(o,"_blank")}return(o,i,a,l)=>{const c=u.resolveComponent("q-img");e.value.length>0?(i(`<div${p.ssrRenderAttrs(u.mergeProps({class:"mx-auto max-w-full p-5"},l))}><div class="grid grid-cols-1 gap-4"><p class="text-lg font-bold font-sans">Confira o post mais recente.</p>`),i(p.ssrRenderComponent(c,{class:"cursor-pointer",src:"/insta-logo-text.png",alt:"Logo instagram com texto.",onClick:s},null,a)),i("<!--[-->"),p.ssrRenderList(e.value,h=>{i('<div class="instagram-post flex flex-col h-auto"><div class="relative pb-1/1 min-h-[300px]">'),h.type&&h.type.startsWith("image")?i(`<img${p.ssrRenderAttr("src",h.media_url)}${p.ssrRenderAttr("alt",h.caption)} class="absolute object-cover w-full min-h-[200px] h-full rounded-lg">`):i("<!---->"),h.type&&h.type.startsWith("video")?i(`<video controls class="absolute object-cover w-full h-full min-h-[300px] rounded-lg"><source${p.ssrRenderAttr("src",h.media_url)}${p.ssrRenderAttr("type",h.type)}></video>`):i("<!---->"),i(`</div><p class="mt-2 text-sm text-gray-600">${p.ssrInterpolate(h.caption)}</p></div>`)}),i("<!--]--></div></div>")):i("<!---->")}}},aa=Zn.setup;Zn.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/InstagramFeed.vue"),aa?aa(t,e):void 0};const ko={__name:"BlogPage",__ssrInlineRender:!0,setup(t){const e=ht.useRoute(),n=u.ref("Ess\xEAncia"),r=u.ref("Bahiana"),s=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`),o=u.ref({}),i=u.ref("Page"),a=u.ref("Ess\xEAncia Bahiana Site"),l=u.ref(""),c=u.ref("hero.jpg");ge.useMeta(()=>({title:i.value,titleTemplate:d=>`Ess\xEAncia BAHIANA | Blog | ${d}`,meta:{description:{name:"description",content:a.value},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:l.value},ogTitle:{property:"og:title",template(){return`Ess\xEAncia BAHIANA | ${i.value}`}},ogDescription:{property:"og:description",template(){return a.value}},ogImage:{property:"og:image",template(){return`https://essenciabahiana.com.br/${c.value}`}},twitterTitle:{property:"twitter:title",template(){return`Ess\xEAncia BAHIANA | ${i.value}`}},twitterDescription:{property:"twitter:description",template(){return a.value}},twitterImage:{property:"twitter:image",template(){return`https://essenciabahiana.com.br/${c.value}`}}}}));function h(){const{category:d,id:m}=e.params,f=Kf(Ps,"blog",m);up(f).then(y=>{o.value={id:y.id,...y.data()},i.value=o.value.title,a.value=o.value.description,l.value=o.value.keywords,c.value=o.value.imageURL})}return u.onMounted(()=>{h()}),(d,m,f,y)=>{const T=u.resolveComponent("q-page"),x=u.resolveComponent("q-img"),O=u.resolveComponent("q-separator"),$=u.resolveComponent("q-breadcrumbs"),N=u.resolveComponent("q-breadcrumbs-el");m(p.ssrRenderComponent(T,u.mergeProps({class:""},y),{default:u.withCtx((de,M,z,L)=>{if(M)M(`<header class="max-w-[1000px] min-h-[400px] mx-auto mt-28 md:mt-44"${L}><figure${L}><div class="w-full"${L}>`),M(p.ssrRenderComponent(x,{class:"w-full max-h-[500px] object-cover",src:`/${o.value.imageURL}`,alt:o.value.title},null,z,L)),M(`</div><figcaption class="py-8 px-6 md:px-0 flex flex-col"${L}><h1 class="text-2xl md:text-5xl font-sans font-bold mb-6"${L}>${p.ssrInterpolate(o.value.title)}</h1><p class="text-2xl"${L}>${p.ssrInterpolate(o.value.excerpt)}</p><p class="ml-auto text-kg text-accent"${L}>Por Ess\xEAncia Bahiana</p></figcaption>`),M(p.ssrRenderComponent(O,{class:"max-w-[1000px] mx-auto mb-6"},null,z,L)),M(p.ssrRenderComponent($,null,{default:u.withCtx((ye,B,ee,H)=>{if(B)B(p.ssrRenderComponent(N,{label:"Home",to:"/"},null,ee,H)),B(p.ssrRenderComponent(N,{label:"Blog",to:"/blog"},null,ee,H)),B(p.ssrRenderComponent(N,{label:"O que fazer"},null,ee,H)),B(p.ssrRenderComponent(N,{label:o.value.title},null,ee,H));else return[u.createVNode(N,{label:"Home",to:"/"}),u.createVNode(N,{label:"Blog",to:"/blog"}),u.createVNode(N,{label:"O que fazer"}),u.createVNode(N,{label:o.value.title},null,8,["label"])]}),_:1},z,L)),M("</figure></header>"),M(p.ssrRenderComponent(Ae,{dataAdSlot:"banner"},null,z,L)),M(p.ssrRenderComponent(O,{class:"max-w-[1000px] mx-auto mb-6"},null,z,L)),M(`<main class="max-w-[1000px] mx-auto flex flex-col md:flex-row mb-6"${L}><section class="blog-content w-full md:w-8/12 px-6"${L}>${o.value.content}</section><aside class="w-full md:w-4/12"${L}>`),M(p.ssrRenderComponent(Zn,{id:o.value.id},null,z,L)),M(p.ssrRenderComponent(Ae,{dataAdSlot:"side"},null,z,L)),M("</aside></main>"),M(p.ssrRenderComponent(Ce,{firstTitle:n.value,secondTitle:r.value,copyRight:s.value},null,z,L));else return[u.createVNode("header",{class:"max-w-[1000px] min-h-[400px] mx-auto mt-28 md:mt-44"},[u.createVNode("figure",null,[u.createVNode("div",{class:"w-full"},[u.createVNode(x,{class:"w-full max-h-[500px] object-cover",src:`/${o.value.imageURL}`,alt:o.value.title},null,8,["src","alt"])]),u.createVNode("figcaption",{class:"py-8 px-6 md:px-0 flex flex-col"},[u.createVNode("h1",{class:"text-2xl md:text-5xl font-sans font-bold mb-6"},u.toDisplayString(o.value.title),1),u.createVNode("p",{class:"text-2xl"},u.toDisplayString(o.value.excerpt),1),u.createVNode("p",{class:"ml-auto text-kg text-accent"},"Por Ess\xEAncia Bahiana")]),u.createVNode(O,{class:"max-w-[1000px] mx-auto mb-6"}),u.createVNode($,null,{default:u.withCtx(()=>[u.createVNode(N,{label:"Home",to:"/"}),u.createVNode(N,{label:"Blog",to:"/blog"}),u.createVNode(N,{label:"O que fazer"}),u.createVNode(N,{label:o.value.title},null,8,["label"])]),_:1})])]),u.createVNode(Ae,{dataAdSlot:"banner"}),u.createVNode(O,{class:"max-w-[1000px] mx-auto mb-6"}),u.createVNode("main",{class:"max-w-[1000px] mx-auto flex flex-col md:flex-row mb-6"},[u.createVNode("section",{innerHTML:o.value.content,class:"blog-content w-full md:w-8/12 px-6"},null,8,["innerHTML"]),u.createVNode("aside",{class:"w-full md:w-4/12"},[u.createVNode(Zn,{id:o.value.id},null,8,["id"]),u.createVNode(Ae,{dataAdSlot:"side"})])]),u.createVNode(Ce,{firstTitle:n.value,secondTitle:r.value,copyRight:s.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},f))}}},la=ko.setup;ko.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/BlogPage.vue"),la?la(t,e):void 0};var fp=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"}));const Oo=u.defineComponent({name:"ErrorNotFound"});function pp(t,e,n,r,s,o,i,a){const l=u.resolveComponent("q-btn");e(`<div${p.ssrRenderAttrs(u.mergeProps({class:"fullscreen bg-blue text-white text-center q-pa-md flex flex-center"},r))}><div><div style="${p.ssrRenderStyle({"font-size":"30vh"})}"> 404 </div><div class="text-h2" style="${p.ssrRenderStyle({opacity:".4"})}"> Oops. Nothing here... </div>`),e(p.ssrRenderComponent(l,{class:"q-mt-xl",color:"white","text-color":"blue",unelevated:"",to:"/",label:"Go Home","no-caps":""},null,n)),e("</div></div>")}const ca=Oo.setup;Oo.setup=(t,e)=>{const n=u.useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/ErrorNotFound.vue"),ca?ca(t,e):void 0};var gp=ha(Oo,[["ssrRender",pp]]),_p=Object.freeze(Object.defineProperty({__proto__:null,default:gp},Symbol.toStringTag,{value:"Module"})),yp={failed:"Action failed",success:"Action was successful"},vp={"en-US":yp},Ep=er.boot(({app:t})=>{const e=Fc.createI18n({locale:"en-US",globalInjection:!0,messages:vp});t.use(e)}),wp=Object.freeze(Object.defineProperty({__proto__:null,default:Ep},Symbol.toStringTag,{value:"Module"}));const kc=ua.default.create({baseURL:"https://api.example.com"});var Tp=er.boot(({app:t})=>{t.config.globalProperties.$axios=ua.default,t.config.globalProperties.$api=kc}),Ap=Object.freeze(Object.defineProperty({__proto__:null,default:Tp,api:kc},Symbol.toStringTag,{value:"Module"}));exports.default=Zc;
