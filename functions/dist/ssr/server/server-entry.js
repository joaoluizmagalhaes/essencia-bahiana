"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var u=require("vue"),pe=require("quasar"),p=require("vue/server-renderer"),nr=require("quasar/wrappers"),Cc=require("pinia"),mt=require("vue-router");require("@emailjs/browser");var bc=require("firebase/app");require("firebase/analytics");var Pc=require("firebase/auth"),ze=require("firebase/firestore"),Vc=require("firebase/functions"),Nc=require("vue-i18n"),Dc=require("axios");function kc(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var ua=kc(Dc);var ha=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t};const xs=u.defineComponent({name:"App"});function Oc(n,e,t,r,s,o,i,a){const l=u.resolveComponent("router-view");e(p.ssrRenderComponent(l,r,null,t))}const Do=xs.setup;xs.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/App.vue"),Do?Do(n,e):void 0};var rt=ha(xs,[["ssrRender",Oc]]),Pr=nr.store(()=>Cc.createPinia());const Mc=[{path:"/",component:()=>Promise.resolve().then(function(){return zc}),children:[{path:"",component:()=>Promise.resolve().then(function(){return Hc})},{path:"/politicas-de-privacidade",component:()=>Promise.resolve().then(function(){return Gc})},{path:"/blog",component:()=>Promise.resolve().then(function(){return cp})},{path:"/blog/:categor/:id",component:()=>Promise.resolve().then(function(){return up})}]},{path:"/:catchAll(.*)*",component:()=>Promise.resolve().then(function(){return mp})}];var Vr=nr.route(function(){const n=mt.createMemoryHistory;return mt.createRouter({scrollBehavior:()=>({left:0,top:0}),routes:Mc,history:n("/")})});const Lc=u.defineComponent({name:"AppWrapper",setup(n){return u.onMounted(()=>{const{proxy:{$q:e}}=u.getCurrentInstance();e.onSSRHydrated!==void 0&&e.onSSRHydrated()}),()=>u.h(rt,n)}});async function Fc(n,e,t){const r=n(Lc);r.use(pe.Quasar,e,t);const s=typeof Pr=="function"?await Pr({ssrContext:t}):Pr;r.use(s),typeof window<"u"&&window.__INITIAL_STATE__!==void 0&&(s.state.value=window.__INITIAL_STATE__,delete window.__INITIAL_STATE__);const o=u.markRaw(typeof Vr=="function"?await Vr({ssrContext:t,store:s}):Vr);return s.use(({store:i})=>{i.router=o}),{app:r,store:s,router:o}}var qc={config:{},plugins:{Notify:pe.Notify,Loading:pe.Loading,Dialog:pe.Dialog,Screen:pe.Screen,Meta:pe.Meta}};const ko=typeof rt.preFetch=="function"?rt.preFetch:rt.__c!==void 0&&typeof rt.__c.preFetch=="function"?rt.__c.preFetch:!1,Oo="/",Bc=/^https?:\/\//;function Mo(n,e){if(typeof n=="string"&&Bc.test(n)===!0)return n;try{return e.resolve(n).href}catch{}return n}const{components:Ep,directives:wp,...$c}=qc,Uc=Promise.all([Promise.resolve().then(function(){return _p}),Promise.resolve().then(function(){return vp})]).then(n=>n.map(e=>e.default).filter(e=>typeof e=="function"));var jc=n=>new Promise(async(e,t)=>{const r=await Uc,{app:s,router:o,store:i}=await Fc(u.createApp,$c,n);let a=!1;const l=(d,m)=>{a=!0,t({url:Mo(d,o),code:m})};for(let d=0;a===!1&&d<r.length;d++)try{await r[d]({app:s,router:o,store:i,ssrContext:n,redirect:l,urlPath:n.req.url,publicPath:Oo})}catch(m){t(m);return}if(a===!0)return;s.use(o);const c=n.req.url,{fullPath:h}=o.resolve(c);if(h!==c)return t({url:h});o.push(c).catch(()=>{}),o.isReady().then(()=>{let d=o.currentRoute.value.matched.filter(_=>_.components!==void 0).flatMap(_=>Object.values(_.components));if(d.length===0)return t({code:404});let m=!1;const f=(_,w)=>{m=!0,t({url:Mo(_,o),code:w})};d=d.filter(_=>typeof _.preFetch=="function"||_.__c!==void 0&&typeof _.__c.preFetch=="function").map(_=>_.__c!==void 0?_.__c.preFetch:_.preFetch),ko!==!1&&d.unshift(ko),d.reduce((_,w)=>_.then(()=>m===!1&&w({store:i,ssrContext:n,currentRoute:o.currentRoute.value,redirect:f,urlPath:n.req.url,publicPath:Oo})),Promise.resolve()).then(()=>{m!==!0&&(n.state=u.unref(i.state),e(s))}).catch(t)}).catch(t)});const Ne={__name:"HeaderMenu",__ssrInlineRender:!0,setup(n){const{getScrollTarget:e,setVerticalScrollPosition:t}=pe.scroll,r=u.computed(()=>s.screen.lt.md),s=pe.useQuasar(),o=mt.useRouter(),i=u.ref("");function a(c,h=""){o.push(`/${c}`).then(()=>{h&&u.nextTick(()=>{const d=document.getElementById(h);d&&l(d)})})}function l(c){const h=e(c),d=c.offsetTop-90;t(h,d,1e3)}return(c,h,d,m)=>{const f=u.resolveComponent("q-tabs"),_=u.resolveComponent("q-tab");h(p.ssrRenderComponent(f,u.mergeProps({modelValue:i.value,"onUpdate:modelValue":w=>i.value=w,vertical:!!r.value,class:"text-primary"},m),{default:u.withCtx((w,x,O,$)=>{if(x)x(p.ssrRenderComponent(_,{name:"blog",label:"Blog",onClick:N=>a("blog")},null,O,$)),x(p.ssrRenderComponent(_,{name:"contato",label:"Contato",onClick:N=>a("","contact")},null,O,$));else return[u.createVNode(_,{name:"blog",label:"Blog",onClick:N=>a("blog")},null,8,["onClick"]),u.createVNode(_,{name:"contato",label:"Contato",onClick:N=>a("","contact")},null,8,["onClick"])]}),_:1},d))}}},Lo=Ne.setup;Ne.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/HeaderMenu.vue"),Lo?Lo(n,e):void 0};const Is={__name:"MainLayout",__ssrInlineRender:!0,setup(n){const e=u.ref(!1),t=u.ref(!1);u.ref(null);const r=mt.useRouter();u.onMounted(()=>{window.addEventListener("scroll",i)}),u.onUnmounted(()=>{window.removeEventListener("scroll",i)});function s(){e.value=!e.value}function o(a){r.push(`/${a}`)}const i=()=>{window.scrollY>20?t.value=!0:t.value=!1};return(a,l,c,h)=>{const d=u.resolveComponent("q-layout"),m=u.resolveComponent("q-toolbar"),f=u.resolveComponent("q-avatar"),_=u.resolveComponent("q-img"),w=u.resolveComponent("q-space"),x=u.resolveComponent("q-btn"),O=u.resolveComponent("q-drawer"),$=u.resolveComponent("q-page-container"),N=u.resolveComponent("router-view");l(p.ssrRenderComponent(d,u.mergeProps({view:"lHh Lpr lFf"},h),{default:u.withCtx((de,L,z,M)=>{if(L)L(p.ssrRenderComponent(m,{class:["h-20 md:h-36 fixed w-full z-50 top-0 p-7 bg-transparent font-sans font-bold ease-in-out duration-500",{"!bg-white md:!h-24 drop-shadow-md":t.value}]},{default:u.withCtx((_e,q,ee,H)=>{if(q)q(p.ssrRenderComponent(f,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":t.value}],onClick:bt=>o("")},{default:u.withCtx((bt,Pt,Cr,br)=>{if(Pt)Pt(p.ssrRenderComponent(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"},null,Cr,br));else return[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]}),_:1},ee,H)),q(`<h3 class="ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"${H}>Ess\xEAncia <span class="uppercase text-2xl md:text-3xl"${H}>Bahiana</span></h3>`),q(p.ssrRenderComponent(w,null,null,ee,H)),q(p.ssrRenderComponent(Ne,{class:"hidden lg:!flex"},null,ee,H)),q(p.ssrRenderComponent(x,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"},null,ee,H));else return[u.createVNode(f,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":t.value}],onClick:bt=>o("")},{default:u.withCtx(()=>[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1},8,["class","onClick"]),u.createVNode("h3",{onClick:bt=>o(""),class:"ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-2xl md:text-3xl",onClick:bt=>o("")},"Bahiana",8,["onClick"])],8,["onClick"]),u.createVNode(w),u.createVNode(Ne,{class:"hidden lg:!flex"}),u.createVNode(x,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"})]}),_:1},z,M)),L(p.ssrRenderComponent(O,{modelValue:e.value,"onUpdate:modelValue":_e=>e.value=_e,overlay:"",side:"right",bordered:"",class:"q-py-lg flex flex-col"},{default:u.withCtx((_e,q,ee,H)=>{if(q)q(`<div class="mx-auto mb-5 w-full flex justify-evenly items-center"${H}>`),q(p.ssrRenderComponent(f,{class:"w-16 h-16 md:w-32 md:h-32"},{default:u.withCtx((bt,Pt,Cr,br)=>{if(Pt)Pt(p.ssrRenderComponent(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"},null,Cr,br));else return[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]}),_:1},ee,H)),q(`<div class="text-lg text-primary font-bold font-sans"${H}>Ess\xEAncia <span class="uppercase text-xl"${H}>Bahiana</span></div></div><div${H}>`),q(p.ssrRenderComponent(Ne,null,null,ee,H)),q("</div>");else return[u.createVNode("div",{class:"mx-auto mb-5 w-full flex justify-evenly items-center"},[u.createVNode(f,{class:"w-16 h-16 md:w-32 md:h-32"},{default:u.withCtx(()=>[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1}),u.createVNode("div",{class:"text-lg text-primary font-bold font-sans"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-xl"},"Bahiana")])]),u.createVNode("div",null,[u.createVNode(Ne)])]}),_:1},z,M)),L(p.ssrRenderComponent($,null,{default:u.withCtx((_e,q,ee,H)=>{if(q)q(p.ssrRenderComponent(N,null,null,ee,H));else return[u.createVNode(N)]}),_:1},z,M));else return[u.createVNode(m,{class:["h-20 md:h-36 fixed w-full z-50 top-0 p-7 bg-transparent font-sans font-bold ease-in-out duration-500",{"!bg-white md:!h-24 drop-shadow-md":t.value}]},{default:u.withCtx(()=>[u.createVNode(f,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":t.value}],onClick:_e=>o("")},{default:u.withCtx(()=>[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1},8,["class","onClick"]),u.createVNode("h3",{onClick:_e=>o(""),class:"ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-2xl md:text-3xl",onClick:_e=>o("")},"Bahiana",8,["onClick"])],8,["onClick"]),u.createVNode(w),u.createVNode(Ne,{class:"hidden lg:!flex"}),u.createVNode(x,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"})]),_:1},8,["class"]),u.createVNode(O,{modelValue:e.value,"onUpdate:modelValue":_e=>e.value=_e,overlay:"",side:"right",bordered:"",class:"q-py-lg flex flex-col"},{default:u.withCtx(()=>[u.createVNode("div",{class:"mx-auto mb-5 w-full flex justify-evenly items-center"},[u.createVNode(f,{class:"w-16 h-16 md:w-32 md:h-32"},{default:u.withCtx(()=>[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1}),u.createVNode("div",{class:"text-lg text-primary font-bold font-sans"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-xl"},"Bahiana")])]),u.createVNode("div",null,[u.createVNode(Ne)])]),_:1},8,["modelValue","onUpdate:modelValue"]),u.createVNode($,null,{default:u.withCtx(()=>[u.createVNode(N)]),_:1})]}),_:1},c))}}},Fo=Is.setup;Is.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/layouts/MainLayout.vue"),Fo?Fo(n,e):void 0};var zc=Object.freeze(Object.defineProperty({__proto__:null,default:Is},Symbol.toStringTag,{value:"Module"}));const wt={__name:"WhatsAppBtn",__ssrInlineRender:!0,props:{text:String},setup(n){const e=()=>{const r="https://wa.me/5511993271622";window.open(r,"_blank")};return(t,r,s,o)=>{const i=u.resolveComponent("q-btn"),a=u.resolveComponent("q-avatar"),l=u.resolveComponent("q-img");r(p.ssrRenderComponent(i,u.mergeProps({align:"left",size:"md",class:"py-2 rounded bg-white text-primary my-5 mt-auto shadow-2xl flex justify-start mx-auto",onClick:e},o),{default:u.withCtx((c,h,d,m)=>{if(h)h(p.ssrRenderComponent(a,{size:"40px",class:"mr-5"},{default:u.withCtx((f,_,w,x)=>{if(_)_(p.ssrRenderComponent(l,{src:"zap-icon.png",alt:"\xCDcone Whatsapp"},null,w,x));else return[u.createVNode(l,{src:"zap-icon.png",alt:"\xCDcone Whatsapp"})]}),_:1},d,m)),h(` ${p.ssrInterpolate(n.text)}`);else return[u.createVNode(a,{size:"40px",class:"mr-5"},{default:u.withCtx(()=>[u.createVNode(l,{src:"zap-icon.png",alt:"\xCDcone Whatsapp"})]),_:1}),u.createTextVNode(" "+u.toDisplayString(n.text),1)]}),_:1},s))}}},qo=wt.setup;wt.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/WhatsAppBtn.vue"),qo?qo(n,e):void 0};const Nn={__name:"HeroComponent",__ssrInlineRender:!0,props:{image:String,firstTitle:String,secondTitle:String,subtitle:String},setup(n){const e=u.ref("Converse Conosco");return(t,r,s,o)=>{const i=u.resolveComponent("q-img");r(`<section${p.ssrRenderAttrs(u.mergeProps({class:"relative w-full h-screen overflow-hidden flex justify-center items-center"},o))}><div class="absolute top-0 left-0 w-full h-full">`),r(p.ssrRenderComponent(i,{src:n.image,alt:"Praia em Porto Seguro Bahia",class:"object-cover object-[85%] md:object-center w-full h-full"},null,s)),r(`</div><div class="absolute top-0 left-0 w-full h-full bg-black opacity-15"></div><div class="absolute top-0 max-w-2xl w-full h-full flex p-5 flex-col py-[200px] justify-center md:justify-start items-center text-center text-white z-10"><h1 class="text-5xl md:text-[80px] text-white font-bold mb-6 font-sans leading-3 shadow-primary drop-shadow-lg">${p.ssrInterpolate(n.firstTitle)} <span class="text-6xl md:text-[120px] leading-normal uppercase">${p.ssrInterpolate(n.secondTitle)}</span></h1><p class="text-3xl md:text-3xl text-shadow-outline text-white font-open">${p.ssrInterpolate(n.subtitle)}</p>`),r(p.ssrRenderComponent(wt,{text:e.value},null,s)),r("</div></section>")}}},Bo=Nn.setup;Nn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/HeroComponent.vue"),Bo?Bo(n,e):void 0};const Rs={__name:"SelectionBarItem",__ssrInlineRender:!0,props:{bgColor:String,icon:String,text:String},setup(n){return(e,t,r,s)=>{t(`<div${p.ssrRenderAttrs(u.mergeProps({class:`hover:scale-105 hover:shadow-2xl cursor-pointer ease-in-out duration-300 flex flex-col
  justify-center items-center ${n.bgColor} p-5`},s))}><img${p.ssrRenderAttr("src",n.icon)} alt="" class="w-20 h-20"><p class="text-white text-lg">${p.ssrInterpolate(n.text)}</p></div>`)}}},$o=Rs.setup;Rs.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/SelectionBarItem.vue"),$o?$o(n,e):void 0};const Dn={__name:"SelectionBar",__ssrInlineRender:!0,setup(n){const e=u.ref([{bgColor:"bg-secondary",icon:"drink.svg",text:"Festas"},{bgColor:"bg-accent",icon:"bus.svg",text:"Traslados"},{bgColor:"bg-secondary",icon:"boat.svg",text:"Passeios"},{bgColor:"bg-accent",icon:"beach.svg",text:"Praias"},{bgColor:"bg-secondary",icon:"dive.svg",text:"Mergulhos"},{bgColor:"bg-accent",icon:"food.svg",text:"Gastronomia"}]);return(t,r,s,o)=>{r(`<section${p.ssrRenderAttrs(u.mergeProps({class:"w-full h-auto md:h-44 bg-white flex justify-center"},o))}><div class="w-full grid grid-cols-3 md:grid-cols-6"><!--[-->`),p.ssrRenderList(e.value,i=>{r(p.ssrRenderComponent(Rs,{bgColor:i.bgColor,icon:i.icon,text:i.text,key:i.text},null,s))}),r("<!--]--></div></section>")}}},Uo=Dn.setup;Dn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/SelectionBar.vue"),Uo?Uo(n,e):void 0};const Ss={__name:"TransferCard",__ssrInlineRender:!0,props:{image:String,alt:String,title:String,text:String,customCss:String,order:Boolean},setup(n){const e=u.ref("Saiba mais");return(t,r,s,o)=>{r(`<figure${p.ssrRenderAttrs(u.mergeProps({class:"flex flex-row max-w-[1000px] px-6 mx-auto mb-20 justify-between"},o))}><img${p.ssrRenderAttr("src",n.image)}${p.ssrRenderAttr("alt",n.alt)} class="${p.ssrRenderClass(` w-full md:w-1/3 object-cover object-bottom aspect-square drop-shadow-md w-[315px] h-[315px] ${n.order?"md:order-2":""}`)}"><figcaption class="${p.ssrRenderClass(`w-full md:w-2/3 md:px-10 flex flex-col justify-start items-start py-6 ${n.customCss}`)}"><h2 class="text-sans font-bold text-secondary text-3xl md:text-4xl mb-6">${p.ssrInterpolate(n.title)}</h2><p class="text-white text-lg mb-6">${p.ssrInterpolate(n.text)}</p>`),r(p.ssrRenderComponent(wt,{text:e.value},null,s)),r("</figcaption></figure>")}}},jo=Ss.setup;Ss.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/TransferCard.vue"),jo?jo(n,e):void 0};const kn={__name:"TransferSection",__ssrInlineRender:!0,setup(n){const e=u.ref([{image:"van-1.png",alt:"Van na praia.",title:"Traslados e Passeios Personalizados",text:"Explore as maravilhas de Porto Seguro com nossos passeios exclusivos e traslados confort\xE1veis. Seu parceiro ideal em turismo, garantindo aventuras inesquec\xEDveis e seguran\xE7a em cada viagem!",customCss:"",order:!1},{image:"van-2.png",alt:"Van na Praia do Espelho",title:"Explore o Cora\xE7\xE3o da Bahia com Estilo! ",text:"Porto Seguro espera por voc\xEA com suas praias deslumbrantes e hist\xF3ria rica. Desfrute de experi\xEAncias \xFAnicas com nossos tours especializados e servi\xE7os de traslado de primeira classe, projetados para proporcionar conforto e conveni\xEAncia em suas aventuras tropicais.",customCss:"md:pl-0 md:pr-20",order:!0},{image:"van-3.png",alt:"turistas felizes dentro da Van",title:"Viva a Magia de Porto Seguro!",text:"Embarque em uma jornada extraordin\xE1ria pelos encantos naturais e culturais de Porto Seguro. Oferecemos itiner\xE1rios personalizados e servi\xE7os de qualidade para tornar cada momento de sua viagem memor\xE1vel e cheio de descobertas.",customCss:"",order:!1}]),t=u.ref("Fa\xE7a uma cota\xE7\xE3o");return(r,s,o,i)=>{s(`<section${p.ssrRenderAttrs(u.mergeProps({class:"w-full min-h-[500px] bg-primary py-20"},i))}><div class="container flex flex-col mx-auto"><header class="px-6 max-w-[1000px] mb-16 md:mb-28"><h1 class="font-sans text-3xl md:text-6xl text-accent font-bold mb-2 md:mb-5">Explore Porto Seguro com Conforto e Seguran\xE7a</h1><p class="text-secondary text-lg md:text-2xl">Traslados e Passeios Personalizados</p></header><!--[-->`),p.ssrRenderList(e.value,a=>{s(p.ssrRenderComponent(Ss,{image:a.image,title:a.title,text:a.text,customCss:a.customCss,order:a.order,alt:a.alt,key:a.image},null,o))}),s('<!--]--><footer class="flex flex-col w-full max-w-[800px] px-6 md:mx-auto"><h2 class="text-accent text-3xl md:text-6xl font-bold mb-6 text-center md:text-left">Pronto para Descobrir Porto Seguro?</h2><p class="text-white text-lg md:text-xl mb-10">N\xE3o espere mais para planejar a viagem dos seus sonhos! Clique aqui e fa\xE7a j\xE1 a sua cota\xE7\xE3o de traslados via WhatsApp. R\xE1pido, f\xE1cil e seguro \u2013 seu Porto Seguro est\xE1 a apenas uma mensagem de dist\xE2ncia!</p>'),s(p.ssrRenderComponent(wt,{text:t.value},null,o)),s("</footer></div></section>")}}},zo=kn.setup;kn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/TransferSection.vue"),zo?zo(n,e):void 0};const Re={__name:"FooterComponent",__ssrInlineRender:!0,props:{copyRight:String,firstTitle:String,secondTitle:String},setup(n){mt.useRouter();function e(){const o="https://www.instagram.com/essencia.bahiana";window.open(o,"_blank")}function t(){const o="https://www.facebook.com/profile.php?id=61555489870691&mibextid=9R9pXO";window.open(o,"_blank")}function r(){const i="https://wa.me/5511993271622";window.open(i,"_blank")}function s(){const o="mailto:contato@essenciabahiana.com.br";window.open(o,"_blank")}return(o,i,a,l)=>{const c=u.resolveComponent("q-btn");i(`<footer${p.ssrRenderAttrs(u.mergeProps({elevated:"",class:"bg-primary w-full text-light-gray"},l))}><div class="q-px-lg q-py-md"><div class="flex flex-wrap justify-between items-center"><div class="flex items-center"><img src="/logo.svg" alt="Logo Essencia Bahiana" class="h-12 mr-4 bg-white rounded-full"><div class="text-2xl font-bold font-sans text-accent">${p.ssrInterpolate(n.firstTitle)} <span class="uppercase text-3xl font-bold">${p.ssrInterpolate(n.secondTitle)}</span></div></div><div class="flex items-center mx-auto md:mx-0">`),i(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"fa-brands fa-instagram",class:"text-xl text-accent",onClick:e},null,a)),i(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"fa-brands fa-facebook-f",class:"text-xl text-accent",onClick:t},null,a)),i(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"fa-brands fa-whatsapp",class:"text-xl text-accent",onClick:r},null,a)),i(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"email",class:"text-xl text-accent",onClick:s},null,a)),i(`</div></div><div class="text-center q-mt-md text-accent flex flex-col">${p.ssrInterpolate(n.copyRight)} <span class="cursor-pointer">Pol\xEDticas de Privacidade</span></div></div></footer>`)}}},Ho=Re.setup;Re.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/FooterComponent.vue"),Ho?Ho(n,e):void 0};const On={__name:"ContactSection",__ssrInlineRender:!0,setup(n){pe.useQuasar();const e=u.ref(""),t=u.ref(""),r=u.ref(""),s=u.ref(""),o=u.ref(""),i=u.ref(null),a=u.ref(null),l=u.ref(null);return(c,h,d,m)=>{const f=u.resolveComponent("q-input"),_=u.resolveComponent("q-btn");h(`<div${p.ssrRenderAttrs(u.mergeProps({class:"contact-section bg-dark-page text-light-gray p-10",id:"contact"},m))}><div class="container mx-auto"><div class="text-center mb-10"><h2 class="text-6xl font-bold text-primary mb-2">Entre em Contato</h2><p class="text-secondary text-xl">Estamos prontos para atend\xEA-lo!</p></div><div class="grid grid-cols-1 gap-8"><div class="contact-info">`),h(p.ssrRenderComponent(wt,{text:"Converse pelo WhatsApp"},null,d)),h('</div><div class="contact-form"><p class="text-accent">Ou preencha o formul\xE1rio abaixo:</p><form>'),h(p.ssrRenderComponent(f,{filled:"",modelValue:e.value,"onUpdate:modelValue":w=>e.value=w,ref_key:"nameRef",ref:i,rules:[w=>!!w||"Nome \xE9 obrigat\xF3rio."],label:"Nome",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:o.value,"onUpdate:modelValue":w=>o.value=w,label:"E-mail",class:"mb-6",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:s.value,"onUpdate:modelValue":w=>s.value=w,label:"Telefone",class:"mb-6",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:t.value,"onUpdate:modelValue":w=>t.value=w,ref_key:"subjectRef",ref:a,rules:[w=>!!w||"Assunto \xE9 obrigat\xF3rio."],label:"Assunto",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:r.value,"onUpdate:modelValue":w=>r.value=w,ref_key:"messageRef",ref:l,rules:[w=>!!w||"Mensagem \xE9 obrigat\xF3rio."],label:"Mensagem",type:"textarea",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(_,{label:"Enviar Mensagem",type:"submit",color:"secondary",class:"w-full"},null,d)),h("</form></div></div></div></div>")}}},Go=On.setup;On.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/ContactSection.vue"),Go?Go(n,e):void 0};const Cs={__name:"IndexPage",__ssrInlineRender:!0,setup(n){const e=u.ref("Ess\xEAncia"),t=u.ref("Bahiana"),r=u.ref("Descubra a Magia e a Cultura \xDAnica da Terra do Descobrimento"),s=u.ref("/hero.jpg"),o=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return pe.useMeta({title:"Ess\xEAncia BAHIANA",meta:{description:{name:"description",content:"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:"Porto Seguro, Pontos tur\xEDsticos em Porto Seguro, Passeios em Porto Seguro, Traslados em Porto Seguro, Turismo na Bahia, Viagens pela Bahia, Melhores experi\xEAncias em Porto Seguro, Roteiros de viagem em Porto Seguro, Atra\xE7\xF5es tur\xEDsticas na regi\xE3o, Servi\xE7o de transporte em Porto Seguro, Roteiro de viagem personalizado, Dicas de viagem para Porto Seguro, Destinos na Bahia, Planejamento de viagem, Experi\xEAncias memor\xE1veis na Bahia."},ogTitle:{property:"og:title",template(){return"Ess\xEAncia BAHIANA"}},ogDescription:{property:"og:description",template(){return"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."}},ogImage:{property:"og:image",template(){return"https://essenciabahiana.com.br/hero.jpg"}},twitterTitle:{property:"twitter:title",template(){return"Ess\xEAncia BAHIANA"}},twitterDescription:{property:"twitter:description",template(){return"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."}},twitterImage:{property:"twitter:image",template(){return"https://essenciabahiana.com.br/hero.jpg"}}}}),(i,a,l,c)=>{const h=u.resolveComponent("q-page");a(p.ssrRenderComponent(h,u.mergeProps({class:"flex flex-center w-full"},c),{default:u.withCtx((d,m,f,_)=>{if(m)m(p.ssrRenderComponent(Nn,{image:s.value,firstTitle:e.value,secondTitle:t.value,subtitle:r.value},null,f,_)),m(p.ssrRenderComponent(Dn,null,null,f,_)),m(p.ssrRenderComponent(kn,null,null,f,_)),m(p.ssrRenderComponent(On,null,null,f,_)),m(p.ssrRenderComponent(Re,{firstTitle:e.value,secondTitle:t.value,copyRight:o.value},null,f,_));else return[u.createVNode(Nn,{image:s.value,firstTitle:e.value,secondTitle:t.value,subtitle:r.value},null,8,["image","firstTitle","secondTitle","subtitle"]),u.createVNode(Dn),u.createVNode(kn),u.createVNode(On),u.createVNode(Re,{firstTitle:e.value,secondTitle:t.value,copyRight:o.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},l))}}},Ko=Cs.setup;Cs.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/IndexPage.vue"),Ko?Ko(n,e):void 0};var Hc=Object.freeze(Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"}));const Mn={__name:"FaqSection",__ssrInlineRender:!0,props:{faqs:{question:String,answer:String}},setup(n){const e=n;return(t,r,s,o)=>{const i=u.resolveComponent("q-expansion-item"),a=u.resolveComponent("q-card"),l=u.resolveComponent("q-card-section");r(`<div${p.ssrRenderAttrs(u.mergeProps({class:"faq-container py-8"},o))}><div class="faq-title text-2xl font-bold mb-4 text-primary"> Perguntas Frequentes (FAQs) </div><div class="faq-content"><!--[-->`),p.ssrRenderList(e.faqs,(c,h)=>{r('<div class="faq-item mb-4 text-primary">'),r(p.ssrRenderComponent(i,{"expand-separator":"",label:c.question},{default:u.withCtx((d,m,f,_)=>{if(m)m(p.ssrRenderComponent(a,null,{default:u.withCtx((w,x,O,$)=>{if(x)x(p.ssrRenderComponent(l,{class:"text-secondary"},{default:u.withCtx((N,de,L,z)=>{if(de)de(`${p.ssrInterpolate(c.answer)}`);else return[u.createTextVNode(u.toDisplayString(c.answer),1)]}),_:2},O,$));else return[u.createVNode(l,{class:"text-secondary"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(c.answer),1)]),_:2},1024)]}),_:2},f,_));else return[u.createVNode(a,null,{default:u.withCtx(()=>[u.createVNode(l,{class:"text-secondary"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(c.answer),1)]),_:2},1024)]),_:2},1024)]}),_:2},s)),r("</div>")}),r("<!--]--></div></div>")}}},Qo=Mn.setup;Mn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/FaqSection.vue"),Qo?Qo(n,e):void 0};const bs={__name:"PrivacyPolicy",__ssrInlineRender:!0,setup(n){const e=u.ref([{question:"Como o Ess\xEAncia Bahiana utiliza o Google AdSense para coletar dados?",answer:"O Ess\xEAncia Bahiana utiliza o Google AdSense para exibir an\xFAncios que s\xE3o relevantes para os usu\xE1rios. O Google AdSense utiliza cookies e outras tecnologias de rastreamento para coletar informa\xE7\xF5es sobre as prefer\xEAncias dos usu\xE1rios e o tipo de conte\xFAdo que acessam. Essas informa\xE7\xF5es s\xE3o usadas para fornecer an\xFAncios direcionados, melhorando assim a experi\xEAncia do usu\xE1rio e permitindo a monetiza\xE7\xE3o do site.",open:!1},{question:"Quais s\xE3o os direitos do usu\xE1rio em rela\xE7\xE3o aos dados coletados pelo Ess\xEAncia Bahiana?",answer:"Usu\xE1rios do Ess\xEAncia Bahiana t\xEAm o direito de acessar, corrigir ou excluir seus dados pessoais a qualquer momento. Al\xE9m disso, os usu\xE1rios t\xEAm o direito de se opor ou restringir o processamento de seus dados e o direito \xE0 portabilidade de dados. Para exercer esses direitos, os usu\xE1rios podem entrar em contato diretamente com o Ess\xEAncia Bahiana atrav\xE9s dos canais de suporte fornecidos.",open:!1},{question:"Como posso gerenciar minhas prefer\xEAncias de cookies no Ess\xEAncia Bahiana?",answer:"Os usu\xE1rios podem gerenciar suas prefer\xEAncias de cookies nas configura\xE7\xF5es do navegador. Al\xE9m disso, o Ess\xEAncia Bahiana fornece informa\xE7\xF5es e op\xE7\xF5es para gerenciar prefer\xEAncias de cookies diretamente no site, permitindo que os usu\xE1rios escolham aceitar, recusar ou personalizar o uso de cookies conforme necess\xE1rio.",open:!1},{question:"Que medidas de seguran\xE7a o Ess\xEAncia Bahiana implementa para proteger os dados dos usu\xE1rios?",answer:"O Ess\xEAncia Bahiana implementa v\xE1rias medidas de seguran\xE7a para proteger os dados dos usu\xE1rios, incluindo criptografia de dados, firewalls e protocolos de seguran\xE7a para prevenir o acesso n\xE3o autorizado. Al\xE9m disso, realizamos treinamentos regulares de seguran\xE7a para nossa equipe e mantemos pol\xEDticas rigorosas para garantir a prote\xE7\xE3o e a privacidade dos dados dos usu\xE1rios.",open:!1},{question:"Como o Ess\xEAncia Bahiana lida com a privacidade das crian\xE7as?",answer:"O Ess\xEAncia Bahiana leva a privacidade das crian\xE7as a s\xE9rio e est\xE1 em conformidade com a Lei de Prote\xE7\xE3o \xE0 Privacidade Online de Crian\xE7as (COPPA). N\xE3o coletamos intencionalmente informa\xE7\xF5es de crian\xE7as menores de 13 anos. Se tivermos conhecimento de que informa\xE7\xF5es foram coletadas de uma crian\xE7a menor de 13 anos, tomaremos medidas imediatas para excluir tais informa\xE7\xF5es.",open:!1},{question:"O Ess\xEAncia Bahiana compartilha informa\xE7\xF5es com outros pa\xEDses?",answer:"O Ess\xEAncia Bahiana pode transferir informa\xE7\xF5es para pa\xEDses fora do Brasil, especialmente em rela\xE7\xE3o \xE0 integra\xE7\xE3o com o Google AdSense. No entanto, asseguramos que todas as transfer\xEAncias de dados s\xE3o realizadas em conformidade com as leis de prote\xE7\xE3o de dados aplic\xE1veis e que medidas de seguran\xE7a adequadas est\xE3o em vigor para proteger os dados durante a transfer\xEAncia e em seu destino final.",open:!1}]),t=u.ref("Ess\xEAncia"),r=u.ref("Bahiana"),s=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return(o,i,a,l)=>{const c=u.resolveComponent("q-page");i(p.ssrRenderComponent(c,u.mergeProps({class:"privacy-policy"},l),{default:u.withCtx((h,d,m,f)=>{if(d)d(`<div class="mt-48 container mx-auto"${f}><h1 class="text-6xl font-bold font-sans text-primary mb-10"${f}>Pol\xEDtica de Privacidade do Ess\xEAncia Bahiana</h1><p class="text-secondary text-lg mb-6"${f}>Saiba como o Ess\xEAncia Bahiana protege sua privacidade e dados pessoais, especialmente em conex\xE3o com o Google AdSense.</p><p class="text-secondary text-lg mb-6"${f}>Bem-vindo ao Ess\xEAncia Bahiana! Prezamos pela transpar\xEAncia e compromisso com a seguran\xE7a dos seus dados pessoais. Esta Pol\xEDtica de Privacidade explica como coletamos, utilizamos e compartilhamos informa\xE7\xF5es no \xE2mbito de nossos servi\xE7os, incluindo, mas n\xE3o se limitando \xE0 integra\xE7\xE3o com o Google AdSense.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Introdu\xE7\xE3o \xE0 Pol\xEDtica de Privacidade</h2><p class="text-secondary text-lg mb-6"${f}>A privacidade dos nossos usu\xE1rios \xE9 de extrema import\xE2ncia para n\xF3s. O Ess\xEAncia Bahiana est\xE1 comprometido em proteger as informa\xE7\xF5es pessoais coletadas quando voc\xEA acessa nosso conte\xFAdo e servi\xE7os. Esta se\xE7\xE3o esclarece o prop\xF3sito da nossa pol\xEDtica e a import\xE2ncia de sua privacidade para n\xF3s.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Coleta de Informa\xE7\xF5es</h2><p class="text-secondary text-lg mb-6"${f}>Entender quais informa\xE7\xF5es s\xE3o coletadas e como s\xE3o coletadas \xE9 fundamental. Aqui, explicamos os tipos de dados que o Ess\xEAncia Bahiana coleta, os m\xE9todos de coleta e como o consentimento do usu\xE1rio \xE9 obtido.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Uso das Informa\xE7\xF5es Coletadas</h2><p class="text-secondary text-lg mb-6"${f}>As informa\xE7\xF5es coletadas s\xE3o utilizadas para melhorar continuamente nossos servi\xE7os, personalizar a experi\xEAncia do usu\xE1rio e cumprir obriga\xE7\xF5es legais. Este segmento aborda detalhadamente esses aspectos.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Integra\xE7\xE3o com o Google AdSense</h2><p class="text-secondary text-lg mb-6"${f}>O Google AdSense permite monetizar o conte\xFAdo do site atrav\xE9s de an\xFAncios. Nesta se\xE7\xE3o, discutiremos como o Ess\xEAncia Bahiana integra o AdSense em suas opera\xE7\xF5es e como isso afeta a coleta e o uso de dados.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Compartilhamento e Divulga\xE7\xE3o de Informa\xE7\xF5es</h2><p class="text-secondary text-lg mb-6"${f}>\xC9 importante entender em que circunst\xE2ncias suas informa\xE7\xF5es podem ser compartilhadas. Aqui, explicamos quando e por que suas informa\xE7\xF5es podem ser divulgadas, seja para parceiros terceirizados ou por requisitos legais.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Medidas de Seguran\xE7a de Dados</h2><p class="text-secondary text-lg mb-6"${f}>A seguran\xE7a dos seus dados \xE9 uma prioridade. Neste segmento, abordamos as medidas de seguran\xE7a implementadas para proteger seus dados, incluindo criptografia e protocolos de seguran\xE7a.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Direitos do Usu\xE1rio e Controle de Dados</h2><p class="text-secondary text-lg mb-6"${f}>Voc\xEA tem direitos significativos em rela\xE7\xE3o aos seus dados pessoais. Aqui, explicamos como voc\xEA pode acessar, corrigir ou excluir suas informa\xE7\xF5es pessoais e quais s\xE3o seus direitos de portabilidade de dados.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Cookies e Tecnologias de Rastreamento</h2><p class="text-secondary text-lg mb-6"${f}>Cookies e outras tecnologias de rastreamento desempenham um papel crucial na personaliza\xE7\xE3o da experi\xEAncia online. Neste segmento, explicamos como essas tecnologias s\xE3o utilizadas no Ess\xEAncia Bahiana e como voc\xEA pode gerenciar suas prefer\xEAncias.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Privacidade de Crian\xE7as</h2><p class="text-secondary text-lg mb-6"${f}>A prote\xE7\xE3o de crian\xE7as online \xE9 extremamente importante. Aqui, discutimos as pol\xEDticas do Ess\xEAncia Bahiana em rela\xE7\xE3o \xE0 coleta e uso de dados de crian\xE7as, em conformidade com a COPPA.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Transfer\xEAncias Internacionais de Dados</h2><p class="text-secondary text-lg mb-6"${f}>Como as informa\xE7\xF5es podem ser transferidas internacionalmente, \xE9 crucial entender as pol\xEDticas e salvaguardas em vigor. Esta se\xE7\xE3o detalha como o Ess\xEAncia Bahiana lida com transfer\xEAncias de dados transfronteiri\xE7as.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Websites e Servi\xE7os de Terceiros</h2><p class="text-secondary text-lg mb-6"${f}>O Ess\xEAncia Bahiana pode conter links para sites externos. Aqui, explicamos como interagimos com esses sites de terceiros e a import\xE2ncia de revisar suas pol\xEDticas de privacidade.</p>`),d(p.ssrRenderComponent(Mn,{faqs:e.value},null,m,f)),d("</div>"),d(p.ssrRenderComponent(Re,{firstTitle:t.value,secondTitle:r.value,copyRight:s.value},null,m,f));else return[u.createVNode("div",{class:"mt-48 container mx-auto"},[u.createVNode("h1",{class:"text-6xl font-bold font-sans text-primary mb-10"},"Pol\xEDtica de Privacidade do Ess\xEAncia Bahiana"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Saiba como o Ess\xEAncia Bahiana protege sua privacidade e dados pessoais, especialmente em conex\xE3o com o Google AdSense."),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Bem-vindo ao Ess\xEAncia Bahiana! Prezamos pela transpar\xEAncia e compromisso com a seguran\xE7a dos seus dados pessoais. Esta Pol\xEDtica de Privacidade explica como coletamos, utilizamos e compartilhamos informa\xE7\xF5es no \xE2mbito de nossos servi\xE7os, incluindo, mas n\xE3o se limitando \xE0 integra\xE7\xE3o com o Google AdSense."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Introdu\xE7\xE3o \xE0 Pol\xEDtica de Privacidade"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"A privacidade dos nossos usu\xE1rios \xE9 de extrema import\xE2ncia para n\xF3s. O Ess\xEAncia Bahiana est\xE1 comprometido em proteger as informa\xE7\xF5es pessoais coletadas quando voc\xEA acessa nosso conte\xFAdo e servi\xE7os. Esta se\xE7\xE3o esclarece o prop\xF3sito da nossa pol\xEDtica e a import\xE2ncia de sua privacidade para n\xF3s."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Coleta de Informa\xE7\xF5es"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Entender quais informa\xE7\xF5es s\xE3o coletadas e como s\xE3o coletadas \xE9 fundamental. Aqui, explicamos os tipos de dados que o Ess\xEAncia Bahiana coleta, os m\xE9todos de coleta e como o consentimento do usu\xE1rio \xE9 obtido."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Uso das Informa\xE7\xF5es Coletadas"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"As informa\xE7\xF5es coletadas s\xE3o utilizadas para melhorar continuamente nossos servi\xE7os, personalizar a experi\xEAncia do usu\xE1rio e cumprir obriga\xE7\xF5es legais. Este segmento aborda detalhadamente esses aspectos."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Integra\xE7\xE3o com o Google AdSense"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"O Google AdSense permite monetizar o conte\xFAdo do site atrav\xE9s de an\xFAncios. Nesta se\xE7\xE3o, discutiremos como o Ess\xEAncia Bahiana integra o AdSense em suas opera\xE7\xF5es e como isso afeta a coleta e o uso de dados."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Compartilhamento e Divulga\xE7\xE3o de Informa\xE7\xF5es"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"\xC9 importante entender em que circunst\xE2ncias suas informa\xE7\xF5es podem ser compartilhadas. Aqui, explicamos quando e por que suas informa\xE7\xF5es podem ser divulgadas, seja para parceiros terceirizados ou por requisitos legais."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Medidas de Seguran\xE7a de Dados"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"A seguran\xE7a dos seus dados \xE9 uma prioridade. Neste segmento, abordamos as medidas de seguran\xE7a implementadas para proteger seus dados, incluindo criptografia e protocolos de seguran\xE7a."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Direitos do Usu\xE1rio e Controle de Dados"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Voc\xEA tem direitos significativos em rela\xE7\xE3o aos seus dados pessoais. Aqui, explicamos como voc\xEA pode acessar, corrigir ou excluir suas informa\xE7\xF5es pessoais e quais s\xE3o seus direitos de portabilidade de dados."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Cookies e Tecnologias de Rastreamento"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Cookies e outras tecnologias de rastreamento desempenham um papel crucial na personaliza\xE7\xE3o da experi\xEAncia online. Neste segmento, explicamos como essas tecnologias s\xE3o utilizadas no Ess\xEAncia Bahiana e como voc\xEA pode gerenciar suas prefer\xEAncias."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Privacidade de Crian\xE7as"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"A prote\xE7\xE3o de crian\xE7as online \xE9 extremamente importante. Aqui, discutimos as pol\xEDticas do Ess\xEAncia Bahiana em rela\xE7\xE3o \xE0 coleta e uso de dados de crian\xE7as, em conformidade com a COPPA."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Transfer\xEAncias Internacionais de Dados"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Como as informa\xE7\xF5es podem ser transferidas internacionalmente, \xE9 crucial entender as pol\xEDticas e salvaguardas em vigor. Esta se\xE7\xE3o detalha como o Ess\xEAncia Bahiana lida com transfer\xEAncias de dados transfronteiri\xE7as."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Websites e Servi\xE7os de Terceiros"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"O Ess\xEAncia Bahiana pode conter links para sites externos. Aqui, explicamos como interagimos com esses sites de terceiros e a import\xE2ncia de revisar suas pol\xEDticas de privacidade."),u.createVNode(Mn,{faqs:e.value},null,8,["faqs"])]),u.createVNode(Re,{firstTitle:t.value,secondTitle:r.value,copyRight:s.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},a))}}},Wo=bs.setup;bs.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/PrivacyPolicy.vue"),Wo?Wo(n,e):void 0};var Gc=Object.freeze(Object.defineProperty({__proto__:null,default:bs},Symbol.toStringTag,{value:"Module"}));const De={__name:"ArticleBlogHomeHero",__ssrInlineRender:!0,props:{article:{title:String,imageURL:String,excerpt:String,containerStyle:String,titleStyle:String,excerptStyle:String,imageStyle:String}},setup(n){return(e,t,r,s)=>{const o=u.resolveComponent("q-img");t(`<article${p.ssrRenderAttrs(u.mergeProps({class:`w-full pb-6 md:pb-0 cursor-pointer ${n.article.containerStyle}`},s))}><figure class="relative figure-hover"><div class="relative w-full h-full overflow-hidden">`),t(p.ssrRenderComponent(o,{src:n.article.imageURL,class:`relative object-cover object-center relative z-10 image-hover ease-in-out duration-500 ${n.article.imageStyle}`,alt:n.article.title},null,r)),t(`</div><figcaption class="z-20 md:absolute bottom-0 py-3 md:p-6"><header><h1 class="${p.ssrRenderClass(`text-2xl md:text-shadow-outline font-bold font-sans ${n.article.titleStyle} md:text-white`)}">${p.ssrInterpolate(n.article.title)}</h1><p class="${p.ssrRenderClass(`text-lg md:text-white md:text-shadow-outline ${n.article.excerptStyle}`)}">${p.ssrInterpolate(n.article.excerpt)}</p></header></figcaption></figure></article>`)}}},Yo=De.setup;De.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/ArticleBlogHomeHero.vue"),Yo?Yo(n,e):void 0};const Ln={__name:"BlogHero",__ssrInlineRender:!0,props:{dataHero:{id:String,title:String,imageURL:String,excerpt:String,containerStyle:String,imageStyle:String,titleStyle:String,excerptStyle:String}},setup(n){const e=n,t=u.ref([]);return u.onMounted(()=>{t.value=e.dataHero,t.value[0].containerStyle="md:pr-6",t.value[0].imageStyle=" md:h-[600px]",t.value[0].titleStyle="md:text-5xl",t.value[0].excerptStyle="md:text-lg",t.value[1].containerStyle="md:pb-3",t.value[1].imageStyle="md:h-[288px]",t.value[1].titleStyle="md:text-2xl",t.value[1].excerptStyle="md:text-md",t.value[2].containerStyle="md:pt-3",t.value[2].imageStyle="md:h-[288px]",t.value[2].titleStyle="md:text-2xl",t.value[2].excerptStyle="md:text-md"}),(r,s,o,i)=>{const a=u.resolveComponent("router-link");t.value.length>0?(s(`<div${p.ssrRenderAttrs(u.mergeProps({class:"mx-auto container flex flex-col md:flex-row md:h-[600px]"},i))}><div class="w-full md:w-7/12 px-6 md:px-0 box-border flex md:h-[600px]">`),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${t.value[0].id}`,class:"w-full"},{default:u.withCtx((l,c,h,d)=>{if(c)c(p.ssrRenderComponent(De,{article:t.value[0]},null,h,d));else return[u.createVNode(De,{article:t.value[0]},null,8,["article"])]}),_:1},o)),s('</div><div class="w-full md:w-5/12 px-6 md:px-0 mb-10 md:mb-0 box-border md:justify-between flex flex-col md:h-[unset]">'),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${t.value[1].id}`},{default:u.withCtx((l,c,h,d)=>{if(c)c(p.ssrRenderComponent(De,{article:t.value[1]},null,h,d));else return[u.createVNode(De,{article:t.value[1]},null,8,["article"])]}),_:1},o)),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${t.value[2].id}`},{default:u.withCtx((l,c,h,d)=>{if(c)c(p.ssrRenderComponent(De,{article:t.value[2]},null,h,d));else return[u.createVNode(De,{article:t.value[2]},null,8,["article"])]}),_:1},o)),s("</div></div>")):s("<!---->")}}},Xo=Ln.setup;Ln.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/BlogHero.vue"),Xo?Xo(n,e):void 0};const Fn={__name:"ArticleBlogHomeBody",__ssrInlineRender:!0,props:{article:{title:String,imageURL:String,excerpt:String,id:String}},setup(n){return(e,t,r,s)=>{const o=u.resolveComponent("router-link"),i=u.resolveComponent("q-img");t(p.ssrRenderComponent(o,u.mergeProps({to:`/blog/o-que-fazer/${n.article.id}`,class:"w-full"},s),{default:u.withCtx((a,l,c,h)=>{if(l)l(`<article class="w-full mb-10 cursor-pointer px-6 md:px-0 border-b pb-6"${h}><figure class="flex"${h}><div class="w-full md:w-1/3 mb-5 md:mb-0"${h}>`),l(p.ssrRenderComponent(i,{src:n.article.imageURL,class:"w-full object-cover h-[250px]",alt:n.article.title},null,c,h)),l(`</div><figcaption class="w-full md:w-2/3 flex flex-col justify-end md:pl-10"${h}><header${h}><h2 class="text-2xl font-bold font-sans"${h}>${p.ssrInterpolate(n.article.title)}</h2><p class="text-lg"${h}>${p.ssrInterpolate(n.article.excerpt)}</p></header></figcaption></figure></article>`);else return[u.createVNode("article",{class:"w-full mb-10 cursor-pointer px-6 md:px-0 border-b pb-6"},[u.createVNode("figure",{class:"flex"},[u.createVNode("div",{class:"w-full md:w-1/3 mb-5 md:mb-0"},[u.createVNode(i,{src:n.article.imageURL,class:"w-full object-cover h-[250px]",alt:n.article.title},null,8,["src","alt"])]),u.createVNode("figcaption",{class:"w-full md:w-2/3 flex flex-col justify-end md:pl-10"},[u.createVNode("header",null,[u.createVNode("h2",{class:"text-2xl font-bold font-sans"},u.toDisplayString(n.article.title),1),u.createVNode("p",{class:"text-lg"},u.toDisplayString(n.article.excerpt),1)])])])])]}),_:1},r))}}},Jo=Fn.setup;Fn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/ArticleBlogHomeBody.vue"),Jo?Jo(n,e):void 0};const Te={__name:"AdComponent",__ssrInlineRender:!0,props:{dataAdSlot:String},setup(n){const e=u.ref(null);return u.onMounted(()=>{}),(t,r,s,o)=>{r(`<div${p.ssrRenderAttrs(u.mergeProps({ref_key:"adContainer",ref:e,class:"w-full ad-container mx-auto p-6 max-w-[1000px]"},o))}><h4 class="font-bold text-secondary font-sans text-base">Publicidade:</h4>`),n.dataAdSlot==="side"?r('<div id="ezoic-pub-ad-placeholder-103"></div>'):r("<!---->"),n.dataAdSlot==="banner"?r('<div id="ezoic-pub-ad-placeholder-104"></div>'):r("<!---->"),r("</div>")}}},Zo=Te.setup;Te.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/AdComponent.vue"),Zo?Zo(n,e):void 0};const Kc={apiKey:"AIzaSyAD7kXLz2-aeXM8WV0Y8_dB3qhB46ZifJo",authDomain:"essencia-bahiana.firebaseapp.com",databaseURL:"https://essencia-bahiana-default-rtdb.firebaseio.com",projectId:"essencia-bahiana",storageBucket:"essencia-bahiana.appspot.com",messagingSenderId:"467804101964",appId:"1:467804101964:web:dd8538419c9232aa1703e9",measurementId:"G-9BP1S8J757"},Ps=bc.initializeApp(Kc);Vc.getFunctions(Ps);Pc.getAuth(Ps);const qn=ze.getFirestore(Ps);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Qc=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],i=n[t++],a=n[t++],l=((s&7)<<18|(o&63)<<12|(i&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=n[t++],i=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|i&63)}}return e.join("")},ma={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],i=s+1<n.length,a=i?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,h=o>>2,d=(o&3)<<4|a>>4;let m=(a&15)<<2|c>>6,f=c&63;l||(f=64,i||(m=64)),r.push(t[h],t[d],t[m],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(da(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Qc(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const d=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||a==null||c==null||d==null)throw new Wc;const m=o<<2|a>>4;if(r.push(m),c!==64){const f=a<<4&240|c>>2;if(r.push(f),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Wc extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yc=function(n){const e=da(n);return ma.encodeByteArray(e,!0)},fa=function(n){return Yc(n).replace(/\./g,"")},Xc=function(n){try{return ma.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=()=>Jc().__FIREBASE_DEFAULTS__,eu=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},tu=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Xc(n[1]);return e&&JSON.parse(e)},nu=()=>{try{return Zc()||eu()||tu()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ru(){var n;const e=(n=nu())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function su(){return!ru()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pa(){try{return typeof indexedDB=="object"}catch{return!1}}function ou(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="FirebaseError";class Tt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=iu,Object.setPrototypeOf(this,Tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ga.prototype.create)}}class ga{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],i=o?au(o,r):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new Tt(s,a,r)}}function au(n,e){return n.replace(lu,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const lu=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(n){return n&&n._delegate?n._delegate:n}class Un{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(b||(b={}));const cu={debug:b.DEBUG,verbose:b.VERBOSE,info:b.INFO,warn:b.WARN,error:b.ERROR,silent:b.SILENT},uu=b.INFO,hu={[b.DEBUG]:"log",[b.VERBOSE]:"log",[b.INFO]:"info",[b.WARN]:"warn",[b.ERROR]:"error"},du=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=hu[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _a{constructor(e){this.name=e,this._logLevel=uu,this._logHandler=du,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in b))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cu[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,b.DEBUG,...e),this._logHandler(this,b.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,b.VERBOSE,...e),this._logHandler(this,b.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,b.INFO,...e),this._logHandler(this,b.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,b.WARN,...e),this._logHandler(this,b.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,b.ERROR,...e),this._logHandler(this,b.ERROR,...e)}}const mu=(n,e)=>e.some(t=>n instanceof t);let ei,ti;function fu(){return ei||(ei=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pu(){return ti||(ti=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ya=new WeakMap,Wr=new WeakMap,va=new WeakMap,Nr=new WeakMap,Vs=new WeakMap;function gu(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",i)},o=()=>{t(Me(n.result)),s()},i=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",i)});return e.then(t=>{t instanceof IDBCursor&&ya.set(t,n)}).catch(()=>{}),Vs.set(e,n),e}function _u(n){if(Wr.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",i),n.removeEventListener("abort",i)},o=()=>{t(),s()},i=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",i),n.addEventListener("abort",i)});Wr.set(n,e)}let Yr={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wr.get(n);if(e==="objectStoreNames")return n.objectStoreNames||va.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Me(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function yu(n){Yr=n(Yr)}function vu(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Dr(this),e,...t);return va.set(r,e.sort?e.sort():[e]),Me(r)}:pu().includes(n)?function(...e){return n.apply(Dr(this),e),Me(ya.get(this))}:function(...e){return Me(n.apply(Dr(this),e))}}function Eu(n){return typeof n=="function"?vu(n):(n instanceof IDBTransaction&&_u(n),mu(n,fu())?new Proxy(n,Yr):n)}function Me(n){if(n instanceof IDBRequest)return gu(n);if(Nr.has(n))return Nr.get(n);const e=Eu(n);return e!==n&&(Nr.set(n,e),Vs.set(e,n)),e}const Dr=n=>Vs.get(n);function wu(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(n,e),a=Me(i);return r&&i.addEventListener("upgradeneeded",l=>{r(Me(i.result),l.oldVersion,l.newVersion,Me(i.transaction),l)}),t&&i.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Tu=["get","getKey","getAll","getAllKeys","count"],Au=["put","add","delete","clear"],kr=new Map;function ni(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(kr.get(e))return kr.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Au.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Tu.includes(t)))return;const o=async function(i,...a){const l=this.transaction(i,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return kr.set(e,o),o}yu(n=>({...n,get:(e,t,r)=>ni(e,t)||n.get(e,t,r),has:(e,t)=>!!ni(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Iu(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Iu(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xr="@firebase/app",ri="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe=new _a("@firebase/app"),Ru="@firebase/app-compat",Su="@firebase/analytics-compat",Cu="@firebase/analytics",bu="@firebase/app-check-compat",Pu="@firebase/app-check",Vu="@firebase/auth",Nu="@firebase/auth-compat",Du="@firebase/database",ku="@firebase/database-compat",Ou="@firebase/functions",Mu="@firebase/functions-compat",Lu="@firebase/installations",Fu="@firebase/installations-compat",qu="@firebase/messaging",Bu="@firebase/messaging-compat",$u="@firebase/performance",Uu="@firebase/performance-compat",ju="@firebase/remote-config",zu="@firebase/remote-config-compat",Hu="@firebase/storage",Gu="@firebase/storage-compat",Ku="@firebase/firestore",Qu="@firebase/firestore-compat",Wu="firebase",Yu="10.7.2",Xu={[Xr]:"fire-core",[Ru]:"fire-core-compat",[Cu]:"fire-analytics",[Su]:"fire-analytics-compat",[Pu]:"fire-app-check",[bu]:"fire-app-check-compat",[Vu]:"fire-auth",[Nu]:"fire-auth-compat",[Du]:"fire-rtdb",[ku]:"fire-rtdb-compat",[Ou]:"fire-fn",[Mu]:"fire-fn-compat",[Lu]:"fire-iid",[Fu]:"fire-iid-compat",[qu]:"fire-fcm",[Bu]:"fire-fcm-compat",[$u]:"fire-perf",[Uu]:"fire-perf-compat",[ju]:"fire-rc",[zu]:"fire-rc-compat",[Hu]:"fire-gcs",[Gu]:"fire-gcs-compat",[Ku]:"fire-fst",[Qu]:"fire-fst-compat","fire-js":"fire-js",[Wu]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new Map,si=new Map;function Zu(n,e){try{n.container.addComponent(e)}catch(t){Xe.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jn(n){const e=n.name;if(si.has(e))return Xe.debug(`There were multiple attempts to register component ${e}.`),!1;si.set(e,n);for(const t of Ju.values())Zu(t,n);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ns=new ga("app","Firebase",eh);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=Yu;function Ft(n,e,t){var r;let s=(r=Xu[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const a=[`Unable to register library "${s}" with version "${e}":`];o&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xe.warn(a.join(" "));return}jn(new Un(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="firebase-heartbeat-database",rh=1,Ht="firebase-heartbeat-store";let Or=null;function Ea(){return Or||(Or=wu(nh,rh,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ht)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ns.create("idb-open",{originalErrorMessage:n.message})})),Or}async function sh(n){try{return await(await Ea()).transaction(Ht).objectStore(Ht).get(wa(n))}catch(e){if(e instanceof Tt)Xe.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xe.warn(t.message)}}}async function oi(n,e){try{const r=(await Ea()).transaction(Ht,"readwrite");await r.objectStore(Ht).put(e,wa(n)),await r.done}catch(t){if(t instanceof Tt)Xe.warn(t.message);else{const r=Ns.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Xe.warn(r.message)}}}function wa(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=1024,ih=30*24*60*60*1e3;class ah{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ch(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ii();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=ih}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ii(),{heartbeatsToSend:r,unsentEntries:s}=lh(this._heartbeatsCache.heartbeats),o=fa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function ii(){return new Date().toISOString().substring(0,10)}function lh(n,e=oh){const t=[];let r=n.slice();for(const s of n){const o=t.find(i=>i.agent===s.agent);if(o){if(o.dates.push(s.date),ai(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ai(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ch{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pa()?ou().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sh(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return oi(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return oi(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ai(n){return fa(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(n){jn(new Un("platform-logger",e=>new xu(e),"PRIVATE")),jn(new Un("heartbeat",e=>new ah(e),"PRIVATE")),Ft(Xr,ri,n),Ft(Xr,ri,"esm2017"),Ft("fire-js","")}uh("");var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v,Ds=Ds||{},I=hh||self;function rr(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function on(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function dh(n){return Object.prototype.hasOwnProperty.call(n,Mr)&&n[Mr]||(n[Mr]=++mh)}var Mr="closure_uid_"+(1e9*Math.random()>>>0),mh=0;function fh(n,e,t){return n.call.apply(n.bind,arguments)}function ph(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function le(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?le=fh:le=ph,le.apply(null,arguments)}function En(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Z(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,o){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return e.prototype[s].apply(r,i)}}function $e(){this.s=this.s,this.o=this.o}var gh=0;$e.prototype.s=!1;$e.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),gh!=0)&&dh(this)};$e.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ta=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ks(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function li(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(rr(r)){const s=n.length||0,o=r.length||0;n.length=s+o;for(let i=0;i<o;i++)n[s+i]=r[i]}else n.push(r)}}function ce(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var _h=function(){if(!I.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};I.addEventListener("test",t,e),I.removeEventListener("test",t,e)}catch{}return n}();function Gt(n){return/^[\s\xa0]*$/.test(n)}function sr(){var n=I.navigator;return n&&(n=n.userAgent)?n:""}function Ee(n){return sr().indexOf(n)!=-1}function Os(n){return Os[" "](n),n}Os[" "]=function(){};function yh(n,e){var t=ud;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var vh=Ee("Opera"),ft=Ee("Trident")||Ee("MSIE"),Aa=Ee("Edge"),Jr=Aa||ft,xa=Ee("Gecko")&&!(sr().toLowerCase().indexOf("webkit")!=-1&&!Ee("Edge"))&&!(Ee("Trident")||Ee("MSIE"))&&!Ee("Edge"),Eh=sr().toLowerCase().indexOf("webkit")!=-1&&!Ee("Edge");function Ia(){var n=I.document;return n?n.documentMode:void 0}var Zr;e:{var Lr="",Fr=function(){var n=sr();if(xa)return/rv:([^\);]+)(\)|;)/.exec(n);if(Aa)return/Edge\/([\d\.]+)/.exec(n);if(ft)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(Eh)return/WebKit\/(\S+)/.exec(n);if(vh)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(Fr&&(Lr=Fr?Fr[1]:""),ft){var qr=Ia();if(qr!=null&&qr>parseFloat(Lr)){Zr=String(qr);break e}}Zr=Lr}var es;if(I.document&&ft){var ci=Ia();es=ci||parseInt(Zr,10)||void 0}else es=void 0;var wh=es;function Kt(n,e){if(ce.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(xa){e:{try{Os(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:Th[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kt.$.h.call(this)}}Z(Kt,ce);var Th={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),Ah=0;function xh(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Ah,this.fa=this.ia=!1}function or(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ms(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ih(n,e){for(const t in n)e.call(void 0,n[t],t,n)}function Ra(n){const e={};for(const t in n)e[t]=n[t];return e}const ui="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sa(n,e){let t,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(t in r)n[t]=r[t];for(let o=0;o<ui.length;o++)t=ui[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ir(n){this.src=n,this.g={},this.h=0}ir.prototype.add=function(n,e,t,r,s){var o=n.toString();n=this.g[o],n||(n=this.g[o]=[],this.h++);var i=ns(n,e,r,s);return-1<i?(e=n[i],t||(e.ia=!1)):(e=new xh(e,this.src,o,!!r,s),e.ia=t,n.push(e)),e};function ts(n,e){var t=e.type;if(t in n.g){var r=n.g[t],s=Ta(r,e),o;(o=0<=s)&&Array.prototype.splice.call(r,s,1),o&&(or(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function ns(n,e,t,r){for(var s=0;s<n.length;++s){var o=n[s];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return s}return-1}var Ls="closure_lm_"+(1e6*Math.random()|0),Br={};function Ca(n,e,t,r,s){if(r&&r.once)return Pa(n,e,t,r,s);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ca(n,e[o],t,r,s);return null}return t=Bs(t),n&&n[an]?n.O(e,t,on(r)?!!r.capture:!!r,s):ba(n,e,t,!1,r,s)}function ba(n,e,t,r,s,o){if(!e)throw Error("Invalid event type");var i=on(s)?!!s.capture:!!s,a=qs(n);if(a||(n[Ls]=a=new ir(n)),t=a.add(e,t,r,i,o),t.proxy)return t;if(r=Rh(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)_h||(s=i),s===void 0&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Na(e.toString()),r);else if(n.addListener&&n.removeListener)n.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return t}function Rh(){function n(t){return e.call(n.src,n.listener,t)}const e=Sh;return n}function Pa(n,e,t,r,s){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pa(n,e[o],t,r,s);return null}return t=Bs(t),n&&n[an]?n.P(e,t,on(r)?!!r.capture:!!r,s):ba(n,e,t,!0,r,s)}function Va(n,e,t,r,s){if(Array.isArray(e))for(var o=0;o<e.length;o++)Va(n,e[o],t,r,s);else r=on(r)?!!r.capture:!!r,t=Bs(t),n&&n[an]?(n=n.i,e=String(e).toString(),e in n.g&&(o=n.g[e],t=ns(o,t,r,s),-1<t&&(or(o[t]),Array.prototype.splice.call(o,t,1),o.length==0&&(delete n.g[e],n.h--)))):n&&(n=qs(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ns(e,t,r,s)),(t=-1<n?e[n]:null)&&Fs(t))}function Fs(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[an])ts(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Na(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=qs(e))?(ts(t,n),t.h==0&&(t.src=null,e[Ls]=null)):or(n)}}}function Na(n){return n in Br?Br[n]:Br[n]="on"+n}function Sh(n,e){if(n.fa)n=!0;else{e=new Kt(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Fs(n),n=t.call(r,e)}return n}function qs(n){return n=n[Ls],n instanceof ir?n:null}var $r="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bs(n){return typeof n=="function"?n:(n[$r]||(n[$r]=function(e){return n.handleEvent(e)}),n[$r])}function J(){$e.call(this),this.i=new ir(this),this.S=this,this.J=null}Z(J,$e);J.prototype[an]=!0;J.prototype.removeEventListener=function(n,e,t,r){Va(this,n,e,t,r)};function re(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,typeof e=="string")e=new ce(e,n);else if(e instanceof ce)e.target=e.target||n;else{var s=e;e=new ce(r,n),Sa(e,s)}if(s=!0,t)for(var o=t.length-1;0<=o;o--){var i=e.g=t[o];s=wn(i,r,!0,e)&&s}if(i=e.g=n,s=wn(i,r,!0,e)&&s,s=wn(i,r,!1,e)&&s,t)for(o=0;o<t.length;o++)i=e.g=t[o],s=wn(i,r,!1,e)&&s}J.prototype.N=function(){if(J.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)or(t[r]);delete n.g[e],n.h--}}this.J=null};J.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)};J.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};function wn(n,e,t,r){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,o=0;o<e.length;++o){var i=e[o];if(i&&!i.fa&&i.capture==t){var a=i.listener,l=i.la||i.src;i.ia&&ts(n.i,i),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var $s=I.JSON.stringify;class Ch{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function bh(){var n=Us;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class Ph{constructor(){this.h=this.g=null}add(e,t){const r=Da.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var Da=new Ch(()=>new Vh,n=>n.reset());class Vh{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Nh(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Dh(n){I.setTimeout(()=>{throw n},0)}let Qt,Wt=!1,Us=new Ph,ka=()=>{const n=I.Promise.resolve(void 0);Qt=()=>{n.then(kh)}};var kh=()=>{for(var n;n=bh();){try{n.h.call(n.g)}catch(t){Dh(t)}var e=Da;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Wt=!1};function ar(n,e){J.call(this),this.h=n||1,this.g=e||I,this.j=le(this.qb,this),this.l=Date.now()}Z(ar,J);v=ar.prototype;v.ga=!1;v.T=null;v.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),re(this,"tick"),this.ga&&(js(this),this.start()))}};v.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function js(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}v.N=function(){ar.$.N.call(this),js(this),delete this.g};function zs(n,e,t){if(typeof n=="function")t&&(n=le(n,t));else if(n&&typeof n.handleEvent=="function")n=le(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:I.setTimeout(n,e||0)}function Oa(n){n.g=zs(()=>{n.g=null,n.i&&(n.i=!1,Oa(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class Oh extends $e{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Oa(this)}N(){super.N(),this.g&&(I.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yt(n){$e.call(this),this.h=n,this.g={}}Z(Yt,$e);var hi=[];function Ma(n,e,t,r){Array.isArray(t)||(t&&(hi[0]=t.toString()),t=hi);for(var s=0;s<t.length;s++){var o=Ca(e,t[s],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function La(n){Ms(n.g,function(e,t){this.g.hasOwnProperty(t)&&Fs(e)},n),n.g={}}Yt.prototype.N=function(){Yt.$.N.call(this),La(this)};Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function lr(){this.g=!0}lr.prototype.Ea=function(){this.g=!1};function Mh(n,e,t,r,s,o){n.info(function(){if(n.g)if(o)for(var i="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var d=h.split("_");i=2<=d.length&&d[1]=="type"?i+(h+"="+c+"&"):i+(h+"=redacted&")}}else i=null;else i=o;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+t+`
`+i})}function Lh(n,e,t,r,s,o,i){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+t+`
`+o+" "+i})}function at(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+qh(n,t)+(r?" "+r:"")})}function Fh(n,e){n.info(function(){return"TIMEOUT: "+e})}lr.prototype.info=function(){};function qh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var o=s[0];if(o!="noop"&&o!="stop"&&o!="close")for(var i=1;i<s.length;i++)s[i]=""}}}}return $s(t)}catch{return e}}var tt={},di=null;function cr(){return di=di||new J}tt.Ta="serverreachability";function Fa(n){ce.call(this,tt.Ta,n)}Z(Fa,ce);function Xt(n){const e=cr();re(e,new Fa(e))}tt.STAT_EVENT="statevent";function qa(n,e){ce.call(this,tt.STAT_EVENT,n),this.stat=e}Z(qa,ce);function he(n){const e=cr();re(e,new qa(e,n))}tt.Ua="timingevent";function Ba(n,e){ce.call(this,tt.Ua,n),this.size=e}Z(Ba,ce);function ln(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return I.setTimeout(function(){n()},e)}var ur={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$a={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Hs(){}Hs.prototype.h=null;function mi(n){return n.h||(n.h=n.i())}function Ua(){}var cn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Gs(){ce.call(this,"d")}Z(Gs,ce);function Ks(){ce.call(this,"c")}Z(Ks,ce);var rs;function hr(){}Z(hr,Hs);hr.prototype.g=function(){return new XMLHttpRequest};hr.prototype.i=function(){return{}};rs=new hr;function un(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Yt(this),this.P=Bh,n=Jr?125:void 0,this.V=new ar(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ja}function ja(){this.i=null,this.g="",this.h=!1}var Bh=45e3,za={},ss={};v=un.prototype;v.setTimeout=function(n){this.P=n};function os(n,e,t){n.L=1,n.A=mr(Pe(e)),n.u=t,n.S=!0,Ha(n,null)}function Ha(n,e){n.G=Date.now(),hn(n),n.B=Pe(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),Za(t.i,"t",r),n.o=0,t=n.l.J,n.h=new ja,n.g=El(n.l,t?e:null,!n.u),0<n.O&&(n.M=new Oh(le(n.Pa,n,n.g),n.O)),Ma(n.U,n.g,"readystatechange",n.nb),e=n.I?Ra(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Xt(),Mh(n.j,n.v,n.B,n.m,n.W,n.u)}v.nb=function(n){n=n.target;const e=this.M;e&&Ae(n)==3?e.l():this.Pa(n)};v.Pa=function(n){try{if(n==this.g)e:{const h=Ae(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||Jr||this.g&&(this.h.h||this.g.ja()||_i(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?Xt(3):Xt(2)),dr(this);var t=this.g.da();this.ca=t;t:if(Ga(this)){var r=_i(this.g);n="";var s=r.length,o=Ae(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),qt(this);var i="";break t}this.h.i=new I.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==s-1});r.length=0,this.h.g+=n,this.o=0,i=this.h.g}else i=this.g.ja();if(this.i=t==200,Lh(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gt(a)){var c=a;break t}}c=null}if(t=c)at(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,is(this,t);else{this.i=!1,this.s=3,he(12),He(this),qt(this);break e}}this.S?(Ka(this,h,i),Jr&&this.i&&h==3&&(Ma(this.U,this.V,"tick",this.mb),this.V.start())):(at(this.j,this.m,i,null),is(this,i)),h==4&&He(this),this.i&&!this.J&&(h==4?gl(this.l,this):(this.i=!1,hn(this)))}else ad(this.g),t==400&&0<i.indexOf("Unknown SID")?(this.s=3,he(12)):(this.s=0,he(13)),He(this),qt(this)}}}catch{}finally{}};function Ga(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function Ka(n,e,t){let r=!0,s;for(;!n.J&&n.o<t.length;)if(s=$h(n,t),s==ss){e==4&&(n.s=4,he(14),r=!1),at(n.j,n.m,null,"[Incomplete Response]");break}else if(s==za){n.s=4,he(15),at(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}else at(n.j,n.m,s,null),is(n,s);Ga(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,he(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zs(e),e.M=!0,he(11))):(at(n.j,n.m,t,"[Invalid Chunked Response]"),He(n),qt(n))}v.mb=function(){if(this.g){var n=Ae(this.g),e=this.g.ja();this.o<e.length&&(dr(this),Ka(this,n,e),this.i&&n!=4&&hn(this))}};function $h(n,e){var t=n.o,r=e.indexOf(`
`,t);return r==-1?ss:(t=Number(e.substring(t,r)),isNaN(t)?za:(r+=1,r+t>e.length?ss:(e=e.slice(r,r+t),n.o=r+t,e)))}v.cancel=function(){this.J=!0,He(this)};function hn(n){n.Y=Date.now()+n.P,Qa(n,n.P)}function Qa(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=ln(le(n.lb,n),e)}function dr(n){n.C&&(I.clearTimeout(n.C),n.C=null)}v.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(Fh(this.j,this.B),this.L!=2&&(Xt(),he(17)),He(this),this.s=2,qt(this)):Qa(this,this.Y-n)};function qt(n){n.l.H==0||n.J||gl(n.l,n)}function He(n){dr(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,js(n.V),La(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function is(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||as(t.i,n))){if(!n.K&&as(t.i,n)&&t.H==3){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)Gn(t),_r(t);else break e;Js(t),he(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&t.A==0&&!t.v&&(t.v=ln(le(t.ib,t),6e3));if(1>=nl(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ge(t,11)}else if((n.K||t.g==n)&&Gn(t),!Gt(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(t.V=c[0],c=c[1],t.H==2)if(c[0]=="c"){t.K=c[1],t.pa=c[2];const h=c[3];h!=null&&(t.ra=h,t.l.info("VER="+t.ra));const d=c[4];d!=null&&(t.Ga=d,t.l.info("SVER="+t.Ga));const m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,t.L=r,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var o=r.i;o.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Qs(o,o.h),o.h=null))}if(r.F){const w=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,F(r.I,r.F,w))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),r=t;var i=n;if(r.wa=vl(r,r.J?r.pa:null,r.Y),i.K){rl(r.i,i);var a=i,l=r.L;l&&a.setTimeout(l),a.C&&(dr(a),hn(a)),r.g=i}else fl(r);0<t.j.length&&yr(t)}else c[0]!="stop"&&c[0]!="close"||Ge(t,7);else t.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ge(t,7):Xs(t):c[0]!="noop"&&t.h&&t.h.Aa(c),t.A=0)}}Xt(4)}catch{}}function Uh(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(rr(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}e=[],t=0;for(r in n)e[t++]=n[r];return e}function jh(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(rr(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}function Wa(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(rr(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=jh(n),r=Uh(n),s=r.length,o=0;o<s;o++)e.call(void 0,r[o],t&&t[o],n)}var Ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zh(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var o=n[t].substring(0,r);s=n[t].substring(r+1)}else o=n[t];e(o,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function We(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof We){this.h=n.h,zn(this,n.j),this.s=n.s,this.g=n.g,Hn(this,n.m),this.l=n.l;var e=n.i,t=new Jt;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fi(this,t),this.o=n.o}else n&&(e=String(n).match(Ya))?(this.h=!1,zn(this,e[1]||"",!0),this.s=kt(e[2]||""),this.g=kt(e[3]||"",!0),Hn(this,e[4]),this.l=kt(e[5]||"",!0),fi(this,e[6]||"",!0),this.o=kt(e[7]||"")):(this.h=!1,this.i=new Jt(null,this.h))}We.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ot(e,pi,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Ot(e,pi,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Ot(t,t.charAt(0)=="/"?Kh:Gh,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ot(t,Wh)),n.join("")};function Pe(n){return new We(n)}function zn(n,e,t){n.j=t?kt(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Hn(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fi(n,e,t){e instanceof Jt?(n.i=e,Yh(n.i,n.h)):(t||(e=Ot(e,Qh)),n.i=new Jt(e,n.h))}function F(n,e,t){n.i.set(e,t)}function mr(n){return F(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function kt(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ot(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,Hh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Hh(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var pi=/[#\/\?@]/g,Gh=/[#\?:]/g,Kh=/[#\?]/g,Qh=/[#\?@]/g,Wh=/#/g;function Jt(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ue(n){n.g||(n.g=new Map,n.h=0,n.i&&zh(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}v=Jt.prototype;v.add=function(n,e){Ue(this),this.i=null,n=At(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function Xa(n,e){Ue(n),e=At(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Ja(n,e){return Ue(n),e=At(n,e),n.g.has(e)}v.forEach=function(n,e){Ue(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)};v.ta=function(){Ue(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let o=0;o<s.length;o++)t.push(e[r])}return t};v.Z=function(n){Ue(this);let e=[];if(typeof n=="string")Ja(this,n)&&(e=e.concat(this.g.get(At(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};v.set=function(n,e){return Ue(this),this.i=null,n=At(this,n),Ja(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};v.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function Za(n,e,t){Xa(n,e),0<t.length&&(n.i=null,n.g.set(At(n,e),ks(t)),n.h+=t.length)}v.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),i=this.Z(r);for(r=0;r<i.length;r++){var s=o;i[r]!==""&&(s+="="+encodeURIComponent(String(i[r]))),n.push(s)}}return this.i=n.join("&")};function At(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Yh(n,e){e&&!n.j&&(Ue(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Xa(this,r),Za(this,s,t))},n)),n.j=e}var Xh=class{constructor(n,e){this.g=n,this.map=e}};function el(n){this.l=n||Jh,I.PerformanceNavigationTiming?(n=I.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(I.g&&I.g.Ka&&I.g.Ka()&&I.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Jh=10;function tl(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function nl(n){return n.h?1:n.g?n.g.size:0}function as(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function Qs(n,e){n.g?n.g.add(e):n.h=e}function rl(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}el.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function sl(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return ks(n.i)}var Zh=class{stringify(n){return I.JSON.stringify(n,void 0)}parse(n){return I.JSON.parse(n,void 0)}};function ed(){this.g=new Zh}function td(n,e,t){const r=t||"";try{Wa(n,function(s,o){let i=s;on(s)&&(i=$s(s)),e.push(r+o+"="+encodeURIComponent(i))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function nd(n,e){const t=new lr;if(I.Image){const r=new Image;r.onload=En(Tn,t,r,"TestLoadImage: loaded",!0,e),r.onerror=En(Tn,t,r,"TestLoadImage: error",!1,e),r.onabort=En(Tn,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=En(Tn,t,r,"TestLoadImage: timeout",!1,e),I.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}function Tn(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function fr(n){this.l=n.ec||null,this.j=n.ob||!1}Z(fr,Hs);fr.prototype.g=function(){return new pr(this.l,this.j)};fr.prototype.i=function(n){return function(){return n}}({});function pr(n,e){J.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Ws,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Z(pr,J);var Ws=0;v=pr.prototype;v.open=function(n,e){if(this.readyState!=Ws)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zt(this)};v.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||I).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};v.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dn(this)),this.readyState=Ws};v.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zt(this)),this.g&&(this.readyState=3,Zt(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof I.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ol(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function ol(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}v.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?dn(this):Zt(this),this.readyState==3&&ol(this)}};v.Za=function(n){this.g&&(this.response=this.responseText=n,dn(this))};v.Ya=function(n){this.g&&(this.response=n,dn(this))};v.ka=function(){this.g&&dn(this)};function dn(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zt(n)}v.setRequestHeader=function(n,e){this.v.append(n,e)};v.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};v.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function Zt(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var rd=I.JSON.parse;function U(n){J.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=il,this.L=this.M=!1}Z(U,J);var il="",sd=/^https?$/i,od=["POST","PUT"];v=U.prototype;v.Oa=function(n){this.M=n};v.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():rs.g(),this.C=this.u?mi(this.u):mi(rs),this.g.onreadystatechange=le(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){gi(this,o);return}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const o of r.keys())t.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(t.keys()).find(o=>o.toLowerCase()=="content-type"),s=I.FormData&&n instanceof I.FormData,!(0<=Ta(od,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,i]of t)this.g.setRequestHeader(o,i);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{cl(this),0<this.B&&((this.L=id(this.g))?(this.g.timeout=this.B,this.g.ontimeout=le(this.ua,this)):this.A=zs(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){gi(this,o)}};function id(n){return ft&&typeof n.timeout=="number"&&n.ontimeout!==void 0}v.ua=function(){typeof Ds<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,re(this,"timeout"),this.abort(8))};function gi(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,al(n),gr(n)}function al(n){n.F||(n.F=!0,re(n,"complete"),re(n,"error"))}v.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,re(this,"complete"),re(this,"abort"),gr(this))};v.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gr(this,!0)),U.$.N.call(this)};v.La=function(){this.s||(this.G||this.v||this.l?ll(this):this.kb())};v.kb=function(){ll(this)};function ll(n){if(n.h&&typeof Ds<"u"&&(!n.C[1]||Ae(n)!=4||n.da()!=2)){if(n.v&&Ae(n)==4)zs(n.La,0,n);else if(re(n,"readystatechange"),Ae(n)==4){n.h=!1;try{const i=n.da();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=i===0){var s=String(n.I).match(Ya)[1]||null;!s&&I.self&&I.self.location&&(s=I.self.location.protocol.slice(0,-1)),r=!sd.test(s?s.toLowerCase():"")}t=r}if(t)re(n,"complete"),re(n,"success");else{n.m=6;try{var o=2<Ae(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",al(n)}}finally{gr(n)}}}}function gr(n,e){if(n.g){cl(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||re(n,"ready");try{t.onreadystatechange=r}catch{}}}function cl(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(I.clearTimeout(n.A),n.A=null)}v.isActive=function(){return!!this.g};function Ae(n){return n.g?n.g.readyState:0}v.da=function(){try{return 2<Ae(this)?this.g.status:-1}catch{return-1}};v.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};v.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),rd(e)}};function _i(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case il:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ad(n){const e={};n=(n.g&&2<=Ae(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<n.length;r++){if(Gt(n[r]))continue;var t=Nh(n[r]);const s=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();const o=e[s]||[];e[s]=o,o.push(t)}Ih(e,function(r){return r.join(", ")})}v.Ia=function(){return this.m};v.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ul(n){let e="";return Ms(n,function(t,r){e+=r,e+=":",e+=t,e+=`\r
`}),e}function Ys(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=ul(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):F(n,e,t))}function Vt(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hl(n){this.Ga=0,this.j=[],this.l=new lr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vt("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vt("baseRetryDelayMs",5e3,n),this.hb=Vt("retryDelaySeedMs",1e4,n),this.eb=Vt("forwardChannelMaxRetries",2,n),this.xa=Vt("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new el(n&&n.concurrentRequestLimit),this.Ja=new ed,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}v=hl.prototype;v.ra=8;v.H=1;function Xs(n){if(dl(n),n.H==3){var e=n.W++,t=Pe(n.I);if(F(t,"SID",n.K),F(t,"RID",e),F(t,"TYPE","terminate"),mn(n,t),e=new un(n,n.l,e),e.L=2,e.A=mr(Pe(t)),t=!1,I.navigator&&I.navigator.sendBeacon)try{t=I.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&I.Image&&(new Image().src=e.A,t=!0),t||(e.g=El(e.l,null),e.g.ha(e.A)),e.G=Date.now(),hn(e)}yl(n)}function _r(n){n.g&&(Zs(n),n.g.cancel(),n.g=null)}function dl(n){_r(n),n.u&&(I.clearTimeout(n.u),n.u=null),Gn(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&I.clearTimeout(n.m),n.m=null)}function yr(n){if(!tl(n.i)&&!n.m){n.m=!0;var e=n.Na;Qt||ka(),Wt||(Qt(),Wt=!0),Us.add(e,n),n.C=0}}function ld(n,e){return nl(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=ln(le(n.Na,n,e),_l(n,n.C)),n.C++,!0)}v.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new un(this,this.l,n);let o=this.s;if(this.U&&(o?(o=Ra(o),Sa(o,this.U)):o=this.U),this.o!==null||this.O||(s.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var r=this.j[t];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ml(this,s,e),t=Pe(this.I),F(t,"RID",n),F(t,"CVER",22),this.F&&F(t,"X-HTTP-Session-Id",this.F),mn(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(ul(o)))+"&"+e:this.o&&Ys(t,this.o,o)),Qs(this.i,s),this.bb&&F(t,"TYPE","init"),this.P?(F(t,"$req",e),F(t,"SID","null"),s.aa=!0,os(s,t,null)):os(s,t,e),this.H=2}}else this.H==3&&(n?yi(this,n):this.j.length==0||tl(this.i)||yi(this))};function yi(n,e){var t;e?t=e.m:t=n.W++;const r=Pe(n.I);F(r,"SID",n.K),F(r,"RID",t),F(r,"AID",n.V),mn(n,r),n.o&&n.s&&Ys(r,n.o,n.s),t=new un(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=ml(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Qs(n.i,t),os(t,r,e)}function mn(n,e){n.na&&Ms(n.na,function(t,r){F(e,r,t)}),n.h&&Wa({},function(t,r){F(e,r,t)})}function ml(n,e,t){t=Math.min(n.j.length,t);var r=n.h?le(n.h.Va,n.h,n):null;e:{var s=n.j;let o=-1;for(;;){const i=["count="+t];o==-1?0<t?(o=s[0].g,i.push("ofs="+o)):o=0:i.push("ofs="+o);let a=!0;for(let l=0;l<t;l++){let c=s[l].g;const h=s[l].map;if(c-=o,0>c)o=Math.max(0,s[l].g-100),a=!1;else try{td(h,i,"req"+c+"_")}catch{r&&r(h)}}if(a){r=i.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function fl(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Qt||ka(),Wt||(Qt(),Wt=!0),Us.add(e,n),n.A=0}}function Js(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=ln(le(n.Ma,n),_l(n,n.A)),n.A++,!0)}v.Ma=function(){if(this.u=null,pl(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ln(le(this.jb,this),n)}};v.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,he(10),_r(this),pl(this))};function Zs(n){n.B!=null&&(I.clearTimeout(n.B),n.B=null)}function pl(n){n.g=new un(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=Pe(n.wa);F(e,"RID","rpc"),F(e,"SID",n.K),F(e,"AID",n.V),F(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&F(e,"TO",n.qa),F(e,"TYPE","xmlhttp"),mn(n,e),n.o&&n.s&&Ys(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=mr(Pe(e)),t.u=null,t.S=!0,Ha(t,n)}v.ib=function(){this.v!=null&&(this.v=null,_r(this),Js(this),he(19))};function Gn(n){n.v!=null&&(I.clearTimeout(n.v),n.v=null)}function gl(n,e){var t=null;if(n.g==e){Gn(n),Zs(n),n.g=null;var r=2}else if(as(n.i,e))t=e.F,rl(n.i,e),r=1;else return;if(n.H!=0){if(e.i)if(r==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var s=n.C;r=cr(),re(r,new Ba(r,t)),yr(n)}else fl(n);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&ld(n,e)||r==2&&Js(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Ge(n,5);break;case 4:Ge(n,10);break;case 3:Ge(n,6);break;default:Ge(n,2)}}}function _l(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ge(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var r=le(n.pb,n);t||(t=new We("//www.google.com/images/cleardot.gif"),I.location&&I.location.protocol=="http"||zn(t,"https"),mr(t)),nd(t.toString(),r)}else he(2);n.H=0,n.h&&n.h.za(e),yl(n),dl(n)}v.pb=function(n){n?(this.l.info("Successfully pinged google.com"),he(2)):(this.l.info("Failed to ping google.com"),he(1))};function yl(n){if(n.H=0,n.ma=[],n.h){const e=sl(n.i);(e.length!=0||n.j.length!=0)&&(li(n.ma,e),li(n.ma,n.j),n.i.i.length=0,ks(n.j),n.j.length=0),n.h.ya()}}function vl(n,e,t){var r=t instanceof We?Pe(t):new We(t);if(r.g!="")e&&(r.g=e+"."+r.g),Hn(r,r.m);else{var s=I.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new We(null);r&&zn(o,r),e&&(o.g=e),s&&Hn(o,s),t&&(o.l=t),r=o}return t=n.F,e=n.Da,t&&e&&F(r,t,e),F(r,"VER",n.ra),mn(n,r),r}function El(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new U(new fr({ob:t})):new U(n.va),e.Oa(n.J),e}v.isActive=function(){return!!this.h&&this.h.isActive(this)};function wl(){}v=wl.prototype;v.Ba=function(){};v.Aa=function(){};v.za=function(){};v.ya=function(){};v.isActive=function(){return!0};v.Va=function(){};function Kn(){if(ft&&!(10<=Number(wh)))throw Error("Environmental error: no available transport.")}Kn.prototype.g=function(n,e){return new fe(n,e)};function fe(n,e){J.call(this),this.g=new hl(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Gt(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gt(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new xt(this)}Z(fe,J);fe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;he(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=vl(n,null,n.Y),yr(n)};fe.prototype.close=function(){Xs(this.g)};fe.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=$s(n),n=t);e.j.push(new Xh(e.fb++,n)),e.H==3&&yr(e)};fe.prototype.N=function(){this.g.h=null,delete this.j,Xs(this.g),delete this.g,fe.$.N.call(this)};function Tl(n){Gs.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}Z(Tl,Gs);function Al(){Ks.call(this),this.status=1}Z(Al,Ks);function xt(n){this.g=n}Z(xt,wl);xt.prototype.Ba=function(){re(this.g,"a")};xt.prototype.Aa=function(n){re(this.g,new Tl(n))};xt.prototype.za=function(n){re(this.g,new Al)};xt.prototype.ya=function(){re(this.g,"b")};function cd(){this.blockSize=-1}function ye(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Z(ye,cd);ye.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ur(n,e,t){t||(t=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],s=n.g[2];var o=n.g[3],i=e+(o^t&(s^o))+r[0]+3614090360&4294967295;e=t+(i<<7&4294967295|i>>>25),i=o+(s^e&(t^s))+r[1]+3905402710&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(t^o&(e^t))+r[2]+606105819&4294967295,s=o+(i<<17&4294967295|i>>>15),i=t+(e^s&(o^e))+r[3]+3250441966&4294967295,t=s+(i<<22&4294967295|i>>>10),i=e+(o^t&(s^o))+r[4]+4118548399&4294967295,e=t+(i<<7&4294967295|i>>>25),i=o+(s^e&(t^s))+r[5]+1200080426&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(t^o&(e^t))+r[6]+2821735955&4294967295,s=o+(i<<17&4294967295|i>>>15),i=t+(e^s&(o^e))+r[7]+4249261313&4294967295,t=s+(i<<22&4294967295|i>>>10),i=e+(o^t&(s^o))+r[8]+1770035416&4294967295,e=t+(i<<7&4294967295|i>>>25),i=o+(s^e&(t^s))+r[9]+2336552879&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(t^o&(e^t))+r[10]+4294925233&4294967295,s=o+(i<<17&4294967295|i>>>15),i=t+(e^s&(o^e))+r[11]+2304563134&4294967295,t=s+(i<<22&4294967295|i>>>10),i=e+(o^t&(s^o))+r[12]+1804603682&4294967295,e=t+(i<<7&4294967295|i>>>25),i=o+(s^e&(t^s))+r[13]+4254626195&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(t^o&(e^t))+r[14]+2792965006&4294967295,s=o+(i<<17&4294967295|i>>>15),i=t+(e^s&(o^e))+r[15]+1236535329&4294967295,t=s+(i<<22&4294967295|i>>>10),i=e+(s^o&(t^s))+r[1]+4129170786&4294967295,e=t+(i<<5&4294967295|i>>>27),i=o+(t^s&(e^t))+r[6]+3225465664&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^t&(o^e))+r[11]+643717713&4294967295,s=o+(i<<14&4294967295|i>>>18),i=t+(o^e&(s^o))+r[0]+3921069994&4294967295,t=s+(i<<20&4294967295|i>>>12),i=e+(s^o&(t^s))+r[5]+3593408605&4294967295,e=t+(i<<5&4294967295|i>>>27),i=o+(t^s&(e^t))+r[10]+38016083&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^t&(o^e))+r[15]+3634488961&4294967295,s=o+(i<<14&4294967295|i>>>18),i=t+(o^e&(s^o))+r[4]+3889429448&4294967295,t=s+(i<<20&4294967295|i>>>12),i=e+(s^o&(t^s))+r[9]+568446438&4294967295,e=t+(i<<5&4294967295|i>>>27),i=o+(t^s&(e^t))+r[14]+3275163606&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^t&(o^e))+r[3]+4107603335&4294967295,s=o+(i<<14&4294967295|i>>>18),i=t+(o^e&(s^o))+r[8]+1163531501&4294967295,t=s+(i<<20&4294967295|i>>>12),i=e+(s^o&(t^s))+r[13]+2850285829&4294967295,e=t+(i<<5&4294967295|i>>>27),i=o+(t^s&(e^t))+r[2]+4243563512&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^t&(o^e))+r[7]+1735328473&4294967295,s=o+(i<<14&4294967295|i>>>18),i=t+(o^e&(s^o))+r[12]+2368359562&4294967295,t=s+(i<<20&4294967295|i>>>12),i=e+(t^s^o)+r[5]+4294588738&4294967295,e=t+(i<<4&4294967295|i>>>28),i=o+(e^t^s)+r[8]+2272392833&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^t)+r[11]+1839030562&4294967295,s=o+(i<<16&4294967295|i>>>16),i=t+(s^o^e)+r[14]+4259657740&4294967295,t=s+(i<<23&4294967295|i>>>9),i=e+(t^s^o)+r[1]+2763975236&4294967295,e=t+(i<<4&4294967295|i>>>28),i=o+(e^t^s)+r[4]+1272893353&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^t)+r[7]+4139469664&4294967295,s=o+(i<<16&4294967295|i>>>16),i=t+(s^o^e)+r[10]+3200236656&4294967295,t=s+(i<<23&4294967295|i>>>9),i=e+(t^s^o)+r[13]+681279174&4294967295,e=t+(i<<4&4294967295|i>>>28),i=o+(e^t^s)+r[0]+3936430074&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^t)+r[3]+3572445317&4294967295,s=o+(i<<16&4294967295|i>>>16),i=t+(s^o^e)+r[6]+76029189&4294967295,t=s+(i<<23&4294967295|i>>>9),i=e+(t^s^o)+r[9]+3654602809&4294967295,e=t+(i<<4&4294967295|i>>>28),i=o+(e^t^s)+r[12]+3873151461&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^t)+r[15]+530742520&4294967295,s=o+(i<<16&4294967295|i>>>16),i=t+(s^o^e)+r[2]+3299628645&4294967295,t=s+(i<<23&4294967295|i>>>9),i=e+(s^(t|~o))+r[0]+4096336452&4294967295,e=t+(i<<6&4294967295|i>>>26),i=o+(t^(e|~s))+r[7]+1126891415&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~t))+r[14]+2878612391&4294967295,s=o+(i<<15&4294967295|i>>>17),i=t+(o^(s|~e))+r[5]+4237533241&4294967295,t=s+(i<<21&4294967295|i>>>11),i=e+(s^(t|~o))+r[12]+1700485571&4294967295,e=t+(i<<6&4294967295|i>>>26),i=o+(t^(e|~s))+r[3]+2399980690&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~t))+r[10]+4293915773&4294967295,s=o+(i<<15&4294967295|i>>>17),i=t+(o^(s|~e))+r[1]+2240044497&4294967295,t=s+(i<<21&4294967295|i>>>11),i=e+(s^(t|~o))+r[8]+1873313359&4294967295,e=t+(i<<6&4294967295|i>>>26),i=o+(t^(e|~s))+r[15]+4264355552&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~t))+r[6]+2734768916&4294967295,s=o+(i<<15&4294967295|i>>>17),i=t+(o^(s|~e))+r[13]+1309151649&4294967295,t=s+(i<<21&4294967295|i>>>11),i=e+(s^(t|~o))+r[4]+4149444226&4294967295,e=t+(i<<6&4294967295|i>>>26),i=o+(t^(e|~s))+r[11]+3174756917&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~t))+r[2]+718787259&4294967295,s=o+(i<<15&4294967295|i>>>17),i=t+(o^(s|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+o&4294967295}ye.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,o=0;o<e;){if(s==0)for(;o<=t;)Ur(this,n,o),o+=this.blockSize;if(typeof n=="string"){for(;o<e;)if(r[s++]=n.charCodeAt(o++),s==this.blockSize){Ur(this,r),s=0;break}}else for(;o<e;)if(r[s++]=n[o++],s==this.blockSize){Ur(this,r),s=0;break}}this.h=s,this.i+=e};ye.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};function k(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var o=n[s]|0;r&&o==e||(t[s]=o,r=!1)}this.g=t}var ud={};function eo(n){return-128<=n&&128>n?yh(n,function(e){return new k([e|0],0>e?-1:0)}):new k([n|0],0>n?-1:0)}function xe(n){if(isNaN(n)||!isFinite(n))return lt;if(0>n)return ne(xe(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=ls;return new k(e,0)}function xl(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return ne(xl(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=xe(Math.pow(e,8)),r=lt,s=0;s<n.length;s+=8){var o=Math.min(8,n.length-s),i=parseInt(n.substring(s,s+o),e);8>o?(o=xe(Math.pow(e,o)),r=r.R(o).add(xe(i))):(r=r.R(t),r=r.add(xe(i)))}return r}var ls=4294967296,lt=eo(0),cs=eo(1),vi=eo(16777216);v=k.prototype;v.ea=function(){if(ge(this))return-ne(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:ls+r)*e,e*=ls}return n};v.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(be(this))return"0";if(ge(this))return"-"+ne(this).toString(n);for(var e=xe(Math.pow(n,6)),t=this,r="";;){var s=Wn(t,e).g;t=Qn(t,s.R(e));var o=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=s,be(t))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};v.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function be(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function ge(n){return n.h==-1}v.X=function(n){return n=Qn(this,n),ge(n)?-1:be(n)?0:1};function ne(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new k(t,~n.h).add(cs)}v.abs=function(){return ge(this)?ne(this):this};v.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var o=r+(this.D(s)&65535)+(n.D(s)&65535),i=(o>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=i>>>16,o&=65535,i&=65535,t[s]=i<<16|o}return new k(t,t[t.length-1]&-2147483648?-1:0)};function Qn(n,e){return n.add(ne(e))}v.R=function(n){if(be(this)||be(n))return lt;if(ge(this))return ge(n)?ne(this).R(ne(n)):ne(ne(this).R(n));if(ge(n))return ne(this.R(ne(n)));if(0>this.X(vi)&&0>n.X(vi))return xe(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var o=this.D(r)>>>16,i=this.D(r)&65535,a=n.D(s)>>>16,l=n.D(s)&65535;t[2*r+2*s]+=i*l,An(t,2*r+2*s),t[2*r+2*s+1]+=o*l,An(t,2*r+2*s+1),t[2*r+2*s+1]+=i*a,An(t,2*r+2*s+1),t[2*r+2*s+2]+=o*a,An(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new k(t,0)};function An(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Nt(n,e){this.g=n,this.h=e}function Wn(n,e){if(be(e))throw Error("division by zero");if(be(n))return new Nt(lt,lt);if(ge(n))return e=Wn(ne(n),e),new Nt(ne(e.g),ne(e.h));if(ge(e))return e=Wn(n,ne(e)),new Nt(ne(e.g),e.h);if(30<n.g.length){if(ge(n)||ge(e))throw Error("slowDivide_ only works with positive integers.");for(var t=cs,r=e;0>=r.X(n);)t=Ei(t),r=Ei(r);var s=nt(t,1),o=nt(r,1);for(r=nt(r,2),t=nt(t,2);!be(r);){var i=o.add(r);0>=i.X(n)&&(s=s.add(t),o=i),r=nt(r,1),t=nt(t,1)}return e=Qn(n,s.R(e)),new Nt(s,e)}for(s=lt;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=Math.ceil(Math.log(t)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=xe(t),i=o.R(e);ge(i)||0<i.X(n);)t-=r,o=xe(t),i=o.R(e);be(o)&&(o=cs),s=s.add(o),n=Qn(n,i)}return new Nt(s,n)}v.gb=function(n){return Wn(this,n).h};v.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new k(t,this.h&n.h)};v.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new k(t,this.h|n.h)};v.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new k(t,this.h^n.h)};function Ei(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new k(t,n.h)}function nt(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],o=0;o<r;o++)s[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new k(s,n.h)}Kn.prototype.createWebChannel=Kn.prototype.g;fe.prototype.send=fe.prototype.u;fe.prototype.open=fe.prototype.m;fe.prototype.close=fe.prototype.close;ur.NO_ERROR=0;ur.TIMEOUT=8;ur.HTTP_ERROR=6;$a.COMPLETE="complete";Ua.EventType=cn;cn.OPEN="a";cn.CLOSE="b";cn.ERROR="c";cn.MESSAGE="d";J.prototype.listen=J.prototype.O;U.prototype.listenOnce=U.prototype.P;U.prototype.getLastError=U.prototype.Sa;U.prototype.getLastErrorCode=U.prototype.Ia;U.prototype.getStatus=U.prototype.da;U.prototype.getResponseJson=U.prototype.Wa;U.prototype.getResponseText=U.prototype.ja;U.prototype.send=U.prototype.ha;U.prototype.setWithCredentials=U.prototype.Oa;ye.prototype.digest=ye.prototype.l;ye.prototype.reset=ye.prototype.reset;ye.prototype.update=ye.prototype.j;k.prototype.add=k.prototype.add;k.prototype.multiply=k.prototype.R;k.prototype.modulo=k.prototype.gb;k.prototype.compare=k.prototype.X;k.prototype.toNumber=k.prototype.ea;k.prototype.toString=k.prototype.toString;k.prototype.getBits=k.prototype.D;k.fromNumber=xe;k.fromString=xl;var hd=function(){return new Kn},dd=function(){return cr()},jr=ur,md=$a,fd=tt,wi={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xn=Ua,pd=U,gd=ye,ct=k;const Ti="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}me.UNAUTHENTICATED=new me(null),me.GOOGLE_CREDENTIALS=new me("google-credentials-uid"),me.FIRST_PARTY=new me("first-party-uid"),me.MOCK_USER=new me("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let It="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je=new _a("@firebase/firestore");function Dt(){return Je.logLevel}function E(n,...e){if(Je.logLevel<=b.DEBUG){const t=e.map(to);Je.debug(`Firestore (${It}): ${n}`,...t)}}function Se(n,...e){if(Je.logLevel<=b.ERROR){const t=e.map(to);Je.error(`Firestore (${It}): ${n}`,...t)}}function en(n,...e){if(Je.logLevel<=b.WARN){const t=e.map(to);Je.warn(`Firestore (${It}): ${n}`,...t)}}function to(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(n="Unexpected state"){const e=`FIRESTORE (${It}) INTERNAL ASSERTION FAILED: `+n;throw Se(e),new Error(e)}function W(n,e){n||S()}function V(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends Tt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(me.UNAUTHENTICATED))}shutdown(){}}class vd{constructor(e){this.t=e,this.currentUser=me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let o=new Le;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Le,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Le)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(W(typeof r.accessToken=="string"),new _d(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return W(e===null||typeof e=="string"),new me(e)}}class Ed{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=me.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wd{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ed(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(me.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Td{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ad{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{o.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const i=o.token!==this.R;return this.R=o.token,E("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(W(typeof t.token=="string"),this.R=t.token,new Td(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=xd(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%e.length))}return r}}function D(n,e){return n<e?-1:n>e?1:0}function pt(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return X.fromMillis(Date.now())}static fromDate(e){return X.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new X(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?D(this.nanoseconds,e.nanoseconds):D(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.timestamp=e}static fromTimestamp(e){return new R(e)}static min(){return new R(new X(0,0))}static max(){return new R(new X(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,r){t===void 0?t=0:t>e.length&&S(),r===void 0?r=e.length-t:r>e.length-t&&S(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return tn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tn?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=e.get(s),i=t.get(s);if(o<i)return-1;if(o>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class B extends tn{construct(e,t,r){return new B(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new B(t)}static emptyPath(){return new B([])}}const Rd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ae extends tn{construct(e,t,r){return new ae(e,t,r)}static isValidIdentifier(e){return Rd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ae.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ae(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new T(y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let i=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new T(y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new T(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(i=!i,s++):a!=="."||i?(r+=a,s++):(o(),s++)}if(o(),i)throw new T(y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ae(t)}static emptyPath(){return new ae([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e){this.path=e}static fromPath(e){return new A(B.fromString(e))}static fromName(e){return new A(B.fromString(e).popFirst(5))}static empty(){return new A(B.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&B.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return B.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new B(e.slice()))}}function Sd(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=R.fromTimestamp(r===1e9?new X(t+1,0):new X(t,r));return new Fe(s,A.empty(),e)}function Cd(n){return new Fe(n.readTime,n.key,-1)}class Fe{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fe(R.min(),A.empty(),-1)}static max(){return new Fe(R.max(),A.empty(),-1)}}function bd(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=A.comparator(n.documentKey,e.documentKey),t!==0?t:D(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(n){if(n.code!==y.FAILED_PRECONDITION||n.message!==Pd)throw n;E("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new g((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof g?t:g.resolve(t)}catch(t){return g.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):g.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):g.reject(t)}static resolve(e){return new g((t,r)=>{t(e)})}static reject(e){return new g((t,r)=>{r(e)})}static waitFor(e){return new g((t,r)=>{let s=0,o=0,i=!1;e.forEach(a=>{++s,a.next(()=>{++o,i&&o===s&&t()},l=>r(l))}),i=!0,o===s&&t()})}static or(e){let t=g.resolve(!1);for(const r of e)t=t.next(s=>s?g.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new g((r,s)=>{const o=e.length,i=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;t(e[c]).next(h=>{i[c]=h,++a,a===o&&r(i)},h=>s(h))}})}static doWhile(e,t){return new g((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Le,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Bt(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=so(r.target.error);this.V.reject(new Bt(e,s))}}static open(e,t,r,s){try{return new ro(t,e.transaction(s,r))}catch(o){throw new Bt(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Dd(t)}}class Ke{constructor(e,t,r){this.name=e,this.version=t,this.p=r,Ke.S(Bn())===12.2&&Se("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),je(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pa())return!1;if(Ke.C())return!0;const e=Bn(),t=Ke.S(e),r=0<t&&t<10,s=Ke.v(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const i=o.target.result;t(i)},s.onblocked=()=>{r(new Bt(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const i=o.target.error;i.name==="VersionError"?r(new T(y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new T(y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new Bt(e,i))},s.onupgradeneeded=o=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const i=o.target.result;this.p.N(i,s.transaction,o.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let i=0;for(;;){++i;try{this.db=await this.O(e);const a=ro.open(this.db,e,o?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),g.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&i<3;if(E("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Nd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return je(this.k.delete())}}class Bt extends T{constructor(e,t){super(y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fn(n){return n.name==="IndexedDbTransactionError"}class Dd{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(E("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),je(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),je(this.store.add(e))}get(e){return je(this.store.get(e)).next(t=>(t===void 0&&(t=null),E("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),je(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),je(this.store.count())}W(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new g((i,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{i(l.target.result)}})}{const o=this.cursor(r),i=[];return this.G(o,(a,l)=>{i.push(l)}).next(()=>i)}}j(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new g((s,o)=>{r.onerror=i=>{o(i.target.error)},r.onsuccess=i=>{s(i.target.result)}})}H(e,t){E("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const s=this.cursor(r);return this.G(s,(o,i,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Z(e){const t=this.cursor({});return new g((r,s)=>{t.onerror=o=>{const i=so(o.target.error);s(i)},t.onsuccess=o=>{const i=o.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():r()}):r()}})}G(e,t){const r=[];return new g((s,o)=>{e.onerror=i=>{o(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void s();const l=new Nd(a),c=t(a.primaryKey,a.value,l);if(c instanceof g){const h=c.catch(d=>(l.done(),g.reject(d)));r.push(h)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>g.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function je(n){return new g((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=so(r.target.error);t(s)}})}let Ai=!1;function so(n){const e=Ke.S(Bn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ai||(Ai=!0,setTimeout(()=>{throw r},0)),r}}return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.se(r),this.oe=r=>t.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}oo._e=-1;function vr(n){return n==null}function Yn(n){return n===0&&1/n==-1/0}function kd(n){return typeof n=="number"&&Number.isInteger(n)&&!Yn(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Il(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e,t){this.comparator=e,this.root=t||te.EMPTY}insert(e,t){return new j(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,te.BLACK,null,null))}remove(e){return new j(this.comparator,this.root.remove(e,this.comparator).copy(null,null,te.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new In(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new In(this.root,e,this.comparator,!1)}getReverseIterator(){return new In(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new In(this.root,e,this.comparator,!0)}}class In{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class te{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??te.RED,this.left=s??te.EMPTY,this.right=o??te.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new te(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return te.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return te.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,te.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,te.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();const e=this.left.check();if(e!==this.right.check())throw S();return e+(this.isRed()?0:1)}}te.EMPTY=null,te.RED=!0,te.BLACK=!1;te.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(e,t,r,s,o){return this}insert(e,t,r){return new te(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.comparator=e,this.data=new j(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ii(this.data.getIterator())}getIteratorFrom(e){return new Ii(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof se)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new se(this.comparator);return t.data=e,t}}class Ii{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.fields=e,e.sort(ae.comparator)}static empty(){return new ke([])}unionWith(e){let t=new se(ae.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ke(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pt(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Rl("Invalid base64 string: "+o):o}}(e);return new ue(t)}static fromUint8Array(e){const t=function(s){let o="";for(let i=0;i<s.length;++i)o+=String.fromCharCode(s[i]);return o}(e);return new ue(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return D(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ue.EMPTY_BYTE_STRING=new ue("");const Od=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qe(n){if(W(!!n),typeof n=="string"){let e=0;const t=Od.exec(n);if(W(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:K(n.seconds),nanos:K(n.nanos)}}function K(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ze(n){return typeof n=="string"?ue.fromBase64String(n):ue.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ao(n){const e=n.mapValue.fields.__previous_value__;return io(e)?ao(e):e}function nn(n){const e=qe(n.mapValue.fields.__local_write_time__.timestampValue);return new X(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t,r,s,o,i,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class rn{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function et(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?io(n)?4:Ld(n)?9007199254740991:10:S()}function Ce(n,e){if(n===e)return!0;const t=et(n);if(t!==et(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nn(n).isEqual(nn(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const i=qe(s.timestampValue),a=qe(o.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Ze(s.bytesValue).isEqual(Ze(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return K(s.geoPointValue.latitude)===K(o.geoPointValue.latitude)&&K(s.geoPointValue.longitude)===K(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return K(s.integerValue)===K(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const i=K(s.doubleValue),a=K(o.doubleValue);return i===a?Yn(i)===Yn(a):isNaN(i)&&isNaN(a)}return!1}(n,e);case 9:return pt(n.arrayValue.values||[],e.arrayValue.values||[],Ce);case 10:return function(s,o){const i=s.mapValue.fields||{},a=o.mapValue.fields||{};if(xi(i)!==xi(a))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(a[l]===void 0||!Ce(i[l],a[l])))return!1;return!0}(n,e);default:return S()}}function sn(n,e){return(n.values||[]).find(t=>Ce(t,e))!==void 0}function gt(n,e){if(n===e)return 0;const t=et(n),r=et(e);if(t!==r)return D(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return D(n.booleanValue,e.booleanValue);case 2:return function(o,i){const a=K(o.integerValue||o.doubleValue),l=K(i.integerValue||i.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Ri(n.timestampValue,e.timestampValue);case 4:return Ri(nn(n),nn(e));case 5:return D(n.stringValue,e.stringValue);case 6:return function(o,i){const a=Ze(o),l=Ze(i);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,i){const a=o.split("/"),l=i.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=D(a[c],l[c]);if(h!==0)return h}return D(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,i){const a=D(K(o.latitude),K(i.latitude));return a!==0?a:D(K(o.longitude),K(i.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,i){const a=o.values||[],l=i.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=gt(a[c],l[c]);if(h)return h}return D(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,i){if(o===Rn.mapValue&&i===Rn.mapValue)return 0;if(o===Rn.mapValue)return 1;if(i===Rn.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=i.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const m=D(l[d],h[d]);if(m!==0)return m;const f=gt(a[l[d]],c[h[d]]);if(f!==0)return f}return D(l.length,h.length)}(n.mapValue,e.mapValue);default:throw S()}}function Ri(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return D(n,e);const t=qe(n),r=qe(e),s=D(t.seconds,r.seconds);return s!==0?s:D(t.nanos,r.nanos)}function _t(n){return us(n)}function us(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=qe(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ze(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return A.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=us(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const i of r)o?o=!1:s+=",",s+=`${i}:${us(t.fields[i])}`;return s+"}"}(n.mapValue):S()}function Si(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hs(n){return!!n&&"integerValue"in n}function lo(n){return!!n&&"arrayValue"in n}function Ci(n){return!!n&&"nullValue"in n}function bi(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zr(n){return!!n&&"mapValue"in n}function $t(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$t(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$t(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ld(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.value=e}static empty(){return new we({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$t(t)}setAll(e){let t=ae.emptyPath(),r={},s=[];e.forEach((i,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}i?r[a.lastSegment()]=$t(i):s.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());zr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ce(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];zr(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){pn(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new we($t(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e,t,r,s,o,i,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new ie(e,0,R.min(),R.min(),R.min(),we.empty(),0)}static newFoundDocument(e,t,r,s){return new ie(e,1,t,R.min(),r,s,0)}static newNoDocument(e,t){return new ie(e,2,t,R.min(),R.min(),we.empty(),0)}static newUnknownDocument(e,t){return new ie(e,3,t,R.min(),R.min(),we.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(R.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=we.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=we.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=R.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ie&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t){this.position=e,this.inclusive=t}}function Pi(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],i=n.position[s];if(o.field.isKeyField()?r=A.comparator(A.fromName(i.referenceValue),t.key):r=gt(i,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vi(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ce(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t="asc"){this.field=e,this.dir=t}}function Fd(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{}class Q extends Sl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Bd(e,t,r):t==="array-contains"?new jd(e,r):t==="in"?new zd(e,r):t==="not-in"?new Hd(e,r):t==="array-contains-any"?new Gd(e,r):new Q(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $d(e,r):new Ud(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(gt(t,this.value)):t!==null&&et(this.value)===et(t)&&this.matchesComparison(gt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return S()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ve extends Sl{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ve(e,t)}matches(e){return Cl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Cl(n){return n.op==="and"}function bl(n){return qd(n)&&Cl(n)}function qd(n){for(const e of n.filters)if(e instanceof ve)return!1;return!0}function ds(n){if(n instanceof Q)return n.field.canonicalString()+n.op.toString()+_t(n.value);if(bl(n))return n.filters.map(e=>ds(e)).join(",");{const e=n.filters.map(t=>ds(t)).join(",");return`${n.op}(${e})`}}function Pl(n,e){return n instanceof Q?function(r,s){return s instanceof Q&&r.op===s.op&&r.field.isEqual(s.field)&&Ce(r.value,s.value)}(n,e):n instanceof ve?function(r,s){return s instanceof ve&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,i,a)=>o&&Pl(i,s.filters[a]),!0):!1}(n,e):void S()}function Vl(n){return n instanceof Q?function(t){return`${t.field.canonicalString()} ${t.op} ${_t(t.value)}`}(n):n instanceof ve?function(t){return t.op.toString()+" {"+t.getFilters().map(Vl).join(" ,")+"}"}(n):"Filter"}class Bd extends Q{constructor(e,t,r){super(e,t,r),this.key=A.fromName(r.referenceValue)}matches(e){const t=A.comparator(e.key,this.key);return this.matchesComparison(t)}}class $d extends Q{constructor(e,t){super(e,"in",t),this.keys=Nl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ud extends Q{constructor(e,t){super(e,"not-in",t),this.keys=Nl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Nl(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>A.fromName(r.referenceValue))}class jd extends Q{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lo(t)&&sn(t.arrayValue,this.value)}}class zd extends Q{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sn(this.value.arrayValue,t)}}class Hd extends Q{constructor(e,t){super(e,"not-in",t)}matches(e){if(sn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!sn(this.value.arrayValue,t)}}class Gd extends Q{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sn(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t=null,r=[],s=[],o=null,i=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=i,this.endAt=a,this.ce=null}}function Ni(n,e=null,t=[],r=[],s=null,o=null,i=null){return new Kd(n,e,t,r,s,o,i)}function co(n){const e=V(n);if(e.ce===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ds(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),vr(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_t(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_t(r)).join(",")),e.ce=t}return e.ce}function uo(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Fd(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Pl(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Vi(n.startAt,e.startAt)&&Vi(n.endAt,e.endAt)}function ms(n){return A.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t=null,r=[],s=[],o=null,i="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Qd(n,e,t,r,s,o,i,a){return new gn(n,e,t,r,s,o,i,a)}function Dl(n){return new gn(n)}function Di(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kl(n){return n.collectionGroup!==null}function Ut(n){const e=V(n);if(e.le===null){e.le=[];const t=new Set;for(const o of e.explicitOrderBy)e.le.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new se(ae.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.le.push(new Jn(o,r))}),t.has(ae.keyField().canonicalString())||e.le.push(new Jn(ae.keyField(),r))}return e.le}function Ie(n){const e=V(n);return e.he||(e.he=Wd(e,Ut(n))),e.he}function Wd(n,e){if(n.limitType==="F")return Ni(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Jn(s.field,o)});const t=n.endAt?new Xn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Xn(n.startAt.position,n.startAt.inclusive):null;return Ni(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function fs(n,e){const t=n.filters.concat([e]);return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ps(n,e,t){return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Er(n,e){return uo(Ie(n),Ie(e))&&n.limitType===e.limitType}function Ol(n){return`${co(Ie(n))}|lt:${n.limitType}`}function st(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>Vl(s)).join(", ")}]`),vr(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>_t(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>_t(s)).join(",")),`Target(${r})`}(Ie(n))}; limitType=${n.limitType})`}function wr(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):A.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Ut(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(i,a,l){const c=Pi(i,a,l);return i.inclusive?c<=0:c<0}(r.startAt,Ut(r),s)||r.endAt&&!function(i,a,l){const c=Pi(i,a,l);return i.inclusive?c>=0:c>0}(r.endAt,Ut(r),s))}(n,e)}function Yd(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ml(n){return(e,t)=>{let r=!1;for(const s of Ut(n)){const o=Xd(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Xd(n,e,t){const r=n.field.isKeyField()?A.comparator(e.key,t.key):function(o,i,a){const l=i.data.field(o),c=a.data.field(o);return l!==null&&c!==null?gt(l,c):S()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return S()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){pn(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Il(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=new j(A.comparator);function Be(){return Jd}const Ll=new j(A.comparator);function Mt(...n){let e=Ll;for(const t of n)e=e.insert(t.key,t);return e}function Zd(n){let e=Ll;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qe(){return jt()}function Fl(){return jt()}function jt(){return new Rt(n=>n.toString(),(n,e)=>n.isEqual(e))}new j(A.comparator);const em=new se(A.comparator);function P(...n){let e=em;for(const t of n)e=e.add(t);return e}const tm=new se(D);function nm(){return tm}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yn(e)?"-0":e}}function Bl(n){return{integerValue:""+n}}function rm(n,e){return kd(e)?Bl(e):ql(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this._=void 0}}function sm(n,e,t){return n instanceof gs?function(s,o){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&io(o)&&(o=ao(o)),o&&(i.fields.__previous_value__=o),{mapValue:i}}(t,e):n instanceof Zn?$l(n,e):n instanceof er?Ul(n,e):function(s,o){const i=im(s,o),a=ki(i)+ki(s.Ie);return hs(i)&&hs(s.Ie)?Bl(a):ql(s.serializer,a)}(n,e)}function om(n,e,t){return n instanceof Zn?$l(n,e):n instanceof er?Ul(n,e):t}function im(n,e){return n instanceof _s?function(r){return hs(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class gs extends Tr{}class Zn extends Tr{constructor(e){super(),this.elements=e}}function $l(n,e){const t=jl(e);for(const r of n.elements)t.some(s=>Ce(s,r))||t.push(r);return{arrayValue:{values:t}}}class er extends Tr{constructor(e){super(),this.elements=e}}function Ul(n,e){let t=jl(e);for(const r of n.elements)t=t.filter(s=>!Ce(s,r));return{arrayValue:{values:t}}}class _s extends Tr{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ki(n){return K(n.integerValue||n.doubleValue)}function jl(n){return lo(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function am(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Zn&&s instanceof Zn||r instanceof er&&s instanceof er?pt(r.elements,s.elements,Ce):r instanceof _s&&s instanceof _s?Ce(r.Ie,s.Ie):r instanceof gs&&s instanceof gs}(n.transform,e.transform)}class Ye{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ye}static exists(e){return new Ye(void 0,e)}static updateTime(e){return new Ye(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bn(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ho{}function zl(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cm(n.key,Ye.none()):new mo(n.key,n.data,Ye.none());{const t=n.data,r=we.empty();let s=new se(ae.comparator);for(let o of e.fields)if(!s.has(o)){let i=t.field(o);i===null&&o.length>1&&(o=o.popLast(),i=t.field(o)),i===null?r.delete(o):r.set(o,i),s=s.add(o)}return new Ar(n.key,r,new ke(s.toArray()),Ye.none())}}function lm(n,e,t){n instanceof mo?function(s,o,i){const a=s.value.clone(),l=Mi(s.fieldTransforms,o,i.transformResults);a.setAll(l),o.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ar?function(s,o,i){if(!bn(s.precondition,o))return void o.convertToUnknownDocument(i.version);const a=Mi(s.fieldTransforms,o,i.transformResults),l=o.data;l.setAll(Hl(s)),l.setAll(a),o.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(n,e,t):function(s,o,i){o.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,t)}function zt(n,e,t,r){return n instanceof mo?function(o,i,a,l){if(!bn(o.precondition,i))return a;const c=o.value.clone(),h=Li(o.fieldTransforms,l,i);return c.setAll(h),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ar?function(o,i,a,l){if(!bn(o.precondition,i))return a;const c=Li(o.fieldTransforms,l,i),h=i.data;return h.setAll(Hl(o)),h.setAll(c),i.convertToFoundDocument(i.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(o,i,a){return bn(o.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(n,e,t)}function Oi(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pt(r,s,(o,i)=>am(o,i))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class mo extends ho{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ar extends ho{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Hl(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Mi(n,e,t){const r=new Map;W(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],i=o.transform,a=e.data.field(o.field);r.set(o.field,om(i,a,t[s]))}return r}function Li(n,e,t){const r=new Map;for(const s of n){const o=s.transform,i=t.data.field(s.field);r.set(s.field,sm(o,i,e))}return r}class cm extends ho{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&lm(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zt(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zt(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Fl();return this.mutations.forEach(s=>{const o=e.get(s.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=t.has(s.key)?null:a;const l=zl(i,a);l!==null&&r.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(R.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),P())}isEqual(e){return this.batchId===e.batchId&&pt(this.mutations,e.mutations,(t,r)=>Oi(t,r))&&pt(this.baseMutations,e.baseMutations,(t,r)=>Oi(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G,C;function Gl(n){if(n===void 0)return Se("GRPC error has no .code"),y.UNKNOWN;switch(n){case G.OK:return y.OK;case G.CANCELLED:return y.CANCELLED;case G.UNKNOWN:return y.UNKNOWN;case G.DEADLINE_EXCEEDED:return y.DEADLINE_EXCEEDED;case G.RESOURCE_EXHAUSTED:return y.RESOURCE_EXHAUSTED;case G.INTERNAL:return y.INTERNAL;case G.UNAVAILABLE:return y.UNAVAILABLE;case G.UNAUTHENTICATED:return y.UNAUTHENTICATED;case G.INVALID_ARGUMENT:return y.INVALID_ARGUMENT;case G.NOT_FOUND:return y.NOT_FOUND;case G.ALREADY_EXISTS:return y.ALREADY_EXISTS;case G.PERMISSION_DENIED:return y.PERMISSION_DENIED;case G.FAILED_PRECONDITION:return y.FAILED_PRECONDITION;case G.ABORTED:return y.ABORTED;case G.OUT_OF_RANGE:return y.OUT_OF_RANGE;case G.UNIMPLEMENTED:return y.UNIMPLEMENTED;case G.DATA_LOSS:return y.DATA_LOSS;default:return S()}}(C=G||(G={}))[C.OK=0]="OK",C[C.CANCELLED=1]="CANCELLED",C[C.UNKNOWN=2]="UNKNOWN",C[C.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",C[C.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",C[C.NOT_FOUND=5]="NOT_FOUND",C[C.ALREADY_EXISTS=6]="ALREADY_EXISTS",C[C.PERMISSION_DENIED=7]="PERMISSION_DENIED",C[C.UNAUTHENTICATED=16]="UNAUTHENTICATED",C[C.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",C[C.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",C[C.ABORTED=10]="ABORTED",C[C.OUT_OF_RANGE=11]="OUT_OF_RANGE",C[C.UNIMPLEMENTED=12]="UNIMPLEMENTED",C[C.INTERNAL=13]="INTERNAL",C[C.UNAVAILABLE=14]="UNAVAILABLE",C[C.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=new ct([4294967295,4294967295],0);function Fi(n){const e=mm().encode(n),t=new gd;return t.update(e),new Uint8Array(t.digest())}function qi(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ct([t,r],0),new ct([s,o],0)]}class fo{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lt(`Invalid padding: ${t}`);if(r<0)throw new Lt(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lt(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Lt(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=ct.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(ct.fromNumber(r)));return s.compare(fm)===1&&(s=new ct([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Fi(e),[r,s]=qi(t);for(let o=0;o<this.hashCount;o++){const i=this.de(r,s,o);if(!this.Ae(i))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new fo(o,s,t);return r.forEach(a=>i.insert(a)),i}insert(e){if(this.Te===0)return;const t=Fi(e),[r,s]=qi(t);for(let o=0;o<this.hashCount;o++){const i=this.de(r,s,o);this.Re(i)}}Re(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Lt extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,_n.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xr(R.min(),s,new j(D),Be(),P())}}class _n{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _n(r,t,P(),P(),P())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t,r,s){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=s}}class Kl{constructor(e,t){this.targetId=e,this.fe=t}}class Ql{constructor(e,t,r=ue.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Bi{constructor(){this.ge=0,this.pe=Ui(),this.ye=ue.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=P(),t=P(),r=P();return this.pe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:S()}}),new _n(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=Ui()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,W(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class pm{constructor(e){this.Le=e,this.ke=new Map,this.qe=Be(),this.Qe=$i(),this.Ke=new j(D)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:S()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.fe.count,s=this.Ye(t);if(s){const o=s.target;if(ms(o))if(r===0){const i=new A(o.path);this.We(t,i,ie.newNoDocument(i,R.min()))}else W(r===1);else{const i=this.Ze(t);if(i!==r){const a=this.Xe(e),l=a?this.et(a,e,i):1;if(l!==0){this.He(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let i,a;try{i=Ze(r).toUint8Array()}catch(l){if(l instanceof Rl)return en("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fo(i,s,o)}catch(l){return en(l instanceof Lt?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const i=this.Le.nt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),s++)}),s}it(e){const t=new Map;this.ke.forEach((o,i)=>{const a=this.Ye(i);if(a){if(o.current&&ms(a.target)){const l=new A(a.target.path);this.qe.get(l)!==null||this.st(i,l)||this.We(i,l,ie.newNoDocument(l,e))}o.De&&(t.set(i,o.ve()),o.Fe())}});let r=P();this.Qe.forEach((o,i)=>{let a=!0;i.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,i)=>i.setReadTime(e));const s=new xr(e,t,this.Ke,this.qe,r);return this.qe=Be(),this.Qe=$i(),this.Ke=new j(D),s}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,t)?s.Me(t,1):s.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Bi,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new se(D),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||E("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Bi),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function $i(){return new j(A.comparator)}function Ui(){return new j(A.comparator)}const gm=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),_m=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),ym=(()=>({and:"AND",or:"OR"}))();class vm{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ys(n,e){return n.useProto3Json||vr(e)?e:{value:e}}function vs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wl(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ut(n){return W(!!n),R.fromTimestamp(function(t){const r=qe(t);return new X(r.seconds,r.nanos)}(n))}function Yl(n,e){return Es(n,e).canonicalString()}function Es(n,e){const t=function(s){return new B(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Xl(n){const e=B.fromString(n);return W(nc(e)),e}function Hr(n,e){const t=Xl(e);if(t.get(1)!==n.databaseId.projectId)throw new T(y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new T(y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new A(Zl(t))}function Jl(n,e){return Yl(n.databaseId,e)}function Em(n){const e=Xl(n);return e.length===4?B.emptyPath():Zl(e)}function ji(n){return new B(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Zl(n){return W(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function wm(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:S()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(W(h===void 0||typeof h=="string"),ue.fromBase64String(h||"")):(W(h===void 0||h instanceof Uint8Array),ue.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const h=c.code===void 0?y.UNKNOWN:Gl(c.code);return new T(h,c.message||"")}(i);t=new Ql(r,s,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Hr(n,r.document.name),o=ut(r.document.updateTime),i=r.document.createTime?ut(r.document.createTime):R.min(),a=new we({mapValue:{fields:r.document.fields}}),l=ie.newFoundDocument(s,o,i,a),c=r.targetIds||[],h=r.removedTargetIds||[];t=new Pn(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Hr(n,r.document),o=r.readTime?ut(r.readTime):R.min(),i=ie.newNoDocument(s,o),a=r.removedTargetIds||[];t=new Pn([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Hr(n,r.document),o=r.removedTargetIds||[];t=new Pn([],o,s,null)}else{if(!("filter"in e))return S();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,i=new dm(s,o),a=r.targetId;t=new Kl(a,i)}}return t}function Tm(n,e){return{documents:[Jl(n,e.path)]}}function Am(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Jl(n,s);const o=function(c){if(c.length!==0)return tc(ve.create(c,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const i=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:ot(m.field),direction:Rm(m.dir)}}(h))}(e.orderBy);i&&(t.structuredQuery.orderBy=i);const a=ys(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:t,parent:s}}function xm(n){let e=Em(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){W(r===1);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(d){const m=ec(d);return m instanceof ve&&bl(m)?m.getFilters():[m]}(t.where));let i=[];t.orderBy&&(i=function(d){return d.map(m=>function(_){return new Jn(it(_.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,vr(m)?null:m}(t.limit));let l=null;t.startAt&&(l=function(d){const m=!!d.before,f=d.values||[];return new Xn(f,m)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const m=!d.before,f=d.values||[];return new Xn(f,m)}(t.endAt)),Qd(e,s,i,o,a,"F",l,c)}function Im(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return S()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ec(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=it(t.unaryFilter.field);return Q.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=it(t.unaryFilter.field);return Q.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=it(t.unaryFilter.field);return Q.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=it(t.unaryFilter.field);return Q.create(i,"!=",{nullValue:"NULL_VALUE"});default:return S()}}(n):n.fieldFilter!==void 0?function(t){return Q.create(it(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ve.create(t.compositeFilter.filters.map(r=>ec(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return S()}}(t.compositeFilter.op))}(n):S()}function Rm(n){return gm[n]}function Sm(n){return _m[n]}function Cm(n){return ym[n]}function ot(n){return{fieldPath:n.canonicalString()}}function it(n){return ae.fromServerFormat(n.fieldPath)}function tc(n){return n instanceof Q?function(t){if(t.op==="=="){if(bi(t.value))return{unaryFilter:{field:ot(t.field),op:"IS_NAN"}};if(Ci(t.value))return{unaryFilter:{field:ot(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bi(t.value))return{unaryFilter:{field:ot(t.field),op:"IS_NOT_NAN"}};if(Ci(t.value))return{unaryFilter:{field:ot(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ot(t.field),op:Sm(t.op),value:t.value}}}(n):n instanceof ve?function(t){const r=t.getFilters().map(s=>tc(s));return r.length===1?r[0]:{compositeFilter:{op:Cm(t.op),filters:r}}}(n):S()}function nc(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,t,r,s,o=R.min(),i=R.min(),a=ue.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Oe(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oe(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.ct=e}}function Pm(n){const e=xm({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ps(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this._n=new Nm}addToCollectionParentIndex(e,t){return this._n.add(t),g.resolve()}getCollectionParents(e,t){return g.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return g.resolve()}deleteFieldIndex(e,t){return g.resolve()}deleteAllFieldIndexes(e){return g.resolve()}createTargetIndexes(e,t){return g.resolve()}getDocumentsMatchingTarget(e,t){return g.resolve(null)}getIndexType(e,t){return g.resolve(0)}getFieldIndexes(e,t){return g.resolve([])}getNextCollectionGroupToUpdate(e){return g.resolve(null)}getMinOffset(e,t){return g.resolve(Fe.min())}getMinOffsetFromCollectionGroup(e,t){return g.resolve(Fe.min())}updateCollectionGroup(e,t,r){return g.resolve()}updateIndexEntries(e,t){return g.resolve()}}class Nm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new se(B.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new se(B.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new yt(0)}static Bn(){return new yt(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.changes=new Rt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ie.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?g.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&zt(r.mutation,s,ke.empty(),X.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,P()).next(()=>r))}getLocalViewOfDocuments(e,t,r=P()){const s=Qe();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let i=Mt();return o.forEach((a,l)=>{i=i.insert(a,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,t){const r=Qe();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,P()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((i,a)=>{t.set(i,a)})})}computeViews(e,t,r,s){let o=Be();const i=jt(),a=function(){return jt()}();return t.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ar)?o=o.insert(c.key,c):h!==void 0?(i.set(c.key,h.mutation.getFieldMask()),zt(h.mutation,c,h.mutation.getFieldMask(),X.now())):i.set(c.key,ke.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>i.set(c,h)),t.forEach((c,h)=>{var d;return a.set(c,new km(h,(d=i.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=jt();let s=new j((i,a)=>i-a),o=P();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>{for(const a of i)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=r.get(l)||ke.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||P()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=Fl();h.forEach(m=>{if(!o.has(m)){const f=zl(t.get(m),r.get(m));f!==null&&d.set(m,f),o=o.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,d))}return g.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(i){return A.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const i=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):g.resolve(Qe());let a=-1,l=o;return i.next(c=>g.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(h)?g.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,P())).next(h=>({batchId:a,changes:Zd(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new A(t)).next(r=>{let s=Mt();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let i=Mt();return this.indexManager.getCollectionParents(e,o).next(a=>g.forEach(a,l=>{const c=function(d,m){return new gn(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,m)=>{i=i.insert(d,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(i=>{o.forEach((l,c)=>{const h=c.getKey();i.get(h)===null&&(i=i.insert(h,ie.newInvalidDocument(h)))});let a=Mt();return i.forEach((l,c)=>{const h=o.get(l);h!==void 0&&zt(h.mutation,c,ke.empty(),X.now()),wr(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return g.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ut(s.createTime)}}(t)),g.resolve()}getNamedQuery(e,t){return g.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(s){return{name:s.name,query:Pm(s.bundledQuery),readTime:ut(s.readTime)}}(t)),g.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this.overlays=new j(A.comparator),this.hr=new Map}getOverlay(e,t){return g.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qe();return g.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.ht(e,t,o)}),g.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),g.resolve()}getOverlaysForCollection(e,t,r){const s=Qe(),o=t.length+1,i=new A(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&s.set(l.getKey(),l)}return g.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new j((c,h)=>c-h);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=o.get(c.largestBatchId);h===null&&(h=Qe(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Qe(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return g.resolve(a)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new hm(t,r));let o=this.hr.get(t);o===void 0&&(o=P(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.Pr=new se(Y.Ir),this.Tr=new se(Y.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Y(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Y(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new A(new B([])),r=new Y(t,e),s=new Y(t,e+1),o=[];return this.Tr.forEachInRange([r,s],i=>{this.Ar(i),o.push(i.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new A(new B([])),r=new Y(t,e),s=new Y(t,e+1);let o=P();return this.Tr.forEachInRange([r,s],i=>{o=o.add(i.key)}),o}containsKey(e){const t=new Y(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Y{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return A.comparator(e.key,t.key)||D(e.pr,t.pr)}static Er(e,t){return D(e.pr,t.pr)||A.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new se(Y.Ir)}checkEmpty(e){return g.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new um(o,t,r,s);this.mutationQueue.push(i);for(const a of s)this.wr=this.wr.add(new Y(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return g.resolve(i)}lookupMutationBatch(e,t){return g.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.br(r),o=s<0?0:s;return g.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return g.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return g.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Y(t,0),s=new Y(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,s],i=>{const a=this.Sr(i.pr);o.push(a)}),g.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new se(D);return t.forEach(s=>{const o=new Y(s,0),i=new Y(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,i],a=>{r=r.add(a.pr)})}),g.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;A.isDocumentKey(o)||(o=o.child(""));const i=new Y(new A(o),0);let a=new se(D);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},i),g.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){W(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return g.forEach(t.mutations,s=>{const o=new Y(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Y(t,0),s=this.wr.firstAfterOrEqual(r);return g.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,g.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e){this.vr=e,this.docs=function(){return new j(A.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,i=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return g.resolve(r?r.document.mutableCopy():ie.newInvalidDocument(t))}getEntries(e,t){let r=Be();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():ie.newInvalidDocument(s))}),g.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Be();const i=t.path,a=new A(i.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||bd(Cd(h),r)<=0||(s.has(h.key)||wr(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return g.resolve(o)}getAllFromCollectionGroup(e,t,r,s){S()}Fr(e,t){return g.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Bm(this)}getSize(e){return g.resolve(this.size)}}class Bm extends Dm{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),g.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.persistence=e,this.Mr=new Rt(t=>co(t),uo),this.lastRemoteSnapshotVersion=R.min(),this.highestTargetId=0,this.Or=0,this.Nr=new po,this.targetCount=0,this.Br=yt.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,s)=>t(s)),g.resolve()}getLastRemoteSnapshotVersion(e){return g.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return g.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),g.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),g.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new yt(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,g.resolve()}updateTargetData(e,t){return this.qn(t),g.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,g.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Mr.forEach((i,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),g.waitFor(o).next(()=>s)}getTargetCount(e){return g.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return g.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),g.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(i=>{o.push(s.markPotentiallyOrphaned(e,i))}),g.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),g.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return g.resolve(r)}containsKey(e,t){return g.resolve(this.Nr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.Lr={},this.overlays={},this.kr=new oo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new $m(this),this.indexManager=new Vm,this.remoteDocumentCache=function(s){return new qm(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new bm(t),this.$r=new Mm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new Fm(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){E("MemoryPersistence","Starting transaction:",e);const s=new jm(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(o=>this.referenceDelegate.Wr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Gr(e,t){return g.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class jm extends Vd{constructor(e){super(),this.currentSequenceNumber=e}}class go{constructor(e){this.persistence=e,this.zr=new po,this.jr=null}static Hr(e){return new go(e)}get Jr(){if(this.jr)return this.jr;throw S()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),g.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),g.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),g.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return g.forEach(this.Jr,r=>{const s=A.fromPath(r);return this.Yr(e,s).next(o=>{o||t.removeEntry(s,R.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return g.or([()=>g.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=s}static Ki(e,t){let r=P(),s=P();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new _o(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return su()?8:Ke.v(Bn())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ji(e,t).next(i=>{o.result=i}).next(()=>{if(!o.result)return this.Hi(e,t,s,r).next(i=>{o.result=i})}).next(()=>{if(o.result)return;const i=new zm;return this.Ji(e,t,i).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,i,a.size)})}).next(()=>o.result)}Yi(e,t,r,s){return r.documentReadCount<this.Wi?(Dt()<=b.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",st(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),g.resolve()):(Dt()<=b.DEBUG&&E("QueryEngine","Query:",st(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Dt()<=b.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",st(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ie(t))):g.resolve())}ji(e,t){if(Di(t))return g.resolve(null);let r=Ie(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=ps(t,null,"F"),r=Ie(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const i=P(...o);return this.zi.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,i,l.readTime)?this.ji(e,ps(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,r,s){return Di(t)||s.isEqual(R.min())?g.resolve(null):this.zi.getDocuments(e,r).next(o=>{const i=this.Zi(t,o);return this.Xi(t,i,r,s)?g.resolve(null):(Dt()<=b.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),st(t)),this.es(e,i,t,Sd(s,-1)).next(a=>a))})}Zi(e,t){let r=new se(Ml(e));return t.forEach((s,o)=>{wr(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ji(e,t,r){return Dt()<=b.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",st(t)),this.zi.getDocumentsMatchingQuery(e,t,Fe.min(),r)}es(e,t,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(i=>{o=o.insert(i.key,i)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t,r,s){this.persistence=e,this.ts=t,this.serializer=s,this.ns=new j(D),this.rs=new Rt(o=>co(o),uo),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Om(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function Km(n,e,t,r){return new Gm(n,e,t,r)}async function rc(n,e){const t=V(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const i=[],a=[];let l=P();for(const c of s){i.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:i,addedBatchIds:a}))})})}function sc(n){const e=V(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function Qm(n,e){const t=V(n),r=e.snapshotVersion;let s=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const i=t.os.newChangeBuffer({trackRemovals:!0});s=t.ns;const a=[];e.targetChanges.forEach((h,d)=>{const m=s.get(d);if(!m)return;a.push(t.Qr.removeMatchingKeys(o,h.removedDocuments,d).next(()=>t.Qr.addMatchingKeys(o,h.addedDocuments,d)));let f=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ue.EMPTY_BYTE_STRING,R.min()).withLastLimboFreeSnapshotVersion(R.min()):h.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(h.resumeToken,r)),s=s.insert(d,f),function(w,x,O){return w.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,f,h)&&a.push(t.Qr.updateTargetData(o,f))});let l=Be(),c=P();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Wm(o,i,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(R.min())){const h=t.Qr.getLastRemoteSnapshotVersion(o).next(d=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return g.waitFor(a).next(()=>i.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(t.ns=s,o))}function Wm(n,e,t){let r=P(),s=P();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let i=Be();return t.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(R.min())?(e.removeEntry(a,l.readTime),i=i.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),i=i.insert(a,l)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:i,ls:s}})}function Ym(n,e){const t=V(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Qr.getTargetData(r,e).next(o=>o?(s=o,g.resolve(s)):t.Qr.allocateTargetId(r).next(i=>(s=new Oe(e,i,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}async function ws(n,e,t){const r=V(n),s=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!fn(i))throw i;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function zi(n,e,t){const r=V(n);let s=R.min(),o=P();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,c,h){const d=V(l),m=d.rs.get(h);return m!==void 0?g.resolve(d.ns.get(m)):d.Qr.getTargetData(c,h)}(r,i,Ie(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(i,a.targetId).next(l=>{o=l})}).next(()=>r.ts.getDocumentsMatchingQuery(i,e,t?s:R.min(),t?o:P())).next(a=>(Xm(r,Yd(e),a),{documents:a,hs:o})))}function Xm(n,e,t){let r=n.ss.get(e)||R.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}class Hi{constructor(){this.activeTargetIds=nm()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jm{constructor(){this.no=new Hi,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Hi,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sn=null;function Gr(){return Sn===null?Sn=function(){return 268435456+Math.round(2147483648*Math.random())}():Sn++,"0x"+Sn.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe="WebChannelConnection";class nf extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${s}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get wo(){return!1}So(t,r,s,o,i){const a=Gr(),l=this.bo(t,r.toUriEncodedString());E("RestConnection",`Sending RPC '${t}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,i),this.Co(t,l,c,s).then(h=>(E("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw en("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}vo(t,r,s,o,i,a){return this.So(t,r,s,o,i)}Do(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+It}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,i)=>t[i]=o),s&&s.headers.forEach((o,i)=>t[i]=o)}bo(t,r){const s=ef[t];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,s){const o=Gr();return new Promise((i,a)=>{const l=new pd;l.setWithCredentials(!0),l.listenOnce(md.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case jr.NO_ERROR:const h=l.getResponseJson();E(oe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),i(h);break;case jr.TIMEOUT:E(oe,`RPC '${e}' ${o} timed out`),a(new T(y.DEADLINE_EXCEEDED,"Request time out"));break;case jr.HTTP_ERROR:const d=l.getStatus();if(E(oe,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const f=m==null?void 0:m.error;if(f&&f.status&&f.message){const _=function(x){const O=x.toLowerCase().replace(/_/g,"-");return Object.values(y).indexOf(O)>=0?O:y.UNKNOWN}(f.status);a(new T(_,f.message))}else a(new T(y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new T(y.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{E(oe,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(s);E(oe,`RPC '${e}' ${o} sending request:`,s),l.send(t,"POST",c,r,15)})}Fo(e,t,r){const s=Gr(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=hd(),a=dd(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=o.join("");E(oe,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=i.createWebChannel(h,l);let m=!1,f=!1;const _=new tf({lo:x=>{f?E(oe,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(E(oe,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),E(oe,`RPC '${e}' stream ${s} sending:`,x),d.send(x))},ho:()=>d.close()}),w=(x,O,$)=>{x.listen(O,N=>{try{$(N)}catch(de){setTimeout(()=>{throw de},0)}})};return w(d,xn.EventType.OPEN,()=>{f||E(oe,`RPC '${e}' stream ${s} transport opened.`)}),w(d,xn.EventType.CLOSE,()=>{f||(f=!0,E(oe,`RPC '${e}' stream ${s} transport closed`),_.Vo())}),w(d,xn.EventType.ERROR,x=>{f||(f=!0,en(oe,`RPC '${e}' stream ${s} transport errored:`,x),_.Vo(new T(y.UNAVAILABLE,"The operation could not be completed")))}),w(d,xn.EventType.MESSAGE,x=>{var O;if(!f){const $=x.data[0];W(!!$);const N=$,de=N.error||((O=N[0])===null||O===void 0?void 0:O.error);if(de){E(oe,`RPC '${e}' stream ${s} received error:`,de);const L=de.status;let z=function(q){const ee=G[q];if(ee!==void 0)return Gl(ee)}(L),M=de.message;z===void 0&&(z=y.INTERNAL,M="Unknown error status: "+L+" with message "+de.message),f=!0,_.Vo(new T(z,M)),d.close()}else E(oe,`RPC '${e}' stream ${s} received:`,$),_.mo($)}}),w(a,fd.STAT_EVENT,x=>{x.stat===wi.PROXY?E(oe,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===wi.NOPROXY&&E(oe,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}}function Kr(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(n){return new vm(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t,r=1e3,s=1.5,o=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=s,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,t-r);s>0&&E("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t,r,s,o,i,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new oc(e,t)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():t&&t.code===y.RESOURCE_EXHAUSTED?(Se(t.toString()),Se("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===t&&this.o_(r,s)},r=>{e(()=>{const s=new T(y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sf extends rf{constructor(e,t,r,s,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,i),this.serializer=o}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=wm(this.serializer,e),r=function(o){if(!("targetChange"in o))return R.min();const i=o.targetChange;return i.targetIds&&i.targetIds.length?R.min():i.readTime?ut(i.readTime):R.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=ji(this.serializer),t.addTarget=function(o,i){let a;const l=i.target;if(a=ms(l)?{documents:Tm(o,l)}:{query:Am(o,l).ut},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=Wl(o,i.resumeToken);const c=ys(o,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo(R.min())>0){a.readTime=vs(o,i.snapshotVersion.toTimestamp());const c=ys(o,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Im(this.serializer,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=ji(this.serializer),t.removeTarget=e,this.t_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new T(y.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,i])=>this.connection.So(e,Es(t,r),s,o,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new T(y.UNKNOWN,o.toString())})}vo(e,t,r,s,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.vo(e,Es(t,r),s,i,a,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new T(y.UNKNOWN,i.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class af{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Se(t),this.g_=!1):E("OnlineStateTracker",t)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(i=>{r.enqueueAndForget(async()=>{vn(this)&&(E("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=V(l);c.v_.add(4),await yn(c),c.x_.set("Unknown"),c.v_.delete(4),await Rr(c)}(this))})}),this.x_=new af(r,s)}}async function Rr(n){if(vn(n))for(const e of n.F_)await e(!0)}async function yn(n){for(const e of n.F_)await e(!1)}function ic(n,e){const t=V(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),Eo(t)?vo(t):St(t).Jo()&&yo(t,e))}function ac(n,e){const t=V(n),r=St(t);t.C_.delete(e),r.Jo()&&lc(t,e),t.C_.size===0&&(r.Jo()?r.Xo():vn(t)&&t.x_.set("Unknown"))}function yo(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(R.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}St(n).c_(e)}function lc(n,e){n.O_.Oe(e),St(n).l_(e)}function vo(n){n.O_=new pm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),St(n).start(),n.x_.p_()}function Eo(n){return vn(n)&&!St(n).Ho()&&n.C_.size>0}function vn(n){return V(n).v_.size===0}function cc(n){n.O_=void 0}async function cf(n){n.C_.forEach((e,t)=>{yo(n,e)})}async function uf(n,e){cc(n),Eo(n)?(n.x_.S_(e),vo(n)):n.x_.set("Unknown")}async function hf(n,e,t){if(n.x_.set("Online"),e instanceof Ql&&e.state===2&&e.cause)try{await async function(s,o){const i=o.cause;for(const a of o.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,i),s.C_.delete(a),s.O_.removeTarget(a))}(n,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ki(n,r)}else if(e instanceof Pn?n.O_.$e(e):e instanceof Kl?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(R.min()))try{const r=await sc(n.localStore);t.compareTo(r)>=0&&await function(o,i){const a=o.O_.it(i);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.C_.get(c);h&&o.C_.set(c,h.withResumeToken(l.resumeToken,i))}}),a.targetMismatches.forEach((l,c)=>{const h=o.C_.get(l);if(!h)return;o.C_.set(l,h.withResumeToken(ue.EMPTY_BYTE_STRING,h.snapshotVersion)),lc(o,l);const d=new Oe(h.target,l,c,h.sequenceNumber);yo(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){E("RemoteStore","Failed to raise snapshot:",r),await Ki(n,r)}}async function Ki(n,e,t){if(!fn(e))throw e;n.v_.add(1),await yn(n),n.x_.set("Offline"),t||(t=()=>sc(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{E("RemoteStore","Retrying IndexedDB access"),await t(),n.v_.delete(1),await Rr(n)})}async function Qi(n,e){const t=V(n);t.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");const r=vn(t);t.v_.add(3),await yn(t),r&&t.x_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),await Rr(t)}async function df(n,e){const t=V(n);e?(t.v_.delete(2),await Rr(t)):e||(t.v_.add(2),await yn(t),t.x_.set("Unknown"))}function St(n){return n.N_||(n.N_=function(t,r,s){const o=V(t);return o.R_(),new sf(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Po:cf.bind(null,n),To:uf.bind(null,n),u_:hf.bind(null,n)}),n.F_.push(async e=>{e?(n.N_.Zo(),Eo(n)?vo(n):n.x_.set("Unknown")):(await n.N_.stop(),cc(n))})),n.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const i=Date.now()+r,a=new wo(e,t,i,s,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new T(y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uc(n,e){if(Se("AsyncQueue",`${e}: ${n}`),fn(n))return new T(y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e?(t,r)=>e(t,r)||A.comparator(t.key,r.key):(t,r)=>A.comparator(t.key,r.key),this.keyedMap=Mt(),this.sortedSet=new j(this.comparator)}static emptySet(e){return new ht(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ht;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.L_=new j(A.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(t,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(t):e.type===1&&r.type===2?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):S():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class vt{constructor(e,t,r,s,o,i,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,s,o){const i=[];return t.forEach(a=>{i.push({type:0,doc:a})}),new vt(e,t,ht.emptySet(t),i,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Er(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(){this.q_=void 0,this.Q_=[]}}class ff{constructor(){this.queries=new Rt(e=>Ol(e),Er),this.onlineState="Unknown",this.K_=new Set}}async function pf(n,e){const t=V(n),r=e.query;let s=!1,o=t.queries.get(r);if(o||(s=!0,o=new mf),s)try{o.q_=await t.onListen(r)}catch(i){const a=uc(i,`Initialization of query '${st(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,o),o.Q_.push(e),e.U_(t.onlineState),o.q_&&e.W_(o.q_)&&To(t)}async function gf(n,e){const t=V(n),r=e.query;let s=!1;const o=t.queries.get(r);if(o){const i=o.Q_.indexOf(e);i>=0&&(o.Q_.splice(i,1),s=o.Q_.length===0)}if(s)return t.queries.delete(r),t.onUnlisten(r)}function _f(n,e){const t=V(n);let r=!1;for(const s of e){const o=s.query,i=t.queries.get(o);if(i){for(const a of i.Q_)a.W_(s)&&(r=!0);i.q_=s}}r&&To(t)}function yf(n,e,t){const r=V(n),s=r.queries.get(e);if(s)for(const o of s.Q_)o.onError(t);r.queries.delete(e)}function To(n){n.K_.forEach(e=>{e.next()})}class vf{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vt(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const r=t!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Y_(e){e=vt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this.key=e}}class dc{constructor(e){this.key=e}}class Ef{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=P(),this.mutatedKeys=P(),this.ua=Ml(e),this.ca=new ht(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new Wi,s=t?t.ca:this.ca;let o=t?t.mutatedKeys:this.mutatedKeys,i=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const m=s.get(h),f=wr(this.query,d)?d:null,_=!!m&&this.mutatedKeys.has(m.key),w=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let x=!1;m&&f?m.data.isEqual(f.data)?_!==w&&(r.track({type:3,doc:f}),x=!0):this.Ia(m,f)||(r.track({type:2,doc:f}),x=!0,(l&&this.ua(f,l)>0||c&&this.ua(f,c)<0)&&(a=!0)):!m&&f?(r.track({type:0,doc:f}),x=!0):m&&!f&&(r.track({type:1,doc:m}),x=!0,(l||c)&&(a=!0)),x&&(f?(i=i.add(f),o=w?o.add(h):o.delete(h)):(i=i.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const h=this.query.limitType==="F"?i.last():i.first();i=i.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ca:i,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const i=e.Pa.k_();i.sort((h,d)=>function(f,_){const w=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return w(f)-w(_)}(h.type,d.type)||this.ua(h.doc,d.doc)),this.Ta(r),s=s!=null&&s;const a=t&&!s?this.Ea():[],l=this.aa.size===0&&this.current&&!s?1:0,c=l!==this._a;return this._a=l,i.length!==0||c?{snapshot:new vt(this.query,e.ca,o,i,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Wi,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=P(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new dc(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new hc(r))}),t}Ra(e){this.oa=e.hs,this.aa=P();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return vt.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class wf{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Tf{constructor(e){this.key=e,this.ma=!1}}class Af{constructor(e,t,r,s,o,i){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.fa={},this.ga=new Rt(a=>Ol(a),Er),this.pa=new Map,this.ya=new Set,this.wa=new j(A.comparator),this.Sa=new Map,this.ba=new po,this.Da={},this.Ca=new Map,this.va=yt.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function xf(n,e){const t=Vf(n);let r,s;const o=t.ga.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),s=o.view.Va();else{const i=await Ym(t.localStore,Ie(e)),a=t.sharedClientState.addLocalQueryTarget(i.targetId);r=i.targetId,s=await If(t,e,r,a==="current",i.resumeToken),t.isPrimaryClient&&ic(t.remoteStore,i)}return s}async function If(n,e,t,r,s){n.Ma=(d,m,f)=>async function(w,x,O,$){let N=x.view.ha(O);N.Xi&&(N=await zi(w.localStore,x.query,!1).then(({documents:M})=>x.view.ha(M,N)));const de=$&&$.targetChanges.get(x.targetId),L=$&&$.targetMismatches.get(x.targetId)!=null,z=x.view.applyChanges(N,w.isPrimaryClient,de,L);return Xi(w,x.targetId,z.da),z.snapshot}(n,d,m,f);const o=await zi(n.localStore,e,!0),i=new Ef(e,o.hs),a=i.ha(o.documents),l=_n.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),c=i.applyChanges(a,n.isPrimaryClient,l);Xi(n,t,c.da);const h=new wf(e,t,i);return n.ga.set(e,h),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),c.snapshot}async function Rf(n,e){const t=V(n),r=t.ga.get(e),s=t.pa.get(r.targetId);if(s.length>1)return t.pa.set(r.targetId,s.filter(o=>!Er(o,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||await ws(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ac(t.remoteStore,r.targetId),Ts(t,r.targetId)}).catch(no)):(Ts(t,r.targetId),await ws(t.localStore,r.targetId,!0))}async function mc(n,e){const t=V(n);try{const r=await Qm(t.localStore,e);e.targetChanges.forEach((s,o)=>{const i=t.Sa.get(o);i&&(W(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.ma=!0:s.modifiedDocuments.size>0?W(i.ma):s.removedDocuments.size>0&&(W(i.ma),i.ma=!1))}),await pc(t,r,e)}catch(r){await no(r)}}function Yi(n,e,t){const r=V(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ga.forEach((o,i)=>{const a=i.view.U_(e);a.snapshot&&s.push(a.snapshot)}),function(i,a){const l=V(i);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const m of d.Q_)m.U_(a)&&(c=!0)}),c&&To(l)}(r.eventManager,e),s.length&&r.fa.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Sf(n,e,t){const r=V(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Sa.get(e),o=s&&s.key;if(o){let i=new j(A.comparator);i=i.insert(o,ie.newNoDocument(o,R.min()));const a=P().add(o),l=new xr(R.min(),new Map,new j(D),i,a);await mc(r,l),r.wa=r.wa.remove(o),r.Sa.delete(e),Ao(r)}else await ws(r.localStore,e,!1).then(()=>Ts(r,e,t)).catch(no)}function Ts(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||fc(n,r)})}function fc(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);t!==null&&(ac(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),Ao(n))}function Xi(n,e,t){for(const r of t)r instanceof hc?(n.ba.addReference(r.key,e),Cf(n,r)):r instanceof dc?(E("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||fc(n,r.key)):S()}function Cf(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(E("SyncEngine","New document in limbo: "+t),n.ya.add(r),Ao(n))}function Ao(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new A(B.fromString(e)),r=n.va.next();n.Sa.set(r,new Tf(t)),n.wa=n.wa.insert(t,r),ic(n.remoteStore,new Oe(Ie(Dl(t.path)),r,"TargetPurposeLimboResolution",oo._e))}}async function pc(n,e,t){const r=V(n),s=[],o=[],i=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{i.push(r.Ma(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const h=_o.Ki(l.targetId,c);o.push(h)}}))}),await Promise.all(i),r.fa.u_(s),await async function(l,c){const h=V(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>g.forEach(c,m=>g.forEach(m.qi,f=>h.persistence.referenceDelegate.addReference(d,m.targetId,f)).next(()=>g.forEach(m.Qi,f=>h.persistence.referenceDelegate.removeReference(d,m.targetId,f)))))}catch(d){if(!fn(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const f=h.ns.get(m),_=f.snapshotVersion,w=f.withLastLimboFreeSnapshotVersion(_);h.ns=h.ns.insert(m,w)}}}(r.localStore,o))}async function bf(n,e){const t=V(n);if(!t.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());const r=await rc(t.localStore,e);t.currentUser=e,function(o,i){o.Ca.forEach(a=>{a.forEach(l=>{l.reject(new T(y.CANCELLED,i))})}),o.Ca.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pc(t,r.us)}}function Pf(n,e){const t=V(n),r=t.Sa.get(e);if(r&&r.ma)return P().add(r.key);{let s=P();const o=t.pa.get(e);if(!o)return s;for(const i of o){const a=t.ga.get(i);s=s.unionWith(a.view.la)}return s}}function Vf(n){const e=V(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sf.bind(null,e),e.fa.u_=_f.bind(null,e.eventManager),e.fa.xa=yf.bind(null,e.eventManager),e}class Ji{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ir(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Km(this.persistence,new Hm,e.initialUser,this.serializer)}createPersistence(e){return new Um(go.Hr,this.serializer)}createSharedClientState(e){return new Jm}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Nf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yi(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bf.bind(null,this.syncEngine),await df(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ff}()}createDatastore(e){const t=Ir(e.databaseInfo.databaseId),r=function(o){return new nf(o)}(e.databaseInfo);return function(o,i,a,l){return new of(o,i,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,i,a){return new lf(r,s,o,i,a)}(this.localStore,this.datastore,e.asyncQueue,t=>Yi(this.syncEngine,t,0),function(){return Gi.D()?new Gi:new Zm}())}createSyncEngine(e,t){return function(s,o,i,a,l,c,h){const d=new Af(s,o,i,a,l,c);return h&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(r){const s=V(r);E("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await yn(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Se("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=me.UNAUTHENTICATED,this.clientId=Id.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{E("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(E("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Le;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=uc(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qr(n,e){n.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rc(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Zi(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Mf(n);E("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Qi(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Qi(e.remoteStore,s)),n._onlineComponents=e}function Of(n){return n.name==="FirebaseError"?n.code===y.FAILED_PRECONDITION||n.code===y.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function Mf(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qr(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Of(t))throw t;en("Error using user provided cache. Falling back to memory cache: "+t),await Qr(n,new Ji)}}else E("FirestoreClient","Using default OfflineComponentProvider"),await Qr(n,new Ji);return n._offlineComponents}async function Lf(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),await Zi(n,n._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),await Zi(n,new Nf))),n._onlineComponents}async function Ff(n){const e=await Lf(n),t=e.eventManager;return t.onListen=xf.bind(null,e.syncEngine),t.onUnlisten=Rf.bind(null,e.syncEngine),t}function qf(n,e,t={}){const r=new Le;return n.asyncQueue.enqueueAndForget(async()=>function(o,i,a,l,c){const h=new Df({next:m=>{i.enqueueAndForget(()=>gf(o,d)),m.fromCache&&l.source==="server"?c.reject(new T(y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new vf(a,h,{includeMetadataChanges:!0,Z_:!0});return pf(o,d)}(await Ff(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n,e,t){if(!t)throw new T(y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $f(n,e,t,r){if(e===!0&&r===!0)throw new T(y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ta(n){if(A.isDocumentKey(n))throw new T(y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sr(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":S()}function na(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new T(y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sr(n);throw new T(y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new T(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new T(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$f("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gc((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _c{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ra({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new T(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ra(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yd;switch(r.type){case"firstParty":return new wd(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new T(y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ea.get(t);r&&(E("ComponentProvider","Removing Datastore"),ea.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ct(this.firestore,e,this._query)}}class Ve{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}}class dt extends Ct{constructor(e,t,r){super(e,t,Dl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new A(e))}withConverter(e){return new dt(this.firestore,e,this._path)}}function Uf(n,e,...t){if(n=$n(n),Bf("collection","path",e),n instanceof _c){const r=B.fromString(e,...t);return ta(r),new dt(n,null,r)}{if(!(n instanceof Ve||n instanceof dt))throw new T(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(B.fromString(e,...t));return ta(r),new dt(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new oc(this,"async_queue_retry"),this._u=()=>{const t=Kr();t&&E("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=Kr();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Kr();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new Le;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!fn(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const s=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(r);throw Se("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const s=wo.createAndSchedule(this,e,t,r,o=>this.lu(o));return this.nu.push(s),s}au(){this.ru&&S()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class yc extends _c{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=function(){return new jf}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vc(this),this._firestoreClient.terminate()}}function zf(n){return n._firestoreClient||vc(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vc(n){var e,t,r;const s=n._freezeSettings(),o=function(a,l,c,h){return new Md(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,gc(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._firestoreClient=new kf(n._authCredentials,n._appCheckCredentials,n._queue,o),((t=s.localCache)===null||t===void 0?void 0:t._offlineComponentProvider)&&((r=s.localCache)===null||r===void 0?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Et(ue.fromBase64String(e))}catch(t){throw new T(y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Et(ue.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new T(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ae(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return D(this._lat,e._lat)||D(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf=/^__.*__$/;function Tc(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}class Io{constructor(e,t,r,s,o,i){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Io(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.mu(e),s}fu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return As(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(Tc(this.du)&&Hf.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Gf{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ir(e)}Su(e,t,r,s=!1){return new Io({du:e,methodName:t,wu:r,path:ae.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kf(n){const e=n._freezeSettings(),t=Ir(n._databaseId);return new Gf(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qf(n,e,t,r=!1){return Ro(t,n.Su(r?4:3,e))}function Ro(n,e){if(Ac(n=$n(n)))return Yf("Unsupported field value:",e,n),Wf(n,e);if(n instanceof wc)return function(r,s){if(!Tc(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,s){const o=[];let i=0;for(const a of r){let l=Ro(a,s.gu(i));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),i++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=$n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rm(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=X.fromDate(r);return{timestampValue:vs(s.serializer,o)}}if(r instanceof X){const o=new X(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vs(s.serializer,o)}}if(r instanceof xo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Et)return{bytesValue:Wl(s.serializer,r._byteString)};if(r instanceof Ve){const o=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(o))throw s.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yl(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${Sr(r)}`)}(n,e)}function Wf(n,e){const t={};return Il(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pn(n,(r,s)=>{const o=Ro(s,e.Ru(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Ac(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof X||n instanceof xo||n instanceof Et||n instanceof Ve||n instanceof wc)}function Yf(n,e,t){if(!Ac(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Sr(t);throw r==="an object"?e.pu(n+" a custom object"):e.pu(n+" "+r)}}const Xf=new RegExp("[~\\*/\\[\\]]");function Jf(n,e,t){if(e.search(Xf)>=0)throw As(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ec(...e.split("."))._internalPath}catch{throw As(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function As(n,e,t,r,s){const o=r&&!r.isEmpty(),i=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||i)&&(l+=" (found",o&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new T(y.INVALID_ARGUMENT,a+n+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Zf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ic("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Zf extends xc{data(){return super.data()}}function Ic(n,e){return typeof e=="string"?Jf(n,e):e instanceof Ec?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new T(y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class So{}class tp extends So{}function np(n,e,...t){let r=[];e instanceof So&&r.push(e),r=r.concat(t),function(o){const i=o.filter(l=>l instanceof bo).length,a=o.filter(l=>l instanceof Co).length;if(i>1||i>0&&a>0)throw new T(y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Co extends tp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Co(e,t,r)}_apply(e){const t=this._parse(e);return Rc(e._query,t),new Ct(e.firestore,e.converter,fs(e._query,t))}_parse(e){const t=Kf(e.firestore);return function(o,i,a,l,c,h,d){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new T(y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){oa(d,h);const f=[];for(const _ of d)f.push(sa(l,o,_));m={arrayValue:{values:f}}}else m=sa(l,o,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||oa(d,h),m=Qf(a,i,d,h==="in"||h==="not-in");return Q.create(c,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class bo extends So{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bo(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ve.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let i=s;const a=o.getFlattenedFilters();for(const l of a)Rc(i,l),i=fs(i,l)}(e._query,t),new Ct(e.firestore,e.converter,fs(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function sa(n,e,t){if(typeof(t=$n(t))=="string"){if(t==="")throw new T(y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kl(e)&&t.indexOf("/")!==-1)throw new T(y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(B.fromString(t));if(!A.isDocumentKey(r))throw new T(y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Si(n,new A(r))}if(t instanceof Ve)return Si(n,t._key);throw new T(y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sr(t)}.`)}function oa(n,e){if(!Array.isArray(n)||n.length===0)throw new T(y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Rc(n,e){const t=function(s,o){for(const i of s)for(const a of i.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new T(y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new T(y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rp{convertValue(e,t="none"){switch(et(e)){case 0:return null;case 1:return e.booleanValue;case 2:return K(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ze(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw S()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return pn(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new xo(K(e.latitude),K(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ao(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nn(e));default:return null}}convertTimestamp(e){const t=qe(e);return new X(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=B.fromString(e);W(nc(r));const s=new rn(r.get(1),r.get(3)),o=new A(r.popFirst(5));return s.isEqual(t)||Se(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sp extends xc{constructor(e,t,r,s,o,i){super(e,t,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ic("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vn extends sp{data(e={}){return super.data(e)}}class op{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Cn(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vn(this._firestore,this._userDataWriter,r.key,r,new Cn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(a=>{const l=new Vn(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Cn(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Vn(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Cn(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),h=i.indexOf(a.doc.key)),{type:ip(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ip(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}class ap extends rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Et(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,t)}}function lp(n){n=na(n,Ct);const e=na(n.firestore,yc),t=zf(e),r=new ap(e);return ep(n._query),qf(t,n._query).then(s=>new op(e,r,n,s))}(function(e,t=!0){(function(s){It=s})(th),jn(new Un("firestore",(r,{instanceIdentifier:s,options:o})=>{const i=r.getProvider("app").getImmediate(),a=new yc(new vd(r.getProvider("auth-internal")),new Ad(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new T(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rn(c.options.projectId,h)}(i,s),i);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ft(Ti,"4.4.1",e),Ft(Ti,"4.4.1","esm2017")})();const Po={__name:"BlogHome",__ssrInlineRender:!0,setup(n){const e=u.ref([]),t=u.ref([]);u.ref([{id:"espelho",title:"Praia do Espelho: Um Espet\xE1culo da Natureza",imageURL:"espelho-blog-hero.jpg",excerpt:"Explore \xE1guas cristalinas e areias reluzentes. Um verdadeiro para\xEDso que reflete a serenidade do c\xE9u.",content:"<p>A Praia do Espelho, localizada na costa sul da Bahia, \xE9 uma verdadeira joia escondida, um recanto de beleza natural que atrai visitantes de todos os cantos em busca de suas \xE1guas cristalinas e areias reluzentes. Conhecida por ser um dos destinos mais cobi\xE7ados do Brasil, a Praia do Espelho \xE9 o cen\xE1rio perfeito para quem deseja relaxar e se conectar com a natureza, oferecendo uma experi\xEAncia inigual\xE1vel de tranquilidade e beleza.</p><img src='url_to_image_1.jpg' alt='Praia do Espelho' style='float:left;width:50%;margin-right:20px;'><p>Ao planejar sua viagem para este para\xEDso, considere a import\xE2ncia de um passeio bem organizado e um servi\xE7o de traslado confi\xE1vel. Afinal, o conforto e a seguran\xE7a durante o trajeto s\xE3o essenciais para aproveitar ao m\xE1ximo o que a Praia do Espelho tem a oferecer. Com op\xE7\xF5es variadas, voc\xEA pode escolher o passeio que mais se adequa ao seu estilo, seja para explorar as belezas naturais de forma tranquila ou para adicionar um toque de aventura \xE0s suas f\xE9rias.</p><img src='url_to_image_2.jpg' alt='Atividades na Praia do Espelho' style='float:right;width:50%;margin-left:20px;'><p>Ao chegar \xE0 Praia do Espelho, prepare-se para ser recebido por um cen\xE1rio de tirar o f\xF4lego. As \xE1guas de tons azul-turquesa formam uma paleta de cores fascinante com o c\xE9u, enquanto a areia branca e reluzente completa o quadro, refletindo a luz do sol de forma m\xE1gica. N\xE3o \xE9 \xE0 toa que a praia recebeu esse nome: a natureza aqui parece se contemplar, criando um espet\xE1culo de reflexos que encanta todos os visitantes.</p><p>Para os amantes de atividades ao ar livre, a Praia do Espelho oferece uma variedade de op\xE7\xF5es. Desde passeios de barco, mergulho entre os recifes de corais, at\xE9 caminhadas ecol\xF3gicas pelas trilhas que revelam a flora e fauna locais, h\xE1 sempre uma forma especial de se conectar com este para\xEDso. Al\xE9m disso, a regi\xE3o conta com uma excelente infraestrutura de restaurantes e acomoda\xE7\xF5es, garantindo que sua estadia seja t\xE3o confort\xE1vel quanto memor\xE1vel.</p><p>Por fim, ao escolher a Praia do Espelho como seu pr\xF3ximo destino, lembre-se de que um passeio bem planejado \xE9 a chave para uma experi\xEAncia inesquec\xEDvel. Com servi\xE7os especializados em passeios e traslados, voc\xEA poder\xE1 desfrutar de cada momento sem preocupa\xE7\xF5es, mergulhando de cabe\xE7a na tranquilidade e na beleza que s\xF3 este lugar pode oferecer. Reserve j\xE1 o seu passeio e prepare-se para viver momentos \xFAnicos na Praia do Espelho, um verdadeiro espet\xE1culo da natureza.</p>",containerStyle:"md:pr-6",imageStyle:" md:h-[600px]",titleStyle:"md:text-5xl",excerptStyle:"md:text-lg"},{id:"caraiva",title:"Cara\xEDva: Encanto R\xFAstico \xE0 Beira-Mar",imageURL:"caraiva-blog-hero.jpg",excerpt:"Descubra a simplicidade encantadora de Cara\xEDva, onde ruas de areia e casas coloridas desenham o cen\xE1rio.",content:"<p>Cara\xEDva \xE9 um verdadeiro ref\xFAgio para quem busca paz e contato com a natureza. Localizada no sul da Bahia, esta vila encantadora \xE9 rodeada por um cen\xE1rio exuberante, onde o rio encontra o mar, e as ruas de areia se alinham com casas coloridas e \xE1rvores frondosas. A singularidade de Cara\xEDva oferece uma experi\xEAncia aut\xEAntica para os viajantes, tornando-a um destino imperd\xEDvel para quem deseja se desligar do mundo moderno e mergulhar em uma atmosfera tranquila e acolhedora.</p><img src='url_to_image_caraiva_1.jpg' alt='Vista de Cara\xEDva' style='float:left;width:50%;margin-right:20px;'><p>Organizar sua viagem para Cara\xEDva significa planejar uma fuga memor\xE1vel do cotidiano. Aqui, a oferta de passeios \xE9 variada e promete encantar todos os tipos de aventureiros. Desde passeios de barco pelo rio Cara\xEDva, explorando manguezais e apreciando o p\xF4r do sol, at\xE9 caminhadas pelas praias deslumbrantes e trilhas que revelam a rica biodiversidade da regi\xE3o. Com servi\xE7os especializados em traslados e passeios, os visitantes podem explorar o melhor de Cara\xEDva com conforto e seguran\xE7a.</p><img src='url_to_image_caraiva_2.jpg' alt='Passeio em Cara\xEDva' style='float:right;width:50%;margin-left:20px;'><p>A vida noturna de Cara\xEDva \xE9 t\xE3o cativante quanto seus dias ensolarados. As ruas se iluminam com a energia vibrante dos restaurantes, bares e festas que exibem a rica cultura e a hospitalidade local. A culin\xE1ria \xE9 um espet\xE1culo \xE0 parte, com pratos que trazem o sabor fresco do mar e ingredientes locais, prometendo uma verdadeira jornada gastron\xF4mica para os visitantes.</p><p>O servi\xE7o de traslado em Cara\xEDva \xE9 pensado para garantir que sua viagem seja t\xE3o relaxante quanto o destino em si. Os visitantes podem contar com um transporte confort\xE1vel e seguro, facilitando o acesso \xE0s diversas belezas que a vila tem a oferecer. Seja para chegar \xE0 vila ou para se deslocar durante sua estadia, os servi\xE7os de traslado proporcionam a comodidade e a efici\xEAncia necess\xE1rias para uma viagem sem preocupa\xE7\xF5es.</p><p>Reservar uma viagem para Cara\xEDva \xE9 garantir um lugar no para\xEDso. As belezas naturais, a cultura vibrante e a tranquilidade do lugar criam o cen\xE1rio perfeito para uma escapada inesquec\xEDvel. N\xE3o perca a chance de conhecer um dos destinos mais encantadores do Brasil. Entre em contato agora mesmo e planeje sua aventura em Cara\xEDva, onde cada momento promete ser uma p\xE1gina de um livro de mem\xF3rias preciosas.</p>",containerStyle:"md:pb-3",imageStyle:"md:h-[288px]",titleStyle:"md:text-2xl",excerptStyle:"md:text-md"},{id:"trancoso",title:"Trancoso: Beleza e Charme Hist\xF3rico",imageURL:"quadrado-blog-hero.jpg",excerpt:"Mergulhe na eleg\xE2ncia de Trancoso, um lugar onde praias deslumbrantes encontram um rico patrim\xF4nio cultural.",containerStyle:"md:pt-3",imageStyle:"md:h-[288px]",titleStyle:"md:text-2xl",excerptStyle:"md:text-md"}]),u.ref([{id:"arraial-dajuda",title:"Descubra Arraial d'Ajuda: Um Para\xEDso Escondido",imageURL:"arraial-blog.jpeg",excerpt:"Arraial d'Ajuda: praias deslumbrantes, cultura rica e natureza vibrante.",content:""},{id:"passarela-do-alcool",title:"Passarela do \xC1lcool: O Cora\xE7\xE3o Noturno de Porto Seguro",imageURL:"passarela-blog.jpeg",excerpt:"A alma das noites de Porto Seguro, com bares, artesanato e muita vida.",content:""},{id:"toa-toa",title:"Toa Toa: Divers\xE3o e M\xFAsica \xE0 Beira-Mar",imageURL:"toa-toa-blog.jpeg",excerpt:"Divers\xE3o garantida com m\xFAsica, dan\xE7a e gastronomia \xE0 beira-mar.",content:""},{id:"axe-moi",title:"Ax\xE9 Moi: O Palco da Alegria em Porto Seguro",imageURL:"axe-blog.jpeg",excerpt:"Ax\xE9 Moi: o epicentro de festas, m\xFAsica ao vivo e cultura bahiana.",content:""}]),u.onBeforeMount(()=>{e.value=[],t.value=[];const i=Uf(qn,"blog"),a=np(i);lp(a).then(l=>{l.forEach(c=>{c.data().featured?e.value.push({id:c.id,...c.data()}):t.value.push({id:c.id,...c.data()})})}),pe.useMeta({title:"Ess\xEAncia BAHIANA | Blog",meta:{description:{name:"description",content:"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:"Porto Seguro, Pontos tur\xEDsticos em Porto Seguro, Passeios em Porto Seguro, Traslados em Porto Seguro, Turismo na Bahia, Viagens pela Bahia, Melhores experi\xEAncias em Porto Seguro, Roteiros de viagem em Porto Seguro, Atra\xE7\xF5es tur\xEDsticas na regi\xE3o, Servi\xE7o de transporte em Porto Seguro, Roteiro de viagem personalizado, Dicas de viagem para Porto Seguro, Destinos na Bahia, Planejamento de viagem, Experi\xEAncias memor\xE1veis na Bahia."},ogTitle:{property:"og:title",template(){return"Ess\xEAncia BAHIANA | Blog"}},ogDescription:{property:"og:description",template(){return"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"}},ogImage:{property:"og:image",template(){return"https://essenciabahiana.com.br/hero.jpg"}},twitterTitle:{property:"twitter:title",template(){return"Ess\xEAncia BAHIANA | Blog"}},twitterDescription:{property:"twitter:description",template(){return"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"}},twitterImage:{property:"twitter:image",template(){return"https://essenciabahiana.com.br/hero.jpg"}}}})});const r=u.ref("Ess\xEAncia"),s=u.ref("Bahiana"),o=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return(i,a,l,c)=>{const h=u.resolveComponent("q-page");a(p.ssrRenderComponent(h,u.mergeProps({class:"blog-home"},c),{default:u.withCtx((d,m,f,_)=>{if(m)m(`<main class="my-28 md:mt-48 md:mb-10 flex flex-col"${_}>`),e.value.length>0?m(p.ssrRenderComponent(Ln,{dataHero:e.value},null,f,_)):m("<!---->"),m(p.ssrRenderComponent(Te,{dataAdSlot:"banner"},null,f,_)),m(`<div class="flex container mx-auto"${_}>`),t.value?(m(`<section class="w-full md:w-9/12"${_}><!--[-->`),p.ssrRenderList(t.value,w=>{m(p.ssrRenderComponent(Fn,{article:w,key:w.title},null,f,_))}),m("<!--]--></section>")):m("<!---->"),m(`<aside class="w-full md:w-3/12"${_}>`),m(p.ssrRenderComponent(Te,{dataAdSlot:"side"},null,f,_)),m("</aside></div></main>"),m(p.ssrRenderComponent(Re,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,f,_));else return[u.createVNode("main",{class:"my-28 md:mt-48 md:mb-10 flex flex-col"},[e.value.length>0?(u.openBlock(),u.createBlock(Ln,{key:0,dataHero:e.value},null,8,["dataHero"])):u.createCommentVNode("",!0),u.createVNode(Te,{dataAdSlot:"banner"}),u.createVNode("div",{class:"flex container mx-auto"},[t.value?(u.openBlock(),u.createBlock("section",{key:0,class:"w-full md:w-9/12"},[(u.openBlock(!0),u.createBlock(u.Fragment,null,u.renderList(t.value,w=>(u.openBlock(),u.createBlock(Fn,{article:w,key:w.title},null,8,["article"]))),128))])):u.createCommentVNode("",!0),u.createVNode("aside",{class:"w-full md:w-3/12"},[u.createVNode(Te,{dataAdSlot:"side"})])])]),u.createVNode(Re,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},l))}}},ia=Po.setup;Po.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/BlogHome.vue"),ia?ia(n,e):void 0};var cp=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"}));const tr={__name:"InstagramFeed",__ssrInlineRender:!0,props:{id:String},setup(n){const e=u.ref([]),t=u.ref([]);u.onMounted(async()=>{try{const o=ze.doc(qn,"configuration","instagramToken"),i=await ze.getDoc(o);if(i.exists()){const l=i.data().token,h=await fetch(`https://graph.instagram.com/me/media?fields=id,caption,media_url&access_token=${l}&limit=${1}`);if(!h.ok){console.error(`Erro na API: ${h.status} ${h.statusText}`);const _=await h.json();console.error(_);return}const d=await h.json();t.value=d.data;const m=t.value.map(async _=>{const w=await r(_.media_url);return{..._,type:w}}),f=await Promise.all(m);e.value=f}else console.error("Documento do token n\xE3o encontrado.")}catch(o){console.error("Erro ao carregar o feed do Instagram ou ao acessar o Firestore:",o)}});async function r(o){return(await fetch(o,{method:"HEAD"})).headers.get("Content-Type")}function s(){const o="https://www.instagram.com/essencia.bahiana";window.open(o,"_blank")}return(o,i,a,l)=>{const c=u.resolveComponent("q-img");e.value.length>0?(i(`<div${p.ssrRenderAttrs(u.mergeProps({class:"mx-auto max-w-full p-5"},l))}><div class="grid grid-cols-1 gap-4"><p class="text-lg font-bold font-sans">Confira o post mais recente.</p>`),i(p.ssrRenderComponent(c,{class:"cursor-pointer",src:"/insta-logo-text.png",alt:"Logo instagram com texto.",onClick:s},null,a)),i("<!--[-->"),p.ssrRenderList(e.value,h=>{i('<div class="instagram-post flex flex-col h-auto"><div class="relative pb-1/1 min-h-[300px]">'),h.type&&h.type.startsWith("image")?i(`<img${p.ssrRenderAttr("src",h.media_url)}${p.ssrRenderAttr("alt",h.caption)} class="absolute object-cover w-full min-h-[200px] h-full rounded-lg">`):i("<!---->"),h.type&&h.type.startsWith("video")?i(`<video controls class="absolute object-cover w-full h-full min-h-[300px] rounded-lg"><source${p.ssrRenderAttr("src",h.media_url)}${p.ssrRenderAttr("type",h.type)}></video>`):i("<!---->"),i(`</div><p class="mt-2 text-sm text-gray-600">${p.ssrInterpolate(h.caption)}</p></div>`)}),i("<!--]--></div></div>")):i("<!---->")}}},aa=tr.setup;tr.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/InstagramFeed.vue"),aa?aa(n,e):void 0};const Vo={__name:"BlogPage",__ssrInlineRender:!0,setup(n){const e=mt.useRoute(),t=u.ref(null),r=u.ref("Ess\xEAncia"),s=u.ref("Bahiana"),o=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`),i=u.ref({}),a=u.ref("Page"),l=u.ref("Ess\xEAncia Bahiana Site"),c=u.ref(""),h=u.ref("hero.jpg");return pe.useMeta(()=>({title:a.value,titleTemplate:d=>`Ess\xEAncia BAHIANA | Blog | ${d}`,meta:{description:{name:"description",content:l.value},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:c.value},ogTitle:{property:"og:title",template(){return`Ess\xEAncia BAHIANA | ${a.value}`}},ogDescription:{property:"og:description",template(){return l.value}},ogImage:{property:"og:image",template(){return`https://essenciabahiana.com.br/${h.value}`}},twitterTitle:{property:"twitter:title",template(){return`Ess\xEAncia BAHIANA | ${a.value}`}},twitterDescription:{property:"twitter:description",template(){return l.value}},twitterImage:{property:"twitter:image",template(){return`https://essenciabahiana.com.br/${h.value}`}}}})),u.onServerPrefetch(async()=>{console.log("server in");const{id:d}=e.params;try{const m=ze.doc(qn,"blog",d);t.value=await ze.getDoc(m),t.value.exists()&&(i.value={id:t.value.id,...t.value.data()},a.value=i.value.title,l.value=i.value.description,c.value=i.value.keywords,h.value=i.value.imageURL)}catch(m){console.error("Erro durante a execu\xE7\xE3o de serverPrefetch:",m)}console.log("server out")}),u.onMounted(async()=>{if(console.log("client"),console.log(t.value),!t.value){const{id:d}=e.params,m=ze.doc(qn,"blog",d);t.value=await ze.getDoc(m),t.value.exists()&&(i.value={id:t.value.id,...t.value.data()},a.value=i.value.title,l.value=i.value.description,c.value=i.value.keywords,h.value=i.value.imageURL)}}),(d,m,f,_)=>{const w=u.resolveComponent("q-page"),x=u.resolveComponent("q-img"),O=u.resolveComponent("q-separator"),$=u.resolveComponent("q-breadcrumbs"),N=u.resolveComponent("q-breadcrumbs-el");m(p.ssrRenderComponent(w,u.mergeProps({class:""},_),{default:u.withCtx((de,L,z,M)=>{if(L)L(`<header class="max-w-[1000px] min-h-[400px] mx-auto mt-28 md:mt-44"${M}><figure${M}><div class="w-full"${M}>`),L(p.ssrRenderComponent(x,{class:"w-full max-h-[500px] object-cover",src:`/${i.value.imageURL}`,alt:i.value.title},null,z,M)),L(`</div><figcaption class="py-8 px-6 md:px-0 flex flex-col"${M}><h1 class="text-2xl md:text-5xl font-sans font-bold mb-6"${M}>${p.ssrInterpolate(i.value.title)}</h1><p class="text-2xl"${M}>${p.ssrInterpolate(i.value.excerpt)}</p><p class="ml-auto text-kg text-accent"${M}>Por Ess\xEAncia Bahiana</p></figcaption>`),L(p.ssrRenderComponent(O,{class:"max-w-[1000px] mx-auto mb-6"},null,z,M)),L(p.ssrRenderComponent($,null,{default:u.withCtx((_e,q,ee,H)=>{if(q)q(p.ssrRenderComponent(N,{label:"Home",to:"/"},null,ee,H)),q(p.ssrRenderComponent(N,{label:"Blog",to:"/blog"},null,ee,H)),q(p.ssrRenderComponent(N,{label:"O que fazer"},null,ee,H)),q(p.ssrRenderComponent(N,{label:i.value.title},null,ee,H));else return[u.createVNode(N,{label:"Home",to:"/"}),u.createVNode(N,{label:"Blog",to:"/blog"}),u.createVNode(N,{label:"O que fazer"}),u.createVNode(N,{label:i.value.title},null,8,["label"])]}),_:1},z,M)),L("</figure></header>"),L(p.ssrRenderComponent(Te,{dataAdSlot:"banner"},null,z,M)),L(p.ssrRenderComponent(O,{class:"max-w-[1000px] mx-auto mb-6"},null,z,M)),L(`<main class="max-w-[1000px] mx-auto flex flex-col md:flex-row mb-6"${M}><section class="blog-content w-full md:w-8/12 px-6"${M}>${i.value.content}</section><aside class="w-full md:w-4/12"${M}>`),L(p.ssrRenderComponent(tr,{id:i.value.id},null,z,M)),L(p.ssrRenderComponent(Te,{dataAdSlot:"side"},null,z,M)),L("</aside></main>"),L(p.ssrRenderComponent(Re,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,z,M));else return[u.createVNode("header",{class:"max-w-[1000px] min-h-[400px] mx-auto mt-28 md:mt-44"},[u.createVNode("figure",null,[u.createVNode("div",{class:"w-full"},[u.createVNode(x,{class:"w-full max-h-[500px] object-cover",src:`/${i.value.imageURL}`,alt:i.value.title},null,8,["src","alt"])]),u.createVNode("figcaption",{class:"py-8 px-6 md:px-0 flex flex-col"},[u.createVNode("h1",{class:"text-2xl md:text-5xl font-sans font-bold mb-6"},u.toDisplayString(i.value.title),1),u.createVNode("p",{class:"text-2xl"},u.toDisplayString(i.value.excerpt),1),u.createVNode("p",{class:"ml-auto text-kg text-accent"},"Por Ess\xEAncia Bahiana")]),u.createVNode(O,{class:"max-w-[1000px] mx-auto mb-6"}),u.createVNode($,null,{default:u.withCtx(()=>[u.createVNode(N,{label:"Home",to:"/"}),u.createVNode(N,{label:"Blog",to:"/blog"}),u.createVNode(N,{label:"O que fazer"}),u.createVNode(N,{label:i.value.title},null,8,["label"])]),_:1})])]),u.createVNode(Te,{dataAdSlot:"banner"}),u.createVNode(O,{class:"max-w-[1000px] mx-auto mb-6"}),u.createVNode("main",{class:"max-w-[1000px] mx-auto flex flex-col md:flex-row mb-6"},[u.createVNode("section",{innerHTML:i.value.content,class:"blog-content w-full md:w-8/12 px-6"},null,8,["innerHTML"]),u.createVNode("aside",{class:"w-full md:w-4/12"},[u.createVNode(tr,{id:i.value.id},null,8,["id"]),u.createVNode(Te,{dataAdSlot:"side"})])]),u.createVNode(Re,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},f))}}},la=Vo.setup;Vo.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/BlogPage.vue"),la?la(n,e):void 0};var up=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"}));const No=u.defineComponent({name:"ErrorNotFound"});function hp(n,e,t,r,s,o,i,a){const l=u.resolveComponent("q-btn");e(`<div${p.ssrRenderAttrs(u.mergeProps({class:"fullscreen bg-blue text-white text-center q-pa-md flex flex-center"},r))}><div><div style="${p.ssrRenderStyle({"font-size":"30vh"})}"> 404 </div><div class="text-h2" style="${p.ssrRenderStyle({opacity:".4"})}"> Oops. Nothing here... </div>`),e(p.ssrRenderComponent(l,{class:"q-mt-xl",color:"white","text-color":"blue",unelevated:"",to:"/",label:"Go Home","no-caps":""},null,t)),e("</div></div>")}const ca=No.setup;No.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/ErrorNotFound.vue"),ca?ca(n,e):void 0};var dp=ha(No,[["ssrRender",hp]]),mp=Object.freeze(Object.defineProperty({__proto__:null,default:dp},Symbol.toStringTag,{value:"Module"})),fp={failed:"Action failed",success:"Action was successful"},pp={"en-US":fp},gp=nr.boot(({app:n})=>{const e=Nc.createI18n({locale:"en-US",globalInjection:!0,messages:pp});n.use(e)}),_p=Object.freeze(Object.defineProperty({__proto__:null,default:gp},Symbol.toStringTag,{value:"Module"}));const Sc=ua.default.create({baseURL:"https://api.example.com"});var yp=nr.boot(({app:n})=>{n.config.globalProperties.$axios=ua.default,n.config.globalProperties.$api=Sc}),vp=Object.freeze(Object.defineProperty({__proto__:null,default:yp,api:Sc},Symbol.toStringTag,{value:"Module"}));exports.default=jc;
