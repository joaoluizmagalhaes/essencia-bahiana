"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var c=require("vue"),pe=require("quasar"),p=require("vue/server-renderer"),Xn=require("quasar/wrappers"),ua=require("pinia"),dt=require("vue-router"),Pc=require("firebase/app");require("firebase/analytics");var Vc=require("firebase/auth"),Ht=require("firebase/firestore"),Nc=require("firebase/functions"),Dc=require("vue-i18n"),kc=require("axios");require("@emailjs/browser");function Oc(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var ha=Oc(kc);var da=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t};const vs=c.defineComponent({name:"App"});function Mc(n,e,t,r,s,o,i,a){const l=c.resolveComponent("router-view");e(p.ssrRenderComponent(l,r,null,t))}const Do=vs.setup;vs.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/App.vue"),Do?Do(n,e):void 0};var nt=da(vs,[["ssrRender",Mc]]),Ir=Xn.store(()=>ua.createPinia());const Lc=[{path:"/",component:()=>Promise.resolve().then(function(){return Hc}),children:[{path:"",component:()=>Promise.resolve().then(function(){return Gc})},{path:"/politicas-de-privacidade",component:()=>Promise.resolve().then(function(){return Qc})},{path:"/blog",component:()=>Promise.resolve().then(function(){return hp})},{path:"/blog/:categor/:id",component:()=>Promise.resolve().then(function(){return fp})}]},{path:"/:catchAll(.*)*",component:()=>Promise.resolve().then(function(){return gp})}];var Rr=Xn.route(function(){const n=dt.createMemoryHistory;return dt.createRouter({scrollBehavior:()=>({left:0,top:0}),routes:Lc,history:n("/")})});const Fc=c.defineComponent({name:"AppWrapper",setup(n){return c.onMounted(()=>{const{proxy:{$q:e}}=c.getCurrentInstance();e.onSSRHydrated!==void 0&&e.onSSRHydrated()}),()=>c.h(nt,n)}});async function Bc(n,e,t){const r=n(Fc);r.use(pe.Quasar,e,t);const s=typeof Ir=="function"?await Ir({ssrContext:t}):Ir;r.use(s),typeof window<"u"&&window.__INITIAL_STATE__!==void 0&&(s.state.value=window.__INITIAL_STATE__,delete window.__INITIAL_STATE__);const o=c.markRaw(typeof Rr=="function"?await Rr({ssrContext:t,store:s}):Rr);return s.use(({store:i})=>{i.router=o}),{app:r,store:s,router:o}}var $c={config:{},plugins:{Notify:pe.Notify,Loading:pe.Loading,Dialog:pe.Dialog,Screen:pe.Screen,Meta:pe.Meta}};const ko=typeof nt.preFetch=="function"?nt.preFetch:nt.__c!==void 0&&typeof nt.__c.preFetch=="function"?nt.__c.preFetch:!1,Oo="/",qc=/^https?:\/\//;function Mo(n,e){if(typeof n=="string"&&qc.test(n)===!0)return n;try{return e.resolve(n).href}catch{}return n}const{components:Sp,directives:Cp,...Uc}=$c,jc=Promise.all([Promise.resolve().then(function(){return Ep}),Promise.resolve().then(function(){return Tp})]).then(n=>n.map(e=>e.default).filter(e=>typeof e=="function"));var zc=n=>new Promise(async(e,t)=>{const r=await jc,{app:s,router:o,store:i}=await Bc(c.createApp,Uc,n);let a=!1;const l=(d,m)=>{a=!0,t({url:Mo(d,o),code:m})};for(let d=0;a===!1&&d<r.length;d++)try{await r[d]({app:s,router:o,store:i,ssrContext:n,redirect:l,urlPath:n.req.url,publicPath:Oo})}catch(m){t(m);return}if(a===!0)return;s.use(o);const u=n.req.url,{fullPath:h}=o.resolve(u);if(h!==u)return t({url:h});o.push(u).catch(()=>{}),o.isReady().then(()=>{let d=o.currentRoute.value.matched.filter(y=>y.components!==void 0).flatMap(y=>Object.values(y.components));if(d.length===0)return t({code:404});let m=!1;const f=(y,v)=>{m=!0,t({url:Mo(y,o),code:v})};d=d.filter(y=>typeof y.preFetch=="function"||y.__c!==void 0&&typeof y.__c.preFetch=="function").map(y=>y.__c!==void 0?y.__c.preFetch:y.preFetch),ko!==!1&&d.unshift(ko),d.reduce((y,v)=>y.then(()=>m===!1&&v({store:i,ssrContext:n,currentRoute:o.currentRoute.value,redirect:f,urlPath:n.req.url,publicPath:Oo})),Promise.resolve()).then(()=>{m!==!0&&(n.state=c.unref(i.state),e(s))}).catch(t)}).catch(t)});const Ve={__name:"HeaderMenu",__ssrInlineRender:!0,setup(n){const{getScrollTarget:e,setVerticalScrollPosition:t}=pe.scroll,r=c.computed(()=>s.screen.lt.md),s=pe.useQuasar(),o=dt.useRouter(),i=c.ref("");function a(u,h=""){o.push(`/${u}`).then(()=>{h&&c.nextTick(()=>{const d=document.getElementById(h);d&&l(d)})})}function l(u){const h=e(u),d=u.offsetTop-90;t(h,d,1e3)}return(u,h,d,m)=>{const f=c.resolveComponent("q-tabs"),y=c.resolveComponent("q-tab");h(p.ssrRenderComponent(f,c.mergeProps({modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,vertical:!!r.value,class:"text-primary"},m),{default:c.withCtx((v,x,R,V)=>{if(x)x(p.ssrRenderComponent(y,{name:"blog",label:"Blog",onClick:S=>a("blog")},null,R,V)),x(p.ssrRenderComponent(y,{name:"contato",label:"Contato",onClick:S=>a("","contact")},null,R,V));else return[c.createVNode(y,{name:"blog",label:"Blog",onClick:S=>a("blog")},null,8,["onClick"]),c.createVNode(y,{name:"contato",label:"Contato",onClick:S=>a("","contact")},null,8,["onClick"])]}),_:1},d))}}},Lo=Ve.setup;Ve.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/HeaderMenu.vue"),Lo?Lo(n,e):void 0};const Es={__name:"MainLayout",__ssrInlineRender:!0,setup(n){const e=c.ref(!1),t=c.ref(!1);c.ref(null);const r=dt.useRouter();c.onMounted(()=>{window.addEventListener("scroll",i)}),c.onUnmounted(()=>{window.removeEventListener("scroll",i)});function s(){e.value=!e.value}function o(a){r.push(`/${a}`)}const i=()=>{window.scrollY>20?t.value=!0:t.value=!1};return(a,l,u,h)=>{const d=c.resolveComponent("q-layout"),m=c.resolveComponent("q-toolbar"),f=c.resolveComponent("q-avatar"),y=c.resolveComponent("q-img"),v=c.resolveComponent("q-space"),x=c.resolveComponent("q-btn"),R=c.resolveComponent("q-drawer"),V=c.resolveComponent("q-page-container"),S=c.resolveComponent("router-view");l(p.ssrRenderComponent(d,c.mergeProps({view:"lHh Lpr lFf"},h),{default:c.withCtx((ue,ee,te,de)=>{if(ee)ee(p.ssrRenderComponent(m,{class:["h-20 md:h-36 fixed w-full z-50 top-0 p-7 bg-transparent font-sans font-bold ease-in-out duration-500",{"!bg-white md:!h-24 drop-shadow-md":t.value}]},{default:c.withCtx((ve,H,me,le)=>{if(H)H(p.ssrRenderComponent(f,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":t.value}],onClick:bt=>o("")},{default:c.withCtx((bt,Pt,Ar,xr)=>{if(Pt)Pt(p.ssrRenderComponent(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"},null,Ar,xr));else return[c.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]}),_:1},me,le)),H(`<h3 class="ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"${le}>Ess\xEAncia <span class="uppercase text-2xl md:text-3xl"${le}>Bahiana</span></h3>`),H(p.ssrRenderComponent(v,null,null,me,le)),H(p.ssrRenderComponent(Ve,{class:"hidden lg:!flex"},null,me,le)),H(p.ssrRenderComponent(x,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"},null,me,le));else return[c.createVNode(f,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":t.value}],onClick:bt=>o("")},{default:c.withCtx(()=>[c.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1},8,["class","onClick"]),c.createVNode("h3",{onClick:bt=>o(""),class:"ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"},[c.createTextVNode("Ess\xEAncia "),c.createVNode("span",{class:"uppercase text-2xl md:text-3xl",onClick:bt=>o("")},"Bahiana",8,["onClick"])],8,["onClick"]),c.createVNode(v),c.createVNode(Ve,{class:"hidden lg:!flex"}),c.createVNode(x,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"})]}),_:1},te,de)),ee(p.ssrRenderComponent(R,{modelValue:e.value,"onUpdate:modelValue":ve=>e.value=ve,overlay:"",side:"right",bordered:"",class:"q-py-lg flex flex-col"},{default:c.withCtx((ve,H,me,le)=>{if(H)H(`<div class="mx-auto mb-5 w-full flex justify-evenly items-center"${le}>`),H(p.ssrRenderComponent(f,{class:"w-16 h-16 md:w-32 md:h-32"},{default:c.withCtx((bt,Pt,Ar,xr)=>{if(Pt)Pt(p.ssrRenderComponent(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"},null,Ar,xr));else return[c.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]}),_:1},me,le)),H(`<div class="text-lg text-primary font-bold font-sans"${le}>Ess\xEAncia <span class="uppercase text-xl"${le}>Bahiana</span></div></div><div${le}>`),H(p.ssrRenderComponent(Ve,null,null,me,le)),H("</div>");else return[c.createVNode("div",{class:"mx-auto mb-5 w-full flex justify-evenly items-center"},[c.createVNode(f,{class:"w-16 h-16 md:w-32 md:h-32"},{default:c.withCtx(()=>[c.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1}),c.createVNode("div",{class:"text-lg text-primary font-bold font-sans"},[c.createTextVNode("Ess\xEAncia "),c.createVNode("span",{class:"uppercase text-xl"},"Bahiana")])]),c.createVNode("div",null,[c.createVNode(Ve)])]}),_:1},te,de)),ee(p.ssrRenderComponent(V,null,{default:c.withCtx((ve,H,me,le)=>{if(H)H(p.ssrRenderComponent(S,null,null,me,le));else return[c.createVNode(S)]}),_:1},te,de));else return[c.createVNode(m,{class:["h-20 md:h-36 fixed w-full z-50 top-0 p-7 bg-transparent font-sans font-bold ease-in-out duration-500",{"!bg-white md:!h-24 drop-shadow-md":t.value}]},{default:c.withCtx(()=>[c.createVNode(f,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":t.value}],onClick:ve=>o("")},{default:c.withCtx(()=>[c.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1},8,["class","onClick"]),c.createVNode("h3",{onClick:ve=>o(""),class:"ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"},[c.createTextVNode("Ess\xEAncia "),c.createVNode("span",{class:"uppercase text-2xl md:text-3xl",onClick:ve=>o("")},"Bahiana",8,["onClick"])],8,["onClick"]),c.createVNode(v),c.createVNode(Ve,{class:"hidden lg:!flex"}),c.createVNode(x,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"})]),_:1},8,["class"]),c.createVNode(R,{modelValue:e.value,"onUpdate:modelValue":ve=>e.value=ve,overlay:"",side:"right",bordered:"",class:"q-py-lg flex flex-col"},{default:c.withCtx(()=>[c.createVNode("div",{class:"mx-auto mb-5 w-full flex justify-evenly items-center"},[c.createVNode(f,{class:"w-16 h-16 md:w-32 md:h-32"},{default:c.withCtx(()=>[c.createVNode(y,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1}),c.createVNode("div",{class:"text-lg text-primary font-bold font-sans"},[c.createTextVNode("Ess\xEAncia "),c.createVNode("span",{class:"uppercase text-xl"},"Bahiana")])]),c.createVNode("div",null,[c.createVNode(Ve)])]),_:1},8,["modelValue","onUpdate:modelValue"]),c.createVNode(V,null,{default:c.withCtx(()=>[c.createVNode(S)]),_:1})]}),_:1},u))}}},Fo=Es.setup;Es.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/layouts/MainLayout.vue"),Fo?Fo(n,e):void 0};var Hc=Object.freeze(Object.defineProperty({__proto__:null,default:Es},Symbol.toStringTag,{value:"Module"}));const ws={__name:"IndexPage",__ssrInlineRender:!0,setup(n){const e=c.defineAsyncComponent(()=>Promise.resolve().then(function(){return Ap})),t=c.defineAsyncComponent(()=>Promise.resolve().then(function(){return xp})),r=c.defineAsyncComponent(()=>Promise.resolve().then(function(){return Ip})),s=c.defineAsyncComponent(()=>Promise.resolve().then(function(){return Kc})),o=c.defineAsyncComponent(()=>Promise.resolve().then(function(){return Rp})),i=c.ref("Ess\xEAncia"),a=c.ref("Bahiana"),l=c.ref("Descubra a Magia e a Cultura \xDAnica da Terra do Descobrimento"),u=c.ref("/hero.webp"),h=c.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return pe.useMeta({title:"Ess\xEAncia BAHIANA",meta:{description:{name:"description",content:"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:"Porto Seguro, Pontos tur\xEDsticos em Porto Seguro, Passeios em Porto Seguro, Traslados em Porto Seguro, Turismo na Bahia, Viagens pela Bahia, Melhores experi\xEAncias em Porto Seguro, Roteiros de viagem em Porto Seguro, Atra\xE7\xF5es tur\xEDsticas na regi\xE3o, Servi\xE7o de transporte em Porto Seguro, Roteiro de viagem personalizado, Dicas de viagem para Porto Seguro, Destinos na Bahia, Planejamento de viagem, Experi\xEAncias memor\xE1veis na Bahia."},ogTitle:{property:"og:title",template(){return"Ess\xEAncia BAHIANA"}},ogDescription:{property:"og:description",template(){return"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."}},ogImage:{property:"og:image",template(){return"https://essenciabahiana.com.br/hero.webp"}},twitterTitle:{property:"twitter:title",template(){return"Ess\xEAncia BAHIANA"}},twitterDescription:{property:"twitter:description",template(){return"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."}},twitterImage:{property:"twitter:image",template(){return"https://essenciabahiana.com.br/hero.webp"}}}}),(d,m,f,y)=>{const v=c.resolveComponent("q-page");m(p.ssrRenderComponent(v,c.mergeProps({class:"flex flex-center w-full"},y),{default:c.withCtx((x,R,V,S)=>{if(R)R(p.ssrRenderComponent(c.unref(e),{image:u.value,firstTitle:i.value,secondTitle:a.value,subtitle:l.value},null,V,S)),R(p.ssrRenderComponent(c.unref(t),null,null,V,S)),R(p.ssrRenderComponent(c.unref(r),null,null,V,S)),R(p.ssrRenderComponent(c.unref(o),null,null,V,S)),R(p.ssrRenderComponent(c.unref(s),{firstTitle:i.value,secondTitle:a.value,copyRight:h.value},null,V,S));else return[c.createVNode(c.unref(e),{image:u.value,firstTitle:i.value,secondTitle:a.value,subtitle:l.value},null,8,["image","firstTitle","secondTitle","subtitle"]),c.createVNode(c.unref(t)),c.createVNode(c.unref(r)),c.createVNode(c.unref(o)),c.createVNode(c.unref(s),{firstTitle:i.value,secondTitle:a.value,copyRight:h.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},f))}}},Bo=ws.setup;ws.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/IndexPage.vue"),Bo?Bo(n,e):void 0};var Gc=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"}));const Dn={__name:"FaqSection",__ssrInlineRender:!0,props:{faqs:{question:String,answer:String}},setup(n){const e=n;return(t,r,s,o)=>{const i=c.resolveComponent("q-expansion-item"),a=c.resolveComponent("q-card"),l=c.resolveComponent("q-card-section");r(`<div${p.ssrRenderAttrs(c.mergeProps({class:"faq-container py-8"},o))}><div class="faq-title text-2xl font-bold mb-4 text-primary"> Perguntas Frequentes (FAQs) </div><div class="faq-content"><!--[-->`),p.ssrRenderList(e.faqs,(u,h)=>{r('<div class="faq-item mb-4 text-primary">'),r(p.ssrRenderComponent(i,{"expand-separator":"",label:u.question},{default:c.withCtx((d,m,f,y)=>{if(m)m(p.ssrRenderComponent(a,null,{default:c.withCtx((v,x,R,V)=>{if(x)x(p.ssrRenderComponent(l,{class:"text-secondary"},{default:c.withCtx((S,ue,ee,te)=>{if(ue)ue(`${p.ssrInterpolate(u.answer)}`);else return[c.createTextVNode(c.toDisplayString(u.answer),1)]}),_:2},R,V));else return[c.createVNode(l,{class:"text-secondary"},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(u.answer),1)]),_:2},1024)]}),_:2},f,y));else return[c.createVNode(a,null,{default:c.withCtx(()=>[c.createVNode(l,{class:"text-secondary"},{default:c.withCtx(()=>[c.createTextVNode(c.toDisplayString(u.answer),1)]),_:2},1024)]),_:2},1024)]}),_:2},s)),r("</div>")}),r("<!--]--></div></div>")}}},$o=Dn.setup;Dn.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/FaqSection.vue"),$o?$o(n,e):void 0};const Ce={__name:"FooterComponent",__ssrInlineRender:!0,props:{copyRight:String,firstTitle:String,secondTitle:String},setup(n){dt.useRouter();function e(){const o="https://www.instagram.com/essencia.bahiana";window.open(o,"_blank")}function t(){const o="https://www.facebook.com/profile.php?id=61555489870691&mibextid=9R9pXO";window.open(o,"_blank")}function r(){const i="https://wa.me/5511993271622";window.open(i,"_blank")}function s(){const o="mailto:contato@essenciabahiana.com.br";window.open(o,"_blank")}return(o,i,a,l)=>{const u=c.resolveComponent("q-btn");i(`<footer${p.ssrRenderAttrs(c.mergeProps({elevated:"",class:"bg-primary w-full text-light-gray"},l))}><div class="q-px-lg q-py-md"><div class="flex flex-wrap justify-between items-center"><div class="flex items-center"><img src="/logo.svg" alt="Logo Essencia Bahiana" class="h-12 mr-4 bg-white rounded-full"><div class="text-2xl font-bold font-sans text-accent">${p.ssrInterpolate(n.firstTitle)} <span class="uppercase text-3xl font-bold">${p.ssrInterpolate(n.secondTitle)}</span></div></div><div class="flex items-center mx-auto md:mx-0">`),i(p.ssrRenderComponent(u,{flat:"",dense:"",round:"",icon:"fa-brands fa-instagram",class:"text-xl text-accent",onClick:e},null,a)),i(p.ssrRenderComponent(u,{flat:"",dense:"",round:"",icon:"fa-brands fa-facebook-f",class:"text-xl text-accent",onClick:t},null,a)),i(p.ssrRenderComponent(u,{flat:"",dense:"",round:"",icon:"fa-brands fa-whatsapp",class:"text-xl text-accent",onClick:r},null,a)),i(p.ssrRenderComponent(u,{flat:"",dense:"",round:"",icon:"email",class:"text-xl text-accent",onClick:s},null,a)),i(`</div></div><div class="text-center q-mt-md text-accent flex flex-col">${p.ssrInterpolate(n.copyRight)} <span class="cursor-pointer">Pol\xEDticas de Privacidade</span></div></div></footer>`)}}},qo=Ce.setup;Ce.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/FooterComponent.vue"),qo?qo(n,e):void 0};var Kc=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"}));const Ts={__name:"PrivacyPolicy",__ssrInlineRender:!0,setup(n){const e=c.ref([{question:"Como o Ess\xEAncia Bahiana utiliza o Google AdSense para coletar dados?",answer:"O Ess\xEAncia Bahiana utiliza o Google AdSense para exibir an\xFAncios que s\xE3o relevantes para os usu\xE1rios. O Google AdSense utiliza cookies e outras tecnologias de rastreamento para coletar informa\xE7\xF5es sobre as prefer\xEAncias dos usu\xE1rios e o tipo de conte\xFAdo que acessam. Essas informa\xE7\xF5es s\xE3o usadas para fornecer an\xFAncios direcionados, melhorando assim a experi\xEAncia do usu\xE1rio e permitindo a monetiza\xE7\xE3o do site.",open:!1},{question:"Quais s\xE3o os direitos do usu\xE1rio em rela\xE7\xE3o aos dados coletados pelo Ess\xEAncia Bahiana?",answer:"Usu\xE1rios do Ess\xEAncia Bahiana t\xEAm o direito de acessar, corrigir ou excluir seus dados pessoais a qualquer momento. Al\xE9m disso, os usu\xE1rios t\xEAm o direito de se opor ou restringir o processamento de seus dados e o direito \xE0 portabilidade de dados. Para exercer esses direitos, os usu\xE1rios podem entrar em contato diretamente com o Ess\xEAncia Bahiana atrav\xE9s dos canais de suporte fornecidos.",open:!1},{question:"Como posso gerenciar minhas prefer\xEAncias de cookies no Ess\xEAncia Bahiana?",answer:"Os usu\xE1rios podem gerenciar suas prefer\xEAncias de cookies nas configura\xE7\xF5es do navegador. Al\xE9m disso, o Ess\xEAncia Bahiana fornece informa\xE7\xF5es e op\xE7\xF5es para gerenciar prefer\xEAncias de cookies diretamente no site, permitindo que os usu\xE1rios escolham aceitar, recusar ou personalizar o uso de cookies conforme necess\xE1rio.",open:!1},{question:"Que medidas de seguran\xE7a o Ess\xEAncia Bahiana implementa para proteger os dados dos usu\xE1rios?",answer:"O Ess\xEAncia Bahiana implementa v\xE1rias medidas de seguran\xE7a para proteger os dados dos usu\xE1rios, incluindo criptografia de dados, firewalls e protocolos de seguran\xE7a para prevenir o acesso n\xE3o autorizado. Al\xE9m disso, realizamos treinamentos regulares de seguran\xE7a para nossa equipe e mantemos pol\xEDticas rigorosas para garantir a prote\xE7\xE3o e a privacidade dos dados dos usu\xE1rios.",open:!1},{question:"Como o Ess\xEAncia Bahiana lida com a privacidade das crian\xE7as?",answer:"O Ess\xEAncia Bahiana leva a privacidade das crian\xE7as a s\xE9rio e est\xE1 em conformidade com a Lei de Prote\xE7\xE3o \xE0 Privacidade Online de Crian\xE7as (COPPA). N\xE3o coletamos intencionalmente informa\xE7\xF5es de crian\xE7as menores de 13 anos. Se tivermos conhecimento de que informa\xE7\xF5es foram coletadas de uma crian\xE7a menor de 13 anos, tomaremos medidas imediatas para excluir tais informa\xE7\xF5es.",open:!1},{question:"O Ess\xEAncia Bahiana compartilha informa\xE7\xF5es com outros pa\xEDses?",answer:"O Ess\xEAncia Bahiana pode transferir informa\xE7\xF5es para pa\xEDses fora do Brasil, especialmente em rela\xE7\xE3o \xE0 integra\xE7\xE3o com o Google AdSense. No entanto, asseguramos que todas as transfer\xEAncias de dados s\xE3o realizadas em conformidade com as leis de prote\xE7\xE3o de dados aplic\xE1veis e que medidas de seguran\xE7a adequadas est\xE3o em vigor para proteger os dados durante a transfer\xEAncia e em seu destino final.",open:!1}]),t=c.ref("Ess\xEAncia"),r=c.ref("Bahiana"),s=c.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return(o,i,a,l)=>{const u=c.resolveComponent("q-page");i(p.ssrRenderComponent(u,c.mergeProps({class:"privacy-policy"},l),{default:c.withCtx((h,d,m,f)=>{if(d)d(`<div class="mt-48 container mx-auto"${f}><h1 class="text-6xl font-bold font-sans text-primary mb-10"${f}>Pol\xEDtica de Privacidade do Ess\xEAncia Bahiana</h1><p class="text-secondary text-lg mb-6"${f}>Saiba como o Ess\xEAncia Bahiana protege sua privacidade e dados pessoais, especialmente em conex\xE3o com o Google AdSense.</p><p class="text-secondary text-lg mb-6"${f}>Bem-vindo ao Ess\xEAncia Bahiana! Prezamos pela transpar\xEAncia e compromisso com a seguran\xE7a dos seus dados pessoais. Esta Pol\xEDtica de Privacidade explica como coletamos, utilizamos e compartilhamos informa\xE7\xF5es no \xE2mbito de nossos servi\xE7os, incluindo, mas n\xE3o se limitando \xE0 integra\xE7\xE3o com o Google AdSense.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Introdu\xE7\xE3o \xE0 Pol\xEDtica de Privacidade</h2><p class="text-secondary text-lg mb-6"${f}>A privacidade dos nossos usu\xE1rios \xE9 de extrema import\xE2ncia para n\xF3s. O Ess\xEAncia Bahiana est\xE1 comprometido em proteger as informa\xE7\xF5es pessoais coletadas quando voc\xEA acessa nosso conte\xFAdo e servi\xE7os. Esta se\xE7\xE3o esclarece o prop\xF3sito da nossa pol\xEDtica e a import\xE2ncia de sua privacidade para n\xF3s.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Coleta de Informa\xE7\xF5es</h2><p class="text-secondary text-lg mb-6"${f}>Entender quais informa\xE7\xF5es s\xE3o coletadas e como s\xE3o coletadas \xE9 fundamental. Aqui, explicamos os tipos de dados que o Ess\xEAncia Bahiana coleta, os m\xE9todos de coleta e como o consentimento do usu\xE1rio \xE9 obtido.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Uso das Informa\xE7\xF5es Coletadas</h2><p class="text-secondary text-lg mb-6"${f}>As informa\xE7\xF5es coletadas s\xE3o utilizadas para melhorar continuamente nossos servi\xE7os, personalizar a experi\xEAncia do usu\xE1rio e cumprir obriga\xE7\xF5es legais. Este segmento aborda detalhadamente esses aspectos.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Integra\xE7\xE3o com o Google AdSense</h2><p class="text-secondary text-lg mb-6"${f}>O Google AdSense permite monetizar o conte\xFAdo do site atrav\xE9s de an\xFAncios. Nesta se\xE7\xE3o, discutiremos como o Ess\xEAncia Bahiana integra o AdSense em suas opera\xE7\xF5es e como isso afeta a coleta e o uso de dados.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Compartilhamento e Divulga\xE7\xE3o de Informa\xE7\xF5es</h2><p class="text-secondary text-lg mb-6"${f}>\xC9 importante entender em que circunst\xE2ncias suas informa\xE7\xF5es podem ser compartilhadas. Aqui, explicamos quando e por que suas informa\xE7\xF5es podem ser divulgadas, seja para parceiros terceirizados ou por requisitos legais.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Medidas de Seguran\xE7a de Dados</h2><p class="text-secondary text-lg mb-6"${f}>A seguran\xE7a dos seus dados \xE9 uma prioridade. Neste segmento, abordamos as medidas de seguran\xE7a implementadas para proteger seus dados, incluindo criptografia e protocolos de seguran\xE7a.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Direitos do Usu\xE1rio e Controle de Dados</h2><p class="text-secondary text-lg mb-6"${f}>Voc\xEA tem direitos significativos em rela\xE7\xE3o aos seus dados pessoais. Aqui, explicamos como voc\xEA pode acessar, corrigir ou excluir suas informa\xE7\xF5es pessoais e quais s\xE3o seus direitos de portabilidade de dados.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Cookies e Tecnologias de Rastreamento</h2><p class="text-secondary text-lg mb-6"${f}>Cookies e outras tecnologias de rastreamento desempenham um papel crucial na personaliza\xE7\xE3o da experi\xEAncia online. Neste segmento, explicamos como essas tecnologias s\xE3o utilizadas no Ess\xEAncia Bahiana e como voc\xEA pode gerenciar suas prefer\xEAncias.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Privacidade de Crian\xE7as</h2><p class="text-secondary text-lg mb-6"${f}>A prote\xE7\xE3o de crian\xE7as online \xE9 extremamente importante. Aqui, discutimos as pol\xEDticas do Ess\xEAncia Bahiana em rela\xE7\xE3o \xE0 coleta e uso de dados de crian\xE7as, em conformidade com a COPPA.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Transfer\xEAncias Internacionais de Dados</h2><p class="text-secondary text-lg mb-6"${f}>Como as informa\xE7\xF5es podem ser transferidas internacionalmente, \xE9 crucial entender as pol\xEDticas e salvaguardas em vigor. Esta se\xE7\xE3o detalha como o Ess\xEAncia Bahiana lida com transfer\xEAncias de dados transfronteiri\xE7as.</p><h2 class="font-bold font-sans text-primary text-3xl"${f}>Websites e Servi\xE7os de Terceiros</h2><p class="text-secondary text-lg mb-6"${f}>O Ess\xEAncia Bahiana pode conter links para sites externos. Aqui, explicamos como interagimos com esses sites de terceiros e a import\xE2ncia de revisar suas pol\xEDticas de privacidade.</p>`),d(p.ssrRenderComponent(Dn,{faqs:e.value},null,m,f)),d("</div>"),d(p.ssrRenderComponent(Ce,{firstTitle:t.value,secondTitle:r.value,copyRight:s.value},null,m,f));else return[c.createVNode("div",{class:"mt-48 container mx-auto"},[c.createVNode("h1",{class:"text-6xl font-bold font-sans text-primary mb-10"},"Pol\xEDtica de Privacidade do Ess\xEAncia Bahiana"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"Saiba como o Ess\xEAncia Bahiana protege sua privacidade e dados pessoais, especialmente em conex\xE3o com o Google AdSense."),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"Bem-vindo ao Ess\xEAncia Bahiana! Prezamos pela transpar\xEAncia e compromisso com a seguran\xE7a dos seus dados pessoais. Esta Pol\xEDtica de Privacidade explica como coletamos, utilizamos e compartilhamos informa\xE7\xF5es no \xE2mbito de nossos servi\xE7os, incluindo, mas n\xE3o se limitando \xE0 integra\xE7\xE3o com o Google AdSense."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Introdu\xE7\xE3o \xE0 Pol\xEDtica de Privacidade"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"A privacidade dos nossos usu\xE1rios \xE9 de extrema import\xE2ncia para n\xF3s. O Ess\xEAncia Bahiana est\xE1 comprometido em proteger as informa\xE7\xF5es pessoais coletadas quando voc\xEA acessa nosso conte\xFAdo e servi\xE7os. Esta se\xE7\xE3o esclarece o prop\xF3sito da nossa pol\xEDtica e a import\xE2ncia de sua privacidade para n\xF3s."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Coleta de Informa\xE7\xF5es"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"Entender quais informa\xE7\xF5es s\xE3o coletadas e como s\xE3o coletadas \xE9 fundamental. Aqui, explicamos os tipos de dados que o Ess\xEAncia Bahiana coleta, os m\xE9todos de coleta e como o consentimento do usu\xE1rio \xE9 obtido."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Uso das Informa\xE7\xF5es Coletadas"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"As informa\xE7\xF5es coletadas s\xE3o utilizadas para melhorar continuamente nossos servi\xE7os, personalizar a experi\xEAncia do usu\xE1rio e cumprir obriga\xE7\xF5es legais. Este segmento aborda detalhadamente esses aspectos."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Integra\xE7\xE3o com o Google AdSense"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"O Google AdSense permite monetizar o conte\xFAdo do site atrav\xE9s de an\xFAncios. Nesta se\xE7\xE3o, discutiremos como o Ess\xEAncia Bahiana integra o AdSense em suas opera\xE7\xF5es e como isso afeta a coleta e o uso de dados."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Compartilhamento e Divulga\xE7\xE3o de Informa\xE7\xF5es"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"\xC9 importante entender em que circunst\xE2ncias suas informa\xE7\xF5es podem ser compartilhadas. Aqui, explicamos quando e por que suas informa\xE7\xF5es podem ser divulgadas, seja para parceiros terceirizados ou por requisitos legais."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Medidas de Seguran\xE7a de Dados"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"A seguran\xE7a dos seus dados \xE9 uma prioridade. Neste segmento, abordamos as medidas de seguran\xE7a implementadas para proteger seus dados, incluindo criptografia e protocolos de seguran\xE7a."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Direitos do Usu\xE1rio e Controle de Dados"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"Voc\xEA tem direitos significativos em rela\xE7\xE3o aos seus dados pessoais. Aqui, explicamos como voc\xEA pode acessar, corrigir ou excluir suas informa\xE7\xF5es pessoais e quais s\xE3o seus direitos de portabilidade de dados."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Cookies e Tecnologias de Rastreamento"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"Cookies e outras tecnologias de rastreamento desempenham um papel crucial na personaliza\xE7\xE3o da experi\xEAncia online. Neste segmento, explicamos como essas tecnologias s\xE3o utilizadas no Ess\xEAncia Bahiana e como voc\xEA pode gerenciar suas prefer\xEAncias."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Privacidade de Crian\xE7as"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"A prote\xE7\xE3o de crian\xE7as online \xE9 extremamente importante. Aqui, discutimos as pol\xEDticas do Ess\xEAncia Bahiana em rela\xE7\xE3o \xE0 coleta e uso de dados de crian\xE7as, em conformidade com a COPPA."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Transfer\xEAncias Internacionais de Dados"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"Como as informa\xE7\xF5es podem ser transferidas internacionalmente, \xE9 crucial entender as pol\xEDticas e salvaguardas em vigor. Esta se\xE7\xE3o detalha como o Ess\xEAncia Bahiana lida com transfer\xEAncias de dados transfronteiri\xE7as."),c.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Websites e Servi\xE7os de Terceiros"),c.createVNode("p",{class:"text-secondary text-lg mb-6"},"O Ess\xEAncia Bahiana pode conter links para sites externos. Aqui, explicamos como interagimos com esses sites de terceiros e a import\xE2ncia de revisar suas pol\xEDticas de privacidade."),c.createVNode(Dn,{faqs:e.value},null,8,["faqs"])]),c.createVNode(Ce,{firstTitle:t.value,secondTitle:r.value,copyRight:s.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},a))}}},Uo=Ts.setup;Ts.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/PrivacyPolicy.vue"),Uo?Uo(n,e):void 0};var Qc=Object.freeze(Object.defineProperty({__proto__:null,default:Ts},Symbol.toStringTag,{value:"Module"}));const Ne={__name:"ArticleBlogHomeHero",__ssrInlineRender:!0,props:{article:{title:String,imageURL:String,excerpt:String,containerStyle:String,titleStyle:String,excerptStyle:String,imageStyle:String}},setup(n){return(e,t,r,s)=>{const o=c.resolveComponent("q-img");t(`<article${p.ssrRenderAttrs(c.mergeProps({class:`w-full pb-6 md:pb-0 cursor-pointer ${n.article.containerStyle}`},s))}><figure class="relative figure-hover"><div class="relative w-full h-full overflow-hidden">`),t(p.ssrRenderComponent(o,{loading:"lazy",src:n.article.imageURL,class:`relative object-cover object-center relative z-10 image-hover ease-in-out duration-500 ${n.article.imageStyle}`,alt:n.article.title},null,r)),t(`</div><figcaption class="z-20 md:absolute bottom-0 py-3 md:p-6"><header><h1 class="${p.ssrRenderClass(`text-2xl md:text-shadow-outline font-bold font-sans ${n.article.titleStyle} md:text-white`)}">${p.ssrInterpolate(n.article.title)}</h1><p class="${p.ssrRenderClass(`text-lg md:text-white md:text-shadow-outline ${n.article.excerptStyle}`)}">${p.ssrInterpolate(n.article.excerpt)}</p></header></figcaption></figure></article>`)}}},jo=Ne.setup;Ne.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/ArticleBlogHomeHero.vue"),jo?jo(n,e):void 0};const kn={__name:"BlogHero",__ssrInlineRender:!0,props:{dataHero:{id:String,title:String,imageURL:String,excerpt:String,containerStyle:String,imageStyle:String,titleStyle:String,excerptStyle:String}},setup(n){const e=n,t=c.ref([]);return c.onMounted(()=>{t.value=e.dataHero,t.value[0].containerStyle="md:pr-6",t.value[0].imageStyle=" md:h-[600px]",t.value[0].titleStyle="md:text-5xl",t.value[0].excerptStyle="md:text-lg",t.value[1].containerStyle="md:pb-3",t.value[1].imageStyle="md:h-[288px]",t.value[1].titleStyle="md:text-2xl",t.value[1].excerptStyle="md:text-md",t.value[2].containerStyle="md:pt-3",t.value[2].imageStyle="md:h-[288px]",t.value[2].titleStyle="md:text-2xl",t.value[2].excerptStyle="md:text-md"}),(r,s,o,i)=>{const a=c.resolveComponent("router-link");t.value.length>0?(s(`<div${p.ssrRenderAttrs(c.mergeProps({class:"mx-auto container flex flex-col mb-10 md:flex-row md:h-[600px]"},i))}><div class="w-full md:w-7/12 px-6 md:px-0 box-border flex md:h-[600px]">`),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${t.value[0].id}`,class:"w-full"},{default:c.withCtx((l,u,h,d)=>{if(u)u(p.ssrRenderComponent(Ne,{article:t.value[0]},null,h,d));else return[c.createVNode(Ne,{article:t.value[0]},null,8,["article"])]}),_:1},o)),s('</div><div class="w-full md:w-5/12 px-6 md:px-0 mb-10 md:mb-0 box-border md:justify-between flex flex-col md:h-[unset]">'),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${t.value[1].id}`},{default:c.withCtx((l,u,h,d)=>{if(u)u(p.ssrRenderComponent(Ne,{article:t.value[1]},null,h,d));else return[c.createVNode(Ne,{article:t.value[1]},null,8,["article"])]}),_:1},o)),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${t.value[2].id}`},{default:c.withCtx((l,u,h,d)=>{if(u)u(p.ssrRenderComponent(Ne,{article:t.value[2]},null,h,d));else return[c.createVNode(Ne,{article:t.value[2]},null,8,["article"])]}),_:1},o)),s("</div></div>")):s("<!---->")}}},zo=kn.setup;kn.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/BlogHero.vue"),zo?zo(n,e):void 0};const On={__name:"ArticleBlogHomeBody",__ssrInlineRender:!0,props:{article:{title:String,imageURL:String,excerpt:String,id:String}},setup(n){return(e,t,r,s)=>{const o=c.resolveComponent("router-link"),i=c.resolveComponent("q-img");t(p.ssrRenderComponent(o,c.mergeProps({to:`/blog/o-que-fazer/${n.article.id}`,class:"w-full"},s),{default:c.withCtx((a,l,u,h)=>{if(l)l(`<article class="w-full mb-10 cursor-pointer px-6 md:px-0 border-b pb-6"${h}><figure class="flex"${h}><div class="w-full md:w-1/3 mb-5 md:mb-0"${h}>`),l(p.ssrRenderComponent(i,{src:n.article.imageURL,class:"w-full object-cover h-[250px]",alt:n.article.title},null,u,h)),l(`</div><figcaption class="w-full md:w-2/3 flex flex-col justify-end md:pl-10"${h}><header${h}><h2 class="text-2xl font-bold font-sans"${h}>${p.ssrInterpolate(n.article.title)}</h2><p class="text-lg"${h}>${p.ssrInterpolate(n.article.excerpt)}</p></header></figcaption></figure></article>`);else return[c.createVNode("article",{class:"w-full mb-10 cursor-pointer px-6 md:px-0 border-b pb-6"},[c.createVNode("figure",{class:"flex"},[c.createVNode("div",{class:"w-full md:w-1/3 mb-5 md:mb-0"},[c.createVNode(i,{src:n.article.imageURL,class:"w-full object-cover h-[250px]",alt:n.article.title},null,8,["src","alt"])]),c.createVNode("figcaption",{class:"w-full md:w-2/3 flex flex-col justify-end md:pl-10"},[c.createVNode("header",null,[c.createVNode("h2",{class:"text-2xl font-bold font-sans"},c.toDisplayString(n.article.title),1),c.createVNode("p",{class:"text-lg"},c.toDisplayString(n.article.excerpt),1)])])])])]}),_:1},r))}}},Ho=On.setup;On.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/ArticleBlogHomeBody.vue"),Ho?Ho(n,e):void 0};const Wc={apiKey:"AIzaSyAD7kXLz2-aeXM8WV0Y8_dB3qhB46ZifJo",authDomain:"essencia-bahiana.firebaseapp.com",databaseURL:"https://essencia-bahiana-default-rtdb.firebaseio.com",projectId:"essencia-bahiana",storageBucket:"essencia-bahiana.appspot.com",messagingSenderId:"467804101964",appId:"1:467804101964:web:dd8538419c9232aa1703e9",measurementId:"G-9BP1S8J757"},As=Pc.initializeApp(Wc);Nc.getFunctions(As);Vc.getAuth(As);const xs=Ht.getFirestore(As),ft={__name:"InstagramFeed",__ssrInlineRender:!0,setup(n){const e=c.ref([]),t=c.ref([]);c.onMounted(async()=>{try{const o=Ht.doc(xs,"configuration","instagramToken"),i=await Ht.getDoc(o);if(i.exists()){const l=i.data().token,h=await fetch(`https://graph.instagram.com/me/media?fields=id,caption,media_url&access_token=${l}&limit=${1}`);if(!h.ok){console.error(`Erro na API: ${h.status} ${h.statusText}`);const y=await h.json();console.error(y);return}const d=await h.json();t.value=d.data;const m=t.value.map(async y=>{const v=await r(y.media_url);return{...y,type:v}}),f=await Promise.all(m);e.value=f}else console.error("Documento do token n\xE3o encontrado.")}catch(o){console.error("Erro ao carregar o feed do Instagram ou ao acessar o Firestore:",o)}});async function r(o){return(await fetch(o,{method:"HEAD"})).headers.get("Content-Type")}function s(){const o="https://www.instagram.com/essencia.bahiana";window.open(o,"_blank")}return(o,i,a,l)=>{const u=c.resolveComponent("q-img");e.value.length>0?(i(`<div${p.ssrRenderAttrs(c.mergeProps({class:"mx-auto max-w-full px-5"},l))}><div class="grid grid-cols-1 gap-4"><p class="text-lg font-bold font-sans">Confira o post mais recente.</p>`),i(p.ssrRenderComponent(u,{class:"cursor-pointer",src:"/insta-logo-text.webp",alt:"Logo instagram com texto.",onClick:s},null,a)),i("<!--[-->"),p.ssrRenderList(e.value,h=>{i('<div class="instagram-post flex flex-col h-auto"><div class="relative pb-1/1 min-h-[300px]">'),h.type&&h.type.startsWith("image")?i(`<img${p.ssrRenderAttr("src",h.media_url)}${p.ssrRenderAttr("alt",h.caption)} class="absolute object-cover w-full min-h-[200px] h-full rounded-lg">`):i("<!---->"),h.type&&h.type.startsWith("video")?i(`<video controls class="absolute object-cover w-full h-full min-h-[300px] rounded-lg"><source${p.ssrRenderAttr("src",h.media_url)}${p.ssrRenderAttr("type",h.type)}></video>`):i("<!---->"),i(`</div><p class="mt-2 text-sm text-gray-600">${p.ssrInterpolate(h.caption)}</p></div>`)}),i("<!--]--></div></div>")):i("<!---->")}}},Go=ft.setup;ft.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/InstagramFeed.vue"),Go?Go(n,e):void 0};const mt={__name:"BookingAd",__ssrInlineRender:!0,props:{location:String},setup(n){const e=c.ref(null),t=c.ref(null),r=c.ref(null),s=c.ref(null),o=n,i=c.ref(o.location?o.location:"Porto Seguro");return c.onMounted(()=>{e.value="https://www.awin1.com/cread.php?awinmid=18120&awinaffid=1542385&campaign=Enjoy-the-summer&ued=https%3A%2F%2Fbooking.com%2Findex.pt-br.html?%2F",t.value="https://www.awin1.com/cshow.php?s=2788398&v=18120&q=404159&r=1542385",r.value=`Descubra ${i.value}!`,s.value=`Aproveite 15% de desconto na sua primeira reserva de 2024 para ${i.value} com a Booking. Explore a beleza e hist\xF3ria de ${i.value}. Clique e economize!`}),(a,l,u,h)=>{l(`<a${p.ssrRenderAttrs(c.mergeProps({rel:"sponsored",href:e.value,target:"_blank"},h))}><div class="w-full flex flex-col mb-10 px-6"><h2 class="font-sans font-bold text-primary text-2xl mb-4">${p.ssrInterpolate(r.value)}</h2><p class="text-base text-secondary mb-6">${p.ssrInterpolate(s.value)}</p><img${p.ssrRenderAttr("src",t.value)} border="0"></div></a>`)}}},Ko=mt.setup;mt.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/BookingAd.vue"),Ko?Ko(n,e):void 0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Yc=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],i=n[t++],a=n[t++],l=((s&7)<<18|(o&63)<<12|(i&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=n[t++],i=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|i&63)}}return e.join("")},ma={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],i=s+1<n.length,a=i?n[s+1]:0,l=s+2<n.length,u=l?n[s+2]:0,h=o>>2,d=(o&3)<<4|a>>4;let m=(a&15)<<2|u>>6,f=u&63;l||(f=64,i||(m=64)),r.push(t[h],t[d],t[m],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fa(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Yc(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const d=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||a==null||u==null||d==null)throw new Xc;const m=o<<2|a>>4;if(r.push(m),u!==64){const f=a<<4&240|u>>2;if(r.push(f),d!==64){const y=u<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Xc extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jc=function(n){const e=fa(n);return ma.encodeByteArray(e,!0)},pa=function(n){return Jc(n).replace(/\./g,"")},Zc=function(n){try{return ma.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=()=>eu().__FIREBASE_DEFAULTS__,nu=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ru=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Zc(n[1]);return e&&JSON.parse(e)},su=()=>{try{return tu()||nu()||ru()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ou(){var n;const e=(n=su())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iu(){return!ou()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ga(){try{return typeof indexedDB=="object"}catch{return!1}}function au(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="FirebaseError";class Tt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lu,Object.setPrototypeOf(this,Tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_a.prototype.create)}}class _a{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],i=o?cu(o,r):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new Tt(s,a,r)}}function cu(n,e){return n.replace(uu,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const uu=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(n){return n&&n._delegate?n._delegate:n}class Fn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(N||(N={}));const hu={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},du=N.INFO,fu={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},mu=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=fu[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ya{constructor(e){this.name=e,this._logLevel=du,this._logHandler=mu,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in N))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hu[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...e),this._logHandler(this,N.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...e),this._logHandler(this,N.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,N.INFO,...e),this._logHandler(this,N.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,N.WARN,...e),this._logHandler(this,N.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,N.ERROR,...e),this._logHandler(this,N.ERROR,...e)}}const pu=(n,e)=>e.some(t=>n instanceof t);let Qo,Wo;function gu(){return Qo||(Qo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _u(){return Wo||(Wo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const va=new WeakMap,zr=new WeakMap,Ea=new WeakMap,Sr=new WeakMap,Is=new WeakMap;function yu(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",i)},o=()=>{t(Oe(n.result)),s()},i=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",i)});return e.then(t=>{t instanceof IDBCursor&&va.set(t,n)}).catch(()=>{}),Is.set(e,n),e}function vu(n){if(zr.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",i),n.removeEventListener("abort",i)},o=()=>{t(),s()},i=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",i),n.addEventListener("abort",i)});zr.set(n,e)}let Hr={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zr.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ea.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oe(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Eu(n){Hr=n(Hr)}function wu(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Cr(this),e,...t);return Ea.set(r,e.sort?e.sort():[e]),Oe(r)}:_u().includes(n)?function(...e){return n.apply(Cr(this),e),Oe(va.get(this))}:function(...e){return Oe(n.apply(Cr(this),e))}}function Tu(n){return typeof n=="function"?wu(n):(n instanceof IDBTransaction&&vu(n),pu(n,gu())?new Proxy(n,Hr):n)}function Oe(n){if(n instanceof IDBRequest)return yu(n);if(Sr.has(n))return Sr.get(n);const e=Tu(n);return e!==n&&(Sr.set(n,e),Is.set(e,n)),e}const Cr=n=>Is.get(n);function Au(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(n,e),a=Oe(i);return r&&i.addEventListener("upgradeneeded",l=>{r(Oe(i.result),l.oldVersion,l.newVersion,Oe(i.transaction),l)}),t&&i.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const xu=["get","getKey","getAll","getAllKeys","count"],Iu=["put","add","delete","clear"],br=new Map;function Yo(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(br.get(e))return br.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Iu.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xu.includes(t)))return;const o=async function(i,...a){const l=this.transaction(i,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),s&&l.done]))[0]};return br.set(e,o),o}Eu(n=>({...n,get:(e,t,r)=>Yo(e,t)||n.get(e,t,r),has:(e,t)=>!!Yo(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Su(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Su(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gr="@firebase/app",Xo="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye=new ya("@firebase/app"),Cu="@firebase/app-compat",bu="@firebase/analytics-compat",Pu="@firebase/analytics",Vu="@firebase/app-check-compat",Nu="@firebase/app-check",Du="@firebase/auth",ku="@firebase/auth-compat",Ou="@firebase/database",Mu="@firebase/database-compat",Lu="@firebase/functions",Fu="@firebase/functions-compat",Bu="@firebase/installations",$u="@firebase/installations-compat",qu="@firebase/messaging",Uu="@firebase/messaging-compat",ju="@firebase/performance",zu="@firebase/performance-compat",Hu="@firebase/remote-config",Gu="@firebase/remote-config-compat",Ku="@firebase/storage",Qu="@firebase/storage-compat",Wu="@firebase/firestore",Yu="@firebase/firestore-compat",Xu="firebase",Ju="10.7.2",Zu={[Gr]:"fire-core",[Cu]:"fire-core-compat",[Pu]:"fire-analytics",[bu]:"fire-analytics-compat",[Nu]:"fire-app-check",[Vu]:"fire-app-check-compat",[Du]:"fire-auth",[ku]:"fire-auth-compat",[Ou]:"fire-rtdb",[Mu]:"fire-rtdb-compat",[Lu]:"fire-fn",[Fu]:"fire-fn-compat",[Bu]:"fire-iid",[$u]:"fire-iid-compat",[qu]:"fire-fcm",[Uu]:"fire-fcm-compat",[ju]:"fire-perf",[zu]:"fire-perf-compat",[Hu]:"fire-rc",[Gu]:"fire-rc-compat",[Ku]:"fire-gcs",[Qu]:"fire-gcs-compat",[Wu]:"fire-fst",[Yu]:"fire-fst-compat","fire-js":"fire-js",[Xu]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Map,Jo=new Map;function th(n,e){try{n.container.addComponent(e)}catch(t){Ye.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bn(n){const e=n.name;if(Jo.has(e))return Ye.debug(`There were multiple attempts to register component ${e}.`),!1;Jo.set(e,n);for(const t of eh.values())th(t,n);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Rs=new _a("app","Firebase",nh);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=Ju;function Ft(n,e,t){var r;let s=(r=Zu[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const a=[`Unable to register library "${s}" with version "${e}":`];o&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ye.warn(a.join(" "));return}Bn(new Fn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="firebase-heartbeat-database",oh=1,Gt="firebase-heartbeat-store";let Pr=null;function wa(){return Pr||(Pr=Au(sh,oh,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gt)}catch(t){console.warn(t)}}}}).catch(n=>{throw Rs.create("idb-open",{originalErrorMessage:n.message})})),Pr}async function ih(n){try{return await(await wa()).transaction(Gt).objectStore(Gt).get(Ta(n))}catch(e){if(e instanceof Tt)Ye.warn(e.message);else{const t=Rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ye.warn(t.message)}}}async function Zo(n,e){try{const r=(await wa()).transaction(Gt,"readwrite");await r.objectStore(Gt).put(e,Ta(n)),await r.done}catch(t){if(t instanceof Tt)Ye.warn(t.message);else{const r=Rs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ye.warn(r.message)}}}function Ta(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=1024,lh=30*24*60*60*1e3;class ch{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ei();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=lh}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ei(),{heartbeatsToSend:r,unsentEntries:s}=uh(this._heartbeatsCache.heartbeats),o=pa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function ei(){return new Date().toISOString().substring(0,10)}function uh(n,e=ah){const t=[];let r=n.slice();for(const s of n){const o=t.find(i=>i.agent===s.agent);if(o){if(o.dates.push(s.date),ti(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ti(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class hh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ga()?au().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ih(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Zo(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Zo(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ti(n){return pa(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n){Bn(new Fn("platform-logger",e=>new Ru(e),"PRIVATE")),Bn(new Fn("heartbeat",e=>new ch(e),"PRIVATE")),Ft(Gr,Xo,n),Ft(Gr,Xo,"esm2017"),Ft("fire-js","")}dh("");var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E,Ss=Ss||{},I=fh||self;function Jn(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function an(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function mh(n){return Object.prototype.hasOwnProperty.call(n,Vr)&&n[Vr]||(n[Vr]=++ph)}var Vr="closure_uid_"+(1e9*Math.random()>>>0),ph=0;function gh(n,e,t){return n.call.apply(n.bind,arguments)}function _h(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function oe(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?oe=gh:oe=_h,oe.apply(null,arguments)}function wn(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function W(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,o){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return e.prototype[s].apply(r,i)}}function qe(){this.s=this.s,this.o=this.o}var yh=0;qe.prototype.s=!1;qe.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),yh!=0)&&mh(this)};qe.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Aa=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Cs(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ni(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Jn(r)){const s=n.length||0,o=r.length||0;n.length=s+o;for(let i=0;i<o;i++)n[s+i]=r[i]}else n.push(r)}}function ie(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var vh=function(){if(!I.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};I.addEventListener("test",t,e),I.removeEventListener("test",t,e)}catch{}return n}();function Kt(n){return/^[\s\xa0]*$/.test(n)}function Zn(){var n=I.navigator;return n&&(n=n.userAgent)?n:""}function Ee(n){return Zn().indexOf(n)!=-1}function bs(n){return bs[" "](n),n}bs[" "]=function(){};function Eh(n,e){var t=dd;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var wh=Ee("Opera"),pt=Ee("Trident")||Ee("MSIE"),xa=Ee("Edge"),Kr=xa||pt,Ia=Ee("Gecko")&&!(Zn().toLowerCase().indexOf("webkit")!=-1&&!Ee("Edge"))&&!(Ee("Trident")||Ee("MSIE"))&&!Ee("Edge"),Th=Zn().toLowerCase().indexOf("webkit")!=-1&&!Ee("Edge");function Ra(){var n=I.document;return n?n.documentMode:void 0}var Qr;e:{var Nr="",Dr=function(){var n=Zn();if(Ia)return/rv:([^\);]+)(\)|;)/.exec(n);if(xa)return/Edge\/([\d\.]+)/.exec(n);if(pt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(Th)return/WebKit\/(\S+)/.exec(n);if(wh)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(Dr&&(Nr=Dr?Dr[1]:""),pt){var kr=Ra();if(kr!=null&&kr>parseFloat(Nr)){Qr=String(kr);break e}}Qr=Nr}var Wr;if(I.document&&pt){var ri=Ra();Wr=ri||parseInt(Qr,10)||void 0}else Wr=void 0;var Ah=Wr;function Qt(n,e){if(ie.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ia){e:{try{bs(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:xh[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Qt.$.h.call(this)}}W(Qt,ie);var xh={2:"touch",3:"pen",4:"mouse"};Qt.prototype.h=function(){Qt.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ln="closure_listenable_"+(1e6*Math.random()|0),Ih=0;function Rh(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Ih,this.fa=this.ia=!1}function er(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ps(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Sh(n,e){for(const t in n)e.call(void 0,n[t],t,n)}function Sa(n){const e={};for(const t in n)e[t]=n[t];return e}const si="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ca(n,e){let t,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(t in r)n[t]=r[t];for(let o=0;o<si.length;o++)t=si[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function tr(n){this.src=n,this.g={},this.h=0}tr.prototype.add=function(n,e,t,r,s){var o=n.toString();n=this.g[o],n||(n=this.g[o]=[],this.h++);var i=Xr(n,e,r,s);return-1<i?(e=n[i],t||(e.ia=!1)):(e=new Rh(e,this.src,o,!!r,s),e.ia=t,n.push(e)),e};function Yr(n,e){var t=e.type;if(t in n.g){var r=n.g[t],s=Aa(r,e),o;(o=0<=s)&&Array.prototype.splice.call(r,s,1),o&&(er(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function Xr(n,e,t,r){for(var s=0;s<n.length;++s){var o=n[s];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return s}return-1}var Vs="closure_lm_"+(1e6*Math.random()|0),Or={};function ba(n,e,t,r,s){if(r&&r.once)return Va(n,e,t,r,s);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ba(n,e[o],t,r,s);return null}return t=ks(t),n&&n[ln]?n.O(e,t,an(r)?!!r.capture:!!r,s):Pa(n,e,t,!1,r,s)}function Pa(n,e,t,r,s,o){if(!e)throw Error("Invalid event type");var i=an(s)?!!s.capture:!!s,a=Ds(n);if(a||(n[Vs]=a=new tr(n)),t=a.add(e,t,r,i,o),t.proxy)return t;if(r=Ch(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)vh||(s=i),s===void 0&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Da(e.toString()),r);else if(n.addListener&&n.removeListener)n.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return t}function Ch(){function n(t){return e.call(n.src,n.listener,t)}const e=bh;return n}function Va(n,e,t,r,s){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Va(n,e[o],t,r,s);return null}return t=ks(t),n&&n[ln]?n.P(e,t,an(r)?!!r.capture:!!r,s):Pa(n,e,t,!0,r,s)}function Na(n,e,t,r,s){if(Array.isArray(e))for(var o=0;o<e.length;o++)Na(n,e[o],t,r,s);else r=an(r)?!!r.capture:!!r,t=ks(t),n&&n[ln]?(n=n.i,e=String(e).toString(),e in n.g&&(o=n.g[e],t=Xr(o,t,r,s),-1<t&&(er(o[t]),Array.prototype.splice.call(o,t,1),o.length==0&&(delete n.g[e],n.h--)))):n&&(n=Ds(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Xr(e,t,r,s)),(t=-1<n?e[n]:null)&&Ns(t))}function Ns(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[ln])Yr(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Da(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ds(e))?(Yr(t,n),t.h==0&&(t.src=null,e[Vs]=null)):er(n)}}}function Da(n){return n in Or?Or[n]:Or[n]="on"+n}function bh(n,e){if(n.fa)n=!0;else{e=new Qt(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Ns(n),n=t.call(r,e)}return n}function Ds(n){return n=n[Vs],n instanceof tr?n:null}var Mr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ks(n){return typeof n=="function"?n:(n[Mr]||(n[Mr]=function(e){return n.handleEvent(e)}),n[Mr])}function Q(){qe.call(this),this.i=new tr(this),this.S=this,this.J=null}W(Q,qe);Q.prototype[ln]=!0;Q.prototype.removeEventListener=function(n,e,t,r){Na(this,n,e,t,r)};function J(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,typeof e=="string")e=new ie(e,n);else if(e instanceof ie)e.target=e.target||n;else{var s=e;e=new ie(r,n),Ca(e,s)}if(s=!0,t)for(var o=t.length-1;0<=o;o--){var i=e.g=t[o];s=Tn(i,r,!0,e)&&s}if(i=e.g=n,s=Tn(i,r,!0,e)&&s,s=Tn(i,r,!1,e)&&s,t)for(o=0;o<t.length;o++)i=e.g=t[o],s=Tn(i,r,!1,e)&&s}Q.prototype.N=function(){if(Q.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)er(t[r]);delete n.g[e],n.h--}}this.J=null};Q.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)};Q.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};function Tn(n,e,t,r){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,o=0;o<e.length;++o){var i=e[o];if(i&&!i.fa&&i.capture==t){var a=i.listener,l=i.la||i.src;i.ia&&Yr(n.i,i),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Os=I.JSON.stringify;class Ph{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function Vh(){var n=Ms;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class Nh{constructor(){this.h=this.g=null}add(e,t){const r=ka.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var ka=new Ph(()=>new Dh,n=>n.reset());class Dh{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kh(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Oh(n){I.setTimeout(()=>{throw n},0)}let Wt,Yt=!1,Ms=new Nh,Oa=()=>{const n=I.Promise.resolve(void 0);Wt=()=>{n.then(Mh)}};var Mh=()=>{for(var n;n=Vh();){try{n.h.call(n.g)}catch(t){Oh(t)}var e=ka;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yt=!1};function nr(n,e){Q.call(this),this.h=n||1,this.g=e||I,this.j=oe(this.qb,this),this.l=Date.now()}W(nr,Q);E=nr.prototype;E.ga=!1;E.T=null;E.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),J(this,"tick"),this.ga&&(Ls(this),this.start()))}};E.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ls(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}E.N=function(){nr.$.N.call(this),Ls(this),delete this.g};function Fs(n,e,t){if(typeof n=="function")t&&(n=oe(n,t));else if(n&&typeof n.handleEvent=="function")n=oe(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:I.setTimeout(n,e||0)}function Ma(n){n.g=Fs(()=>{n.g=null,n.i&&(n.i=!1,Ma(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class Lh extends qe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ma(this)}N(){super.N(),this.g&&(I.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(n){qe.call(this),this.h=n,this.g={}}W(Xt,qe);var oi=[];function La(n,e,t,r){Array.isArray(t)||(t&&(oi[0]=t.toString()),t=oi);for(var s=0;s<t.length;s++){var o=ba(e,t[s],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Fa(n){Ps(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ns(e)},n),n.g={}}Xt.prototype.N=function(){Xt.$.N.call(this),Fa(this)};Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function rr(){this.g=!0}rr.prototype.Ea=function(){this.g=!1};function Fh(n,e,t,r,s,o){n.info(function(){if(n.g)if(o)for(var i="",a=o.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var h=u[0];u=u[1];var d=h.split("_");i=2<=d.length&&d[1]=="type"?i+(h+"="+u+"&"):i+(h+"=redacted&")}}else i=null;else i=o;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+t+`
`+i})}function Bh(n,e,t,r,s,o,i){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+t+`
`+o+" "+i})}function it(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+qh(n,t)+(r?" "+r:"")})}function $h(n,e){n.info(function(){return"TIMEOUT: "+e})}rr.prototype.info=function(){};function qh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var o=s[0];if(o!="noop"&&o!="stop"&&o!="close")for(var i=1;i<s.length;i++)s[i]=""}}}}return Os(t)}catch{return e}}var et={},ii=null;function sr(){return ii=ii||new Q}et.Ta="serverreachability";function Ba(n){ie.call(this,et.Ta,n)}W(Ba,ie);function Jt(n){const e=sr();J(e,new Ba(e))}et.STAT_EVENT="statevent";function $a(n,e){ie.call(this,et.STAT_EVENT,n),this.stat=e}W($a,ie);function ce(n){const e=sr();J(e,new $a(e,n))}et.Ua="timingevent";function qa(n,e){ie.call(this,et.Ua,n),this.size=e}W(qa,ie);function cn(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return I.setTimeout(function(){n()},e)}var or={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ua={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Bs(){}Bs.prototype.h=null;function ai(n){return n.h||(n.h=n.i())}function ja(){}var un={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $s(){ie.call(this,"d")}W($s,ie);function qs(){ie.call(this,"c")}W(qs,ie);var Jr;function ir(){}W(ir,Bs);ir.prototype.g=function(){return new XMLHttpRequest};ir.prototype.i=function(){return{}};Jr=new ir;function hn(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Xt(this),this.P=Uh,n=Kr?125:void 0,this.V=new nr(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new za}function za(){this.i=null,this.g="",this.h=!1}var Uh=45e3,Ha={},Zr={};E=hn.prototype;E.setTimeout=function(n){this.P=n};function es(n,e,t){n.L=1,n.A=lr(be(e)),n.u=t,n.S=!0,Ga(n,null)}function Ga(n,e){n.G=Date.now(),dn(n),n.B=be(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),el(t.i,"t",r),n.o=0,t=n.l.J,n.h=new za,n.g=wl(n.l,t?e:null,!n.u),0<n.O&&(n.M=new Lh(oe(n.Pa,n,n.g),n.O)),La(n.U,n.g,"readystatechange",n.nb),e=n.I?Sa(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Jt(),Fh(n.j,n.v,n.B,n.m,n.W,n.u)}E.nb=function(n){n=n.target;const e=this.M;e&&Te(n)==3?e.l():this.Pa(n)};E.Pa=function(n){try{if(n==this.g)e:{const h=Te(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||Kr||this.g&&(this.h.h||this.g.ja()||hi(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?Jt(3):Jt(2)),ar(this);var t=this.g.da();this.ca=t;t:if(Ka(this)){var r=hi(this.g);n="";var s=r.length,o=Te(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ze(this),Bt(this);var i="";break t}this.h.i=new I.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==s-1});r.length=0,this.h.g+=n,this.o=0,i=this.h.g}else i=this.g.ja();if(this.i=t==200,Bh(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kt(a)){var u=a;break t}}u=null}if(t=u)it(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ts(this,t);else{this.i=!1,this.s=3,ce(12),ze(this),Bt(this);break e}}this.S?(Qa(this,h,i),Kr&&this.i&&h==3&&(La(this.U,this.V,"tick",this.mb),this.V.start())):(it(this.j,this.m,i,null),ts(this,i)),h==4&&ze(this),this.i&&!this.J&&(h==4?_l(this.l,this):(this.i=!1,dn(this)))}else cd(this.g),t==400&&0<i.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),ze(this),Bt(this)}}}catch{}finally{}};function Ka(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function Qa(n,e,t){let r=!0,s;for(;!n.J&&n.o<t.length;)if(s=jh(n,t),s==Zr){e==4&&(n.s=4,ce(14),r=!1),it(n.j,n.m,null,"[Incomplete Response]");break}else if(s==Ha){n.s=4,ce(15),it(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}else it(n.j,n.m,s,null),ts(n,s);Ka(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,ce(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ks(e),e.M=!0,ce(11))):(it(n.j,n.m,t,"[Invalid Chunked Response]"),ze(n),Bt(n))}E.mb=function(){if(this.g){var n=Te(this.g),e=this.g.ja();this.o<e.length&&(ar(this),Qa(this,n,e),this.i&&n!=4&&dn(this))}};function jh(n,e){var t=n.o,r=e.indexOf(`
`,t);return r==-1?Zr:(t=Number(e.substring(t,r)),isNaN(t)?Ha:(r+=1,r+t>e.length?Zr:(e=e.slice(r,r+t),n.o=r+t,e)))}E.cancel=function(){this.J=!0,ze(this)};function dn(n){n.Y=Date.now()+n.P,Wa(n,n.P)}function Wa(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=cn(oe(n.lb,n),e)}function ar(n){n.C&&(I.clearTimeout(n.C),n.C=null)}E.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?($h(this.j,this.B),this.L!=2&&(Jt(),ce(17)),ze(this),this.s=2,Bt(this)):Wa(this,this.Y-n)};function Bt(n){n.l.H==0||n.J||_l(n.l,n)}function ze(n){ar(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,Ls(n.V),Fa(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function ts(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||ns(t.i,n))){if(!n.K&&ns(t.i,n)&&t.H==3){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)Un(t),dr(t);else break e;Gs(t),ce(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&t.A==0&&!t.v&&(t.v=cn(oe(t.ib,t),6e3));if(1>=rl(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else He(t,11)}else if((n.K||t.g==n)&&Un(t),!Kt(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(t.V=u[0],u=u[1],t.H==2)if(u[0]=="c"){t.K=u[1],t.pa=u[2];const h=u[3];h!=null&&(t.ra=h,t.l.info("VER="+t.ra));const d=u[4];d!=null&&(t.Ga=d,t.l.info("SVER="+t.Ga));const m=u[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,t.L=r,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const y=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var o=r.i;o.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Us(o,o.h),o.h=null))}if(r.F){const v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,L(r.I,r.F,v))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),r=t;var i=n;if(r.wa=El(r,r.J?r.pa:null,r.Y),i.K){sl(r.i,i);var a=i,l=r.L;l&&a.setTimeout(l),a.C&&(ar(a),dn(a)),r.g=i}else pl(r);0<t.j.length&&fr(t)}else u[0]!="stop"&&u[0]!="close"||He(t,7);else t.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?He(t,7):Hs(t):u[0]!="noop"&&t.h&&t.h.Aa(u),t.A=0)}}Jt(4)}catch{}}function zh(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(Jn(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}e=[],t=0;for(r in n)e[t++]=n[r];return e}function Hh(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Jn(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}function Ya(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(Jn(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=Hh(n),r=zh(n),s=r.length,o=0;o<s;o++)e.call(void 0,r[o],t&&t[o],n)}var Xa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gh(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var o=n[t].substring(0,r);s=n[t].substring(r+1)}else o=n[t];e(o,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Qe(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Qe){this.h=n.h,$n(this,n.j),this.s=n.s,this.g=n.g,qn(this,n.m),this.l=n.l;var e=n.i,t=new Zt;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),li(this,t),this.o=n.o}else n&&(e=String(n).match(Xa))?(this.h=!1,$n(this,e[1]||"",!0),this.s=kt(e[2]||""),this.g=kt(e[3]||"",!0),qn(this,e[4]),this.l=kt(e[5]||"",!0),li(this,e[6]||"",!0),this.o=kt(e[7]||"")):(this.h=!1,this.i=new Zt(null,this.h))}Qe.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ot(e,ci,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Ot(e,ci,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Ot(t,t.charAt(0)=="/"?Wh:Qh,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ot(t,Xh)),n.join("")};function be(n){return new Qe(n)}function $n(n,e,t){n.j=t?kt(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function qn(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function li(n,e,t){e instanceof Zt?(n.i=e,Jh(n.i,n.h)):(t||(e=Ot(e,Yh)),n.i=new Zt(e,n.h))}function L(n,e,t){n.i.set(e,t)}function lr(n){return L(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function kt(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ot(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,Kh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Kh(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var ci=/[#\/\?@]/g,Qh=/[#\?:]/g,Wh=/[#\?]/g,Yh=/[#\?@]/g,Xh=/#/g;function Zt(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ue(n){n.g||(n.g=new Map,n.h=0,n.i&&Gh(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}E=Zt.prototype;E.add=function(n,e){Ue(this),this.i=null,n=At(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function Ja(n,e){Ue(n),e=At(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Za(n,e){return Ue(n),e=At(n,e),n.g.has(e)}E.forEach=function(n,e){Ue(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)};E.ta=function(){Ue(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let o=0;o<s.length;o++)t.push(e[r])}return t};E.Z=function(n){Ue(this);let e=[];if(typeof n=="string")Za(this,n)&&(e=e.concat(this.g.get(At(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};E.set=function(n,e){return Ue(this),this.i=null,n=At(this,n),Za(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};E.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function el(n,e,t){Ja(n,e),0<t.length&&(n.i=null,n.g.set(At(n,e),Cs(t)),n.h+=t.length)}E.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),i=this.Z(r);for(r=0;r<i.length;r++){var s=o;i[r]!==""&&(s+="="+encodeURIComponent(String(i[r]))),n.push(s)}}return this.i=n.join("&")};function At(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Jh(n,e){e&&!n.j&&(Ue(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Ja(this,r),el(this,s,t))},n)),n.j=e}var Zh=class{constructor(n,e){this.g=n,this.map=e}};function tl(n){this.l=n||ed,I.PerformanceNavigationTiming?(n=I.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(I.g&&I.g.Ka&&I.g.Ka()&&I.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ed=10;function nl(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function rl(n){return n.h?1:n.g?n.g.size:0}function ns(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function Us(n,e){n.g?n.g.add(e):n.h=e}function sl(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}tl.prototype.cancel=function(){if(this.i=ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function ol(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Cs(n.i)}var td=class{stringify(n){return I.JSON.stringify(n,void 0)}parse(n){return I.JSON.parse(n,void 0)}};function nd(){this.g=new td}function rd(n,e,t){const r=t||"";try{Ya(n,function(s,o){let i=s;an(s)&&(i=Os(s)),e.push(r+o+"="+encodeURIComponent(i))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function sd(n,e){const t=new rr;if(I.Image){const r=new Image;r.onload=wn(An,t,r,"TestLoadImage: loaded",!0,e),r.onerror=wn(An,t,r,"TestLoadImage: error",!1,e),r.onabort=wn(An,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=wn(An,t,r,"TestLoadImage: timeout",!1,e),I.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}function An(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function cr(n){this.l=n.ec||null,this.j=n.ob||!1}W(cr,Bs);cr.prototype.g=function(){return new ur(this.l,this.j)};cr.prototype.i=function(n){return function(){return n}}({});function ur(n,e){Q.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=js,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}W(ur,Q);var js=0;E=ur.prototype;E.open=function(n,e){if(this.readyState!=js)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,en(this)};E.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||I).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};E.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fn(this)),this.readyState=js};E.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,en(this)),this.g&&(this.readyState=3,en(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof I.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;il(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function il(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}E.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?fn(this):en(this),this.readyState==3&&il(this)}};E.Za=function(n){this.g&&(this.response=this.responseText=n,fn(this))};E.Ya=function(n){this.g&&(this.response=n,fn(this))};E.ka=function(){this.g&&fn(this)};function fn(n){n.readyState=4,n.l=null,n.j=null,n.A=null,en(n)}E.setRequestHeader=function(n,e){this.v.append(n,e)};E.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};E.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function en(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var od=I.JSON.parse;function B(n){Q.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=al,this.L=this.M=!1}W(B,Q);var al="",id=/^https?$/i,ad=["POST","PUT"];E=B.prototype;E.Oa=function(n){this.M=n};E.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Jr.g(),this.C=this.u?ai(this.u):ai(Jr),this.g.onreadystatechange=oe(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){ui(this,o);return}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const o of r.keys())t.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(t.keys()).find(o=>o.toLowerCase()=="content-type"),s=I.FormData&&n instanceof I.FormData,!(0<=Aa(ad,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,i]of t)this.g.setRequestHeader(o,i);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ul(this),0<this.B&&((this.L=ld(this.g))?(this.g.timeout=this.B,this.g.ontimeout=oe(this.ua,this)):this.A=Fs(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){ui(this,o)}};function ld(n){return pt&&typeof n.timeout=="number"&&n.ontimeout!==void 0}E.ua=function(){typeof Ss<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,J(this,"timeout"),this.abort(8))};function ui(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ll(n),hr(n)}function ll(n){n.F||(n.F=!0,J(n,"complete"),J(n,"error"))}E.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,J(this,"complete"),J(this,"abort"),hr(this))};E.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hr(this,!0)),B.$.N.call(this)};E.La=function(){this.s||(this.G||this.v||this.l?cl(this):this.kb())};E.kb=function(){cl(this)};function cl(n){if(n.h&&typeof Ss<"u"&&(!n.C[1]||Te(n)!=4||n.da()!=2)){if(n.v&&Te(n)==4)Fs(n.La,0,n);else if(J(n,"readystatechange"),Te(n)==4){n.h=!1;try{const i=n.da();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=i===0){var s=String(n.I).match(Xa)[1]||null;!s&&I.self&&I.self.location&&(s=I.self.location.protocol.slice(0,-1)),r=!id.test(s?s.toLowerCase():"")}t=r}if(t)J(n,"complete"),J(n,"success");else{n.m=6;try{var o=2<Te(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",ll(n)}}finally{hr(n)}}}}function hr(n,e){if(n.g){ul(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||J(n,"ready");try{t.onreadystatechange=r}catch{}}}function ul(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(I.clearTimeout(n.A),n.A=null)}E.isActive=function(){return!!this.g};function Te(n){return n.g?n.g.readyState:0}E.da=function(){try{return 2<Te(this)?this.g.status:-1}catch{return-1}};E.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};E.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),od(e)}};function hi(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case al:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function cd(n){const e={};n=(n.g&&2<=Te(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<n.length;r++){if(Kt(n[r]))continue;var t=kh(n[r]);const s=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();const o=e[s]||[];e[s]=o,o.push(t)}Sh(e,function(r){return r.join(", ")})}E.Ia=function(){return this.m};E.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function hl(n){let e="";return Ps(n,function(t,r){e+=r,e+=":",e+=t,e+=`\r
`}),e}function zs(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=hl(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):L(n,e,t))}function Vt(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function dl(n){this.Ga=0,this.j=[],this.l=new rr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vt("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vt("baseRetryDelayMs",5e3,n),this.hb=Vt("retryDelaySeedMs",1e4,n),this.eb=Vt("forwardChannelMaxRetries",2,n),this.xa=Vt("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new tl(n&&n.concurrentRequestLimit),this.Ja=new nd,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}E=dl.prototype;E.ra=8;E.H=1;function Hs(n){if(fl(n),n.H==3){var e=n.W++,t=be(n.I);if(L(t,"SID",n.K),L(t,"RID",e),L(t,"TYPE","terminate"),mn(n,t),e=new hn(n,n.l,e),e.L=2,e.A=lr(be(t)),t=!1,I.navigator&&I.navigator.sendBeacon)try{t=I.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&I.Image&&(new Image().src=e.A,t=!0),t||(e.g=wl(e.l,null),e.g.ha(e.A)),e.G=Date.now(),dn(e)}vl(n)}function dr(n){n.g&&(Ks(n),n.g.cancel(),n.g=null)}function fl(n){dr(n),n.u&&(I.clearTimeout(n.u),n.u=null),Un(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&I.clearTimeout(n.m),n.m=null)}function fr(n){if(!nl(n.i)&&!n.m){n.m=!0;var e=n.Na;Wt||Oa(),Yt||(Wt(),Yt=!0),Ms.add(e,n),n.C=0}}function ud(n,e){return rl(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=cn(oe(n.Na,n,e),yl(n,n.C)),n.C++,!0)}E.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new hn(this,this.l,n);let o=this.s;if(this.U&&(o?(o=Sa(o),Ca(o,this.U)):o=this.U),this.o!==null||this.O||(s.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var r=this.j[t];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ml(this,s,e),t=be(this.I),L(t,"RID",n),L(t,"CVER",22),this.F&&L(t,"X-HTTP-Session-Id",this.F),mn(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(hl(o)))+"&"+e:this.o&&zs(t,this.o,o)),Us(this.i,s),this.bb&&L(t,"TYPE","init"),this.P?(L(t,"$req",e),L(t,"SID","null"),s.aa=!0,es(s,t,null)):es(s,t,e),this.H=2}}else this.H==3&&(n?di(this,n):this.j.length==0||nl(this.i)||di(this))};function di(n,e){var t;e?t=e.m:t=n.W++;const r=be(n.I);L(r,"SID",n.K),L(r,"RID",t),L(r,"AID",n.V),mn(n,r),n.o&&n.s&&zs(r,n.o,n.s),t=new hn(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=ml(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Us(n.i,t),es(t,r,e)}function mn(n,e){n.na&&Ps(n.na,function(t,r){L(e,r,t)}),n.h&&Ya({},function(t,r){L(e,r,t)})}function ml(n,e,t){t=Math.min(n.j.length,t);var r=n.h?oe(n.h.Va,n.h,n):null;e:{var s=n.j;let o=-1;for(;;){const i=["count="+t];o==-1?0<t?(o=s[0].g,i.push("ofs="+o)):o=0:i.push("ofs="+o);let a=!0;for(let l=0;l<t;l++){let u=s[l].g;const h=s[l].map;if(u-=o,0>u)o=Math.max(0,s[l].g-100),a=!1;else try{rd(h,i,"req"+u+"_")}catch{r&&r(h)}}if(a){r=i.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function pl(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Wt||Oa(),Yt||(Wt(),Yt=!0),Ms.add(e,n),n.A=0}}function Gs(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=cn(oe(n.Ma,n),yl(n,n.A)),n.A++,!0)}E.Ma=function(){if(this.u=null,gl(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=cn(oe(this.jb,this),n)}};E.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ce(10),dr(this),gl(this))};function Ks(n){n.B!=null&&(I.clearTimeout(n.B),n.B=null)}function gl(n){n.g=new hn(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=be(n.wa);L(e,"RID","rpc"),L(e,"SID",n.K),L(e,"AID",n.V),L(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&L(e,"TO",n.qa),L(e,"TYPE","xmlhttp"),mn(n,e),n.o&&n.s&&zs(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=lr(be(e)),t.u=null,t.S=!0,Ga(t,n)}E.ib=function(){this.v!=null&&(this.v=null,dr(this),Gs(this),ce(19))};function Un(n){n.v!=null&&(I.clearTimeout(n.v),n.v=null)}function _l(n,e){var t=null;if(n.g==e){Un(n),Ks(n),n.g=null;var r=2}else if(ns(n.i,e))t=e.F,sl(n.i,e),r=1;else return;if(n.H!=0){if(e.i)if(r==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var s=n.C;r=sr(),J(r,new qa(r,t)),fr(n)}else pl(n);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&ud(n,e)||r==2&&Gs(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:He(n,5);break;case 4:He(n,10);break;case 3:He(n,6);break;default:He(n,2)}}}function yl(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function He(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var r=oe(n.pb,n);t||(t=new Qe("//www.google.com/images/cleardot.gif"),I.location&&I.location.protocol=="http"||$n(t,"https"),lr(t)),sd(t.toString(),r)}else ce(2);n.H=0,n.h&&n.h.za(e),vl(n),fl(n)}E.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ce(2)):(this.l.info("Failed to ping google.com"),ce(1))};function vl(n){if(n.H=0,n.ma=[],n.h){const e=ol(n.i);(e.length!=0||n.j.length!=0)&&(ni(n.ma,e),ni(n.ma,n.j),n.i.i.length=0,Cs(n.j),n.j.length=0),n.h.ya()}}function El(n,e,t){var r=t instanceof Qe?be(t):new Qe(t);if(r.g!="")e&&(r.g=e+"."+r.g),qn(r,r.m);else{var s=I.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new Qe(null);r&&$n(o,r),e&&(o.g=e),s&&qn(o,s),t&&(o.l=t),r=o}return t=n.F,e=n.Da,t&&e&&L(r,t,e),L(r,"VER",n.ra),mn(n,r),r}function wl(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new B(new cr({ob:t})):new B(n.va),e.Oa(n.J),e}E.isActive=function(){return!!this.h&&this.h.isActive(this)};function Tl(){}E=Tl.prototype;E.Ba=function(){};E.Aa=function(){};E.za=function(){};E.ya=function(){};E.isActive=function(){return!0};E.Va=function(){};function jn(){if(pt&&!(10<=Number(Ah)))throw Error("Environmental error: no available transport.")}jn.prototype.g=function(n,e){return new fe(n,e)};function fe(n,e){Q.call(this),this.g=new dl(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Kt(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kt(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new xt(this)}W(fe,Q);fe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ce(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=El(n,null,n.Y),fr(n)};fe.prototype.close=function(){Hs(this.g)};fe.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=Os(n),n=t);e.j.push(new Zh(e.fb++,n)),e.H==3&&fr(e)};fe.prototype.N=function(){this.g.h=null,delete this.j,Hs(this.g),delete this.g,fe.$.N.call(this)};function Al(n){$s.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}W(Al,$s);function xl(){qs.call(this),this.status=1}W(xl,qs);function xt(n){this.g=n}W(xt,Tl);xt.prototype.Ba=function(){J(this.g,"a")};xt.prototype.Aa=function(n){J(this.g,new Al(n))};xt.prototype.za=function(n){J(this.g,new xl)};xt.prototype.ya=function(){J(this.g,"b")};function hd(){this.blockSize=-1}function _e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}W(_e,hd);_e.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Lr(n,e,t){t||(t=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],s=n.g[2];var o=n.g[3],i=e+(o^t&(s^o))+r[0]+3614090360&4294967295;e=t+(i<<7&4294967295|i>>>25),i=o+(s^e&(t^s))+r[1]+3905402710&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(t^o&(e^t))+r[2]+606105819&4294967295,s=o+(i<<17&4294967295|i>>>15),i=t+(e^s&(o^e))+r[3]+3250441966&4294967295,t=s+(i<<22&4294967295|i>>>10),i=e+(o^t&(s^o))+r[4]+4118548399&4294967295,e=t+(i<<7&4294967295|i>>>25),i=o+(s^e&(t^s))+r[5]+1200080426&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(t^o&(e^t))+r[6]+2821735955&4294967295,s=o+(i<<17&4294967295|i>>>15),i=t+(e^s&(o^e))+r[7]+4249261313&4294967295,t=s+(i<<22&4294967295|i>>>10),i=e+(o^t&(s^o))+r[8]+1770035416&4294967295,e=t+(i<<7&4294967295|i>>>25),i=o+(s^e&(t^s))+r[9]+2336552879&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(t^o&(e^t))+r[10]+4294925233&4294967295,s=o+(i<<17&4294967295|i>>>15),i=t+(e^s&(o^e))+r[11]+2304563134&4294967295,t=s+(i<<22&4294967295|i>>>10),i=e+(o^t&(s^o))+r[12]+1804603682&4294967295,e=t+(i<<7&4294967295|i>>>25),i=o+(s^e&(t^s))+r[13]+4254626195&4294967295,o=e+(i<<12&4294967295|i>>>20),i=s+(t^o&(e^t))+r[14]+2792965006&4294967295,s=o+(i<<17&4294967295|i>>>15),i=t+(e^s&(o^e))+r[15]+1236535329&4294967295,t=s+(i<<22&4294967295|i>>>10),i=e+(s^o&(t^s))+r[1]+4129170786&4294967295,e=t+(i<<5&4294967295|i>>>27),i=o+(t^s&(e^t))+r[6]+3225465664&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^t&(o^e))+r[11]+643717713&4294967295,s=o+(i<<14&4294967295|i>>>18),i=t+(o^e&(s^o))+r[0]+3921069994&4294967295,t=s+(i<<20&4294967295|i>>>12),i=e+(s^o&(t^s))+r[5]+3593408605&4294967295,e=t+(i<<5&4294967295|i>>>27),i=o+(t^s&(e^t))+r[10]+38016083&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^t&(o^e))+r[15]+3634488961&4294967295,s=o+(i<<14&4294967295|i>>>18),i=t+(o^e&(s^o))+r[4]+3889429448&4294967295,t=s+(i<<20&4294967295|i>>>12),i=e+(s^o&(t^s))+r[9]+568446438&4294967295,e=t+(i<<5&4294967295|i>>>27),i=o+(t^s&(e^t))+r[14]+3275163606&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^t&(o^e))+r[3]+4107603335&4294967295,s=o+(i<<14&4294967295|i>>>18),i=t+(o^e&(s^o))+r[8]+1163531501&4294967295,t=s+(i<<20&4294967295|i>>>12),i=e+(s^o&(t^s))+r[13]+2850285829&4294967295,e=t+(i<<5&4294967295|i>>>27),i=o+(t^s&(e^t))+r[2]+4243563512&4294967295,o=e+(i<<9&4294967295|i>>>23),i=s+(e^t&(o^e))+r[7]+1735328473&4294967295,s=o+(i<<14&4294967295|i>>>18),i=t+(o^e&(s^o))+r[12]+2368359562&4294967295,t=s+(i<<20&4294967295|i>>>12),i=e+(t^s^o)+r[5]+4294588738&4294967295,e=t+(i<<4&4294967295|i>>>28),i=o+(e^t^s)+r[8]+2272392833&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^t)+r[11]+1839030562&4294967295,s=o+(i<<16&4294967295|i>>>16),i=t+(s^o^e)+r[14]+4259657740&4294967295,t=s+(i<<23&4294967295|i>>>9),i=e+(t^s^o)+r[1]+2763975236&4294967295,e=t+(i<<4&4294967295|i>>>28),i=o+(e^t^s)+r[4]+1272893353&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^t)+r[7]+4139469664&4294967295,s=o+(i<<16&4294967295|i>>>16),i=t+(s^o^e)+r[10]+3200236656&4294967295,t=s+(i<<23&4294967295|i>>>9),i=e+(t^s^o)+r[13]+681279174&4294967295,e=t+(i<<4&4294967295|i>>>28),i=o+(e^t^s)+r[0]+3936430074&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^t)+r[3]+3572445317&4294967295,s=o+(i<<16&4294967295|i>>>16),i=t+(s^o^e)+r[6]+76029189&4294967295,t=s+(i<<23&4294967295|i>>>9),i=e+(t^s^o)+r[9]+3654602809&4294967295,e=t+(i<<4&4294967295|i>>>28),i=o+(e^t^s)+r[12]+3873151461&4294967295,o=e+(i<<11&4294967295|i>>>21),i=s+(o^e^t)+r[15]+530742520&4294967295,s=o+(i<<16&4294967295|i>>>16),i=t+(s^o^e)+r[2]+3299628645&4294967295,t=s+(i<<23&4294967295|i>>>9),i=e+(s^(t|~o))+r[0]+4096336452&4294967295,e=t+(i<<6&4294967295|i>>>26),i=o+(t^(e|~s))+r[7]+1126891415&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~t))+r[14]+2878612391&4294967295,s=o+(i<<15&4294967295|i>>>17),i=t+(o^(s|~e))+r[5]+4237533241&4294967295,t=s+(i<<21&4294967295|i>>>11),i=e+(s^(t|~o))+r[12]+1700485571&4294967295,e=t+(i<<6&4294967295|i>>>26),i=o+(t^(e|~s))+r[3]+2399980690&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~t))+r[10]+4293915773&4294967295,s=o+(i<<15&4294967295|i>>>17),i=t+(o^(s|~e))+r[1]+2240044497&4294967295,t=s+(i<<21&4294967295|i>>>11),i=e+(s^(t|~o))+r[8]+1873313359&4294967295,e=t+(i<<6&4294967295|i>>>26),i=o+(t^(e|~s))+r[15]+4264355552&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~t))+r[6]+2734768916&4294967295,s=o+(i<<15&4294967295|i>>>17),i=t+(o^(s|~e))+r[13]+1309151649&4294967295,t=s+(i<<21&4294967295|i>>>11),i=e+(s^(t|~o))+r[4]+4149444226&4294967295,e=t+(i<<6&4294967295|i>>>26),i=o+(t^(e|~s))+r[11]+3174756917&4294967295,o=e+(i<<10&4294967295|i>>>22),i=s+(e^(o|~t))+r[2]+718787259&4294967295,s=o+(i<<15&4294967295|i>>>17),i=t+(o^(s|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+o&4294967295}_e.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,o=0;o<e;){if(s==0)for(;o<=t;)Lr(this,n,o),o+=this.blockSize;if(typeof n=="string"){for(;o<e;)if(r[s++]=n.charCodeAt(o++),s==this.blockSize){Lr(this,r),s=0;break}}else for(;o<e;)if(r[s++]=n[o++],s==this.blockSize){Lr(this,r),s=0;break}}this.h=s,this.i+=e};_e.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};function M(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var o=n[s]|0;r&&o==e||(t[s]=o,r=!1)}this.g=t}var dd={};function Qs(n){return-128<=n&&128>n?Eh(n,function(e){return new M([e|0],0>e?-1:0)}):new M([n|0],0>n?-1:0)}function Ae(n){if(isNaN(n)||!isFinite(n))return at;if(0>n)return X(Ae(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=rs;return new M(e,0)}function Il(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return X(Il(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ae(Math.pow(e,8)),r=at,s=0;s<n.length;s+=8){var o=Math.min(8,n.length-s),i=parseInt(n.substring(s,s+o),e);8>o?(o=Ae(Math.pow(e,o)),r=r.R(o).add(Ae(i))):(r=r.R(t),r=r.add(Ae(i)))}return r}var rs=4294967296,at=Qs(0),ss=Qs(1),fi=Qs(16777216);E=M.prototype;E.ea=function(){if(ge(this))return-X(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:rs+r)*e,e*=rs}return n};E.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(Se(this))return"0";if(ge(this))return"-"+X(this).toString(n);for(var e=Ae(Math.pow(n,6)),t=this,r="";;){var s=Hn(t,e).g;t=zn(t,s.R(e));var o=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=s,Se(t))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};E.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function Se(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function ge(n){return n.h==-1}E.X=function(n){return n=zn(this,n),ge(n)?-1:Se(n)?0:1};function X(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new M(t,~n.h).add(ss)}E.abs=function(){return ge(this)?X(this):this};E.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var o=r+(this.D(s)&65535)+(n.D(s)&65535),i=(o>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=i>>>16,o&=65535,i&=65535,t[s]=i<<16|o}return new M(t,t[t.length-1]&-2147483648?-1:0)};function zn(n,e){return n.add(X(e))}E.R=function(n){if(Se(this)||Se(n))return at;if(ge(this))return ge(n)?X(this).R(X(n)):X(X(this).R(n));if(ge(n))return X(this.R(X(n)));if(0>this.X(fi)&&0>n.X(fi))return Ae(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var o=this.D(r)>>>16,i=this.D(r)&65535,a=n.D(s)>>>16,l=n.D(s)&65535;t[2*r+2*s]+=i*l,xn(t,2*r+2*s),t[2*r+2*s+1]+=o*l,xn(t,2*r+2*s+1),t[2*r+2*s+1]+=i*a,xn(t,2*r+2*s+1),t[2*r+2*s+2]+=o*a,xn(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new M(t,0)};function xn(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Nt(n,e){this.g=n,this.h=e}function Hn(n,e){if(Se(e))throw Error("division by zero");if(Se(n))return new Nt(at,at);if(ge(n))return e=Hn(X(n),e),new Nt(X(e.g),X(e.h));if(ge(e))return e=Hn(n,X(e)),new Nt(X(e.g),e.h);if(30<n.g.length){if(ge(n)||ge(e))throw Error("slowDivide_ only works with positive integers.");for(var t=ss,r=e;0>=r.X(n);)t=mi(t),r=mi(r);var s=tt(t,1),o=tt(r,1);for(r=tt(r,2),t=tt(t,2);!Se(r);){var i=o.add(r);0>=i.X(n)&&(s=s.add(t),o=i),r=tt(r,1),t=tt(t,1)}return e=zn(n,s.R(e)),new Nt(s,e)}for(s=at;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=Math.ceil(Math.log(t)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Ae(t),i=o.R(e);ge(i)||0<i.X(n);)t-=r,o=Ae(t),i=o.R(e);Se(o)&&(o=ss),s=s.add(o),n=zn(n,i)}return new Nt(s,n)}E.gb=function(n){return Hn(this,n).h};E.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new M(t,this.h&n.h)};E.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new M(t,this.h|n.h)};E.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new M(t,this.h^n.h)};function mi(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new M(t,n.h)}function tt(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],o=0;o<r;o++)s[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new M(s,n.h)}jn.prototype.createWebChannel=jn.prototype.g;fe.prototype.send=fe.prototype.u;fe.prototype.open=fe.prototype.m;fe.prototype.close=fe.prototype.close;or.NO_ERROR=0;or.TIMEOUT=8;or.HTTP_ERROR=6;Ua.COMPLETE="complete";ja.EventType=un;un.OPEN="a";un.CLOSE="b";un.ERROR="c";un.MESSAGE="d";Q.prototype.listen=Q.prototype.O;B.prototype.listenOnce=B.prototype.P;B.prototype.getLastError=B.prototype.Sa;B.prototype.getLastErrorCode=B.prototype.Ia;B.prototype.getStatus=B.prototype.da;B.prototype.getResponseJson=B.prototype.Wa;B.prototype.getResponseText=B.prototype.ja;B.prototype.send=B.prototype.ha;B.prototype.setWithCredentials=B.prototype.Oa;_e.prototype.digest=_e.prototype.l;_e.prototype.reset=_e.prototype.reset;_e.prototype.update=_e.prototype.j;M.prototype.add=M.prototype.add;M.prototype.multiply=M.prototype.R;M.prototype.modulo=M.prototype.gb;M.prototype.compare=M.prototype.X;M.prototype.toNumber=M.prototype.ea;M.prototype.toString=M.prototype.toString;M.prototype.getBits=M.prototype.D;M.fromNumber=Ae;M.fromString=Il;var fd=function(){return new jn},md=function(){return sr()},Fr=or,pd=Ua,gd=et,pi={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},In=ja,_d=B,yd=_e,lt=M;const gi="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}he.UNAUTHENTICATED=new he(null),he.GOOGLE_CREDENTIALS=new he("google-credentials-uid"),he.FIRST_PARTY=new he("first-party-uid"),he.MOCK_USER=new he("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let It="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe=new ya("@firebase/firestore");function Dt(){return Xe.logLevel}function w(n,...e){if(Xe.logLevel<=N.DEBUG){const t=e.map(Ws);Xe.debug(`Firestore (${It}): ${n}`,...t)}}function Ie(n,...e){if(Xe.logLevel<=N.ERROR){const t=e.map(Ws);Xe.error(`Firestore (${It}): ${n}`,...t)}}function tn(n,...e){if(Xe.logLevel<=N.WARN){const t=e.map(Ws);Xe.warn(`Firestore (${It}): ${n}`,...t)}}function Ws(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(n="Unexpected state"){const e=`FIRESTORE (${It}) INTERNAL ASSERTION FAILED: `+n;throw Ie(e),new Error(e)}function z(n,e){n||b()}function k(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends Tt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ed{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(he.UNAUTHENTICATED))}shutdown(){}}class wd{constructor(e){this.t=e,this.currentUser=he.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let o=new Me;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Me,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Me)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z(typeof r.accessToken=="string"),new vd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new he(e)}}class Td{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=he.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ad{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Td(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(he.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Id{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{o.error!=null&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const i=o.token!==this.R;return this.R=o.token,w("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(z(typeof t.token=="string"),this.R=t.token,new xd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Rd(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%e.length))}return r}}function O(n,e){return n<e?-1:n>e?1:0}function gt(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return K.fromMillis(Date.now())}static fromDate(e){return K.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new K(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?O(this.nanoseconds,e.nanoseconds):O(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C{constructor(e){this.timestamp=e}static fromTimestamp(e){return new C(e)}static min(){return new C(new K(0,0))}static max(){return new C(new K(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,r){t===void 0?t=0:t>e.length&&b(),r===void 0?r=e.length-t:r>e.length-t&&b(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return nn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nn?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=e.get(s),i=t.get(s);if(o<i)return-1;if(o>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class F extends nn{construct(e,t,r){return new F(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new F(t)}static emptyPath(){return new F([])}}const Cd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends nn{construct(e,t,r){return new se(e,t,r)}static isValidIdentifier(e){return Cd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new se(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new T(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let i=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new T(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new T(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(i=!i,s++):a!=="."||i?(r+=a,s++):(o(),s++)}if(o(),i)throw new T(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new se(t)}static emptyPath(){return new se([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e){this.path=e}static fromPath(e){return new A(F.fromString(e))}static fromName(e){return new A(F.fromString(e).popFirst(5))}static empty(){return new A(F.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&F.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return F.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new F(e.slice()))}}function bd(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=C.fromTimestamp(r===1e9?new K(t+1,0):new K(t,r));return new Le(s,A.empty(),e)}function Pd(n){return new Le(n.readTime,n.key,-1)}class Le{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Le(C.min(),A.empty(),-1)}static max(){return new Le(C.max(),A.empty(),-1)}}function Vd(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=A.comparator(n.documentKey,e.documentKey),t!==0?t:O(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(n){if(n.code!==_.FAILED_PRECONDITION||n.message!==Nd)throw n;w("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&b(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new g((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof g?t:g.resolve(t)}catch(t){return g.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):g.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):g.reject(t)}static resolve(e){return new g((t,r)=>{t(e)})}static reject(e){return new g((t,r)=>{r(e)})}static waitFor(e){return new g((t,r)=>{let s=0,o=0,i=!1;e.forEach(a=>{++s,a.next(()=>{++o,i&&o===s&&t()},l=>r(l))}),i=!0,o===s&&t()})}static or(e){let t=g.resolve(!1);for(const r of e)t=t.next(s=>s?g.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new g((r,s)=>{const o=e.length,i=new Array(o);let a=0;for(let l=0;l<o;l++){const u=l;t(e[u]).next(h=>{i[u]=h,++a,a===o&&r(i)},h=>s(h))}})}static doWhile(e,t){return new g((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Me,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new $t(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Js(r.target.error);this.V.reject(new $t(e,s))}}static open(e,t,r,s){try{return new Xs(t,e.transaction(s,r))}catch(o){throw new $t(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(w("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Od(t)}}class Ge{constructor(e,t,r){this.name=e,this.version=t,this.p=r,Ge.S(Mn())===12.2&&Ie("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return w("SimpleDb","Removing database:",e),je(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ga())return!1;if(Ge.C())return!0;const e=Mn(),t=Ge.S(e),r=0<t&&t<10,s=Ge.v(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(w("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const i=o.target.result;t(i)},s.onblocked=()=>{r(new $t(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const i=o.target.error;i.name==="VersionError"?r(new T(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new T(_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new $t(e,i))},s.onupgradeneeded=o=>{w("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const i=o.target.result;this.p.N(i,s.transaction,o.oldVersion,this.version).next(()=>{w("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let i=0;for(;;){++i;try{this.db=await this.O(e);const a=Xs.open(this.db,e,o?"readonly":"readwrite",r),l=s(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),g.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&i<3;if(w("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class kd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return je(this.k.delete())}}class $t extends T{constructor(e,t){super(_.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pn(n){return n.name==="IndexedDbTransactionError"}class Od{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(w("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(w("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),je(r)}add(e){return w("SimpleDb","ADD",this.store.name,e,e),je(this.store.add(e))}get(e){return je(this.store.get(e)).next(t=>(t===void 0&&(t=null),w("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return w("SimpleDb","DELETE",this.store.name,e),je(this.store.delete(e))}count(){return w("SimpleDb","COUNT",this.store.name),je(this.store.count())}W(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new g((i,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{i(l.target.result)}})}{const o=this.cursor(r),i=[];return this.G(o,(a,l)=>{i.push(l)}).next(()=>i)}}j(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new g((s,o)=>{r.onerror=i=>{o(i.target.error)},r.onsuccess=i=>{s(i.target.result)}})}H(e,t){w("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const s=this.cursor(r);return this.G(s,(o,i,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Z(e){const t=this.cursor({});return new g((r,s)=>{t.onerror=o=>{const i=Js(o.target.error);s(i)},t.onsuccess=o=>{const i=o.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():r()}):r()}})}G(e,t){const r=[];return new g((s,o)=>{e.onerror=i=>{o(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void s();const l=new kd(a),u=t(a.primaryKey,a.value,l);if(u instanceof g){const h=u.catch(d=>(l.done(),g.reject(d)));r.push(h)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>g.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function je(n){return new g((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Js(r.target.error);t(s)}})}let _i=!1;function Js(n){const e=Ge.S(Mn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _i||(_i=!0,setTimeout(()=>{throw r},0)),r}}return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.se(r),this.oe=r=>t.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Zs._e=-1;function mr(n){return n==null}function Gn(n){return n===0&&1/n==-1/0}function Md(n){return typeof n=="number"&&Number.isInteger(n)&&!Gn(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rl(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e,t){this.comparator=e,this.root=t||Y.EMPTY}insert(e,t){return new $(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Y.BLACK,null,null))}remove(e){return new $(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Y.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rn(this.root,e,this.comparator,!0)}}class Rn{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Y{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Y.RED,this.left=s??Y.EMPTY,this.right=o??Y.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Y(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Y.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Y.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Y.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Y.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw b();const e=this.left.check();if(e!==this.right.check())throw b();return e+(this.isRed()?0:1)}}Y.EMPTY=null,Y.RED=!0,Y.BLACK=!1;Y.EMPTY=new class{constructor(){this.size=0}get key(){throw b()}get value(){throw b()}get color(){throw b()}get left(){throw b()}get right(){throw b()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Y(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.comparator=e,this.data=new $(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vi(this.data.getIterator())}getIteratorFrom(e){return new vi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Z)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Z(this.comparator);return t.data=e,t}}class vi{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.fields=e,e.sort(se.comparator)}static empty(){return new De([])}unionWith(e){let t=new Z(se.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new De(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gt(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Sl("Invalid base64 string: "+o):o}}(e);return new ae(t)}static fromUint8Array(e){const t=function(s){let o="";for(let i=0;i<s.length;++i)o+=String.fromCharCode(s[i]);return o}(e);return new ae(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return O(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ae.EMPTY_BYTE_STRING=new ae("");const Ld=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fe(n){if(z(!!n),typeof n=="string"){let e=0;const t=Ld.exec(n);if(z(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:U(n.seconds),nanos:U(n.nanos)}}function U(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Je(n){return typeof n=="string"?ae.fromBase64String(n):ae.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function to(n){const e=n.mapValue.fields.__previous_value__;return eo(e)?to(e):e}function rn(n){const e=Fe(n.mapValue.fields.__local_write_time__.timestampValue);return new K(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t,r,s,o,i,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class sn{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new sn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ze(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eo(n)?4:Bd(n)?9007199254740991:10:b()}function Re(n,e){if(n===e)return!0;const t=Ze(n);if(t!==Ze(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rn(n).isEqual(rn(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const i=Fe(s.timestampValue),a=Fe(o.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Je(s.bytesValue).isEqual(Je(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return U(s.geoPointValue.latitude)===U(o.geoPointValue.latitude)&&U(s.geoPointValue.longitude)===U(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return U(s.integerValue)===U(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const i=U(s.doubleValue),a=U(o.doubleValue);return i===a?Gn(i)===Gn(a):isNaN(i)&&isNaN(a)}return!1}(n,e);case 9:return gt(n.arrayValue.values||[],e.arrayValue.values||[],Re);case 10:return function(s,o){const i=s.mapValue.fields||{},a=o.mapValue.fields||{};if(yi(i)!==yi(a))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(a[l]===void 0||!Re(i[l],a[l])))return!1;return!0}(n,e);default:return b()}}function on(n,e){return(n.values||[]).find(t=>Re(t,e))!==void 0}function _t(n,e){if(n===e)return 0;const t=Ze(n),r=Ze(e);if(t!==r)return O(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return O(n.booleanValue,e.booleanValue);case 2:return function(o,i){const a=U(o.integerValue||o.doubleValue),l=U(i.integerValue||i.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Ei(n.timestampValue,e.timestampValue);case 4:return Ei(rn(n),rn(e));case 5:return O(n.stringValue,e.stringValue);case 6:return function(o,i){const a=Je(o),l=Je(i);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,i){const a=o.split("/"),l=i.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=O(a[u],l[u]);if(h!==0)return h}return O(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,i){const a=O(U(o.latitude),U(i.latitude));return a!==0?a:O(U(o.longitude),U(i.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,i){const a=o.values||[],l=i.values||[];for(let u=0;u<a.length&&u<l.length;++u){const h=_t(a[u],l[u]);if(h)return h}return O(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,i){if(o===Sn.mapValue&&i===Sn.mapValue)return 0;if(o===Sn.mapValue)return 1;if(i===Sn.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),u=i.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const m=O(l[d],h[d]);if(m!==0)return m;const f=_t(a[l[d]],u[h[d]]);if(f!==0)return f}return O(l.length,h.length)}(n.mapValue,e.mapValue);default:throw b()}}function Ei(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return O(n,e);const t=Fe(n),r=Fe(e),s=O(t.seconds,r.seconds);return s!==0?s:O(t.nanos,r.nanos)}function yt(n){return os(n)}function os(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Fe(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Je(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return A.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=os(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const i of r)o?o=!1:s+=",",s+=`${i}:${os(t.fields[i])}`;return s+"}"}(n.mapValue):b()}function wi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function is(n){return!!n&&"integerValue"in n}function no(n){return!!n&&"arrayValue"in n}function Ti(n){return!!n&&"nullValue"in n}function Ai(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Br(n){return!!n&&"mapValue"in n}function qt(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qt(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qt(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Bd(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.value=e}static empty(){return new we({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Br(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qt(t)}setAll(e){let t=se.emptyPath(),r={},s=[];e.forEach((i,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}i?r[a.lastSegment()]=qt(i):s.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Br(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Re(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Br(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){gn(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new we(qt(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e,t,r,s,o,i,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new re(e,0,C.min(),C.min(),C.min(),we.empty(),0)}static newFoundDocument(e,t,r,s){return new re(e,1,t,C.min(),r,s,0)}static newNoDocument(e,t){return new re(e,2,t,C.min(),C.min(),we.empty(),0)}static newUnknownDocument(e,t){return new re(e,3,t,C.min(),C.min(),we.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(C.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=we.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=we.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=C.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof re&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.position=e,this.inclusive=t}}function xi(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],i=n.position[s];if(o.field.isKeyField()?r=A.comparator(A.fromName(i.referenceValue),t.key):r=_t(i,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ii(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Re(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,t="asc"){this.field=e,this.dir=t}}function $d(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{}class j extends Cl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ud(e,t,r):t==="array-contains"?new Hd(e,r):t==="in"?new Gd(e,r):t==="not-in"?new Kd(e,r):t==="array-contains-any"?new Qd(e,r):new j(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new jd(e,r):new zd(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(_t(t,this.value)):t!==null&&Ze(this.value)===Ze(t)&&this.matchesComparison(_t(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return b()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ye extends Cl{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ye(e,t)}matches(e){return bl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function bl(n){return n.op==="and"}function Pl(n){return qd(n)&&bl(n)}function qd(n){for(const e of n.filters)if(e instanceof ye)return!1;return!0}function as(n){if(n instanceof j)return n.field.canonicalString()+n.op.toString()+yt(n.value);if(Pl(n))return n.filters.map(e=>as(e)).join(",");{const e=n.filters.map(t=>as(t)).join(",");return`${n.op}(${e})`}}function Vl(n,e){return n instanceof j?function(r,s){return s instanceof j&&r.op===s.op&&r.field.isEqual(s.field)&&Re(r.value,s.value)}(n,e):n instanceof ye?function(r,s){return s instanceof ye&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,i,a)=>o&&Vl(i,s.filters[a]),!0):!1}(n,e):void b()}function Nl(n){return n instanceof j?function(t){return`${t.field.canonicalString()} ${t.op} ${yt(t.value)}`}(n):n instanceof ye?function(t){return t.op.toString()+" {"+t.getFilters().map(Nl).join(" ,")+"}"}(n):"Filter"}class Ud extends j{constructor(e,t,r){super(e,t,r),this.key=A.fromName(r.referenceValue)}matches(e){const t=A.comparator(e.key,this.key);return this.matchesComparison(t)}}class jd extends j{constructor(e,t){super(e,"in",t),this.keys=Dl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zd extends j{constructor(e,t){super(e,"not-in",t),this.keys=Dl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Dl(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>A.fromName(r.referenceValue))}class Hd extends j{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return no(t)&&on(t.arrayValue,this.value)}}class Gd extends j{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&on(this.value.arrayValue,t)}}class Kd extends j{constructor(e,t){super(e,"not-in",t)}matches(e){if(on(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!on(this.value.arrayValue,t)}}class Qd extends j{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!no(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>on(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t=null,r=[],s=[],o=null,i=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=i,this.endAt=a,this.ce=null}}function Ri(n,e=null,t=[],r=[],s=null,o=null,i=null){return new Wd(n,e,t,r,s,o,i)}function ro(n){const e=k(n);if(e.ce===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>as(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),mr(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yt(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yt(r)).join(",")),e.ce=t}return e.ce}function so(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$d(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Vl(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ii(n.startAt,e.startAt)&&Ii(n.endAt,e.endAt)}function ls(n){return A.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t=null,r=[],s=[],o=null,i="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Yd(n,e,t,r,s,o,i,a){return new _n(n,e,t,r,s,o,i,a)}function kl(n){return new _n(n)}function Si(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ol(n){return n.collectionGroup!==null}function Ut(n){const e=k(n);if(e.le===null){e.le=[];const t=new Set;for(const o of e.explicitOrderBy)e.le.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new Z(se.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.le.push(new Qn(o,r))}),t.has(se.keyField().canonicalString())||e.le.push(new Qn(se.keyField(),r))}return e.le}function xe(n){const e=k(n);return e.he||(e.he=Xd(e,Ut(n))),e.he}function Xd(n,e){if(n.limitType==="F")return Ri(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Qn(s.field,o)});const t=n.endAt?new Kn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Kn(n.startAt.position,n.startAt.inclusive):null;return Ri(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function cs(n,e){const t=n.filters.concat([e]);return new _n(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function us(n,e,t){return new _n(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pr(n,e){return so(xe(n),xe(e))&&n.limitType===e.limitType}function Ml(n){return`${ro(xe(n))}|lt:${n.limitType}`}function rt(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>Nl(s)).join(", ")}]`),mr(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>yt(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>yt(s)).join(",")),`Target(${r})`}(xe(n))}; limitType=${n.limitType})`}function gr(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):A.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Ut(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(i,a,l){const u=xi(i,a,l);return i.inclusive?u<=0:u<0}(r.startAt,Ut(r),s)||r.endAt&&!function(i,a,l){const u=xi(i,a,l);return i.inclusive?u>=0:u>0}(r.endAt,Ut(r),s))}(n,e)}function Jd(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ll(n){return(e,t)=>{let r=!1;for(const s of Ut(n)){const o=Zd(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Zd(n,e,t){const r=n.field.isKeyField()?A.comparator(e.key,t.key):function(o,i,a){const l=i.data.field(o),u=a.data.field(o);return l!==null&&u!==null?_t(l,u):b()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return b()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){gn(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Rl(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=new $(A.comparator);function Be(){return ef}const Fl=new $(A.comparator);function Mt(...n){let e=Fl;for(const t of n)e=e.insert(t.key,t);return e}function tf(n){let e=Fl;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ke(){return jt()}function Bl(){return jt()}function jt(){return new Rt(n=>n.toString(),(n,e)=>n.isEqual(e))}new $(A.comparator);const nf=new Z(A.comparator);function D(...n){let e=nf;for(const t of n)e=e.add(t);return e}const rf=new Z(O);function sf(){return rf}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gn(e)?"-0":e}}function ql(n){return{integerValue:""+n}}function of(n,e){return Md(e)?ql(e):$l(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this._=void 0}}function af(n,e,t){return n instanceof hs?function(s,o){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&eo(o)&&(o=to(o)),o&&(i.fields.__previous_value__=o),{mapValue:i}}(t,e):n instanceof Wn?Ul(n,e):n instanceof Yn?jl(n,e):function(s,o){const i=cf(s,o),a=Ci(i)+Ci(s.Ie);return is(i)&&is(s.Ie)?ql(a):$l(s.serializer,a)}(n,e)}function lf(n,e,t){return n instanceof Wn?Ul(n,e):n instanceof Yn?jl(n,e):t}function cf(n,e){return n instanceof ds?function(r){return is(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class hs extends _r{}class Wn extends _r{constructor(e){super(),this.elements=e}}function Ul(n,e){const t=zl(e);for(const r of n.elements)t.some(s=>Re(s,r))||t.push(r);return{arrayValue:{values:t}}}class Yn extends _r{constructor(e){super(),this.elements=e}}function jl(n,e){let t=zl(e);for(const r of n.elements)t=t.filter(s=>!Re(s,r));return{arrayValue:{values:t}}}class ds extends _r{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ci(n){return U(n.integerValue||n.doubleValue)}function zl(n){return no(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uf(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Wn&&s instanceof Wn||r instanceof Yn&&s instanceof Yn?gt(r.elements,s.elements,Re):r instanceof ds&&s instanceof ds?Re(r.Ie,s.Ie):r instanceof hs&&s instanceof hs}(n.transform,e.transform)}class We{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new We}static exists(e){return new We(void 0,e)}static updateTime(e){return new We(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pn(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class oo{}function Hl(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new df(n.key,We.none()):new io(n.key,n.data,We.none());{const t=n.data,r=we.empty();let s=new Z(se.comparator);for(let o of e.fields)if(!s.has(o)){let i=t.field(o);i===null&&o.length>1&&(o=o.popLast(),i=t.field(o)),i===null?r.delete(o):r.set(o,i),s=s.add(o)}return new yr(n.key,r,new De(s.toArray()),We.none())}}function hf(n,e,t){n instanceof io?function(s,o,i){const a=s.value.clone(),l=Pi(s.fieldTransforms,o,i.transformResults);a.setAll(l),o.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(n,e,t):n instanceof yr?function(s,o,i){if(!Pn(s.precondition,o))return void o.convertToUnknownDocument(i.version);const a=Pi(s.fieldTransforms,o,i.transformResults),l=o.data;l.setAll(Gl(s)),l.setAll(a),o.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(n,e,t):function(s,o,i){o.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,t)}function zt(n,e,t,r){return n instanceof io?function(o,i,a,l){if(!Pn(o.precondition,i))return a;const u=o.value.clone(),h=Vi(o.fieldTransforms,l,i);return u.setAll(h),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof yr?function(o,i,a,l){if(!Pn(o.precondition,i))return a;const u=Vi(o.fieldTransforms,l,i),h=i.data;return h.setAll(Gl(o)),h.setAll(u),i.convertToFoundDocument(i.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(o,i,a){return Pn(o.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(n,e,t)}function bi(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gt(r,s,(o,i)=>uf(o,i))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class io extends oo{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yr extends oo{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Gl(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Pi(n,e,t){const r=new Map;z(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],i=o.transform,a=e.data.field(o.field);r.set(o.field,lf(i,a,t[s]))}return r}function Vi(n,e,t){const r=new Map;for(const s of n){const o=s.transform,i=t.data.field(s.field);r.set(s.field,af(o,i,e))}return r}class df extends oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&hf(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zt(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zt(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Bl();return this.mutations.forEach(s=>{const o=e.get(s.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=t.has(s.key)?null:a;const l=Hl(i,a);l!==null&&r.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(C.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),D())}isEqual(e){return this.batchId===e.batchId&&gt(this.mutations,e.mutations,(t,r)=>bi(t,r))&&gt(this.baseMutations,e.baseMutations,(t,r)=>bi(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q,P;function Kl(n){if(n===void 0)return Ie("GRPC error has no .code"),_.UNKNOWN;switch(n){case q.OK:return _.OK;case q.CANCELLED:return _.CANCELLED;case q.UNKNOWN:return _.UNKNOWN;case q.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case q.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case q.INTERNAL:return _.INTERNAL;case q.UNAVAILABLE:return _.UNAVAILABLE;case q.UNAUTHENTICATED:return _.UNAUTHENTICATED;case q.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case q.NOT_FOUND:return _.NOT_FOUND;case q.ALREADY_EXISTS:return _.ALREADY_EXISTS;case q.PERMISSION_DENIED:return _.PERMISSION_DENIED;case q.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case q.ABORTED:return _.ABORTED;case q.OUT_OF_RANGE:return _.OUT_OF_RANGE;case q.UNIMPLEMENTED:return _.UNIMPLEMENTED;case q.DATA_LOSS:return _.DATA_LOSS;default:return b()}}(P=q||(q={}))[P.OK=0]="OK",P[P.CANCELLED=1]="CANCELLED",P[P.UNKNOWN=2]="UNKNOWN",P[P.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",P[P.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",P[P.NOT_FOUND=5]="NOT_FOUND",P[P.ALREADY_EXISTS=6]="ALREADY_EXISTS",P[P.PERMISSION_DENIED=7]="PERMISSION_DENIED",P[P.UNAUTHENTICATED=16]="UNAUTHENTICATED",P[P.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",P[P.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",P[P.ABORTED=10]="ABORTED",P[P.OUT_OF_RANGE=11]="OUT_OF_RANGE",P[P.UNIMPLEMENTED=12]="UNIMPLEMENTED",P[P.INTERNAL=13]="INTERNAL",P[P.UNAVAILABLE=14]="UNAVAILABLE",P[P.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=new lt([4294967295,4294967295],0);function Ni(n){const e=gf().encode(n),t=new yd;return t.update(e),new Uint8Array(t.digest())}function Di(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new lt([t,r],0),new lt([s,o],0)]}class ao{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lt(`Invalid padding: ${t}`);if(r<0)throw new Lt(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lt(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Lt(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=lt.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(lt.fromNumber(r)));return s.compare(_f)===1&&(s=new lt([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Ni(e),[r,s]=Di(t);for(let o=0;o<this.hashCount;o++){const i=this.de(r,s,o);if(!this.Ae(i))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new ao(o,s,t);return r.forEach(a=>i.insert(a)),i}insert(e){if(this.Te===0)return;const t=Ni(e),[r,s]=Di(t);for(let o=0;o<this.hashCount;o++){const i=this.de(r,s,o);this.Re(i)}}Re(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Lt extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,yn.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vr(C.min(),s,new $(O),Be(),D())}}class yn{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new yn(r,t,D(),D(),D())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t,r,s){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=s}}class Ql{constructor(e,t){this.targetId=e,this.fe=t}}class Wl{constructor(e,t,r=ae.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class ki{constructor(){this.ge=0,this.pe=Mi(),this.ye=ae.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=D(),t=D(),r=D();return this.pe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:b()}}),new yn(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=Mi()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,z(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class yf{constructor(e){this.Le=e,this.ke=new Map,this.qe=Be(),this.Qe=Oi(),this.Ke=new $(O)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:b()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.fe.count,s=this.Ye(t);if(s){const o=s.target;if(ls(o))if(r===0){const i=new A(o.path);this.We(t,i,re.newNoDocument(i,C.min()))}else z(r===1);else{const i=this.Ze(t);if(i!==r){const a=this.Xe(e),l=a?this.et(a,e,i):1;if(l!==0){this.He(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let i,a;try{i=Je(r).toUint8Array()}catch(l){if(l instanceof Sl)return tn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ao(i,s,o)}catch(l){return tn(l instanceof Lt?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const i=this.Le.nt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),s++)}),s}it(e){const t=new Map;this.ke.forEach((o,i)=>{const a=this.Ye(i);if(a){if(o.current&&ls(a.target)){const l=new A(a.target.path);this.qe.get(l)!==null||this.st(i,l)||this.We(i,l,re.newNoDocument(l,e))}o.De&&(t.set(i,o.ve()),o.Fe())}});let r=D();this.Qe.forEach((o,i)=>{let a=!0;i.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,i)=>i.setReadTime(e));const s=new vr(e,t,this.Ke,this.qe,r);return this.qe=Be(),this.Qe=Oi(),this.Ke=new $(O),s}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,t)?s.Me(t,1):s.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new ki,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Z(O),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||w("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ki),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Oi(){return new $(A.comparator)}function Mi(){return new $(A.comparator)}const vf=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Ef=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),wf=(()=>({and:"AND",or:"OR"}))();class Tf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fs(n,e){return n.useProto3Json||mr(e)?e:{value:e}}function ms(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yl(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ct(n){return z(!!n),C.fromTimestamp(function(t){const r=Fe(t);return new K(r.seconds,r.nanos)}(n))}function Xl(n,e){return ps(n,e).canonicalString()}function ps(n,e){const t=function(s){return new F(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Jl(n){const e=F.fromString(n);return z(rc(e)),e}function $r(n,e){const t=Jl(e);if(t.get(1)!==n.databaseId.projectId)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new A(ec(t))}function Zl(n,e){return Xl(n.databaseId,e)}function Af(n){const e=Jl(n);return e.length===4?F.emptyPath():ec(e)}function Li(n){return new F(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ec(n){return z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function xf(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:b()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(z(h===void 0||typeof h=="string"),ae.fromBase64String(h||"")):(z(h===void 0||h instanceof Uint8Array),ae.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(u){const h=u.code===void 0?_.UNKNOWN:Kl(u.code);return new T(h,u.message||"")}(i);t=new Wl(r,s,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$r(n,r.document.name),o=ct(r.document.updateTime),i=r.document.createTime?ct(r.document.createTime):C.min(),a=new we({mapValue:{fields:r.document.fields}}),l=re.newFoundDocument(s,o,i,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Vn(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$r(n,r.document),o=r.readTime?ct(r.readTime):C.min(),i=re.newNoDocument(s,o),a=r.removedTargetIds||[];t=new Vn([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$r(n,r.document),o=r.removedTargetIds||[];t=new Vn([],o,s,null)}else{if(!("filter"in e))return b();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,i=new pf(s,o),a=r.targetId;t=new Ql(a,i)}}return t}function If(n,e){return{documents:[Zl(n,e.path)]}}function Rf(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Zl(n,s);const o=function(u){if(u.length!==0)return nc(ye.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const i=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:st(m.field),direction:bf(m.dir)}}(h))}(e.orderBy);i&&(t.structuredQuery.orderBy=i);const a=fs(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:t,parent:s}}function Sf(n){let e=Af(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){z(r===1);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(d){const m=tc(d);return m instanceof ye&&Pl(m)?m.getFilters():[m]}(t.where));let i=[];t.orderBy&&(i=function(d){return d.map(m=>function(y){return new Qn(ot(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,mr(m)?null:m}(t.limit));let l=null;t.startAt&&(l=function(d){const m=!!d.before,f=d.values||[];return new Kn(f,m)}(t.startAt));let u=null;return t.endAt&&(u=function(d){const m=!d.before,f=d.values||[];return new Kn(f,m)}(t.endAt)),Yd(e,s,i,o,a,"F",l,u)}function Cf(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return b()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tc(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ot(t.unaryFilter.field);return j.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ot(t.unaryFilter.field);return j.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ot(t.unaryFilter.field);return j.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ot(t.unaryFilter.field);return j.create(i,"!=",{nullValue:"NULL_VALUE"});default:return b()}}(n):n.fieldFilter!==void 0?function(t){return j.create(ot(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return b()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ye.create(t.compositeFilter.filters.map(r=>tc(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return b()}}(t.compositeFilter.op))}(n):b()}function bf(n){return vf[n]}function Pf(n){return Ef[n]}function Vf(n){return wf[n]}function st(n){return{fieldPath:n.canonicalString()}}function ot(n){return se.fromServerFormat(n.fieldPath)}function nc(n){return n instanceof j?function(t){if(t.op==="=="){if(Ai(t.value))return{unaryFilter:{field:st(t.field),op:"IS_NAN"}};if(Ti(t.value))return{unaryFilter:{field:st(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ai(t.value))return{unaryFilter:{field:st(t.field),op:"IS_NOT_NAN"}};if(Ti(t.value))return{unaryFilter:{field:st(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:st(t.field),op:Pf(t.op),value:t.value}}}(n):n instanceof ye?function(t){const r=t.getFilters().map(s=>nc(s));return r.length===1?r[0]:{compositeFilter:{op:Vf(t.op),filters:r}}}(n):b()}function rc(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,t,r,s,o=C.min(),i=C.min(),a=ae.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ke(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ke(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ke(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ke(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.ct=e}}function Df(n){const e=Sf({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?us(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._n=new Of}addToCollectionParentIndex(e,t){return this._n.add(t),g.resolve()}getCollectionParents(e,t){return g.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return g.resolve()}deleteFieldIndex(e,t){return g.resolve()}deleteAllFieldIndexes(e){return g.resolve()}createTargetIndexes(e,t){return g.resolve()}getDocumentsMatchingTarget(e,t){return g.resolve(null)}getIndexType(e,t){return g.resolve(0)}getFieldIndexes(e,t){return g.resolve([])}getNextCollectionGroupToUpdate(e){return g.resolve(null)}getMinOffset(e,t){return g.resolve(Le.min())}getMinOffsetFromCollectionGroup(e,t){return g.resolve(Le.min())}updateCollectionGroup(e,t,r){return g.resolve()}updateIndexEntries(e,t){return g.resolve()}}class Of{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Z(F.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Z(F.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new vt(0)}static Bn(){return new vt(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this.changes=new Rt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,re.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?g.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&zt(r.mutation,s,De.empty(),K.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,D()).next(()=>r))}getLocalViewOfDocuments(e,t,r=D()){const s=Ke();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let i=Mt();return o.forEach((a,l)=>{i=i.insert(a,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,t){const r=Ke();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,D()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((i,a)=>{t.set(i,a)})})}computeViews(e,t,r,s){let o=Be();const i=jt(),a=function(){return jt()}();return t.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof yr)?o=o.insert(u.key,u):h!==void 0?(i.set(u.key,h.mutation.getFieldMask()),zt(h.mutation,u,h.mutation.getFieldMask(),K.now())):i.set(u.key,De.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,h)=>i.set(u,h)),t.forEach((u,h)=>{var d;return a.set(u,new Lf(h,(d=i.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=jt();let s=new $((i,a)=>i-a),o=D();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>{for(const a of i)a.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||De.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(s.get(a.batchId)||D()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=Bl();h.forEach(m=>{if(!o.has(m)){const f=Hl(t.get(m),r.get(m));f!==null&&d.set(m,f),o=o.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,d))}return g.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(i){return A.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ol(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const i=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):g.resolve(Ke());let a=-1,l=o;return i.next(u=>g.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(h)?g.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,D())).next(h=>({batchId:a,changes:tf(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new A(t)).next(r=>{let s=Mt();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let i=Mt();return this.indexManager.getCollectionParents(e,o).next(a=>g.forEach(a,l=>{const u=function(d,m){return new _n(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((d,m)=>{i=i.insert(d,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(i=>{o.forEach((l,u)=>{const h=u.getKey();i.get(h)===null&&(i=i.insert(h,re.newInvalidDocument(h)))});let a=Mt();return i.forEach((l,u)=>{const h=o.get(l);h!==void 0&&zt(h.mutation,u,De.empty(),K.now()),gr(t,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return g.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ct(s.createTime)}}(t)),g.resolve()}getNamedQuery(e,t){return g.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(s){return{name:s.name,query:Df(s.bundledQuery),readTime:ct(s.readTime)}}(t)),g.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this.overlays=new $(A.comparator),this.hr=new Map}getOverlay(e,t){return g.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ke();return g.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.ht(e,t,o)}),g.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),g.resolve()}getOverlaysForCollection(e,t,r){const s=Ke(),o=t.length+1,i=new A(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&s.set(l.getKey(),l)}return g.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new $((u,h)=>u-h);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Ke(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ke(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return g.resolve(a)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new mf(t,r));let o=this.hr.get(t);o===void 0&&(o=D(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.Pr=new Z(G.Ir),this.Tr=new Z(G.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new G(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new G(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new A(new F([])),r=new G(t,e),s=new G(t,e+1),o=[];return this.Tr.forEachInRange([r,s],i=>{this.Ar(i),o.push(i.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new A(new F([])),r=new G(t,e),s=new G(t,e+1);let o=D();return this.Tr.forEachInRange([r,s],i=>{o=o.add(i.key)}),o}containsKey(e){const t=new G(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class G{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return A.comparator(e.key,t.key)||O(e.pr,t.pr)}static Er(e,t){return O(e.pr,t.pr)||A.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Z(G.Ir)}checkEmpty(e){return g.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new ff(o,t,r,s);this.mutationQueue.push(i);for(const a of s)this.wr=this.wr.add(new G(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return g.resolve(i)}lookupMutationBatch(e,t){return g.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.br(r),o=s<0?0:s;return g.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return g.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return g.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new G(t,0),s=new G(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,s],i=>{const a=this.Sr(i.pr);o.push(a)}),g.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Z(O);return t.forEach(s=>{const o=new G(s,0),i=new G(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,i],a=>{r=r.add(a.pr)})}),g.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;A.isDocumentKey(o)||(o=o.child(""));const i=new G(new A(o),0);let a=new Z(O);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.pr)),!0)},i),g.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){z(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return g.forEach(t.mutations,s=>{const o=new G(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new G(t,0),s=this.wr.firstAfterOrEqual(r);return g.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,g.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.vr=e,this.docs=function(){return new $(A.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,i=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return g.resolve(r?r.document.mutableCopy():re.newInvalidDocument(t))}getEntries(e,t){let r=Be();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():re.newInvalidDocument(s))}),g.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Be();const i=t.path,a=new A(i.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Vd(Pd(h),r)<=0||(s.has(h.key)||gr(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return g.resolve(o)}getAllFromCollectionGroup(e,t,r,s){b()}Fr(e,t){return g.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jf(this)}getSize(e){return g.resolve(this.size)}}class jf extends Mf{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),g.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this.persistence=e,this.Mr=new Rt(t=>ro(t),so),this.lastRemoteSnapshotVersion=C.min(),this.highestTargetId=0,this.Or=0,this.Nr=new lo,this.targetCount=0,this.Br=vt.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,s)=>t(s)),g.resolve()}getLastRemoteSnapshotVersion(e){return g.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return g.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),g.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),g.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new vt(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,g.resolve()}updateTargetData(e,t){return this.qn(t),g.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,g.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Mr.forEach((i,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),g.waitFor(o).next(()=>s)}getTargetCount(e){return g.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return g.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),g.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(i=>{o.push(s.markPotentiallyOrphaned(e,i))}),g.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),g.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return g.resolve(r)}containsKey(e,t){return g.resolve(this.Nr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Zs(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new zf(this),this.indexManager=new kf,this.remoteDocumentCache=function(s){return new Uf(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Nf(t),this.$r=new Bf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $f,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new qf(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){w("MemoryPersistence","Starting transaction:",e);const s=new Gf(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(o=>this.referenceDelegate.Wr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Gr(e,t){return g.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class Gf extends Dd{constructor(e){super(),this.currentSequenceNumber=e}}class co{constructor(e){this.persistence=e,this.zr=new lo,this.jr=null}static Hr(e){return new co(e)}get Jr(){if(this.jr)return this.jr;throw b()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),g.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),g.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),g.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return g.forEach(this.Jr,r=>{const s=A.fromPath(r);return this.Yr(e,s).next(o=>{o||t.removeEntry(s,C.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return g.or([()=>g.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=s}static Ki(e,t){let r=D(),s=D();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new uo(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return iu()?8:Ge.v(Mn())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ji(e,t).next(i=>{o.result=i}).next(()=>{if(!o.result)return this.Hi(e,t,s,r).next(i=>{o.result=i})}).next(()=>{if(o.result)return;const i=new Kf;return this.Ji(e,t,i).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,i,a.size)})}).next(()=>o.result)}Yi(e,t,r,s){return r.documentReadCount<this.Wi?(Dt()<=N.DEBUG&&w("QueryEngine","SDK will not create cache indexes for query:",rt(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),g.resolve()):(Dt()<=N.DEBUG&&w("QueryEngine","Query:",rt(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Dt()<=N.DEBUG&&w("QueryEngine","The SDK decides to create cache indexes for query:",rt(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xe(t))):g.resolve())}ji(e,t){if(Si(t))return g.resolve(null);let r=xe(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=us(t,null,"F"),r=xe(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const i=D(...o);return this.zi.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Zi(t,a);return this.Xi(t,u,i,l.readTime)?this.ji(e,us(t,null,"F")):this.es(e,u,t,l)}))})))}Hi(e,t,r,s){return Si(t)||s.isEqual(C.min())?g.resolve(null):this.zi.getDocuments(e,r).next(o=>{const i=this.Zi(t,o);return this.Xi(t,i,r,s)?g.resolve(null):(Dt()<=N.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rt(t)),this.es(e,i,t,bd(s,-1)).next(a=>a))})}Zi(e,t){let r=new Z(Ll(e));return t.forEach((s,o)=>{gr(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ji(e,t,r){return Dt()<=N.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",rt(t)),this.zi.getDocumentsMatchingQuery(e,t,Le.min(),r)}es(e,t,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(i=>{o=o.insert(i.key,i)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,r,s){this.persistence=e,this.ts=t,this.serializer=s,this.ns=new $(O),this.rs=new Rt(o=>ro(o),so),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ff(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function Yf(n,e,t,r){return new Wf(n,e,t,r)}async function sc(n,e){const t=k(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const i=[],a=[];let l=D();for(const u of s){i.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of o){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:i,addedBatchIds:a}))})})}function oc(n){const e=k(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function Xf(n,e){const t=k(n),r=e.snapshotVersion;let s=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const i=t.os.newChangeBuffer({trackRemovals:!0});s=t.ns;const a=[];e.targetChanges.forEach((h,d)=>{const m=s.get(d);if(!m)return;a.push(t.Qr.removeMatchingKeys(o,h.removedDocuments,d).next(()=>t.Qr.addMatchingKeys(o,h.addedDocuments,d)));let f=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ae.EMPTY_BYTE_STRING,C.min()).withLastLimboFreeSnapshotVersion(C.min()):h.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(h.resumeToken,r)),s=s.insert(d,f),function(v,x,R){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(m,f,h)&&a.push(t.Qr.updateTargetData(o,f))});let l=Be(),u=D();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Jf(o,i,e.documentUpdates).next(h=>{l=h.cs,u=h.ls})),!r.isEqual(C.min())){const h=t.Qr.getLastRemoteSnapshotVersion(o).next(d=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return g.waitFor(a).next(()=>i.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.ns=s,o))}function Jf(n,e,t){let r=D(),s=D();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let i=Be();return t.forEach((a,l)=>{const u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(C.min())?(e.removeEntry(a,l.readTime),i=i.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(a,l)):w("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:i,ls:s}})}function Zf(n,e){const t=k(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Qr.getTargetData(r,e).next(o=>o?(s=o,g.resolve(s)):t.Qr.allocateTargetId(r).next(i=>(s=new ke(e,i,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}async function gs(n,e,t){const r=k(n),s=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!pn(i))throw i;w("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function Fi(n,e,t){const r=k(n);let s=C.min(),o=D();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,h){const d=k(l),m=d.rs.get(h);return m!==void 0?g.resolve(d.ns.get(m)):d.Qr.getTargetData(u,h)}(r,i,xe(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(i,a.targetId).next(l=>{o=l})}).next(()=>r.ts.getDocumentsMatchingQuery(i,e,t?s:C.min(),t?o:D())).next(a=>(em(r,Jd(e),a),{documents:a,hs:o})))}function em(n,e,t){let r=n.ss.get(e)||C.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}class Bi{constructor(){this.activeTargetIds=sf()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tm{constructor(){this.no=new Bi,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Bi,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cn=null;function qr(){return Cn===null?Cn=function(){return 268435456+Math.round(2147483648*Math.random())}():Cn++,"0x"+Cn.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne="WebChannelConnection";class om extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${s}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get wo(){return!1}So(t,r,s,o,i){const a=qr(),l=this.bo(t,r.toUriEncodedString());w("RestConnection",`Sending RPC '${t}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,o,i),this.Co(t,l,u,s).then(h=>(w("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw tn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}vo(t,r,s,o,i,a){return this.So(t,r,s,o,i)}Do(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+It}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,i)=>t[i]=o),s&&s.headers.forEach((o,i)=>t[i]=o)}bo(t,r){const s=rm[t];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,s){const o=qr();return new Promise((i,a)=>{const l=new _d;l.setWithCredentials(!0),l.listenOnce(pd.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fr.NO_ERROR:const h=l.getResponseJson();w(ne,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),i(h);break;case Fr.TIMEOUT:w(ne,`RPC '${e}' ${o} timed out`),a(new T(_.DEADLINE_EXCEEDED,"Request time out"));break;case Fr.HTTP_ERROR:const d=l.getStatus();if(w(ne,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const f=m==null?void 0:m.error;if(f&&f.status&&f.message){const y=function(x){const R=x.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(R)>=0?R:_.UNKNOWN}(f.status);a(new T(y,f.message))}else a(new T(_.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new T(_.UNAVAILABLE,"Connection failed."));break;default:b()}}finally{w(ne,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(s);w(ne,`RPC '${e}' ${o} sending request:`,s),l.send(t,"POST",u,r,15)})}Fo(e,t,r){const s=qr(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=fd(),a=md(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=o.join("");w(ne,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=i.createWebChannel(h,l);let m=!1,f=!1;const y=new sm({lo:x=>{f?w(ne,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(w(ne,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),w(ne,`RPC '${e}' stream ${s} sending:`,x),d.send(x))},ho:()=>d.close()}),v=(x,R,V)=>{x.listen(R,S=>{try{V(S)}catch(ue){setTimeout(()=>{throw ue},0)}})};return v(d,In.EventType.OPEN,()=>{f||w(ne,`RPC '${e}' stream ${s} transport opened.`)}),v(d,In.EventType.CLOSE,()=>{f||(f=!0,w(ne,`RPC '${e}' stream ${s} transport closed`),y.Vo())}),v(d,In.EventType.ERROR,x=>{f||(f=!0,tn(ne,`RPC '${e}' stream ${s} transport errored:`,x),y.Vo(new T(_.UNAVAILABLE,"The operation could not be completed")))}),v(d,In.EventType.MESSAGE,x=>{var R;if(!f){const V=x.data[0];z(!!V);const S=V,ue=S.error||((R=S[0])===null||R===void 0?void 0:R.error);if(ue){w(ne,`RPC '${e}' stream ${s} received error:`,ue);const ee=ue.status;let te=function(H){const me=q[H];if(me!==void 0)return Kl(me)}(ee),de=ue.message;te===void 0&&(te=_.INTERNAL,de="Unknown error status: "+ee+" with message "+ue.message),f=!0,y.Vo(new T(te,de)),d.close()}else w(ne,`RPC '${e}' stream ${s} received:`,V),y.mo(V)}}),v(a,gd.STAT_EVENT,x=>{x.stat===pi.PROXY?w(ne,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===pi.NOPROXY&&w(ne,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}}function Ur(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(n){return new Tf(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t,r=1e3,s=1.5,o=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=s,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,t-r);s>0&&w("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t,r,s,o,i,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ic(e,t)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():t&&t.code===_.RESOURCE_EXHAUSTED?(Ie(t.toString()),Ie("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===_.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===t&&this.o_(r,s)},r=>{e(()=>{const s=new T(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class am extends im{constructor(e,t,r,s,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,i),this.serializer=o}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=xf(this.serializer,e),r=function(o){if(!("targetChange"in o))return C.min();const i=o.targetChange;return i.targetIds&&i.targetIds.length?C.min():i.readTime?ct(i.readTime):C.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=Li(this.serializer),t.addTarget=function(o,i){let a;const l=i.target;if(a=ls(l)?{documents:If(o,l)}:{query:Rf(o,l).ut},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=Yl(o,i.resumeToken);const u=fs(o,i.expectedCount);u!==null&&(a.expectedCount=u)}else if(i.snapshotVersion.compareTo(C.min())>0){a.readTime=ms(o,i.snapshotVersion.toTimestamp());const u=fs(o,i.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Cf(this.serializer,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=Li(this.serializer),t.removeTarget=e,this.t_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,i])=>this.connection.So(e,ps(t,r),s,o,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new T(_.UNKNOWN,o.toString())})}vo(e,t,r,s,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.vo(e,ps(t,r),s,i,a,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new T(_.UNKNOWN,i.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class cm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ie(t),this.g_=!1):w("OnlineStateTracker",t)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(i=>{r.enqueueAndForget(async()=>{En(this)&&(w("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=k(l);u.v_.add(4),await vn(u),u.x_.set("Unknown"),u.v_.delete(4),await wr(u)}(this))})}),this.x_=new cm(r,s)}}async function wr(n){if(En(n))for(const e of n.F_)await e(!0)}async function vn(n){for(const e of n.F_)await e(!1)}function ac(n,e){const t=k(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),mo(t)?fo(t):St(t).Jo()&&ho(t,e))}function lc(n,e){const t=k(n),r=St(t);t.C_.delete(e),r.Jo()&&cc(t,e),t.C_.size===0&&(r.Jo()?r.Xo():En(t)&&t.x_.set("Unknown"))}function ho(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(C.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}St(n).c_(e)}function cc(n,e){n.O_.Oe(e),St(n).l_(e)}function fo(n){n.O_=new yf({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),St(n).start(),n.x_.p_()}function mo(n){return En(n)&&!St(n).Ho()&&n.C_.size>0}function En(n){return k(n).v_.size===0}function uc(n){n.O_=void 0}async function hm(n){n.C_.forEach((e,t)=>{ho(n,e)})}async function dm(n,e){uc(n),mo(n)?(n.x_.S_(e),fo(n)):n.x_.set("Unknown")}async function fm(n,e,t){if(n.x_.set("Online"),e instanceof Wl&&e.state===2&&e.cause)try{await async function(s,o){const i=o.cause;for(const a of o.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,i),s.C_.delete(a),s.O_.removeTarget(a))}(n,e)}catch(r){w("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qi(n,r)}else if(e instanceof Vn?n.O_.$e(e):e instanceof Ql?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(C.min()))try{const r=await oc(n.localStore);t.compareTo(r)>=0&&await function(o,i){const a=o.O_.it(i);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.C_.get(u);h&&o.C_.set(u,h.withResumeToken(l.resumeToken,i))}}),a.targetMismatches.forEach((l,u)=>{const h=o.C_.get(l);if(!h)return;o.C_.set(l,h.withResumeToken(ae.EMPTY_BYTE_STRING,h.snapshotVersion)),cc(o,l);const d=new ke(h.target,l,u,h.sequenceNumber);ho(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){w("RemoteStore","Failed to raise snapshot:",r),await qi(n,r)}}async function qi(n,e,t){if(!pn(e))throw e;n.v_.add(1),await vn(n),n.x_.set("Offline"),t||(t=()=>oc(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{w("RemoteStore","Retrying IndexedDB access"),await t(),n.v_.delete(1),await wr(n)})}async function Ui(n,e){const t=k(n);t.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");const r=En(t);t.v_.add(3),await vn(t),r&&t.x_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),await wr(t)}async function mm(n,e){const t=k(n);e?(t.v_.delete(2),await wr(t)):e||(t.v_.add(2),await vn(t),t.x_.set("Unknown"))}function St(n){return n.N_||(n.N_=function(t,r,s){const o=k(t);return o.R_(),new am(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Po:hm.bind(null,n),To:dm.bind(null,n),u_:fm.bind(null,n)}),n.F_.push(async e=>{e?(n.N_.Zo(),mo(n)?fo(n):n.x_.set("Unknown")):(await n.N_.stop(),uc(n))})),n.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Me,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const i=Date.now()+r,a=new po(e,t,i,s,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new T(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hc(n,e){if(Ie("AsyncQueue",`${e}: ${n}`),pn(n))return new T(_.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e?(t,r)=>e(t,r)||A.comparator(t.key,r.key):(t,r)=>A.comparator(t.key,r.key),this.keyedMap=Mt(),this.sortedSet=new $(this.comparator)}static emptySet(e){return new ut(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ut;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(){this.L_=new $(A.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(t,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(t):e.type===1&&r.type===2?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):b():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Et{constructor(e,t,r,s,o,i,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,s,o){const i=[];return t.forEach(a=>{i.push({type:0,doc:a})}),new Et(e,t,ut.emptySet(t),i,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.q_=void 0,this.Q_=[]}}class gm{constructor(){this.queries=new Rt(e=>Ml(e),pr),this.onlineState="Unknown",this.K_=new Set}}async function _m(n,e){const t=k(n),r=e.query;let s=!1,o=t.queries.get(r);if(o||(s=!0,o=new pm),s)try{o.q_=await t.onListen(r)}catch(i){const a=hc(i,`Initialization of query '${rt(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,o),o.Q_.push(e),e.U_(t.onlineState),o.q_&&e.W_(o.q_)&&go(t)}async function ym(n,e){const t=k(n),r=e.query;let s=!1;const o=t.queries.get(r);if(o){const i=o.Q_.indexOf(e);i>=0&&(o.Q_.splice(i,1),s=o.Q_.length===0)}if(s)return t.queries.delete(r),t.onUnlisten(r)}function vm(n,e){const t=k(n);let r=!1;for(const s of e){const o=s.query,i=t.queries.get(o);if(i){for(const a of i.Q_)a.W_(s)&&(r=!0);i.q_=s}}r&&go(t)}function Em(n,e,t){const r=k(n),s=r.queries.get(e);if(s)for(const o of s.Q_)o.onError(t);r.queries.delete(e)}function go(n){n.K_.forEach(e=>{e.next()})}class wm{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Et(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const r=t!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Y_(e){e=Et.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.key=e}}class fc{constructor(e){this.key=e}}class Tm{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=D(),this.mutatedKeys=D(),this.ua=Ll(e),this.ca=new ut(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new ji,s=t?t.ca:this.ca;let o=t?t.mutatedKeys:this.mutatedKeys,i=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const m=s.get(h),f=gr(this.query,d)?d:null,y=!!m&&this.mutatedKeys.has(m.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let x=!1;m&&f?m.data.isEqual(f.data)?y!==v&&(r.track({type:3,doc:f}),x=!0):this.Ia(m,f)||(r.track({type:2,doc:f}),x=!0,(l&&this.ua(f,l)>0||u&&this.ua(f,u)<0)&&(a=!0)):!m&&f?(r.track({type:0,doc:f}),x=!0):m&&!f&&(r.track({type:1,doc:m}),x=!0,(l||u)&&(a=!0)),x&&(f?(i=i.add(f),o=v?o.add(h):o.delete(h)):(i=i.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const h=this.query.limitType==="F"?i.last():i.first();i=i.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ca:i,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const i=e.Pa.k_();i.sort((h,d)=>function(f,y){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return b()}};return v(f)-v(y)}(h.type,d.type)||this.ua(h.doc,d.doc)),this.Ta(r),s=s!=null&&s;const a=t&&!s?this.Ea():[],l=this.aa.size===0&&this.current&&!s?1:0,u=l!==this._a;return this._a=l,i.length!==0||u?{snapshot:new Et(this.query,e.ca,o,i,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ji,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=D(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new fc(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new dc(r))}),t}Ra(e){this.oa=e.hs,this.aa=D();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Et.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class Am{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xm{constructor(e){this.key=e,this.ma=!1}}class Im{constructor(e,t,r,s,o,i){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.fa={},this.ga=new Rt(a=>Ml(a),pr),this.pa=new Map,this.ya=new Set,this.wa=new $(A.comparator),this.Sa=new Map,this.ba=new lo,this.Da={},this.Ca=new Map,this.va=vt.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function Rm(n,e){const t=Dm(n);let r,s;const o=t.ga.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),s=o.view.Va();else{const i=await Zf(t.localStore,xe(e)),a=t.sharedClientState.addLocalQueryTarget(i.targetId);r=i.targetId,s=await Sm(t,e,r,a==="current",i.resumeToken),t.isPrimaryClient&&ac(t.remoteStore,i)}return s}async function Sm(n,e,t,r,s){n.Ma=(d,m,f)=>async function(v,x,R,V){let S=x.view.ha(R);S.Xi&&(S=await Fi(v.localStore,x.query,!1).then(({documents:de})=>x.view.ha(de,S)));const ue=V&&V.targetChanges.get(x.targetId),ee=V&&V.targetMismatches.get(x.targetId)!=null,te=x.view.applyChanges(S,v.isPrimaryClient,ue,ee);return Hi(v,x.targetId,te.da),te.snapshot}(n,d,m,f);const o=await Fi(n.localStore,e,!0),i=new Tm(e,o.hs),a=i.ha(o.documents),l=yn.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),u=i.applyChanges(a,n.isPrimaryClient,l);Hi(n,t,u.da);const h=new Am(e,t,i);return n.ga.set(e,h),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),u.snapshot}async function Cm(n,e){const t=k(n),r=t.ga.get(e),s=t.pa.get(r.targetId);if(s.length>1)return t.pa.set(r.targetId,s.filter(o=>!pr(o,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||await gs(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),lc(t.remoteStore,r.targetId),_s(t,r.targetId)}).catch(Ys)):(_s(t,r.targetId),await gs(t.localStore,r.targetId,!0))}async function mc(n,e){const t=k(n);try{const r=await Xf(t.localStore,e);e.targetChanges.forEach((s,o)=>{const i=t.Sa.get(o);i&&(z(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.ma=!0:s.modifiedDocuments.size>0?z(i.ma):s.removedDocuments.size>0&&(z(i.ma),i.ma=!1))}),await gc(t,r,e)}catch(r){await Ys(r)}}function zi(n,e,t){const r=k(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ga.forEach((o,i)=>{const a=i.view.U_(e);a.snapshot&&s.push(a.snapshot)}),function(i,a){const l=k(i);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const m of d.Q_)m.U_(a)&&(u=!0)}),u&&go(l)}(r.eventManager,e),s.length&&r.fa.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bm(n,e,t){const r=k(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Sa.get(e),o=s&&s.key;if(o){let i=new $(A.comparator);i=i.insert(o,re.newNoDocument(o,C.min()));const a=D().add(o),l=new vr(C.min(),new Map,new $(O),i,a);await mc(r,l),r.wa=r.wa.remove(o),r.Sa.delete(e),_o(r)}else await gs(r.localStore,e,!1).then(()=>_s(r,e,t)).catch(Ys)}function _s(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||pc(n,r)})}function pc(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);t!==null&&(lc(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),_o(n))}function Hi(n,e,t){for(const r of t)r instanceof dc?(n.ba.addReference(r.key,e),Pm(n,r)):r instanceof fc?(w("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||pc(n,r.key)):b()}function Pm(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(w("SyncEngine","New document in limbo: "+t),n.ya.add(r),_o(n))}function _o(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new A(F.fromString(e)),r=n.va.next();n.Sa.set(r,new xm(t)),n.wa=n.wa.insert(t,r),ac(n.remoteStore,new ke(xe(kl(t.path)),r,"TargetPurposeLimboResolution",Zs._e))}}async function gc(n,e,t){const r=k(n),s=[],o=[],i=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{i.push(r.Ma(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const h=uo.Ki(l.targetId,u);o.push(h)}}))}),await Promise.all(i),r.fa.u_(s),await async function(l,u){const h=k(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>g.forEach(u,m=>g.forEach(m.qi,f=>h.persistence.referenceDelegate.addReference(d,m.targetId,f)).next(()=>g.forEach(m.Qi,f=>h.persistence.referenceDelegate.removeReference(d,m.targetId,f)))))}catch(d){if(!pn(d))throw d;w("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const f=h.ns.get(m),y=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(m,v)}}}(r.localStore,o))}async function Vm(n,e){const t=k(n);if(!t.currentUser.isEqual(e)){w("SyncEngine","User change. New user:",e.toKey());const r=await sc(t.localStore,e);t.currentUser=e,function(o,i){o.Ca.forEach(a=>{a.forEach(l=>{l.reject(new T(_.CANCELLED,i))})}),o.Ca.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gc(t,r.us)}}function Nm(n,e){const t=k(n),r=t.Sa.get(e);if(r&&r.ma)return D().add(r.key);{let s=D();const o=t.pa.get(e);if(!o)return s;for(const i of o){const a=t.ga.get(i);s=s.unionWith(a.view.la)}return s}}function Dm(n){const e=k(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bm.bind(null,e),e.fa.u_=vm.bind(null,e.eventManager),e.fa.xa=Em.bind(null,e.eventManager),e}class Gi{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Er(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Yf(this.persistence,new Qf,e.initialUser,this.serializer)}createPersistence(e){return new Hf(co.Hr,this.serializer)}createSharedClientState(e){return new tm}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class km{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zi(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vm.bind(null,this.syncEngine),await mm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gm}()}createDatastore(e){const t=Er(e.databaseInfo.databaseId),r=function(o){return new om(o)}(e.databaseInfo);return function(o,i,a,l){return new lm(o,i,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,i,a){return new um(r,s,o,i,a)}(this.localStore,this.datastore,e.asyncQueue,t=>zi(this.syncEngine,t,0),function(){return $i.D()?new $i:new nm}())}createSyncEngine(e,t){return function(s,o,i,a,l,u,h){const d=new Im(s,o,i,a,l,u);return h&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(r){const s=k(r);w("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await vn(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ie("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=he.UNAUTHENTICATED,this.clientId=Sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{w("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(w("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Me;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hc(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jr(n,e){n.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await sc(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Ki(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Fm(n);w("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ui(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Ui(e.remoteStore,s)),n._onlineComponents=e}function Lm(n){return n.name==="FirebaseError"?n.code===_.FAILED_PRECONDITION||n.code===_.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function Fm(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){w("FirestoreClient","Using user provided OfflineComponentProvider");try{await jr(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Lm(t))throw t;tn("Error using user provided cache. Falling back to memory cache: "+t),await jr(n,new Gi)}}else w("FirestoreClient","Using default OfflineComponentProvider"),await jr(n,new Gi);return n._offlineComponents}async function Bm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(w("FirestoreClient","Using user provided OnlineComponentProvider"),await Ki(n,n._uninitializedComponentsProvider._online)):(w("FirestoreClient","Using default OnlineComponentProvider"),await Ki(n,new km))),n._onlineComponents}async function $m(n){const e=await Bm(n),t=e.eventManager;return t.onListen=Rm.bind(null,e.syncEngine),t.onUnlisten=Cm.bind(null,e.syncEngine),t}function qm(n,e,t={}){const r=new Me;return n.asyncQueue.enqueueAndForget(async()=>function(o,i,a,l,u){const h=new Om({next:m=>{i.enqueueAndForget(()=>ym(o,d)),m.fromCache&&l.source==="server"?u.reject(new T(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new wm(a,h,{includeMetadataChanges:!0,Z_:!0});return _m(o,d)}(await $m(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n,e,t){if(!t)throw new T(_.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jm(n,e,t,r){if(e===!0&&r===!0)throw new T(_.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Wi(n){if(A.isDocumentKey(n))throw new T(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tr(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":b()}function Yi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new T(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tr(n);throw new T(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new T(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new T(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_c((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new T(_.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new T(_.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new T(_.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yc{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xi({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new T(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xi(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ed;switch(r.type){case"firstParty":return new Ad(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new T(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Qi.get(t);r&&(w("ComponentProvider","Removing Datastore"),Qi.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ct(this.firestore,e,this._query)}}class Pe{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ht(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}}class ht extends Ct{constructor(e,t,r){super(e,t,kl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new A(e))}withConverter(e){return new ht(this.firestore,e,this._path)}}function zm(n,e,...t){if(n=Ln(n),Um("collection","path",e),n instanceof yc){const r=F.fromString(e,...t);return Wi(r),new ht(n,null,r)}{if(!(n instanceof Pe||n instanceof ht))throw new T(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(F.fromString(e,...t));return Wi(r),new ht(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new ic(this,"async_queue_retry"),this._u=()=>{const t=Ur();t&&w("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=Ur();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Ur();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new Me;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!pn(e))throw e;w("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const s=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(r);throw Ie("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const s=po.createAndSchedule(this,e,t,r,o=>this.lu(o));return this.nu.push(s),s}au(){this.ru&&b()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class vc extends yc{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=function(){return new Hm}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ec(this),this._firestoreClient.terminate()}}function Gm(n){return n._firestoreClient||Ec(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ec(n){var e,t,r;const s=n._freezeSettings(),o=function(a,l,u,h){return new Fd(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_c(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._firestoreClient=new Mm(n._authCredentials,n._appCheckCredentials,n._queue,o),((t=s.localCache)===null||t===void 0?void 0:t._offlineComponentProvider)&&((r=s.localCache)===null||r===void 0?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wt(ae.fromBase64String(e))}catch(t){throw new T(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wt(ae.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new T(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return O(this._lat,e._lat)||O(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=/^__.*__$/;function Ac(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw b()}}class vo{constructor(e,t,r,s,o,i){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new vo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.mu(e),s}fu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return ys(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(Ac(this.du)&&Km.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Qm{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Er(e)}Su(e,t,r,s=!1){return new vo({du:e,methodName:t,wu:r,path:se.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wm(n){const e=n._freezeSettings(),t=Er(n._databaseId);return new Qm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ym(n,e,t,r=!1){return Eo(t,n.Su(r?4:3,e))}function Eo(n,e){if(xc(n=Ln(n)))return Jm("Unsupported field value:",e,n),Xm(n,e);if(n instanceof Tc)return function(r,s){if(!Ac(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,s){const o=[];let i=0;for(const a of r){let l=Eo(a,s.gu(i));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),i++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=Ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return of(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=K.fromDate(r);return{timestampValue:ms(s.serializer,o)}}if(r instanceof K){const o=new K(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ms(s.serializer,o)}}if(r instanceof yo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wt)return{bytesValue:Yl(s.serializer,r._byteString)};if(r instanceof Pe){const o=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(o))throw s.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Xl(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${Tr(r)}`)}(n,e)}function Xm(n,e){const t={};return Rl(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gn(n,(r,s)=>{const o=Eo(s,e.Ru(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function xc(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof K||n instanceof yo||n instanceof wt||n instanceof Pe||n instanceof Tc)}function Jm(n,e,t){if(!xc(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Tr(t);throw r==="an object"?e.pu(n+" a custom object"):e.pu(n+" "+r)}}const Zm=new RegExp("[~\\*/\\[\\]]");function ep(n,e,t){if(e.search(Zm)>=0)throw ys(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wc(...e.split("."))._internalPath}catch{throw ys(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ys(n,e,t,r,s){const o=r&&!r.isEmpty(),i=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||i)&&(l+=" (found",o&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new T(_.INVALID_ARGUMENT,a+n+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tp extends Ic{data(){return super.data()}}function Rc(n,e){return typeof e=="string"?ep(n,e):e instanceof wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new T(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wo{}class rp extends wo{}function sp(n,e,...t){let r=[];e instanceof wo&&r.push(e),r=r.concat(t),function(o){const i=o.filter(l=>l instanceof Ao).length,a=o.filter(l=>l instanceof To).length;if(i>1||i>0&&a>0)throw new T(_.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class To extends rp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new To(e,t,r)}_apply(e){const t=this._parse(e);return Sc(e._query,t),new Ct(e.firestore,e.converter,cs(e._query,t))}_parse(e){const t=Wm(e.firestore);return function(o,i,a,l,u,h,d){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new T(_.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Zi(d,h);const f=[];for(const y of d)f.push(Ji(l,o,y));m={arrayValue:{values:f}}}else m=Ji(l,o,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Zi(d,h),m=Ym(a,i,d,h==="in"||h==="not-in");return j.create(u,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ao extends wo{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ao(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ye.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let i=s;const a=o.getFlattenedFilters();for(const l of a)Sc(i,l),i=cs(i,l)}(e._query,t),new Ct(e.firestore,e.converter,cs(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ji(n,e,t){if(typeof(t=Ln(t))=="string"){if(t==="")throw new T(_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ol(e)&&t.indexOf("/")!==-1)throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(F.fromString(t));if(!A.isDocumentKey(r))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wi(n,new A(r))}if(t instanceof Pe)return wi(n,t._key);throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tr(t)}.`)}function Zi(n,e){if(!Array.isArray(n)||n.length===0)throw new T(_.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sc(n,e){const t=function(s,o){for(const i of s)for(const a of i.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new T(_.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new T(_.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class op{convertValue(e,t="none"){switch(Ze(e)){case 0:return null;case 1:return e.booleanValue;case 2:return U(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Je(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw b()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return gn(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new yo(U(e.latitude),U(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=to(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rn(e));default:return null}}convertTimestamp(e){const t=Fe(e);return new K(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=F.fromString(e);z(rc(r));const s=new sn(r.get(1),r.get(3)),o=new A(r.popFirst(5));return s.isEqual(t)||Ie(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ip extends Ic{constructor(e,t,r,s,o,i){super(e,t,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Rc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Nn extends ip{data(e={}){return super.data(e)}}class ap{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new bn(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Nn(this._firestore,this._userDataWriter,r.key,r,new bn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(a=>{const l=new Nn(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bn(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Nn(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bn(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),h=i.indexOf(a.doc.key)),{type:lp(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lp(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return b()}}class cp extends op{constructor(e){super(),this.firestore=e}convertBytes(e){return new wt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,t)}}function up(n){n=Yi(n,Ct);const e=Yi(n.firestore,vc),t=Gm(e),r=new cp(e);return np(n._query),qm(t,n._query).then(s=>new ap(e,r,n,s))}(function(e,t=!0){(function(s){It=s})(rh),Bn(new Fn("firestore",(r,{instanceIdentifier:s,options:o})=>{const i=r.getProvider("app").getImmediate(),a=new vc(new wd(r.getProvider("auth-internal")),new Id(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new T(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sn(u.options.projectId,h)}(i,s),i);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ft(gi,"4.4.1",e),Ft(gi,"4.4.1","esm2017")})();const xo={__name:"BlogHome",__ssrInlineRender:!0,setup(n){const e=c.ref([]),t=c.ref([]);pe.useMeta({title:"Ess\xEAncia BAHIANA | Blog",meta:{description:{name:"description",content:"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:"Porto Seguro, Pontos tur\xEDsticos em Porto Seguro, Passeios em Porto Seguro, Traslados em Porto Seguro, Turismo na Bahia, Viagens pela Bahia, Melhores experi\xEAncias em Porto Seguro, Roteiros de viagem em Porto Seguro, Atra\xE7\xF5es tur\xEDsticas na regi\xE3o, Servi\xE7o de transporte em Porto Seguro, Roteiro de viagem personalizado, Dicas de viagem para Porto Seguro, Destinos na Bahia, Planejamento de viagem, Experi\xEAncias memor\xE1veis na Bahia."},ogTitle:{property:"og:title",template(){return"Ess\xEAncia BAHIANA | Blog"}},ogDescription:{property:"og:description",template(){return"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"}},ogImage:{property:"og:image",template(){return"https://essenciabahiana.com.br/hero.webp"}},twitterTitle:{property:"twitter:title",template(){return"Ess\xEAncia BAHIANA | Blog"}},twitterDescription:{property:"twitter:description",template(){return"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"}},twitterImage:{property:"twitter:image",template(){return"https://essenciabahiana.com.br/hero.webp"}}}}),c.onBeforeMount(()=>{e.value=[],t.value=[];const i=zm(xs,"blog"),a=sp(i);up(a).then(l=>{l.forEach(u=>{u.data().featured?e.value.push({id:u.id,...u.data()}):t.value.push({id:u.id,...u.data()})})})});const r=c.ref("Ess\xEAncia"),s=c.ref("Bahiana"),o=c.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return(i,a,l,u)=>{const h=c.resolveComponent("q-page");a(p.ssrRenderComponent(h,c.mergeProps({class:"blog-home"},u),{default:c.withCtx((d,m,f,y)=>{if(m)m(`<main class="my-28 md:mt-48 md:mb-10 flex flex-col"${y}>`),e.value.length>0?m(p.ssrRenderComponent(kn,{dataHero:e.value},null,f,y)):m("<!---->"),m(`<div class="flex container mx-auto"${y}>`),t.value?(m(`<section class="w-full md:w-8/12 xl:w-9/12"${y}><!--[-->`),p.ssrRenderList(t.value,v=>{m(p.ssrRenderComponent(On,{article:v,key:v.title},null,f,y))}),m("<!--]--></section>")):m("<!---->"),m(`<aside class="w-full md:w-4/12 xl:w-3/12"${y}>`),m(p.ssrRenderComponent(mt,null,null,f,y)),m(p.ssrRenderComponent(ft,null,null,f,y)),m("</aside></div></main>"),m(p.ssrRenderComponent(Ce,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,f,y));else return[c.createVNode("main",{class:"my-28 md:mt-48 md:mb-10 flex flex-col"},[e.value.length>0?(c.openBlock(),c.createBlock(kn,{key:0,dataHero:e.value},null,8,["dataHero"])):c.createCommentVNode("",!0),c.createVNode("div",{class:"flex container mx-auto"},[t.value?(c.openBlock(),c.createBlock("section",{key:0,class:"w-full md:w-8/12 xl:w-9/12"},[(c.openBlock(!0),c.createBlock(c.Fragment,null,c.renderList(t.value,v=>(c.openBlock(),c.createBlock(On,{article:v,key:v.title},null,8,["article"]))),128))])):c.createCommentVNode("",!0),c.createVNode("aside",{class:"w-full md:w-4/12 xl:w-3/12"},[c.createVNode(mt),c.createVNode(ft)])])]),c.createVNode(Ce,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},l))}}},ea=xo.setup;xo.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/BlogHome.vue"),ea?ea(n,e):void 0};var hp=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"}));const $e={__name:"WhatsAppBtn",__ssrInlineRender:!0,props:{text:String},setup(n){const e=()=>{const r="https://wa.me/5511993271622";window.open(r,"_blank")};return(t,r,s,o)=>{const i=c.resolveComponent("q-btn"),a=c.resolveComponent("q-avatar"),l=c.resolveComponent("q-img");r(p.ssrRenderComponent(i,c.mergeProps({align:"left",size:"md",class:"py-2 rounded bg-white text-primary my-5 mt-auto shadow-2xl flex justify-start mx-auto",onClick:e},o),{default:c.withCtx((u,h,d,m)=>{if(h)h(p.ssrRenderComponent(a,{size:"40px",class:"mr-5"},{default:c.withCtx((f,y,v,x)=>{if(y)y(p.ssrRenderComponent(l,{src:"/zap-icon.webp",alt:"\xCDcone Whatsapp"},null,v,x));else return[c.createVNode(l,{src:"/zap-icon.webp",alt:"\xCDcone Whatsapp"})]}),_:1},d,m)),h(` ${p.ssrInterpolate(n.text)}`);else return[c.createVNode(a,{size:"40px",class:"mr-5"},{default:c.withCtx(()=>[c.createVNode(l,{src:"/zap-icon.webp",alt:"\xCDcone Whatsapp"})]),_:1}),c.createTextVNode(" "+c.toDisplayString(n.text),1)]}),_:1},s))}}},ta=$e.setup;$e.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/WhatsAppBtn.vue"),ta?ta(n,e):void 0};const Cc=ua.defineStore("postStore",{state:()=>({post:{},isDataLoaded:!1,title:"Page",description:"Ess\xEAncia Bahiana Site",keywords:"",imageURL:"hero.webp"}),actions:{async fetchPost(n){const e=Ht.doc(xs,"blog",n),t=await Ht.getDoc(e);t.exists()&&(this.post={id:t.id,...t.data()},this.title=this.post.title,this.description=this.post.description,this.keywords=this.post.keywords,this.imageURL=this.post.imageURL),this.isDataLoaded=!0}}}),dp={preFetch({store:n,currentRoute:e}){const t=Cc(n),r=e.params.id;return t.fetchPost(r)}},Io=Object.assign(dp,{__name:"BlogPage",__ssrInlineRender:!0,setup(n){const e=dt.useRoute(),t=Cc(),r=c.ref("Ess\xEAncia"),s=c.ref("Bahiana"),o=c.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);async function i(a){await t.fetchPost(a)}return c.onMounted(async()=>{await i(e.params.id)}),c.watch(()=>e.params.id,async a=>{await i(a)}),pe.useMeta(()=>({title:t.title,titleTemplate:a=>`Ess\xEAncia BAHIANA | Blog | ${a}`,meta:{description:{name:"description",content:t.description},keywords:{name:"keywords",content:t.keywords},"http-equiv":{"http-equiv":"Content-Type",content:"text/html charset=UTF-8"},ogTitle:{property:"og:title",content:`Ess\xEAncia BAHIANA | ${t.title}`},ogDescription:{property:"og:description",content:t.description},ogImage:{property:"og:image",content:`https://essenciabahiana.com.br/${t.imageURL}`},twitterTitle:{property:"twitter:title",content:`Ess\xEAncia BAHIANA | ${t.title}`},twitterDescription:{property:"twitter:description",content:t.description},twitterImage:{property:"twitter:image",content:`https://essenciabahiana.com.br/${t.imageURL}`}}})),(a,l,u,h)=>{const d=c.resolveComponent("q-page"),m=c.resolveComponent("q-img"),f=c.resolveComponent("q-separator"),y=c.resolveComponent("q-breadcrumbs"),v=c.resolveComponent("q-breadcrumbs-el");l(p.ssrRenderComponent(d,c.mergeProps({class:""},h),{default:c.withCtx((x,R,V,S)=>{if(R)R(`<header class="max-w-[1000px] min-h-[400px] mx-auto mt-28 md:mt-44 mb-10"${S}><figure${S}><div class="w-full"${S}>`),R(p.ssrRenderComponent(m,{class:"w-full max-h-[500px] object-cover",src:`/${c.unref(t).imageURL}`,alt:c.unref(t).post.title},null,V,S)),R(`</div><figcaption class="py-8 px-6 md:px-0 flex flex-col"${S}><h1 class="text-2xl md:text-5xl font-sans font-bold mb-6"${S}>${p.ssrInterpolate(c.unref(t).post.title)}</h1><p class="text-2xl"${S}>${p.ssrInterpolate(c.unref(t).post.excerpt)}</p><p class="ml-auto text-kg text-accent"${S}>Por Ess\xEAncia Bahiana</p></figcaption>`),R(p.ssrRenderComponent(f,{class:"max-w-[1000px] mx-auto mb-6"},null,V,S)),R(p.ssrRenderComponent(y,{class:"ml-6 md:ml-0"},{default:c.withCtx((ue,ee,te,de)=>{if(ee)ee(p.ssrRenderComponent(v,{label:"Home",to:"/"},null,te,de)),ee(p.ssrRenderComponent(v,{label:"Blog",to:"/blog"},null,te,de)),ee(p.ssrRenderComponent(v,{label:"O que fazer"},null,te,de)),ee(p.ssrRenderComponent(v,{label:c.unref(t).post.title},null,te,de));else return[c.createVNode(v,{label:"Home",to:"/"}),c.createVNode(v,{label:"Blog",to:"/blog"}),c.createVNode(v,{label:"O que fazer"}),c.createVNode(v,{label:c.unref(t).post.title},null,8,["label"])]}),_:1},V,S)),R(`</figure></header><main class="max-w-[1000px] mx-auto flex flex-col md:flex-row mb-6"${S}><section class="blog-content w-full md:w-8/12 px-6 md:pl-0"${S}><div${S}>${c.unref(t).post.content}</div>`),R(p.ssrRenderComponent($e,{text:"Entre em contato"},null,V,S)),R(`</section><aside class="w-full md:w-4/12"${S}>`),R(p.ssrRenderComponent(mt,{location:c.unref(t).post.location},null,V,S)),R(p.ssrRenderComponent(ft,null,null,V,S)),R("</aside></main>"),R(p.ssrRenderComponent(Ce,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,V,S));else return[c.createVNode("header",{class:"max-w-[1000px] min-h-[400px] mx-auto mt-28 md:mt-44 mb-10"},[c.createVNode("figure",null,[c.createVNode("div",{class:"w-full"},[c.createVNode(m,{class:"w-full max-h-[500px] object-cover",src:`/${c.unref(t).imageURL}`,alt:c.unref(t).post.title},null,8,["src","alt"])]),c.createVNode("figcaption",{class:"py-8 px-6 md:px-0 flex flex-col"},[c.createVNode("h1",{class:"text-2xl md:text-5xl font-sans font-bold mb-6"},c.toDisplayString(c.unref(t).post.title),1),c.createVNode("p",{class:"text-2xl"},c.toDisplayString(c.unref(t).post.excerpt),1),c.createVNode("p",{class:"ml-auto text-kg text-accent"},"Por Ess\xEAncia Bahiana")]),c.createVNode(f,{class:"max-w-[1000px] mx-auto mb-6"}),c.createVNode(y,{class:"ml-6 md:ml-0"},{default:c.withCtx(()=>[c.createVNode(v,{label:"Home",to:"/"}),c.createVNode(v,{label:"Blog",to:"/blog"}),c.createVNode(v,{label:"O que fazer"}),c.createVNode(v,{label:c.unref(t).post.title},null,8,["label"])]),_:1})])]),c.createVNode("main",{class:"max-w-[1000px] mx-auto flex flex-col md:flex-row mb-6"},[c.createVNode("section",{class:"blog-content w-full md:w-8/12 px-6 md:pl-0"},[c.createVNode("div",{innerHTML:c.unref(t).post.content},null,8,["innerHTML"]),c.createVNode($e,{text:"Entre em contato"})]),c.createVNode("aside",{class:"w-full md:w-4/12"},[c.createVNode(mt,{location:c.unref(t).post.location},null,8,["location"]),c.createVNode(ft)])]),c.createVNode(Ce,{firstTitle:r.value,secondTitle:s.value,copyRight:o.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},u))}}}),na=Io.setup;Io.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/BlogPage.vue"),na?na(n,e):void 0};var fp=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"}));const Ro=c.defineComponent({name:"ErrorNotFound"});function mp(n,e,t,r,s,o,i,a){const l=c.resolveComponent("q-btn");e(`<div${p.ssrRenderAttrs(c.mergeProps({class:"fullscreen bg-blue text-white text-center q-pa-md flex flex-center"},r))}><div><div style="${p.ssrRenderStyle({"font-size":"30vh"})}"> 404 </div><div class="text-h2" style="${p.ssrRenderStyle({opacity:".4"})}"> Oops. Nothing here... </div>`),e(p.ssrRenderComponent(l,{class:"q-mt-xl",color:"white","text-color":"blue",unelevated:"",to:"/",label:"Go Home","no-caps":""},null,t)),e("</div></div>")}const ra=Ro.setup;Ro.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/ErrorNotFound.vue"),ra?ra(n,e):void 0};var pp=da(Ro,[["ssrRender",mp]]),gp=Object.freeze(Object.defineProperty({__proto__:null,default:pp},Symbol.toStringTag,{value:"Module"})),_p={failed:"Action failed",success:"Action was successful"},yp={"en-US":_p},vp=Xn.boot(({app:n})=>{const e=Dc.createI18n({locale:"en-US",globalInjection:!0,messages:yp});n.use(e)}),Ep=Object.freeze(Object.defineProperty({__proto__:null,default:vp},Symbol.toStringTag,{value:"Module"}));const bc=ha.default.create({baseURL:"https://api.example.com"});var wp=Xn.boot(({app:n})=>{n.config.globalProperties.$axios=ha.default,n.config.globalProperties.$api=bc}),Tp=Object.freeze(Object.defineProperty({__proto__:null,default:wp,api:bc},Symbol.toStringTag,{value:"Module"}));const So={__name:"HeroComponent",__ssrInlineRender:!0,props:{image:String,firstTitle:String,secondTitle:String,subtitle:String},setup(n){const e=c.ref("Converse Conosco");return(t,r,s,o)=>{const i=c.resolveComponent("q-img");r(`<section${p.ssrRenderAttrs(c.mergeProps({class:"relative w-full h-screen overflow-hidden flex justify-center items-center"},o))}><div class="absolute top-0 left-0 w-full h-full">`),r(p.ssrRenderComponent(i,{src:n.image,alt:"Praia em Porto Seguro Bahia",class:"object-cover object-[85%] md:object-center w-full h-full"},null,s)),r(`</div><div class="absolute top-0 left-0 w-full h-full bg-black opacity-15"></div><div class="absolute top-0 max-w-2xl w-full h-full flex p-5 flex-col py-[200px] justify-center md:justify-start items-center text-center text-white z-10"><h1 class="text-5xl md:text-[80px] text-white font-bold mb-6 font-sans leading-3 shadow-primary drop-shadow-lg">${p.ssrInterpolate(n.firstTitle)} <span class="text-6xl md:text-[120px] leading-normal uppercase">${p.ssrInterpolate(n.secondTitle)}</span></h1><p class="text-3xl md:text-3xl text-shadow-outline text-white font-open">${p.ssrInterpolate(n.subtitle)}</p>`),r(p.ssrRenderComponent($e,{text:e.value},null,s)),r("</div></section>")}}},sa=So.setup;So.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/HeroComponent.vue"),sa?sa(n,e):void 0};var Ap=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"}));const Co={__name:"SelectionBarItem",__ssrInlineRender:!0,props:{bgColor:String,icon:String,text:String},setup(n){return(e,t,r,s)=>{t(`<div${p.ssrRenderAttrs(c.mergeProps({class:`hover:scale-105 hover:shadow-2xl cursor-pointer ease-in-out duration-300 flex flex-col
  justify-center items-center ${n.bgColor} p-5`},s))}><img${p.ssrRenderAttr("src",n.icon)} alt="" class="w-20 h-20"><p class="text-white text-lg">${p.ssrInterpolate(n.text)}</p></div>`)}}},oa=Co.setup;Co.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/SelectionBarItem.vue"),oa?oa(n,e):void 0};const bo={__name:"SelectionBar",__ssrInlineRender:!0,setup(n){const e=c.ref([{bgColor:"bg-secondary",icon:"drink.svg",text:"Festas"},{bgColor:"bg-accent",icon:"bus.svg",text:"Traslados"},{bgColor:"bg-secondary",icon:"boat.svg",text:"Passeios"},{bgColor:"bg-accent",icon:"beach.svg",text:"Praias"},{bgColor:"bg-secondary",icon:"dive.svg",text:"Mergulhos"},{bgColor:"bg-accent",icon:"food.svg",text:"Gastronomia"}]);return(t,r,s,o)=>{r(`<section${p.ssrRenderAttrs(c.mergeProps({class:"w-full h-auto md:h-44 bg-white flex justify-center"},o))}><div class="w-full grid grid-cols-3 md:grid-cols-6"><!--[-->`),p.ssrRenderList(e.value,i=>{r(p.ssrRenderComponent(Co,{bgColor:i.bgColor,icon:i.icon,text:i.text,key:i.text},null,s))}),r("<!--]--></div></section>")}}},ia=bo.setup;bo.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/SelectionBar.vue"),ia?ia(n,e):void 0};var xp=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"}));const Po={__name:"TransferCard",__ssrInlineRender:!0,props:{image:String,alt:String,title:String,text:String,customCss:String,order:Boolean},setup(n){const e=c.ref("Saiba mais");return(t,r,s,o)=>{r(`<figure${p.ssrRenderAttrs(c.mergeProps({class:"flex flex-row max-w-[1000px] px-6 mx-auto mb-20 justify-between"},o))}><img${p.ssrRenderAttr("src",n.image)}${p.ssrRenderAttr("alt",n.alt)} class="${p.ssrRenderClass(` w-full md:w-1/3 object-cover object-bottom aspect-square drop-shadow-md w-[315px] h-[315px] ${n.order?"md:order-2":""}`)}"><figcaption class="${p.ssrRenderClass(`w-full md:w-2/3 md:px-10 flex flex-col justify-start items-start py-6 ${n.customCss}`)}"><h2 class="text-sans font-bold text-secondary text-3xl md:text-4xl mb-6">${p.ssrInterpolate(n.title)}</h2><p class="text-white text-lg mb-6">${p.ssrInterpolate(n.text)}</p>`),r(p.ssrRenderComponent($e,{text:e.value},null,s)),r("</figcaption></figure>")}}},aa=Po.setup;Po.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/TransferCard.vue"),aa?aa(n,e):void 0};const Vo={__name:"TransferSection",__ssrInlineRender:!0,setup(n){const e=c.ref([{image:"van-1.webp",alt:"Van na praia.",title:"Traslados e Passeios Personalizados",text:"Explore as maravilhas de Porto Seguro com nossos passeios exclusivos e traslados confort\xE1veis. Seu parceiro ideal em turismo, garantindo aventuras inesquec\xEDveis e seguran\xE7a em cada viagem!",customCss:"",order:!1},{image:"van-2.webp",alt:"Van na Praia do Espelho",title:"Explore o Cora\xE7\xE3o da Bahia com Estilo! ",text:"Porto Seguro espera por voc\xEA com suas praias deslumbrantes e hist\xF3ria rica. Desfrute de experi\xEAncias \xFAnicas com nossos tours especializados e servi\xE7os de traslado de primeira classe, projetados para proporcionar conforto e conveni\xEAncia em suas aventuras tropicais.",customCss:"md:pl-0 md:pr-20",order:!0},{image:"van-3.webp",alt:"turistas felizes dentro da Van",title:"Viva a Magia de Porto Seguro!",text:"Embarque em uma jornada extraordin\xE1ria pelos encantos naturais e culturais de Porto Seguro. Oferecemos itiner\xE1rios personalizados e servi\xE7os de qualidade para tornar cada momento de sua viagem memor\xE1vel e cheio de descobertas.",customCss:"",order:!1}]),t=c.ref("Fa\xE7a uma cota\xE7\xE3o");return(r,s,o,i)=>{s(`<section${p.ssrRenderAttrs(c.mergeProps({class:"w-full min-h-[500px] bg-primary py-20"},i))}><div class="container flex flex-col mx-auto"><header class="px-6 max-w-[1000px] mb-16 md:mb-28"><h1 class="font-sans text-3xl md:text-6xl text-accent font-bold mb-2 md:mb-5">Explore Porto Seguro com Conforto e Seguran\xE7a</h1><p class="text-secondary text-lg md:text-2xl">Traslados e Passeios Personalizados</p></header><!--[-->`),p.ssrRenderList(e.value,a=>{s(p.ssrRenderComponent(Po,{image:a.image,title:a.title,text:a.text,customCss:a.customCss,order:a.order,alt:a.alt,key:a.image},null,o))}),s('<!--]--><footer class="flex flex-col w-full max-w-[800px] px-6 md:mx-auto"><h2 class="text-accent text-3xl md:text-6xl font-bold mb-6 text-center md:text-left">Pronto para Descobrir Porto Seguro?</h2><p class="text-white text-lg md:text-xl mb-10">N\xE3o espere mais para planejar a viagem dos seus sonhos! Clique aqui e fa\xE7a j\xE1 a sua cota\xE7\xE3o de traslados via WhatsApp. R\xE1pido, f\xE1cil e seguro \u2013 seu Porto Seguro est\xE1 a apenas uma mensagem de dist\xE2ncia!</p>'),s(p.ssrRenderComponent($e,{text:t.value},null,o)),s("</footer></div></section>")}}},la=Vo.setup;Vo.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/TransferSection.vue"),la?la(n,e):void 0};var Ip=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"}));const No={__name:"ContactSection",__ssrInlineRender:!0,setup(n){pe.useQuasar();const e=c.ref(""),t=c.ref(""),r=c.ref(""),s=c.ref(""),o=c.ref(""),i=c.ref(null),a=c.ref(null),l=c.ref(null);return(u,h,d,m)=>{const f=c.resolveComponent("q-input"),y=c.resolveComponent("q-btn");h(`<div${p.ssrRenderAttrs(c.mergeProps({class:"contact-section bg-dark-page text-light-gray p-10",id:"contact"},m))}><div class="container mx-auto"><div class="text-center mb-10"><h2 class="text-6xl font-bold text-primary mb-2">Entre em Contato</h2><p class="text-secondary text-xl">Estamos prontos para atend\xEA-lo!</p></div><div class="grid grid-cols-1 gap-8"><div class="contact-info">`),h(p.ssrRenderComponent($e,{text:"Converse pelo WhatsApp"},null,d)),h('</div><div class="contact-form"><p class="text-accent">Ou preencha o formul\xE1rio abaixo:</p><form>'),h(p.ssrRenderComponent(f,{filled:"",modelValue:e.value,"onUpdate:modelValue":v=>e.value=v,ref_key:"nameRef",ref:i,rules:[v=>!!v||"Nome \xE9 obrigat\xF3rio."],label:"Nome",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:o.value,"onUpdate:modelValue":v=>o.value=v,label:"E-mail",class:"mb-6",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:s.value,"onUpdate:modelValue":v=>s.value=v,label:"Telefone",class:"mb-6",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:t.value,"onUpdate:modelValue":v=>t.value=v,ref_key:"subjectRef",ref:a,rules:[v=>!!v||"Assunto \xE9 obrigat\xF3rio."],label:"Assunto",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(f,{filled:"",modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,ref_key:"messageRef",ref:l,rules:[v=>!!v||"Mensagem \xE9 obrigat\xF3rio."],label:"Mensagem",type:"textarea",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(y,{label:"Enviar Mensagem",type:"submit",color:"secondary",class:"w-full"},null,d)),h("</form></div></div></div></div>")}}},ca=No.setup;No.setup=(n,e)=>{const t=c.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/ContactSection.vue"),ca?ca(n,e):void 0};var Rp=Object.freeze(Object.defineProperty({__proto__:null,default:No},Symbol.toStringTag,{value:"Module"}));exports.default=zc;
