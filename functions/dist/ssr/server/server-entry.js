"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var u=require("vue"),pe=require("quasar"),p=require("vue/server-renderer"),er=require("quasar/wrappers"),la=require("pinia"),ht=require("vue-router");require("@emailjs/browser");var Cc=require("firebase/app");require("firebase/analytics");var bc=require("firebase/auth"),zt=require("firebase/firestore"),Pc=require("firebase/functions"),Vc=require("vue-i18n"),Nc=require("axios");function Dc(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var ca=Dc(Nc);var ua=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t};const Ts=u.defineComponent({name:"App"});function kc(n,e,t,r,s,i,o,a){const l=u.resolveComponent("router-view");e(p.ssrRenderComponent(l,r,null,t))}const Vi=Ts.setup;Ts.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/App.vue"),Vi?Vi(n,e):void 0};var tt=ua(Ts,[["ssrRender",kc]]),Cr=er.store(()=>la.createPinia());const Oc=[{path:"/",component:()=>Promise.resolve().then(function(){return jc}),children:[{path:"",component:()=>Promise.resolve().then(function(){return zc})},{path:"/politicas-de-privacidade",component:()=>Promise.resolve().then(function(){return Hc})},{path:"/blog",component:()=>Promise.resolve().then(function(){return lp})},{path:"/blog/:categor/:id",component:()=>Promise.resolve().then(function(){return up})}]},{path:"/:catchAll(.*)*",component:()=>Promise.resolve().then(function(){return fp})}];var br=er.route(function(){const n=ht.createMemoryHistory;return ht.createRouter({scrollBehavior:()=>({left:0,top:0}),routes:Oc,history:n("/")})});const Lc=u.defineComponent({name:"AppWrapper",setup(n){return u.onMounted(()=>{const{proxy:{$q:e}}=u.getCurrentInstance();e.onSSRHydrated!==void 0&&e.onSSRHydrated()}),()=>u.h(tt,n)}});async function Mc(n,e,t){const r=n(Lc);r.use(pe.Quasar,e,t);const s=typeof Cr=="function"?await Cr({ssrContext:t}):Cr;r.use(s),typeof window<"u"&&window.__INITIAL_STATE__!==void 0&&(s.state.value=window.__INITIAL_STATE__,delete window.__INITIAL_STATE__);const i=u.markRaw(typeof br=="function"?await br({ssrContext:t,store:s}):br);return s.use(({store:o})=>{o.router=i}),{app:r,store:s,router:i}}var Fc={config:{},plugins:{Notify:pe.Notify,Loading:pe.Loading,Dialog:pe.Dialog,Screen:pe.Screen,Meta:pe.Meta}};const Ni=typeof tt.preFetch=="function"?tt.preFetch:tt.__c!==void 0&&typeof tt.__c.preFetch=="function"?tt.__c.preFetch:!1,Di="/",Bc=/^https?:\/\//;function ki(n,e){if(typeof n=="string"&&Bc.test(n)===!0)return n;try{return e.resolve(n).href}catch{}return n}const{components:Ep,directives:wp,...qc}=Fc,$c=Promise.all([Promise.resolve().then(function(){return _p}),Promise.resolve().then(function(){return vp})]).then(n=>n.map(e=>e.default).filter(e=>typeof e=="function"));var Uc=n=>new Promise(async(e,t)=>{const r=await $c,{app:s,router:i,store:o}=await Mc(u.createApp,qc,n);let a=!1;const l=(d,f)=>{a=!0,t({url:ki(d,i),code:f})};for(let d=0;a===!1&&d<r.length;d++)try{await r[d]({app:s,router:i,store:o,ssrContext:n,redirect:l,urlPath:n.req.url,publicPath:Di})}catch(f){t(f);return}if(a===!0)return;s.use(i);const c=n.req.url,{fullPath:h}=i.resolve(c);if(h!==c)return t({url:h});i.push(c).catch(()=>{}),i.isReady().then(()=>{let d=i.currentRoute.value.matched.filter(_=>_.components!==void 0).flatMap(_=>Object.values(_.components));if(d.length===0)return t({code:404});let f=!1;const m=(_,v)=>{f=!0,t({url:ki(_,i),code:v})};d=d.filter(_=>typeof _.preFetch=="function"||_.__c!==void 0&&typeof _.__c.preFetch=="function").map(_=>_.__c!==void 0?_.__c.preFetch:_.preFetch),Ni!==!1&&d.unshift(Ni),d.reduce((_,v)=>_.then(()=>f===!1&&v({store:o,ssrContext:n,currentRoute:i.currentRoute.value,redirect:m,urlPath:n.req.url,publicPath:Di})),Promise.resolve()).then(()=>{f!==!0&&(n.state=u.unref(o.state),e(s))}).catch(t)}).catch(t)});const Ve={__name:"HeaderMenu",__ssrInlineRender:!0,setup(n){const{getScrollTarget:e,setVerticalScrollPosition:t}=pe.scroll,r=u.computed(()=>s.screen.lt.md),s=pe.useQuasar(),i=ht.useRouter(),o=u.ref("");function a(c,h=""){i.push(`/${c}`).then(()=>{h&&u.nextTick(()=>{const d=document.getElementById(h);d&&l(d)})})}function l(c){const h=e(c),d=c.offsetTop-90;t(h,d,1e3)}return(c,h,d,f)=>{const m=u.resolveComponent("q-tabs"),_=u.resolveComponent("q-tab");h(p.ssrRenderComponent(m,u.mergeProps({modelValue:o.value,"onUpdate:modelValue":v=>o.value=v,vertical:!!r.value,class:"text-primary"},f),{default:u.withCtx((v,I,P,L)=>{if(I)I(p.ssrRenderComponent(_,{name:"blog",label:"Blog",onClick:C=>a("blog")},null,P,L)),I(p.ssrRenderComponent(_,{name:"contato",label:"Contato",onClick:C=>a("","contact")},null,P,L));else return[u.createVNode(_,{name:"blog",label:"Blog",onClick:C=>a("blog")},null,8,["onClick"]),u.createVNode(_,{name:"contato",label:"Contato",onClick:C=>a("","contact")},null,8,["onClick"])]}),_:1},d))}}},Oi=Ve.setup;Ve.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/HeaderMenu.vue"),Oi?Oi(n,e):void 0};const As={__name:"MainLayout",__ssrInlineRender:!0,setup(n){const e=u.ref(!1),t=u.ref(!1);u.ref(null);const r=ht.useRouter();u.onMounted(()=>{window.addEventListener("scroll",o)}),u.onUnmounted(()=>{window.removeEventListener("scroll",o)});function s(){e.value=!e.value}function i(a){r.push(`/${a}`)}const o=()=>{window.scrollY>20?t.value=!0:t.value=!1};return(a,l,c,h)=>{const d=u.resolveComponent("q-layout"),f=u.resolveComponent("q-toolbar"),m=u.resolveComponent("q-avatar"),_=u.resolveComponent("q-img"),v=u.resolveComponent("q-space"),I=u.resolveComponent("q-btn"),P=u.resolveComponent("q-drawer"),L=u.resolveComponent("q-page-container"),C=u.resolveComponent("router-view");l(p.ssrRenderComponent(d,u.mergeProps({view:"lHh Lpr lFf"},h),{default:u.withCtx((ue,ee,te,de)=>{if(ee)ee(p.ssrRenderComponent(f,{class:["h-20 md:h-36 fixed w-full z-50 top-0 p-7 bg-transparent font-sans font-bold ease-in-out duration-500",{"!bg-white md:!h-24 drop-shadow-md":t.value}]},{default:u.withCtx((ve,H,me,le)=>{if(H)H(p.ssrRenderComponent(m,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":t.value}],onClick:Ct=>i("")},{default:u.withCtx((Ct,bt,Rr,Sr)=>{if(bt)bt(p.ssrRenderComponent(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"},null,Rr,Sr));else return[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]}),_:1},me,le)),H(`<h3 class="ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"${le}>Ess\xEAncia <span class="uppercase text-2xl md:text-3xl"${le}>Bahiana</span></h3>`),H(p.ssrRenderComponent(v,null,null,me,le)),H(p.ssrRenderComponent(Ve,{class:"hidden lg:!flex"},null,me,le)),H(p.ssrRenderComponent(I,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"},null,me,le));else return[u.createVNode(m,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":t.value}],onClick:Ct=>i("")},{default:u.withCtx(()=>[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1},8,["class","onClick"]),u.createVNode("h3",{onClick:Ct=>i(""),class:"ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-2xl md:text-3xl",onClick:Ct=>i("")},"Bahiana",8,["onClick"])],8,["onClick"]),u.createVNode(v),u.createVNode(Ve,{class:"hidden lg:!flex"}),u.createVNode(I,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"})]}),_:1},te,de)),ee(p.ssrRenderComponent(P,{modelValue:e.value,"onUpdate:modelValue":ve=>e.value=ve,overlay:"",side:"right",bordered:"",class:"q-py-lg flex flex-col"},{default:u.withCtx((ve,H,me,le)=>{if(H)H(`<div class="mx-auto mb-5 w-full flex justify-evenly items-center"${le}>`),H(p.ssrRenderComponent(m,{class:"w-16 h-16 md:w-32 md:h-32"},{default:u.withCtx((Ct,bt,Rr,Sr)=>{if(bt)bt(p.ssrRenderComponent(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"},null,Rr,Sr));else return[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]}),_:1},me,le)),H(`<div class="text-lg text-primary font-bold font-sans"${le}>Ess\xEAncia <span class="uppercase text-xl"${le}>Bahiana</span></div></div><div${le}>`),H(p.ssrRenderComponent(Ve,null,null,me,le)),H("</div>");else return[u.createVNode("div",{class:"mx-auto mb-5 w-full flex justify-evenly items-center"},[u.createVNode(m,{class:"w-16 h-16 md:w-32 md:h-32"},{default:u.withCtx(()=>[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1}),u.createVNode("div",{class:"text-lg text-primary font-bold font-sans"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-xl"},"Bahiana")])]),u.createVNode("div",null,[u.createVNode(Ve)])]}),_:1},te,de)),ee(p.ssrRenderComponent(L,null,{default:u.withCtx((ve,H,me,le)=>{if(H)H(p.ssrRenderComponent(C,null,null,me,le));else return[u.createVNode(C)]}),_:1},te,de));else return[u.createVNode(f,{class:["h-20 md:h-36 fixed w-full z-50 top-0 p-7 bg-transparent font-sans font-bold ease-in-out duration-500",{"!bg-white md:!h-24 drop-shadow-md":t.value}]},{default:u.withCtx(()=>[u.createVNode(m,{class:["w-16 h-16 md:w-32 md:h-32 ease-in-out duration-500",{"md:!w-20 md:!h-20":t.value}],onClick:ve=>i("")},{default:u.withCtx(()=>[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1},8,["class","onClick"]),u.createVNode("h3",{onClick:ve=>i(""),class:"ml-4 md:ml-6 font-sans font-bold text-lg md:text-2xl text-primary"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-2xl md:text-3xl",onClick:ve=>i("")},"Bahiana",8,["onClick"])],8,["onClick"]),u.createVNode(v),u.createVNode(Ve,{class:"hidden lg:!flex"}),u.createVNode(I,{flat:"",onClick:s,round:"",dense:"",icon:"menu",color:"primary",class:"lg:hidden"})]),_:1},8,["class"]),u.createVNode(P,{modelValue:e.value,"onUpdate:modelValue":ve=>e.value=ve,overlay:"",side:"right",bordered:"",class:"q-py-lg flex flex-col"},{default:u.withCtx(()=>[u.createVNode("div",{class:"mx-auto mb-5 w-full flex justify-evenly items-center"},[u.createVNode(m,{class:"w-16 h-16 md:w-32 md:h-32"},{default:u.withCtx(()=>[u.createVNode(_,{src:"/logo.svg",alt:"Logo - Ess\xEAncia Bahiana"})]),_:1}),u.createVNode("div",{class:"text-lg text-primary font-bold font-sans"},[u.createTextVNode("Ess\xEAncia "),u.createVNode("span",{class:"uppercase text-xl"},"Bahiana")])]),u.createVNode("div",null,[u.createVNode(Ve)])]),_:1},8,["modelValue","onUpdate:modelValue"]),u.createVNode(L,null,{default:u.withCtx(()=>[u.createVNode(C)]),_:1})]}),_:1},c))}}},Li=As.setup;As.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/layouts/MainLayout.vue"),Li?Li(n,e):void 0};var jc=Object.freeze(Object.defineProperty({__proto__:null,default:As},Symbol.toStringTag,{value:"Module"}));const Et={__name:"WhatsAppBtn",__ssrInlineRender:!0,props:{text:String},setup(n){const e=()=>{const r="https://wa.me/5511993271622";window.open(r,"_blank")};return(t,r,s,i)=>{const o=u.resolveComponent("q-btn"),a=u.resolveComponent("q-avatar"),l=u.resolveComponent("q-img");r(p.ssrRenderComponent(o,u.mergeProps({align:"left",size:"md",class:"py-2 rounded bg-white text-primary my-5 mt-auto shadow-2xl flex justify-start mx-auto",onClick:e},i),{default:u.withCtx((c,h,d,f)=>{if(h)h(p.ssrRenderComponent(a,{size:"40px",class:"mr-5"},{default:u.withCtx((m,_,v,I)=>{if(_)_(p.ssrRenderComponent(l,{src:"zap-icon.webp",alt:"\xCDcone Whatsapp"},null,v,I));else return[u.createVNode(l,{src:"zap-icon.webp",alt:"\xCDcone Whatsapp"})]}),_:1},d,f)),h(` ${p.ssrInterpolate(n.text)}`);else return[u.createVNode(a,{size:"40px",class:"mr-5"},{default:u.withCtx(()=>[u.createVNode(l,{src:"zap-icon.webp",alt:"\xCDcone Whatsapp"})]),_:1}),u.createTextVNode(" "+u.toDisplayString(n.text),1)]}),_:1},s))}}},Mi=Et.setup;Et.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/WhatsAppBtn.vue"),Mi?Mi(n,e):void 0};const Nn={__name:"HeroComponent",__ssrInlineRender:!0,props:{image:String,firstTitle:String,secondTitle:String,subtitle:String},setup(n){const e=u.ref("Converse Conosco");return(t,r,s,i)=>{const o=u.resolveComponent("q-img");r(`<section${p.ssrRenderAttrs(u.mergeProps({class:"relative w-full h-screen overflow-hidden flex justify-center items-center"},i))}><div class="absolute top-0 left-0 w-full h-full">`),r(p.ssrRenderComponent(o,{src:n.image,alt:"Praia em Porto Seguro Bahia",class:"object-cover object-[85%] md:object-center w-full h-full"},null,s)),r(`</div><div class="absolute top-0 left-0 w-full h-full bg-black opacity-15"></div><div class="absolute top-0 max-w-2xl w-full h-full flex p-5 flex-col py-[200px] justify-center md:justify-start items-center text-center text-white z-10"><h1 class="text-5xl md:text-[80px] text-white font-bold mb-6 font-sans leading-3 shadow-primary drop-shadow-lg">${p.ssrInterpolate(n.firstTitle)} <span class="text-6xl md:text-[120px] leading-normal uppercase">${p.ssrInterpolate(n.secondTitle)}</span></h1><p class="text-3xl md:text-3xl text-shadow-outline text-white font-open">${p.ssrInterpolate(n.subtitle)}</p>`),r(p.ssrRenderComponent(Et,{text:e.value},null,s)),r("</div></section>")}}},Fi=Nn.setup;Nn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/HeroComponent.vue"),Fi?Fi(n,e):void 0};const Is={__name:"SelectionBarItem",__ssrInlineRender:!0,props:{bgColor:String,icon:String,text:String},setup(n){return(e,t,r,s)=>{t(`<div${p.ssrRenderAttrs(u.mergeProps({class:`hover:scale-105 hover:shadow-2xl cursor-pointer ease-in-out duration-300 flex flex-col
  justify-center items-center ${n.bgColor} p-5`},s))}><img${p.ssrRenderAttr("src",n.icon)} alt="" class="w-20 h-20"><p class="text-white text-lg">${p.ssrInterpolate(n.text)}</p></div>`)}}},Bi=Is.setup;Is.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/SelectionBarItem.vue"),Bi?Bi(n,e):void 0};const Dn={__name:"SelectionBar",__ssrInlineRender:!0,setup(n){const e=u.ref([{bgColor:"bg-secondary",icon:"drink.svg",text:"Festas"},{bgColor:"bg-accent",icon:"bus.svg",text:"Traslados"},{bgColor:"bg-secondary",icon:"boat.svg",text:"Passeios"},{bgColor:"bg-accent",icon:"beach.svg",text:"Praias"},{bgColor:"bg-secondary",icon:"dive.svg",text:"Mergulhos"},{bgColor:"bg-accent",icon:"food.svg",text:"Gastronomia"}]);return(t,r,s,i)=>{r(`<section${p.ssrRenderAttrs(u.mergeProps({class:"w-full h-auto md:h-44 bg-white flex justify-center"},i))}><div class="w-full grid grid-cols-3 md:grid-cols-6"><!--[-->`),p.ssrRenderList(e.value,o=>{r(p.ssrRenderComponent(Is,{bgColor:o.bgColor,icon:o.icon,text:o.text,key:o.text},null,s))}),r("<!--]--></div></section>")}}},qi=Dn.setup;Dn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/SelectionBar.vue"),qi?qi(n,e):void 0};const xs={__name:"TransferCard",__ssrInlineRender:!0,props:{image:String,alt:String,title:String,text:String,customCss:String,order:Boolean},setup(n){const e=u.ref("Saiba mais");return(t,r,s,i)=>{r(`<figure${p.ssrRenderAttrs(u.mergeProps({class:"flex flex-row max-w-[1000px] px-6 mx-auto mb-20 justify-between"},i))}><img${p.ssrRenderAttr("src",n.image)}${p.ssrRenderAttr("alt",n.alt)} class="${p.ssrRenderClass(` w-full md:w-1/3 object-cover object-bottom aspect-square drop-shadow-md w-[315px] h-[315px] ${n.order?"md:order-2":""}`)}"><figcaption class="${p.ssrRenderClass(`w-full md:w-2/3 md:px-10 flex flex-col justify-start items-start py-6 ${n.customCss}`)}"><h2 class="text-sans font-bold text-secondary text-3xl md:text-4xl mb-6">${p.ssrInterpolate(n.title)}</h2><p class="text-white text-lg mb-6">${p.ssrInterpolate(n.text)}</p>`),r(p.ssrRenderComponent(Et,{text:e.value},null,s)),r("</figcaption></figure>")}}},$i=xs.setup;xs.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/TransferCard.vue"),$i?$i(n,e):void 0};const kn={__name:"TransferSection",__ssrInlineRender:!0,setup(n){const e=u.ref([{image:"van-1.webp",alt:"Van na praia.",title:"Traslados e Passeios Personalizados",text:"Explore as maravilhas de Porto Seguro com nossos passeios exclusivos e traslados confort\xE1veis. Seu parceiro ideal em turismo, garantindo aventuras inesquec\xEDveis e seguran\xE7a em cada viagem!",customCss:"",order:!1},{image:"van-2.webp",alt:"Van na Praia do Espelho",title:"Explore o Cora\xE7\xE3o da Bahia com Estilo! ",text:"Porto Seguro espera por voc\xEA com suas praias deslumbrantes e hist\xF3ria rica. Desfrute de experi\xEAncias \xFAnicas com nossos tours especializados e servi\xE7os de traslado de primeira classe, projetados para proporcionar conforto e conveni\xEAncia em suas aventuras tropicais.",customCss:"md:pl-0 md:pr-20",order:!0},{image:"van-3.webp",alt:"turistas felizes dentro da Van",title:"Viva a Magia de Porto Seguro!",text:"Embarque em uma jornada extraordin\xE1ria pelos encantos naturais e culturais de Porto Seguro. Oferecemos itiner\xE1rios personalizados e servi\xE7os de qualidade para tornar cada momento de sua viagem memor\xE1vel e cheio de descobertas.",customCss:"",order:!1}]),t=u.ref("Fa\xE7a uma cota\xE7\xE3o");return(r,s,i,o)=>{s(`<section${p.ssrRenderAttrs(u.mergeProps({class:"w-full min-h-[500px] bg-primary py-20"},o))}><div class="container flex flex-col mx-auto"><header class="px-6 max-w-[1000px] mb-16 md:mb-28"><h1 class="font-sans text-3xl md:text-6xl text-accent font-bold mb-2 md:mb-5">Explore Porto Seguro com Conforto e Seguran\xE7a</h1><p class="text-secondary text-lg md:text-2xl">Traslados e Passeios Personalizados</p></header><!--[-->`),p.ssrRenderList(e.value,a=>{s(p.ssrRenderComponent(xs,{image:a.image,title:a.title,text:a.text,customCss:a.customCss,order:a.order,alt:a.alt,key:a.image},null,i))}),s('<!--]--><footer class="flex flex-col w-full max-w-[800px] px-6 md:mx-auto"><h2 class="text-accent text-3xl md:text-6xl font-bold mb-6 text-center md:text-left">Pronto para Descobrir Porto Seguro?</h2><p class="text-white text-lg md:text-xl mb-10">N\xE3o espere mais para planejar a viagem dos seus sonhos! Clique aqui e fa\xE7a j\xE1 a sua cota\xE7\xE3o de traslados via WhatsApp. R\xE1pido, f\xE1cil e seguro \u2013 seu Porto Seguro est\xE1 a apenas uma mensagem de dist\xE2ncia!</p>'),s(p.ssrRenderComponent(Et,{text:t.value},null,i)),s("</footer></div></section>")}}},Ui=kn.setup;kn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/TransferSection.vue"),Ui?Ui(n,e):void 0};const xe={__name:"FooterComponent",__ssrInlineRender:!0,props:{copyRight:String,firstTitle:String,secondTitle:String},setup(n){ht.useRouter();function e(){const i="https://www.instagram.com/essencia.bahiana";window.open(i,"_blank")}function t(){const i="https://www.facebook.com/profile.php?id=61555489870691&mibextid=9R9pXO";window.open(i,"_blank")}function r(){const o="https://wa.me/5511993271622";window.open(o,"_blank")}function s(){const i="mailto:contato@essenciabahiana.com.br";window.open(i,"_blank")}return(i,o,a,l)=>{const c=u.resolveComponent("q-btn");o(`<footer${p.ssrRenderAttrs(u.mergeProps({elevated:"",class:"bg-primary w-full text-light-gray"},l))}><div class="q-px-lg q-py-md"><div class="flex flex-wrap justify-between items-center"><div class="flex items-center"><img src="/logo.svg" alt="Logo Essencia Bahiana" class="h-12 mr-4 bg-white rounded-full"><div class="text-2xl font-bold font-sans text-accent">${p.ssrInterpolate(n.firstTitle)} <span class="uppercase text-3xl font-bold">${p.ssrInterpolate(n.secondTitle)}</span></div></div><div class="flex items-center mx-auto md:mx-0">`),o(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"fa-brands fa-instagram",class:"text-xl text-accent",onClick:e},null,a)),o(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"fa-brands fa-facebook-f",class:"text-xl text-accent",onClick:t},null,a)),o(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"fa-brands fa-whatsapp",class:"text-xl text-accent",onClick:r},null,a)),o(p.ssrRenderComponent(c,{flat:"",dense:"",round:"",icon:"email",class:"text-xl text-accent",onClick:s},null,a)),o(`</div></div><div class="text-center q-mt-md text-accent flex flex-col">${p.ssrInterpolate(n.copyRight)} <span class="cursor-pointer">Pol\xEDticas de Privacidade</span></div></div></footer>`)}}},ji=xe.setup;xe.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/FooterComponent.vue"),ji?ji(n,e):void 0};const On={__name:"ContactSection",__ssrInlineRender:!0,setup(n){pe.useQuasar();const e=u.ref(""),t=u.ref(""),r=u.ref(""),s=u.ref(""),i=u.ref(""),o=u.ref(null),a=u.ref(null),l=u.ref(null);return(c,h,d,f)=>{const m=u.resolveComponent("q-input"),_=u.resolveComponent("q-btn");h(`<div${p.ssrRenderAttrs(u.mergeProps({class:"contact-section bg-dark-page text-light-gray p-10",id:"contact"},f))}><div class="container mx-auto"><div class="text-center mb-10"><h2 class="text-6xl font-bold text-primary mb-2">Entre em Contato</h2><p class="text-secondary text-xl">Estamos prontos para atend\xEA-lo!</p></div><div class="grid grid-cols-1 gap-8"><div class="contact-info">`),h(p.ssrRenderComponent(Et,{text:"Converse pelo WhatsApp"},null,d)),h('</div><div class="contact-form"><p class="text-accent">Ou preencha o formul\xE1rio abaixo:</p><form>'),h(p.ssrRenderComponent(m,{filled:"",modelValue:e.value,"onUpdate:modelValue":v=>e.value=v,ref_key:"nameRef",ref:o,rules:[v=>!!v||"Nome \xE9 obrigat\xF3rio."],label:"Nome",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(m,{filled:"",modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,label:"E-mail",class:"mb-6",color:"primary"},null,d)),h(p.ssrRenderComponent(m,{filled:"",modelValue:s.value,"onUpdate:modelValue":v=>s.value=v,label:"Telefone",class:"mb-6",color:"primary"},null,d)),h(p.ssrRenderComponent(m,{filled:"",modelValue:t.value,"onUpdate:modelValue":v=>t.value=v,ref_key:"subjectRef",ref:a,rules:[v=>!!v||"Assunto \xE9 obrigat\xF3rio."],label:"Assunto",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(m,{filled:"",modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,ref_key:"messageRef",ref:l,rules:[v=>!!v||"Mensagem \xE9 obrigat\xF3rio."],label:"Mensagem",type:"textarea",class:"mb-4",color:"primary"},null,d)),h(p.ssrRenderComponent(_,{label:"Enviar Mensagem",type:"submit",color:"secondary",class:"w-full"},null,d)),h("</form></div></div></div></div>")}}},zi=On.setup;On.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/ContactSection.vue"),zi?zi(n,e):void 0};const Rs={__name:"IndexPage",__ssrInlineRender:!0,setup(n){const e=u.ref("Ess\xEAncia"),t=u.ref("Bahiana"),r=u.ref("Descubra a Magia e a Cultura \xDAnica da Terra do Descobrimento"),s=u.ref("/hero.webp"),i=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return pe.useMeta({title:"Ess\xEAncia BAHIANA",meta:{description:{name:"description",content:"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:"Porto Seguro, Pontos tur\xEDsticos em Porto Seguro, Passeios em Porto Seguro, Traslados em Porto Seguro, Turismo na Bahia, Viagens pela Bahia, Melhores experi\xEAncias em Porto Seguro, Roteiros de viagem em Porto Seguro, Atra\xE7\xF5es tur\xEDsticas na regi\xE3o, Servi\xE7o de transporte em Porto Seguro, Roteiro de viagem personalizado, Dicas de viagem para Porto Seguro, Destinos na Bahia, Planejamento de viagem, Experi\xEAncias memor\xE1veis na Bahia."},ogTitle:{property:"og:title",template(){return"Ess\xEAncia BAHIANA"}},ogDescription:{property:"og:description",template(){return"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."}},ogImage:{property:"og:image",template(){return"https://essenciabahiana.com.br/hero.webp"}},twitterTitle:{property:"twitter:title",template(){return"Ess\xEAncia BAHIANA"}},twitterDescription:{property:"twitter:description",template(){return"Descubra o melhor de Porto Seguro com a Ess\xEAncia Bahiana. Oferecemos passeios personalizados e traslados confort\xE1veis para uma experi\xEAncia de viagem aut\xEAntica e memor\xE1vel na Bahia."}},twitterImage:{property:"twitter:image",template(){return"https://essenciabahiana.com.br/hero.webp"}}}}),(o,a,l,c)=>{const h=u.resolveComponent("q-page");a(p.ssrRenderComponent(h,u.mergeProps({class:"flex flex-center w-full"},c),{default:u.withCtx((d,f,m,_)=>{if(f)f(p.ssrRenderComponent(Nn,{image:s.value,firstTitle:e.value,secondTitle:t.value,subtitle:r.value},null,m,_)),f(p.ssrRenderComponent(Dn,null,null,m,_)),f(p.ssrRenderComponent(kn,null,null,m,_)),f(p.ssrRenderComponent(On,null,null,m,_)),f(p.ssrRenderComponent(xe,{firstTitle:e.value,secondTitle:t.value,copyRight:i.value},null,m,_));else return[u.createVNode(Nn,{image:s.value,firstTitle:e.value,secondTitle:t.value,subtitle:r.value},null,8,["image","firstTitle","secondTitle","subtitle"]),u.createVNode(Dn),u.createVNode(kn),u.createVNode(On),u.createVNode(xe,{firstTitle:e.value,secondTitle:t.value,copyRight:i.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},l))}}},Hi=Rs.setup;Rs.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/IndexPage.vue"),Hi?Hi(n,e):void 0};var zc=Object.freeze(Object.defineProperty({__proto__:null,default:Rs},Symbol.toStringTag,{value:"Module"}));const Ln={__name:"FaqSection",__ssrInlineRender:!0,props:{faqs:{question:String,answer:String}},setup(n){const e=n;return(t,r,s,i)=>{const o=u.resolveComponent("q-expansion-item"),a=u.resolveComponent("q-card"),l=u.resolveComponent("q-card-section");r(`<div${p.ssrRenderAttrs(u.mergeProps({class:"faq-container py-8"},i))}><div class="faq-title text-2xl font-bold mb-4 text-primary"> Perguntas Frequentes (FAQs) </div><div class="faq-content"><!--[-->`),p.ssrRenderList(e.faqs,(c,h)=>{r('<div class="faq-item mb-4 text-primary">'),r(p.ssrRenderComponent(o,{"expand-separator":"",label:c.question},{default:u.withCtx((d,f,m,_)=>{if(f)f(p.ssrRenderComponent(a,null,{default:u.withCtx((v,I,P,L)=>{if(I)I(p.ssrRenderComponent(l,{class:"text-secondary"},{default:u.withCtx((C,ue,ee,te)=>{if(ue)ue(`${p.ssrInterpolate(c.answer)}`);else return[u.createTextVNode(u.toDisplayString(c.answer),1)]}),_:2},P,L));else return[u.createVNode(l,{class:"text-secondary"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(c.answer),1)]),_:2},1024)]}),_:2},m,_));else return[u.createVNode(a,null,{default:u.withCtx(()=>[u.createVNode(l,{class:"text-secondary"},{default:u.withCtx(()=>[u.createTextVNode(u.toDisplayString(c.answer),1)]),_:2},1024)]),_:2},1024)]}),_:2},s)),r("</div>")}),r("<!--]--></div></div>")}}},Gi=Ln.setup;Ln.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/FaqSection.vue"),Gi?Gi(n,e):void 0};const Ss={__name:"PrivacyPolicy",__ssrInlineRender:!0,setup(n){const e=u.ref([{question:"Como o Ess\xEAncia Bahiana utiliza o Google AdSense para coletar dados?",answer:"O Ess\xEAncia Bahiana utiliza o Google AdSense para exibir an\xFAncios que s\xE3o relevantes para os usu\xE1rios. O Google AdSense utiliza cookies e outras tecnologias de rastreamento para coletar informa\xE7\xF5es sobre as prefer\xEAncias dos usu\xE1rios e o tipo de conte\xFAdo que acessam. Essas informa\xE7\xF5es s\xE3o usadas para fornecer an\xFAncios direcionados, melhorando assim a experi\xEAncia do usu\xE1rio e permitindo a monetiza\xE7\xE3o do site.",open:!1},{question:"Quais s\xE3o os direitos do usu\xE1rio em rela\xE7\xE3o aos dados coletados pelo Ess\xEAncia Bahiana?",answer:"Usu\xE1rios do Ess\xEAncia Bahiana t\xEAm o direito de acessar, corrigir ou excluir seus dados pessoais a qualquer momento. Al\xE9m disso, os usu\xE1rios t\xEAm o direito de se opor ou restringir o processamento de seus dados e o direito \xE0 portabilidade de dados. Para exercer esses direitos, os usu\xE1rios podem entrar em contato diretamente com o Ess\xEAncia Bahiana atrav\xE9s dos canais de suporte fornecidos.",open:!1},{question:"Como posso gerenciar minhas prefer\xEAncias de cookies no Ess\xEAncia Bahiana?",answer:"Os usu\xE1rios podem gerenciar suas prefer\xEAncias de cookies nas configura\xE7\xF5es do navegador. Al\xE9m disso, o Ess\xEAncia Bahiana fornece informa\xE7\xF5es e op\xE7\xF5es para gerenciar prefer\xEAncias de cookies diretamente no site, permitindo que os usu\xE1rios escolham aceitar, recusar ou personalizar o uso de cookies conforme necess\xE1rio.",open:!1},{question:"Que medidas de seguran\xE7a o Ess\xEAncia Bahiana implementa para proteger os dados dos usu\xE1rios?",answer:"O Ess\xEAncia Bahiana implementa v\xE1rias medidas de seguran\xE7a para proteger os dados dos usu\xE1rios, incluindo criptografia de dados, firewalls e protocolos de seguran\xE7a para prevenir o acesso n\xE3o autorizado. Al\xE9m disso, realizamos treinamentos regulares de seguran\xE7a para nossa equipe e mantemos pol\xEDticas rigorosas para garantir a prote\xE7\xE3o e a privacidade dos dados dos usu\xE1rios.",open:!1},{question:"Como o Ess\xEAncia Bahiana lida com a privacidade das crian\xE7as?",answer:"O Ess\xEAncia Bahiana leva a privacidade das crian\xE7as a s\xE9rio e est\xE1 em conformidade com a Lei de Prote\xE7\xE3o \xE0 Privacidade Online de Crian\xE7as (COPPA). N\xE3o coletamos intencionalmente informa\xE7\xF5es de crian\xE7as menores de 13 anos. Se tivermos conhecimento de que informa\xE7\xF5es foram coletadas de uma crian\xE7a menor de 13 anos, tomaremos medidas imediatas para excluir tais informa\xE7\xF5es.",open:!1},{question:"O Ess\xEAncia Bahiana compartilha informa\xE7\xF5es com outros pa\xEDses?",answer:"O Ess\xEAncia Bahiana pode transferir informa\xE7\xF5es para pa\xEDses fora do Brasil, especialmente em rela\xE7\xE3o \xE0 integra\xE7\xE3o com o Google AdSense. No entanto, asseguramos que todas as transfer\xEAncias de dados s\xE3o realizadas em conformidade com as leis de prote\xE7\xE3o de dados aplic\xE1veis e que medidas de seguran\xE7a adequadas est\xE3o em vigor para proteger os dados durante a transfer\xEAncia e em seu destino final.",open:!1}]),t=u.ref("Ess\xEAncia"),r=u.ref("Bahiana"),s=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return(i,o,a,l)=>{const c=u.resolveComponent("q-page");o(p.ssrRenderComponent(c,u.mergeProps({class:"privacy-policy"},l),{default:u.withCtx((h,d,f,m)=>{if(d)d(`<div class="mt-48 container mx-auto"${m}><h1 class="text-6xl font-bold font-sans text-primary mb-10"${m}>Pol\xEDtica de Privacidade do Ess\xEAncia Bahiana</h1><p class="text-secondary text-lg mb-6"${m}>Saiba como o Ess\xEAncia Bahiana protege sua privacidade e dados pessoais, especialmente em conex\xE3o com o Google AdSense.</p><p class="text-secondary text-lg mb-6"${m}>Bem-vindo ao Ess\xEAncia Bahiana! Prezamos pela transpar\xEAncia e compromisso com a seguran\xE7a dos seus dados pessoais. Esta Pol\xEDtica de Privacidade explica como coletamos, utilizamos e compartilhamos informa\xE7\xF5es no \xE2mbito de nossos servi\xE7os, incluindo, mas n\xE3o se limitando \xE0 integra\xE7\xE3o com o Google AdSense.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Introdu\xE7\xE3o \xE0 Pol\xEDtica de Privacidade</h2><p class="text-secondary text-lg mb-6"${m}>A privacidade dos nossos usu\xE1rios \xE9 de extrema import\xE2ncia para n\xF3s. O Ess\xEAncia Bahiana est\xE1 comprometido em proteger as informa\xE7\xF5es pessoais coletadas quando voc\xEA acessa nosso conte\xFAdo e servi\xE7os. Esta se\xE7\xE3o esclarece o prop\xF3sito da nossa pol\xEDtica e a import\xE2ncia de sua privacidade para n\xF3s.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Coleta de Informa\xE7\xF5es</h2><p class="text-secondary text-lg mb-6"${m}>Entender quais informa\xE7\xF5es s\xE3o coletadas e como s\xE3o coletadas \xE9 fundamental. Aqui, explicamos os tipos de dados que o Ess\xEAncia Bahiana coleta, os m\xE9todos de coleta e como o consentimento do usu\xE1rio \xE9 obtido.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Uso das Informa\xE7\xF5es Coletadas</h2><p class="text-secondary text-lg mb-6"${m}>As informa\xE7\xF5es coletadas s\xE3o utilizadas para melhorar continuamente nossos servi\xE7os, personalizar a experi\xEAncia do usu\xE1rio e cumprir obriga\xE7\xF5es legais. Este segmento aborda detalhadamente esses aspectos.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Integra\xE7\xE3o com o Google AdSense</h2><p class="text-secondary text-lg mb-6"${m}>O Google AdSense permite monetizar o conte\xFAdo do site atrav\xE9s de an\xFAncios. Nesta se\xE7\xE3o, discutiremos como o Ess\xEAncia Bahiana integra o AdSense em suas opera\xE7\xF5es e como isso afeta a coleta e o uso de dados.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Compartilhamento e Divulga\xE7\xE3o de Informa\xE7\xF5es</h2><p class="text-secondary text-lg mb-6"${m}>\xC9 importante entender em que circunst\xE2ncias suas informa\xE7\xF5es podem ser compartilhadas. Aqui, explicamos quando e por que suas informa\xE7\xF5es podem ser divulgadas, seja para parceiros terceirizados ou por requisitos legais.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Medidas de Seguran\xE7a de Dados</h2><p class="text-secondary text-lg mb-6"${m}>A seguran\xE7a dos seus dados \xE9 uma prioridade. Neste segmento, abordamos as medidas de seguran\xE7a implementadas para proteger seus dados, incluindo criptografia e protocolos de seguran\xE7a.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Direitos do Usu\xE1rio e Controle de Dados</h2><p class="text-secondary text-lg mb-6"${m}>Voc\xEA tem direitos significativos em rela\xE7\xE3o aos seus dados pessoais. Aqui, explicamos como voc\xEA pode acessar, corrigir ou excluir suas informa\xE7\xF5es pessoais e quais s\xE3o seus direitos de portabilidade de dados.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Cookies e Tecnologias de Rastreamento</h2><p class="text-secondary text-lg mb-6"${m}>Cookies e outras tecnologias de rastreamento desempenham um papel crucial na personaliza\xE7\xE3o da experi\xEAncia online. Neste segmento, explicamos como essas tecnologias s\xE3o utilizadas no Ess\xEAncia Bahiana e como voc\xEA pode gerenciar suas prefer\xEAncias.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Privacidade de Crian\xE7as</h2><p class="text-secondary text-lg mb-6"${m}>A prote\xE7\xE3o de crian\xE7as online \xE9 extremamente importante. Aqui, discutimos as pol\xEDticas do Ess\xEAncia Bahiana em rela\xE7\xE3o \xE0 coleta e uso de dados de crian\xE7as, em conformidade com a COPPA.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Transfer\xEAncias Internacionais de Dados</h2><p class="text-secondary text-lg mb-6"${m}>Como as informa\xE7\xF5es podem ser transferidas internacionalmente, \xE9 crucial entender as pol\xEDticas e salvaguardas em vigor. Esta se\xE7\xE3o detalha como o Ess\xEAncia Bahiana lida com transfer\xEAncias de dados transfronteiri\xE7as.</p><h2 class="font-bold font-sans text-primary text-3xl"${m}>Websites e Servi\xE7os de Terceiros</h2><p class="text-secondary text-lg mb-6"${m}>O Ess\xEAncia Bahiana pode conter links para sites externos. Aqui, explicamos como interagimos com esses sites de terceiros e a import\xE2ncia de revisar suas pol\xEDticas de privacidade.</p>`),d(p.ssrRenderComponent(Ln,{faqs:e.value},null,f,m)),d("</div>"),d(p.ssrRenderComponent(xe,{firstTitle:t.value,secondTitle:r.value,copyRight:s.value},null,f,m));else return[u.createVNode("div",{class:"mt-48 container mx-auto"},[u.createVNode("h1",{class:"text-6xl font-bold font-sans text-primary mb-10"},"Pol\xEDtica de Privacidade do Ess\xEAncia Bahiana"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Saiba como o Ess\xEAncia Bahiana protege sua privacidade e dados pessoais, especialmente em conex\xE3o com o Google AdSense."),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Bem-vindo ao Ess\xEAncia Bahiana! Prezamos pela transpar\xEAncia e compromisso com a seguran\xE7a dos seus dados pessoais. Esta Pol\xEDtica de Privacidade explica como coletamos, utilizamos e compartilhamos informa\xE7\xF5es no \xE2mbito de nossos servi\xE7os, incluindo, mas n\xE3o se limitando \xE0 integra\xE7\xE3o com o Google AdSense."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Introdu\xE7\xE3o \xE0 Pol\xEDtica de Privacidade"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"A privacidade dos nossos usu\xE1rios \xE9 de extrema import\xE2ncia para n\xF3s. O Ess\xEAncia Bahiana est\xE1 comprometido em proteger as informa\xE7\xF5es pessoais coletadas quando voc\xEA acessa nosso conte\xFAdo e servi\xE7os. Esta se\xE7\xE3o esclarece o prop\xF3sito da nossa pol\xEDtica e a import\xE2ncia de sua privacidade para n\xF3s."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Coleta de Informa\xE7\xF5es"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Entender quais informa\xE7\xF5es s\xE3o coletadas e como s\xE3o coletadas \xE9 fundamental. Aqui, explicamos os tipos de dados que o Ess\xEAncia Bahiana coleta, os m\xE9todos de coleta e como o consentimento do usu\xE1rio \xE9 obtido."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Uso das Informa\xE7\xF5es Coletadas"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"As informa\xE7\xF5es coletadas s\xE3o utilizadas para melhorar continuamente nossos servi\xE7os, personalizar a experi\xEAncia do usu\xE1rio e cumprir obriga\xE7\xF5es legais. Este segmento aborda detalhadamente esses aspectos."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Integra\xE7\xE3o com o Google AdSense"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"O Google AdSense permite monetizar o conte\xFAdo do site atrav\xE9s de an\xFAncios. Nesta se\xE7\xE3o, discutiremos como o Ess\xEAncia Bahiana integra o AdSense em suas opera\xE7\xF5es e como isso afeta a coleta e o uso de dados."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Compartilhamento e Divulga\xE7\xE3o de Informa\xE7\xF5es"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"\xC9 importante entender em que circunst\xE2ncias suas informa\xE7\xF5es podem ser compartilhadas. Aqui, explicamos quando e por que suas informa\xE7\xF5es podem ser divulgadas, seja para parceiros terceirizados ou por requisitos legais."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Medidas de Seguran\xE7a de Dados"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"A seguran\xE7a dos seus dados \xE9 uma prioridade. Neste segmento, abordamos as medidas de seguran\xE7a implementadas para proteger seus dados, incluindo criptografia e protocolos de seguran\xE7a."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Direitos do Usu\xE1rio e Controle de Dados"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Voc\xEA tem direitos significativos em rela\xE7\xE3o aos seus dados pessoais. Aqui, explicamos como voc\xEA pode acessar, corrigir ou excluir suas informa\xE7\xF5es pessoais e quais s\xE3o seus direitos de portabilidade de dados."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Cookies e Tecnologias de Rastreamento"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Cookies e outras tecnologias de rastreamento desempenham um papel crucial na personaliza\xE7\xE3o da experi\xEAncia online. Neste segmento, explicamos como essas tecnologias s\xE3o utilizadas no Ess\xEAncia Bahiana e como voc\xEA pode gerenciar suas prefer\xEAncias."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Privacidade de Crian\xE7as"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"A prote\xE7\xE3o de crian\xE7as online \xE9 extremamente importante. Aqui, discutimos as pol\xEDticas do Ess\xEAncia Bahiana em rela\xE7\xE3o \xE0 coleta e uso de dados de crian\xE7as, em conformidade com a COPPA."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Transfer\xEAncias Internacionais de Dados"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"Como as informa\xE7\xF5es podem ser transferidas internacionalmente, \xE9 crucial entender as pol\xEDticas e salvaguardas em vigor. Esta se\xE7\xE3o detalha como o Ess\xEAncia Bahiana lida com transfer\xEAncias de dados transfronteiri\xE7as."),u.createVNode("h2",{class:"font-bold font-sans text-primary text-3xl"},"Websites e Servi\xE7os de Terceiros"),u.createVNode("p",{class:"text-secondary text-lg mb-6"},"O Ess\xEAncia Bahiana pode conter links para sites externos. Aqui, explicamos como interagimos com esses sites de terceiros e a import\xE2ncia de revisar suas pol\xEDticas de privacidade."),u.createVNode(Ln,{faqs:e.value},null,8,["faqs"])]),u.createVNode(xe,{firstTitle:t.value,secondTitle:r.value,copyRight:s.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},a))}}},Ki=Ss.setup;Ss.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/PrivacyPolicy.vue"),Ki?Ki(n,e):void 0};var Hc=Object.freeze(Object.defineProperty({__proto__:null,default:Ss},Symbol.toStringTag,{value:"Module"}));const Ne={__name:"ArticleBlogHomeHero",__ssrInlineRender:!0,props:{article:{title:String,imageURL:String,excerpt:String,containerStyle:String,titleStyle:String,excerptStyle:String,imageStyle:String}},setup(n){return(e,t,r,s)=>{const i=u.resolveComponent("q-img");t(`<article${p.ssrRenderAttrs(u.mergeProps({class:`w-full pb-6 md:pb-0 cursor-pointer ${n.article.containerStyle}`},s))}><figure class="relative figure-hover"><div class="relative w-full h-full overflow-hidden">`),t(p.ssrRenderComponent(i,{src:n.article.imageURL,class:`relative object-cover object-center relative z-10 image-hover ease-in-out duration-500 ${n.article.imageStyle}`,alt:n.article.title},null,r)),t(`</div><figcaption class="z-20 md:absolute bottom-0 py-3 md:p-6"><header><h1 class="${p.ssrRenderClass(`text-2xl md:text-shadow-outline font-bold font-sans ${n.article.titleStyle} md:text-white`)}">${p.ssrInterpolate(n.article.title)}</h1><p class="${p.ssrRenderClass(`text-lg md:text-white md:text-shadow-outline ${n.article.excerptStyle}`)}">${p.ssrInterpolate(n.article.excerpt)}</p></header></figcaption></figure></article>`)}}},Qi=Ne.setup;Ne.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/ArticleBlogHomeHero.vue"),Qi?Qi(n,e):void 0};const Mn={__name:"BlogHero",__ssrInlineRender:!0,props:{dataHero:{id:String,title:String,imageURL:String,excerpt:String,containerStyle:String,imageStyle:String,titleStyle:String,excerptStyle:String}},setup(n){const e=n,t=u.ref([]);return u.onMounted(()=>{t.value=e.dataHero,t.value[0].containerStyle="md:pr-6",t.value[0].imageStyle=" md:h-[600px]",t.value[0].titleStyle="md:text-5xl",t.value[0].excerptStyle="md:text-lg",t.value[1].containerStyle="md:pb-3",t.value[1].imageStyle="md:h-[288px]",t.value[1].titleStyle="md:text-2xl",t.value[1].excerptStyle="md:text-md",t.value[2].containerStyle="md:pt-3",t.value[2].imageStyle="md:h-[288px]",t.value[2].titleStyle="md:text-2xl",t.value[2].excerptStyle="md:text-md"}),(r,s,i,o)=>{const a=u.resolveComponent("router-link");t.value.length>0?(s(`<div${p.ssrRenderAttrs(u.mergeProps({class:"mx-auto container flex flex-col mb-10 md:flex-row md:h-[600px]"},o))}><div class="w-full md:w-7/12 px-6 md:px-0 box-border flex md:h-[600px]">`),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${t.value[0].id}`,class:"w-full"},{default:u.withCtx((l,c,h,d)=>{if(c)c(p.ssrRenderComponent(Ne,{article:t.value[0]},null,h,d));else return[u.createVNode(Ne,{article:t.value[0]},null,8,["article"])]}),_:1},i)),s('</div><div class="w-full md:w-5/12 px-6 md:px-0 mb-10 md:mb-0 box-border md:justify-between flex flex-col md:h-[unset]">'),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${t.value[1].id}`},{default:u.withCtx((l,c,h,d)=>{if(c)c(p.ssrRenderComponent(Ne,{article:t.value[1]},null,h,d));else return[u.createVNode(Ne,{article:t.value[1]},null,8,["article"])]}),_:1},i)),s(p.ssrRenderComponent(a,{to:`/blog/o-que-fazer/${t.value[2].id}`},{default:u.withCtx((l,c,h,d)=>{if(c)c(p.ssrRenderComponent(Ne,{article:t.value[2]},null,h,d));else return[u.createVNode(Ne,{article:t.value[2]},null,8,["article"])]}),_:1},i)),s("</div></div>")):s("<!---->")}}},Wi=Mn.setup;Mn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/BlogHero.vue"),Wi?Wi(n,e):void 0};const Fn={__name:"ArticleBlogHomeBody",__ssrInlineRender:!0,props:{article:{title:String,imageURL:String,excerpt:String,id:String}},setup(n){return(e,t,r,s)=>{const i=u.resolveComponent("router-link"),o=u.resolveComponent("q-img");t(p.ssrRenderComponent(i,u.mergeProps({to:`/blog/o-que-fazer/${n.article.id}`,class:"w-full"},s),{default:u.withCtx((a,l,c,h)=>{if(l)l(`<article class="w-full mb-10 cursor-pointer px-6 md:px-0 border-b pb-6"${h}><figure class="flex"${h}><div class="w-full md:w-1/3 mb-5 md:mb-0"${h}>`),l(p.ssrRenderComponent(o,{src:n.article.imageURL,class:"w-full object-cover h-[250px]",alt:n.article.title},null,c,h)),l(`</div><figcaption class="w-full md:w-2/3 flex flex-col justify-end md:pl-10"${h}><header${h}><h2 class="text-2xl font-bold font-sans"${h}>${p.ssrInterpolate(n.article.title)}</h2><p class="text-lg"${h}>${p.ssrInterpolate(n.article.excerpt)}</p></header></figcaption></figure></article>`);else return[u.createVNode("article",{class:"w-full mb-10 cursor-pointer px-6 md:px-0 border-b pb-6"},[u.createVNode("figure",{class:"flex"},[u.createVNode("div",{class:"w-full md:w-1/3 mb-5 md:mb-0"},[u.createVNode(o,{src:n.article.imageURL,class:"w-full object-cover h-[250px]",alt:n.article.title},null,8,["src","alt"])]),u.createVNode("figcaption",{class:"w-full md:w-2/3 flex flex-col justify-end md:pl-10"},[u.createVNode("header",null,[u.createVNode("h2",{class:"text-2xl font-bold font-sans"},u.toDisplayString(n.article.title),1),u.createVNode("p",{class:"text-lg"},u.toDisplayString(n.article.excerpt),1)])])])])]}),_:1},r))}}},Yi=Fn.setup;Fn.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/blog/ArticleBlogHomeBody.vue"),Yi?Yi(n,e):void 0};const Gc={apiKey:"AIzaSyAD7kXLz2-aeXM8WV0Y8_dB3qhB46ZifJo",authDomain:"essencia-bahiana.firebaseapp.com",databaseURL:"https://essencia-bahiana-default-rtdb.firebaseio.com",projectId:"essencia-bahiana",storageBucket:"essencia-bahiana.appspot.com",messagingSenderId:"467804101964",appId:"1:467804101964:web:dd8538419c9232aa1703e9",measurementId:"G-9BP1S8J757"},Cs=Cc.initializeApp(Gc);Pc.getFunctions(Cs);bc.getAuth(Cs);const bs=zt.getFirestore(Cs),dt={__name:"InstagramFeed",__ssrInlineRender:!0,setup(n){const e=u.ref([]),t=u.ref([]);u.onMounted(async()=>{try{const i=zt.doc(bs,"configuration","instagramToken"),o=await zt.getDoc(i);if(o.exists()){const l=o.data().token,h=await fetch(`https://graph.instagram.com/me/media?fields=id,caption,media_url&access_token=${l}&limit=${1}`);if(!h.ok){console.error(`Erro na API: ${h.status} ${h.statusText}`);const _=await h.json();console.error(_);return}const d=await h.json();t.value=d.data;const f=t.value.map(async _=>{const v=await r(_.media_url);return{..._,type:v}}),m=await Promise.all(f);e.value=m}else console.error("Documento do token n\xE3o encontrado.")}catch(i){console.error("Erro ao carregar o feed do Instagram ou ao acessar o Firestore:",i)}});async function r(i){return(await fetch(i,{method:"HEAD"})).headers.get("Content-Type")}function s(){const i="https://www.instagram.com/essencia.bahiana";window.open(i,"_blank")}return(i,o,a,l)=>{const c=u.resolveComponent("q-img");e.value.length>0?(o(`<div${p.ssrRenderAttrs(u.mergeProps({class:"mx-auto max-w-full px-5"},l))}><div class="grid grid-cols-1 gap-4"><p class="text-lg font-bold font-sans">Confira o post mais recente.</p>`),o(p.ssrRenderComponent(c,{class:"cursor-pointer",src:"/insta-logo-text.webp",alt:"Logo instagram com texto.",onClick:s},null,a)),o("<!--[-->"),p.ssrRenderList(e.value,h=>{o('<div class="instagram-post flex flex-col h-auto"><div class="relative pb-1/1 min-h-[300px]">'),h.type&&h.type.startsWith("image")?o(`<img${p.ssrRenderAttr("src",h.media_url)}${p.ssrRenderAttr("alt",h.caption)} class="absolute object-cover w-full min-h-[200px] h-full rounded-lg">`):o("<!---->"),h.type&&h.type.startsWith("video")?o(`<video controls class="absolute object-cover w-full h-full min-h-[300px] rounded-lg"><source${p.ssrRenderAttr("src",h.media_url)}${p.ssrRenderAttr("type",h.type)}></video>`):o("<!---->"),o(`</div><p class="mt-2 text-sm text-gray-600">${p.ssrInterpolate(h.caption)}</p></div>`)}),o("<!--]--></div></div>")):o("<!---->")}}},Xi=dt.setup;dt.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/components/InstagramFeed.vue"),Xi?Xi(n,e):void 0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Kc=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},da={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(t[h],t[d],t[f],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ha(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Kc(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const d=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new Qc;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Qc extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wc=function(n){const e=ha(n);return da.encodeByteArray(e,!0)},fa=function(n){return Wc(n).replace(/\./g,"")},Yc=function(n){try{return da.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=()=>Xc().__FIREBASE_DEFAULTS__,Zc=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eu=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Yc(n[1]);return e&&JSON.parse(e)},tu=()=>{try{return Jc()||Zc()||eu()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nu(){var n;const e=(n=tu())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ru(){return!nu()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ma(){try{return typeof indexedDB=="object"}catch{return!1}}function su(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="FirebaseError";class wt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=iu,Object.setPrototypeOf(this,wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pa.prototype.create)}}class pa{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ou(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new wt(s,a,r)}}function ou(n,e){return n.replace(au,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const au=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(n){return n&&n._delegate?n._delegate:n}class $n{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(V||(V={}));const lu={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},cu=V.INFO,uu={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},hu=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=uu[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ga{constructor(e){this.name=e,this._logLevel=cu,this._logHandler=hu,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in V))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lu[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...e),this._logHandler(this,V.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...e),this._logHandler(this,V.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,V.INFO,...e),this._logHandler(this,V.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,V.WARN,...e),this._logHandler(this,V.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...e),this._logHandler(this,V.ERROR,...e)}}const du=(n,e)=>e.some(t=>n instanceof t);let Ji,Zi;function fu(){return Ji||(Ji=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mu(){return Zi||(Zi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _a=new WeakMap,Kr=new WeakMap,ya=new WeakMap,Pr=new WeakMap,Ps=new WeakMap;function pu(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Oe(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&_a.set(t,n)}).catch(()=>{}),Ps.set(e,n),e}function gu(n){if(Kr.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Kr.set(n,e)}let Qr={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kr.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ya.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oe(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _u(n){Qr=n(Qr)}function yu(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Vr(this),e,...t);return ya.set(r,e.sort?e.sort():[e]),Oe(r)}:mu().includes(n)?function(...e){return n.apply(Vr(this),e),Oe(_a.get(this))}:function(...e){return Oe(n.apply(Vr(this),e))}}function vu(n){return typeof n=="function"?yu(n):(n instanceof IDBTransaction&&gu(n),du(n,fu())?new Proxy(n,Qr):n)}function Oe(n){if(n instanceof IDBRequest)return pu(n);if(Pr.has(n))return Pr.get(n);const e=vu(n);return e!==n&&(Pr.set(n,e),Ps.set(e,n)),e}const Vr=n=>Ps.get(n);function Eu(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=Oe(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Oe(o.result),l.oldVersion,l.newVersion,Oe(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const wu=["get","getKey","getAll","getAllKeys","count"],Tu=["put","add","delete","clear"],Nr=new Map;function eo(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nr.get(e))return Nr.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Tu.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||wu.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return Nr.set(e,i),i}_u(n=>({...n,get:(e,t,r)=>eo(e,t)||n.get(e,t,r),has:(e,t)=>!!eo(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Iu(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Iu(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wr="@firebase/app",to="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We=new ga("@firebase/app"),xu="@firebase/app-compat",Ru="@firebase/analytics-compat",Su="@firebase/analytics",Cu="@firebase/app-check-compat",bu="@firebase/app-check",Pu="@firebase/auth",Vu="@firebase/auth-compat",Nu="@firebase/database",Du="@firebase/database-compat",ku="@firebase/functions",Ou="@firebase/functions-compat",Lu="@firebase/installations",Mu="@firebase/installations-compat",Fu="@firebase/messaging",Bu="@firebase/messaging-compat",qu="@firebase/performance",$u="@firebase/performance-compat",Uu="@firebase/remote-config",ju="@firebase/remote-config-compat",zu="@firebase/storage",Hu="@firebase/storage-compat",Gu="@firebase/firestore",Ku="@firebase/firestore-compat",Qu="firebase",Wu="10.7.2",Yu={[Wr]:"fire-core",[xu]:"fire-core-compat",[Su]:"fire-analytics",[Ru]:"fire-analytics-compat",[bu]:"fire-app-check",[Cu]:"fire-app-check-compat",[Pu]:"fire-auth",[Vu]:"fire-auth-compat",[Nu]:"fire-rtdb",[Du]:"fire-rtdb-compat",[ku]:"fire-fn",[Ou]:"fire-fn-compat",[Lu]:"fire-iid",[Mu]:"fire-iid-compat",[Fu]:"fire-fcm",[Bu]:"fire-fcm-compat",[qu]:"fire-perf",[$u]:"fire-perf-compat",[Uu]:"fire-rc",[ju]:"fire-rc-compat",[zu]:"fire-gcs",[Hu]:"fire-gcs-compat",[Gu]:"fire-fst",[Ku]:"fire-fst-compat","fire-js":"fire-js",[Qu]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Map,no=new Map;function Ju(n,e){try{n.container.addComponent(e)}catch(t){We.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Un(n){const e=n.name;if(no.has(e))return We.debug(`There were multiple attempts to register component ${e}.`),!1;no.set(e,n);for(const t of Xu.values())Ju(t,n);return!0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Vs=new pa("app","Firebase",Zu);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=Wu;function Mt(n,e,t){var r;let s=(r=Yu[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),We.warn(a.join(" "));return}Un(new $n(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="firebase-heartbeat-database",nh=1,Ht="firebase-heartbeat-store";let Dr=null;function va(){return Dr||(Dr=Eu(th,nh,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ht)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vs.create("idb-open",{originalErrorMessage:n.message})})),Dr}async function rh(n){try{return await(await va()).transaction(Ht).objectStore(Ht).get(Ea(n))}catch(e){if(e instanceof wt)We.warn(e.message);else{const t=Vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});We.warn(t.message)}}}async function ro(n,e){try{const r=(await va()).transaction(Ht,"readwrite");await r.objectStore(Ht).put(e,Ea(n)),await r.done}catch(t){if(t instanceof wt)We.warn(t.message);else{const r=Vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});We.warn(r.message)}}}function Ea(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=1024,ih=30*24*60*60*1e3;class oh{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=so();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ih}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=so(),{heartbeatsToSend:r,unsentEntries:s}=ah(this._heartbeatsCache.heartbeats),i=fa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function so(){return new Date().toISOString().substring(0,10)}function ah(n,e=sh){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),io(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),io(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class lh{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ma()?su().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rh(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ro(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ro(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function io(n){return fa(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(n){Un(new $n("platform-logger",e=>new Au(e),"PRIVATE")),Un(new $n("heartbeat",e=>new oh(e),"PRIVATE")),Mt(Wr,to,n),Mt(Wr,to,"esm2017"),Mt("fire-js","")}ch("");var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E,Ns=Ns||{},x=uh||self;function tr(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function on(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function hh(n){return Object.prototype.hasOwnProperty.call(n,kr)&&n[kr]||(n[kr]=++dh)}var kr="closure_uid_"+(1e9*Math.random()>>>0),dh=0;function fh(n,e,t){return n.call.apply(n.bind,arguments)}function mh(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function ie(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ie=fh:ie=mh,ie.apply(null,arguments)}function En(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function W(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function qe(){this.s=this.s,this.o=this.o}var ph=0;qe.prototype.s=!1;qe.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ph!=0)&&hh(this)};qe.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wa=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ds(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function oo(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(tr(r)){const s=n.length||0,i=r.length||0;n.length=s+i;for(let o=0;o<i;o++)n[s+o]=r[o]}else n.push(r)}}function oe(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var gh=function(){if(!x.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};x.addEventListener("test",t,e),x.removeEventListener("test",t,e)}catch{}return n}();function Gt(n){return/^[\s\xa0]*$/.test(n)}function nr(){var n=x.navigator;return n&&(n=n.userAgent)?n:""}function Ee(n){return nr().indexOf(n)!=-1}function ks(n){return ks[" "](n),n}ks[" "]=function(){};function _h(n,e){var t=cd;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var yh=Ee("Opera"),ft=Ee("Trident")||Ee("MSIE"),Ta=Ee("Edge"),Yr=Ta||ft,Aa=Ee("Gecko")&&!(nr().toLowerCase().indexOf("webkit")!=-1&&!Ee("Edge"))&&!(Ee("Trident")||Ee("MSIE"))&&!Ee("Edge"),vh=nr().toLowerCase().indexOf("webkit")!=-1&&!Ee("Edge");function Ia(){var n=x.document;return n?n.documentMode:void 0}var Xr;e:{var Or="",Lr=function(){var n=nr();if(Aa)return/rv:([^\);]+)(\)|;)/.exec(n);if(Ta)return/Edge\/([\d\.]+)/.exec(n);if(ft)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(vh)return/WebKit\/(\S+)/.exec(n);if(yh)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(Lr&&(Or=Lr?Lr[1]:""),ft){var Mr=Ia();if(Mr!=null&&Mr>parseFloat(Or)){Xr=String(Mr);break e}}Xr=Or}var Jr;if(x.document&&ft){var ao=Ia();Jr=ao||parseInt(Xr,10)||void 0}else Jr=void 0;var Eh=Jr;function Kt(n,e){if(oe.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Aa){e:{try{ks(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:wh[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kt.$.h.call(this)}}W(Kt,oe);var wh={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),Th=0;function Ah(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Th,this.fa=this.ia=!1}function rr(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Os(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ih(n,e){for(const t in n)e.call(void 0,n[t],t,n)}function xa(n){const e={};for(const t in n)e[t]=n[t];return e}const lo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ra(n,e){let t,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(t in r)n[t]=r[t];for(let i=0;i<lo.length;i++)t=lo[i],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sr(n){this.src=n,this.g={},this.h=0}sr.prototype.add=function(n,e,t,r,s){var i=n.toString();n=this.g[i],n||(n=this.g[i]=[],this.h++);var o=es(n,e,r,s);return-1<o?(e=n[o],t||(e.ia=!1)):(e=new Ah(e,this.src,i,!!r,s),e.ia=t,n.push(e)),e};function Zr(n,e){var t=e.type;if(t in n.g){var r=n.g[t],s=wa(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(rr(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function es(n,e,t,r){for(var s=0;s<n.length;++s){var i=n[s];if(!i.fa&&i.listener==e&&i.capture==!!t&&i.la==r)return s}return-1}var Ls="closure_lm_"+(1e6*Math.random()|0),Fr={};function Sa(n,e,t,r,s){if(r&&r.once)return ba(n,e,t,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Sa(n,e[i],t,r,s);return null}return t=Bs(t),n&&n[an]?n.O(e,t,on(r)?!!r.capture:!!r,s):Ca(n,e,t,!1,r,s)}function Ca(n,e,t,r,s,i){if(!e)throw Error("Invalid event type");var o=on(s)?!!s.capture:!!s,a=Fs(n);if(a||(n[Ls]=a=new sr(n)),t=a.add(e,t,r,o,i),t.proxy)return t;if(r=xh(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)gh||(s=o),s===void 0&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Va(e.toString()),r);else if(n.addListener&&n.removeListener)n.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return t}function xh(){function n(t){return e.call(n.src,n.listener,t)}const e=Rh;return n}function ba(n,e,t,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)ba(n,e[i],t,r,s);return null}return t=Bs(t),n&&n[an]?n.P(e,t,on(r)?!!r.capture:!!r,s):Ca(n,e,t,!0,r,s)}function Pa(n,e,t,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Pa(n,e[i],t,r,s);else r=on(r)?!!r.capture:!!r,t=Bs(t),n&&n[an]?(n=n.i,e=String(e).toString(),e in n.g&&(i=n.g[e],t=es(i,t,r,s),-1<t&&(rr(i[t]),Array.prototype.splice.call(i,t,1),i.length==0&&(delete n.g[e],n.h--)))):n&&(n=Fs(n))&&(e=n.g[e.toString()],n=-1,e&&(n=es(e,t,r,s)),(t=-1<n?e[n]:null)&&Ms(t))}function Ms(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[an])Zr(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Va(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Fs(e))?(Zr(t,n),t.h==0&&(t.src=null,e[Ls]=null)):rr(n)}}}function Va(n){return n in Fr?Fr[n]:Fr[n]="on"+n}function Rh(n,e){if(n.fa)n=!0;else{e=new Kt(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Ms(n),n=t.call(r,e)}return n}function Fs(n){return n=n[Ls],n instanceof sr?n:null}var Br="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bs(n){return typeof n=="function"?n:(n[Br]||(n[Br]=function(e){return n.handleEvent(e)}),n[Br])}function Q(){qe.call(this),this.i=new sr(this),this.S=this,this.J=null}W(Q,qe);Q.prototype[an]=!0;Q.prototype.removeEventListener=function(n,e,t,r){Pa(this,n,e,t,r)};function J(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,typeof e=="string")e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var s=e;e=new oe(r,n),Ra(e,s)}if(s=!0,t)for(var i=t.length-1;0<=i;i--){var o=e.g=t[i];s=wn(o,r,!0,e)&&s}if(o=e.g=n,s=wn(o,r,!0,e)&&s,s=wn(o,r,!1,e)&&s,t)for(i=0;i<t.length;i++)o=e.g=t[i],s=wn(o,r,!1,e)&&s}Q.prototype.N=function(){if(Q.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)rr(t[r]);delete n.g[e],n.h--}}this.J=null};Q.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)};Q.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};function wn(n,e,t,r){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&Zr(n.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var qs=x.JSON.stringify;class Sh{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function Ch(){var n=$s;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class bh{constructor(){this.h=this.g=null}add(e,t){const r=Na.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var Na=new Sh(()=>new Ph,n=>n.reset());class Ph{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Vh(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Nh(n){x.setTimeout(()=>{throw n},0)}let Qt,Wt=!1,$s=new bh,Da=()=>{const n=x.Promise.resolve(void 0);Qt=()=>{n.then(Dh)}};var Dh=()=>{for(var n;n=Ch();){try{n.h.call(n.g)}catch(t){Nh(t)}var e=Na;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Wt=!1};function ir(n,e){Q.call(this),this.h=n||1,this.g=e||x,this.j=ie(this.qb,this),this.l=Date.now()}W(ir,Q);E=ir.prototype;E.ga=!1;E.T=null;E.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),J(this,"tick"),this.ga&&(Us(this),this.start()))}};E.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Us(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}E.N=function(){ir.$.N.call(this),Us(this),delete this.g};function js(n,e,t){if(typeof n=="function")t&&(n=ie(n,t));else if(n&&typeof n.handleEvent=="function")n=ie(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:x.setTimeout(n,e||0)}function ka(n){n.g=js(()=>{n.g=null,n.i&&(n.i=!1,ka(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class kh extends qe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ka(this)}N(){super.N(),this.g&&(x.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yt(n){qe.call(this),this.h=n,this.g={}}W(Yt,qe);var co=[];function Oa(n,e,t,r){Array.isArray(t)||(t&&(co[0]=t.toString()),t=co);for(var s=0;s<t.length;s++){var i=Sa(e,t[s],r||n.handleEvent,!1,n.h||n);if(!i)break;n.g[i.key]=i}}function La(n){Os(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ms(e)},n),n.g={}}Yt.prototype.N=function(){Yt.$.N.call(this),La(this)};Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function or(){this.g=!0}or.prototype.Ea=function(){this.g=!1};function Oh(n,e,t,r,s,i){n.info(function(){if(n.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var d=h.split("_");o=2<=d.length&&d[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+t+`
`+o})}function Lh(n,e,t,r,s,i,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+t+`
`+i+" "+o})}function it(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+Fh(n,t)+(r?" "+r:"")})}function Mh(n,e){n.info(function(){return"TIMEOUT: "+e})}or.prototype.info=function(){};function Fh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return qs(t)}catch{return e}}var Ze={},uo=null;function ar(){return uo=uo||new Q}Ze.Ta="serverreachability";function Ma(n){oe.call(this,Ze.Ta,n)}W(Ma,oe);function Xt(n){const e=ar();J(e,new Ma(e))}Ze.STAT_EVENT="statevent";function Fa(n,e){oe.call(this,Ze.STAT_EVENT,n),this.stat=e}W(Fa,oe);function ce(n){const e=ar();J(e,new Fa(e,n))}Ze.Ua="timingevent";function Ba(n,e){oe.call(this,Ze.Ua,n),this.size=e}W(Ba,oe);function ln(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return x.setTimeout(function(){n()},e)}var lr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qa={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function zs(){}zs.prototype.h=null;function ho(n){return n.h||(n.h=n.i())}function $a(){}var cn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Hs(){oe.call(this,"d")}W(Hs,oe);function Gs(){oe.call(this,"c")}W(Gs,oe);var ts;function cr(){}W(cr,zs);cr.prototype.g=function(){return new XMLHttpRequest};cr.prototype.i=function(){return{}};ts=new cr;function un(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Yt(this),this.P=Bh,n=Yr?125:void 0,this.V=new ir(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ua}function Ua(){this.i=null,this.g="",this.h=!1}var Bh=45e3,ja={},ns={};E=un.prototype;E.setTimeout=function(n){this.P=n};function rs(n,e,t){n.L=1,n.A=hr(be(e)),n.u=t,n.S=!0,za(n,null)}function za(n,e){n.G=Date.now(),hn(n),n.B=be(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),Ja(t.i,"t",r),n.o=0,t=n.l.J,n.h=new Ua,n.g=vl(n.l,t?e:null,!n.u),0<n.O&&(n.M=new kh(ie(n.Pa,n,n.g),n.O)),Oa(n.U,n.g,"readystatechange",n.nb),e=n.I?xa(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Xt(),Oh(n.j,n.v,n.B,n.m,n.W,n.u)}E.nb=function(n){n=n.target;const e=this.M;e&&Te(n)==3?e.l():this.Pa(n)};E.Pa=function(n){try{if(n==this.g)e:{const h=Te(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||Yr||this.g&&(this.h.h||this.g.ja()||go(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?Xt(3):Xt(2)),ur(this);var t=this.g.da();this.ca=t;t:if(Ha(this)){var r=go(this.g);n="";var s=r.length,i=Te(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){je(this),Ft(this);var o="";break t}this.h.i=new x.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=t==200,Lh(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gt(a)){var c=a;break t}}c=null}if(t=c)it(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ss(this,t);else{this.i=!1,this.s=3,ce(12),je(this),Ft(this);break e}}this.S?(Ga(this,h,o),Yr&&this.i&&h==3&&(Oa(this.U,this.V,"tick",this.mb),this.V.start())):(it(this.j,this.m,o,null),ss(this,o)),h==4&&je(this),this.i&&!this.J&&(h==4?pl(this.l,this):(this.i=!1,hn(this)))}else od(this.g),t==400&&0<o.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),je(this),Ft(this)}}}catch{}finally{}};function Ha(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function Ga(n,e,t){let r=!0,s;for(;!n.J&&n.o<t.length;)if(s=qh(n,t),s==ns){e==4&&(n.s=4,ce(14),r=!1),it(n.j,n.m,null,"[Incomplete Response]");break}else if(s==ja){n.s=4,ce(15),it(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}else it(n.j,n.m,s,null),ss(n,s);Ha(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,ce(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Js(e),e.M=!0,ce(11))):(it(n.j,n.m,t,"[Invalid Chunked Response]"),je(n),Ft(n))}E.mb=function(){if(this.g){var n=Te(this.g),e=this.g.ja();this.o<e.length&&(ur(this),Ga(this,n,e),this.i&&n!=4&&hn(this))}};function qh(n,e){var t=n.o,r=e.indexOf(`
`,t);return r==-1?ns:(t=Number(e.substring(t,r)),isNaN(t)?ja:(r+=1,r+t>e.length?ns:(e=e.slice(r,r+t),n.o=r+t,e)))}E.cancel=function(){this.J=!0,je(this)};function hn(n){n.Y=Date.now()+n.P,Ka(n,n.P)}function Ka(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=ln(ie(n.lb,n),e)}function ur(n){n.C&&(x.clearTimeout(n.C),n.C=null)}E.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(Mh(this.j,this.B),this.L!=2&&(Xt(),ce(17)),je(this),this.s=2,Ft(this)):Ka(this,this.Y-n)};function Ft(n){n.l.H==0||n.J||pl(n.l,n)}function je(n){ur(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,Us(n.V),La(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function ss(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||is(t.i,n))){if(!n.K&&is(t.i,n)&&t.H==3){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)Hn(t),pr(t);else break e;Xs(t),ce(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&t.A==0&&!t.v&&(t.v=ln(ie(t.ib,t),6e3));if(1>=tl(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ze(t,11)}else if((n.K||t.g==n)&&Hn(t),!Gt(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(t.V=c[0],c=c[1],t.H==2)if(c[0]=="c"){t.K=c[1],t.pa=c[2];const h=c[3];h!=null&&(t.ra=h,t.l.info("VER="+t.ra));const d=c[4];d!=null&&(t.Ga=d,t.l.info("SVER="+t.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,t.L=r,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const m=n.g;if(m){const _=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var i=r.i;i.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Ks(i,i.h),i.h=null))}if(r.F){const v=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,M(r.I,r.F,v))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),r=t;var o=n;if(r.wa=yl(r,r.J?r.pa:null,r.Y),o.K){nl(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ur(a),hn(a)),r.g=o}else fl(r);0<t.j.length&&gr(t)}else c[0]!="stop"&&c[0]!="close"||ze(t,7);else t.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ze(t,7):Ys(t):c[0]!="noop"&&t.h&&t.h.Aa(c),t.A=0)}}Xt(4)}catch{}}function $h(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(tr(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}e=[],t=0;for(r in n)e[t++]=n[r];return e}function Uh(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(tr(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}function Qa(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(tr(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=Uh(n),r=$h(n),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],t&&t[i],n)}var Wa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jh(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var i=n[t].substring(0,r);s=n[t].substring(r+1)}else i=n[t];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Ke(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ke){this.h=n.h,jn(this,n.j),this.s=n.s,this.g=n.g,zn(this,n.m),this.l=n.l;var e=n.i,t=new Jt;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fo(this,t),this.o=n.o}else n&&(e=String(n).match(Wa))?(this.h=!1,jn(this,e[1]||"",!0),this.s=Dt(e[2]||""),this.g=Dt(e[3]||"",!0),zn(this,e[4]),this.l=Dt(e[5]||"",!0),fo(this,e[6]||"",!0),this.o=Dt(e[7]||"")):(this.h=!1,this.i=new Jt(null,this.h))}Ke.prototype.toString=function(){var n=[],e=this.j;e&&n.push(kt(e,mo,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(kt(e,mo,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(kt(t,t.charAt(0)=="/"?Gh:Hh,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",kt(t,Qh)),n.join("")};function be(n){return new Ke(n)}function jn(n,e,t){n.j=t?Dt(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zn(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fo(n,e,t){e instanceof Jt?(n.i=e,Wh(n.i,n.h)):(t||(e=kt(e,Kh)),n.i=new Jt(e,n.h))}function M(n,e,t){n.i.set(e,t)}function hr(n){return M(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Dt(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function kt(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,zh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zh(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var mo=/[#\/\?@]/g,Hh=/[#\?:]/g,Gh=/[#\?]/g,Kh=/[#\?@]/g,Qh=/#/g;function Jt(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function $e(n){n.g||(n.g=new Map,n.h=0,n.i&&jh(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}E=Jt.prototype;E.add=function(n,e){$e(this),this.i=null,n=Tt(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function Ya(n,e){$e(n),e=Tt(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Xa(n,e){return $e(n),e=Tt(n,e),n.g.has(e)}E.forEach=function(n,e){$e(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)};E.ta=function(){$e(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let i=0;i<s.length;i++)t.push(e[r])}return t};E.Z=function(n){$e(this);let e=[];if(typeof n=="string")Xa(this,n)&&(e=e.concat(this.g.get(Tt(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};E.set=function(n,e){return $e(this),this.i=null,n=Tt(this,n),Xa(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};E.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function Ja(n,e,t){Ya(n,e),0<t.length&&(n.i=null,n.g.set(Tt(n,e),Ds(t)),n.h+=t.length)}E.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),n.push(s)}}return this.i=n.join("&")};function Tt(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Wh(n,e){e&&!n.j&&($e(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Ya(this,r),Ja(this,s,t))},n)),n.j=e}var Yh=class{constructor(n,e){this.g=n,this.map=e}};function Za(n){this.l=n||Xh,x.PerformanceNavigationTiming?(n=x.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(x.g&&x.g.Ka&&x.g.Ka()&&x.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xh=10;function el(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function tl(n){return n.h?1:n.g?n.g.size:0}function is(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function Ks(n,e){n.g?n.g.add(e):n.h=e}function nl(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}Za.prototype.cancel=function(){if(this.i=rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function rl(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Ds(n.i)}var Jh=class{stringify(n){return x.JSON.stringify(n,void 0)}parse(n){return x.JSON.parse(n,void 0)}};function Zh(){this.g=new Jh}function ed(n,e,t){const r=t||"";try{Qa(n,function(s,i){let o=s;on(s)&&(o=qs(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function td(n,e){const t=new or;if(x.Image){const r=new Image;r.onload=En(Tn,t,r,"TestLoadImage: loaded",!0,e),r.onerror=En(Tn,t,r,"TestLoadImage: error",!1,e),r.onabort=En(Tn,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=En(Tn,t,r,"TestLoadImage: timeout",!1,e),x.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}function Tn(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function dr(n){this.l=n.ec||null,this.j=n.ob||!1}W(dr,zs);dr.prototype.g=function(){return new fr(this.l,this.j)};dr.prototype.i=function(n){return function(){return n}}({});function fr(n,e){Q.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Qs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}W(fr,Q);var Qs=0;E=fr.prototype;E.open=function(n,e){if(this.readyState!=Qs)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zt(this)};E.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||x).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};E.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dn(this)),this.readyState=Qs};E.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zt(this)),this.g&&(this.readyState=3,Zt(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof x.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sl(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function sl(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}E.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?dn(this):Zt(this),this.readyState==3&&sl(this)}};E.Za=function(n){this.g&&(this.response=this.responseText=n,dn(this))};E.Ya=function(n){this.g&&(this.response=n,dn(this))};E.ka=function(){this.g&&dn(this)};function dn(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zt(n)}E.setRequestHeader=function(n,e){this.v.append(n,e)};E.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};E.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function Zt(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var nd=x.JSON.parse;function B(n){Q.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=il,this.L=this.M=!1}W(B,Q);var il="",rd=/^https?$/i,sd=["POST","PUT"];E=B.prototype;E.Oa=function(n){this.M=n};E.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ts.g(),this.C=this.u?ho(this.u):ho(ts),this.g.onreadystatechange=ie(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(i){po(this,i);return}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())t.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(t.keys()).find(i=>i.toLowerCase()=="content-type"),s=x.FormData&&n instanceof x.FormData,!(0<=wa(sd,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of t)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ll(this),0<this.B&&((this.L=id(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ie(this.ua,this)):this.A=js(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(i){po(this,i)}};function id(n){return ft&&typeof n.timeout=="number"&&n.ontimeout!==void 0}E.ua=function(){typeof Ns<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,J(this,"timeout"),this.abort(8))};function po(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ol(n),mr(n)}function ol(n){n.F||(n.F=!0,J(n,"complete"),J(n,"error"))}E.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,J(this,"complete"),J(this,"abort"),mr(this))};E.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mr(this,!0)),B.$.N.call(this)};E.La=function(){this.s||(this.G||this.v||this.l?al(this):this.kb())};E.kb=function(){al(this)};function al(n){if(n.h&&typeof Ns<"u"&&(!n.C[1]||Te(n)!=4||n.da()!=2)){if(n.v&&Te(n)==4)js(n.La,0,n);else if(J(n,"readystatechange"),Te(n)==4){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=o===0){var s=String(n.I).match(Wa)[1]||null;!s&&x.self&&x.self.location&&(s=x.self.location.protocol.slice(0,-1)),r=!rd.test(s?s.toLowerCase():"")}t=r}if(t)J(n,"complete"),J(n,"success");else{n.m=6;try{var i=2<Te(n)?n.g.statusText:""}catch{i=""}n.j=i+" ["+n.da()+"]",ol(n)}}finally{mr(n)}}}}function mr(n,e){if(n.g){ll(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||J(n,"ready");try{t.onreadystatechange=r}catch{}}}function ll(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(x.clearTimeout(n.A),n.A=null)}E.isActive=function(){return!!this.g};function Te(n){return n.g?n.g.readyState:0}E.da=function(){try{return 2<Te(this)?this.g.status:-1}catch{return-1}};E.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};E.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),nd(e)}};function go(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case il:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function od(n){const e={};n=(n.g&&2<=Te(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<n.length;r++){if(Gt(n[r]))continue;var t=Vh(n[r]);const s=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();const i=e[s]||[];e[s]=i,i.push(t)}Ih(e,function(r){return r.join(", ")})}E.Ia=function(){return this.m};E.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function cl(n){let e="";return Os(n,function(t,r){e+=r,e+=":",e+=t,e+=`\r
`}),e}function Ws(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=cl(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):M(n,e,t))}function Pt(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ul(n){this.Ga=0,this.j=[],this.l=new or,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pt("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pt("baseRetryDelayMs",5e3,n),this.hb=Pt("retryDelaySeedMs",1e4,n),this.eb=Pt("forwardChannelMaxRetries",2,n),this.xa=Pt("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Za(n&&n.concurrentRequestLimit),this.Ja=new Zh,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}E=ul.prototype;E.ra=8;E.H=1;function Ys(n){if(hl(n),n.H==3){var e=n.W++,t=be(n.I);if(M(t,"SID",n.K),M(t,"RID",e),M(t,"TYPE","terminate"),fn(n,t),e=new un(n,n.l,e),e.L=2,e.A=hr(be(t)),t=!1,x.navigator&&x.navigator.sendBeacon)try{t=x.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&x.Image&&(new Image().src=e.A,t=!0),t||(e.g=vl(e.l,null),e.g.ha(e.A)),e.G=Date.now(),hn(e)}_l(n)}function pr(n){n.g&&(Js(n),n.g.cancel(),n.g=null)}function hl(n){pr(n),n.u&&(x.clearTimeout(n.u),n.u=null),Hn(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&x.clearTimeout(n.m),n.m=null)}function gr(n){if(!el(n.i)&&!n.m){n.m=!0;var e=n.Na;Qt||Da(),Wt||(Qt(),Wt=!0),$s.add(e,n),n.C=0}}function ad(n,e){return tl(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=ln(ie(n.Na,n,e),gl(n,n.C)),n.C++,!0)}E.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new un(this,this.l,n);let i=this.s;if(this.U&&(i?(i=xa(i),Ra(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var r=this.j[t];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=dl(this,s,e),t=be(this.I),M(t,"RID",n),M(t,"CVER",22),this.F&&M(t,"X-HTTP-Session-Id",this.F),fn(this,t),i&&(this.O?e="headers="+encodeURIComponent(String(cl(i)))+"&"+e:this.o&&Ws(t,this.o,i)),Ks(this.i,s),this.bb&&M(t,"TYPE","init"),this.P?(M(t,"$req",e),M(t,"SID","null"),s.aa=!0,rs(s,t,null)):rs(s,t,e),this.H=2}}else this.H==3&&(n?_o(this,n):this.j.length==0||el(this.i)||_o(this))};function _o(n,e){var t;e?t=e.m:t=n.W++;const r=be(n.I);M(r,"SID",n.K),M(r,"RID",t),M(r,"AID",n.V),fn(n,r),n.o&&n.s&&Ws(r,n.o,n.s),t=new un(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=dl(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Ks(n.i,t),rs(t,r,e)}function fn(n,e){n.na&&Os(n.na,function(t,r){M(e,r,t)}),n.h&&Qa({},function(t,r){M(e,r,t)})}function dl(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ie(n.h.Va,n.h,n):null;e:{var s=n.j;let i=-1;for(;;){const o=["count="+t];i==-1?0<t?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<t;l++){let c=s[l].g;const h=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{ed(h,o,"req"+c+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function fl(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Qt||Da(),Wt||(Qt(),Wt=!0),$s.add(e,n),n.A=0}}function Xs(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=ln(ie(n.Ma,n),gl(n,n.A)),n.A++,!0)}E.Ma=function(){if(this.u=null,ml(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ln(ie(this.jb,this),n)}};E.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ce(10),pr(this),ml(this))};function Js(n){n.B!=null&&(x.clearTimeout(n.B),n.B=null)}function ml(n){n.g=new un(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=be(n.wa);M(e,"RID","rpc"),M(e,"SID",n.K),M(e,"AID",n.V),M(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&M(e,"TO",n.qa),M(e,"TYPE","xmlhttp"),fn(n,e),n.o&&n.s&&Ws(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=hr(be(e)),t.u=null,t.S=!0,za(t,n)}E.ib=function(){this.v!=null&&(this.v=null,pr(this),Xs(this),ce(19))};function Hn(n){n.v!=null&&(x.clearTimeout(n.v),n.v=null)}function pl(n,e){var t=null;if(n.g==e){Hn(n),Js(n),n.g=null;var r=2}else if(is(n.i,e))t=e.F,nl(n.i,e),r=1;else return;if(n.H!=0){if(e.i)if(r==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var s=n.C;r=ar(),J(r,new Ba(r,t)),gr(n)}else fl(n);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&ad(n,e)||r==2&&Xs(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:ze(n,5);break;case 4:ze(n,10);break;case 3:ze(n,6);break;default:ze(n,2)}}}function gl(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ze(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var r=ie(n.pb,n);t||(t=new Ke("//www.google.com/images/cleardot.gif"),x.location&&x.location.protocol=="http"||jn(t,"https"),hr(t)),td(t.toString(),r)}else ce(2);n.H=0,n.h&&n.h.za(e),_l(n),hl(n)}E.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ce(2)):(this.l.info("Failed to ping google.com"),ce(1))};function _l(n){if(n.H=0,n.ma=[],n.h){const e=rl(n.i);(e.length!=0||n.j.length!=0)&&(oo(n.ma,e),oo(n.ma,n.j),n.i.i.length=0,Ds(n.j),n.j.length=0),n.h.ya()}}function yl(n,e,t){var r=t instanceof Ke?be(t):new Ke(t);if(r.g!="")e&&(r.g=e+"."+r.g),zn(r,r.m);else{var s=x.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Ke(null);r&&jn(i,r),e&&(i.g=e),s&&zn(i,s),t&&(i.l=t),r=i}return t=n.F,e=n.Da,t&&e&&M(r,t,e),M(r,"VER",n.ra),fn(n,r),r}function vl(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new B(new dr({ob:t})):new B(n.va),e.Oa(n.J),e}E.isActive=function(){return!!this.h&&this.h.isActive(this)};function El(){}E=El.prototype;E.Ba=function(){};E.Aa=function(){};E.za=function(){};E.ya=function(){};E.isActive=function(){return!0};E.Va=function(){};function Gn(){if(ft&&!(10<=Number(Eh)))throw Error("Environmental error: no available transport.")}Gn.prototype.g=function(n,e){return new fe(n,e)};function fe(n,e){Q.call(this),this.g=new ul(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Gt(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gt(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new At(this)}W(fe,Q);fe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ce(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=yl(n,null,n.Y),gr(n)};fe.prototype.close=function(){Ys(this.g)};fe.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=qs(n),n=t);e.j.push(new Yh(e.fb++,n)),e.H==3&&gr(e)};fe.prototype.N=function(){this.g.h=null,delete this.j,Ys(this.g),delete this.g,fe.$.N.call(this)};function wl(n){Hs.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}W(wl,Hs);function Tl(){Gs.call(this),this.status=1}W(Tl,Gs);function At(n){this.g=n}W(At,El);At.prototype.Ba=function(){J(this.g,"a")};At.prototype.Aa=function(n){J(this.g,new wl(n))};At.prototype.za=function(n){J(this.g,new Tl)};At.prototype.ya=function(){J(this.g,"b")};function ld(){this.blockSize=-1}function _e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}W(_e,ld);_e.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function qr(n,e,t){t||(t=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],s=n.g[2];var i=n.g[3],o=e+(i^t&(s^i))+r[0]+3614090360&4294967295;e=t+(o<<7&4294967295|o>>>25),o=i+(s^e&(t^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(t^i&(e^t))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=t+(e^s&(i^e))+r[3]+3250441966&4294967295,t=s+(o<<22&4294967295|o>>>10),o=e+(i^t&(s^i))+r[4]+4118548399&4294967295,e=t+(o<<7&4294967295|o>>>25),o=i+(s^e&(t^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(t^i&(e^t))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=t+(e^s&(i^e))+r[7]+4249261313&4294967295,t=s+(o<<22&4294967295|o>>>10),o=e+(i^t&(s^i))+r[8]+1770035416&4294967295,e=t+(o<<7&4294967295|o>>>25),o=i+(s^e&(t^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(t^i&(e^t))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=t+(e^s&(i^e))+r[11]+2304563134&4294967295,t=s+(o<<22&4294967295|o>>>10),o=e+(i^t&(s^i))+r[12]+1804603682&4294967295,e=t+(o<<7&4294967295|o>>>25),o=i+(s^e&(t^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(t^i&(e^t))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=t+(e^s&(i^e))+r[15]+1236535329&4294967295,t=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(t^s))+r[1]+4129170786&4294967295,e=t+(o<<5&4294967295|o>>>27),o=i+(t^s&(e^t))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^t&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=t+(i^e&(s^i))+r[0]+3921069994&4294967295,t=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(t^s))+r[5]+3593408605&4294967295,e=t+(o<<5&4294967295|o>>>27),o=i+(t^s&(e^t))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^t&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=t+(i^e&(s^i))+r[4]+3889429448&4294967295,t=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(t^s))+r[9]+568446438&4294967295,e=t+(o<<5&4294967295|o>>>27),o=i+(t^s&(e^t))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^t&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=t+(i^e&(s^i))+r[8]+1163531501&4294967295,t=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(t^s))+r[13]+2850285829&4294967295,e=t+(o<<5&4294967295|o>>>27),o=i+(t^s&(e^t))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^t&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=t+(i^e&(s^i))+r[12]+2368359562&4294967295,t=s+(o<<20&4294967295|o>>>12),o=e+(t^s^i)+r[5]+4294588738&4294967295,e=t+(o<<4&4294967295|o>>>28),o=i+(e^t^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^t)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=t+(s^i^e)+r[14]+4259657740&4294967295,t=s+(o<<23&4294967295|o>>>9),o=e+(t^s^i)+r[1]+2763975236&4294967295,e=t+(o<<4&4294967295|o>>>28),o=i+(e^t^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^t)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=t+(s^i^e)+r[10]+3200236656&4294967295,t=s+(o<<23&4294967295|o>>>9),o=e+(t^s^i)+r[13]+681279174&4294967295,e=t+(o<<4&4294967295|o>>>28),o=i+(e^t^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^t)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=t+(s^i^e)+r[6]+76029189&4294967295,t=s+(o<<23&4294967295|o>>>9),o=e+(t^s^i)+r[9]+3654602809&4294967295,e=t+(o<<4&4294967295|o>>>28),o=i+(e^t^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^t)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=t+(s^i^e)+r[2]+3299628645&4294967295,t=s+(o<<23&4294967295|o>>>9),o=e+(s^(t|~i))+r[0]+4096336452&4294967295,e=t+(o<<6&4294967295|o>>>26),o=i+(t^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~t))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=t+(i^(s|~e))+r[5]+4237533241&4294967295,t=s+(o<<21&4294967295|o>>>11),o=e+(s^(t|~i))+r[12]+1700485571&4294967295,e=t+(o<<6&4294967295|o>>>26),o=i+(t^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~t))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=t+(i^(s|~e))+r[1]+2240044497&4294967295,t=s+(o<<21&4294967295|o>>>11),o=e+(s^(t|~i))+r[8]+1873313359&4294967295,e=t+(o<<6&4294967295|o>>>26),o=i+(t^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~t))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=t+(i^(s|~e))+r[13]+1309151649&4294967295,t=s+(o<<21&4294967295|o>>>11),o=e+(s^(t|~i))+r[4]+4149444226&4294967295,e=t+(o<<6&4294967295|o>>>26),o=i+(t^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~t))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=t+(i^(s|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+i&4294967295}_e.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=t;)qr(this,n,i),i+=this.blockSize;if(typeof n=="string"){for(;i<e;)if(r[s++]=n.charCodeAt(i++),s==this.blockSize){qr(this,r),s=0;break}}else for(;i<e;)if(r[s++]=n[i++],s==this.blockSize){qr(this,r),s=0;break}}this.h=s,this.i+=e};_e.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};function O(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var i=n[s]|0;r&&i==e||(t[s]=i,r=!1)}this.g=t}var cd={};function Zs(n){return-128<=n&&128>n?_h(n,function(e){return new O([e|0],0>e?-1:0)}):new O([n|0],0>n?-1:0)}function Ae(n){if(isNaN(n)||!isFinite(n))return ot;if(0>n)return X(Ae(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=os;return new O(e,0)}function Al(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return X(Al(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ae(Math.pow(e,8)),r=ot,s=0;s<n.length;s+=8){var i=Math.min(8,n.length-s),o=parseInt(n.substring(s,s+i),e);8>i?(i=Ae(Math.pow(e,i)),r=r.R(i).add(Ae(o))):(r=r.R(t),r=r.add(Ae(o)))}return r}var os=4294967296,ot=Zs(0),as=Zs(1),yo=Zs(16777216);E=O.prototype;E.ea=function(){if(ge(this))return-X(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:os+r)*e,e*=os}return n};E.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(Ce(this))return"0";if(ge(this))return"-"+X(this).toString(n);for(var e=Ae(Math.pow(n,6)),t=this,r="";;){var s=Qn(t,e).g;t=Kn(t,s.R(e));var i=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=s,Ce(t))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};E.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function Ce(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function ge(n){return n.h==-1}E.X=function(n){return n=Kn(this,n),ge(n)?-1:Ce(n)?0:1};function X(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new O(t,~n.h).add(as)}E.abs=function(){return ge(this)?X(this):this};E.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(n.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,t[s]=o<<16|i}return new O(t,t[t.length-1]&-2147483648?-1:0)};function Kn(n,e){return n.add(X(e))}E.R=function(n){if(Ce(this)||Ce(n))return ot;if(ge(this))return ge(n)?X(this).R(X(n)):X(X(this).R(n));if(ge(n))return X(this.R(X(n)));if(0>this.X(yo)&&0>n.X(yo))return Ae(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=n.D(s)>>>16,l=n.D(s)&65535;t[2*r+2*s]+=o*l,An(t,2*r+2*s),t[2*r+2*s+1]+=i*l,An(t,2*r+2*s+1),t[2*r+2*s+1]+=o*a,An(t,2*r+2*s+1),t[2*r+2*s+2]+=i*a,An(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new O(t,0)};function An(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Vt(n,e){this.g=n,this.h=e}function Qn(n,e){if(Ce(e))throw Error("division by zero");if(Ce(n))return new Vt(ot,ot);if(ge(n))return e=Qn(X(n),e),new Vt(X(e.g),X(e.h));if(ge(e))return e=Qn(n,X(e)),new Vt(X(e.g),e.h);if(30<n.g.length){if(ge(n)||ge(e))throw Error("slowDivide_ only works with positive integers.");for(var t=as,r=e;0>=r.X(n);)t=vo(t),r=vo(r);var s=et(t,1),i=et(r,1);for(r=et(r,2),t=et(t,2);!Ce(r);){var o=i.add(r);0>=o.X(n)&&(s=s.add(t),i=o),r=et(r,1),t=et(t,1)}return e=Kn(n,s.R(e)),new Vt(s,e)}for(s=ot;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=Math.ceil(Math.log(t)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Ae(t),o=i.R(e);ge(o)||0<o.X(n);)t-=r,i=Ae(t),o=i.R(e);Ce(i)&&(i=as),s=s.add(i),n=Kn(n,o)}return new Vt(s,n)}E.gb=function(n){return Qn(this,n).h};E.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new O(t,this.h&n.h)};E.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new O(t,this.h|n.h)};E.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new O(t,this.h^n.h)};function vo(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new O(t,n.h)}function et(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],i=0;i<r;i++)s[i]=0<e?n.D(i+t)>>>e|n.D(i+t+1)<<32-e:n.D(i+t);return new O(s,n.h)}Gn.prototype.createWebChannel=Gn.prototype.g;fe.prototype.send=fe.prototype.u;fe.prototype.open=fe.prototype.m;fe.prototype.close=fe.prototype.close;lr.NO_ERROR=0;lr.TIMEOUT=8;lr.HTTP_ERROR=6;qa.COMPLETE="complete";$a.EventType=cn;cn.OPEN="a";cn.CLOSE="b";cn.ERROR="c";cn.MESSAGE="d";Q.prototype.listen=Q.prototype.O;B.prototype.listenOnce=B.prototype.P;B.prototype.getLastError=B.prototype.Sa;B.prototype.getLastErrorCode=B.prototype.Ia;B.prototype.getStatus=B.prototype.da;B.prototype.getResponseJson=B.prototype.Wa;B.prototype.getResponseText=B.prototype.ja;B.prototype.send=B.prototype.ha;B.prototype.setWithCredentials=B.prototype.Oa;_e.prototype.digest=_e.prototype.l;_e.prototype.reset=_e.prototype.reset;_e.prototype.update=_e.prototype.j;O.prototype.add=O.prototype.add;O.prototype.multiply=O.prototype.R;O.prototype.modulo=O.prototype.gb;O.prototype.compare=O.prototype.X;O.prototype.toNumber=O.prototype.ea;O.prototype.toString=O.prototype.toString;O.prototype.getBits=O.prototype.D;O.fromNumber=Ae;O.fromString=Al;var ud=function(){return new Gn},hd=function(){return ar()},$r=lr,dd=qa,fd=Ze,Eo={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},In=$a,md=B,pd=_e,at=O;const wo="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}he.UNAUTHENTICATED=new he(null),he.GOOGLE_CREDENTIALS=new he("google-credentials-uid"),he.FIRST_PARTY=new he("first-party-uid"),he.MOCK_USER=new he("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let It="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye=new ga("@firebase/firestore");function Nt(){return Ye.logLevel}function w(n,...e){if(Ye.logLevel<=V.DEBUG){const t=e.map(ei);Ye.debug(`Firestore (${It}): ${n}`,...t)}}function Re(n,...e){if(Ye.logLevel<=V.ERROR){const t=e.map(ei);Ye.error(`Firestore (${It}): ${n}`,...t)}}function en(n,...e){if(Ye.logLevel<=V.WARN){const t=e.map(ei);Ye.warn(`Firestore (${It}): ${n}`,...t)}}function ei(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(n="Unexpected state"){const e=`FIRESTORE (${It}) INTERNAL ASSERTION FAILED: `+n;throw Re(e),new Error(e)}function z(n,e){n||S()}function D(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _d{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(he.UNAUTHENTICATED))}shutdown(){}}class yd{constructor(e){this.t=e,this.currentUser=he.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new Le;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Le,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Le)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z(typeof r.accessToken=="string"),new gd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new he(e)}}class vd{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=he.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ed{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new vd(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(he.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Td{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=i=>{i.error!=null&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,w("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(z(typeof t.token=="string"),this.R=t.token,new wd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Ad(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%e.length))}return r}}function k(n,e){return n<e?-1:n>e?1:0}function mt(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return K.fromMillis(Date.now())}static fromDate(e){return K.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new K(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?k(this.nanoseconds,e.nanoseconds):k(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.timestamp=e}static fromTimestamp(e){return new R(e)}static min(){return new R(new K(0,0))}static max(){return new R(new K(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,r){t===void 0?t=0:t>e.length&&S(),r===void 0?r=e.length-t:r>e.length-t&&S(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return tn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tn?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=e.get(s),o=t.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class F extends tn{construct(e,t,r){return new F(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new F(t)}static emptyPath(){return new F([])}}const xd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends tn{construct(e,t,r){return new se(e,t,r)}static isValidIdentifier(e){return xd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new se(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new T(y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new T(y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new T(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new T(y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new se(t)}static emptyPath(){return new se([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e){this.path=e}static fromPath(e){return new A(F.fromString(e))}static fromName(e){return new A(F.fromString(e).popFirst(5))}static empty(){return new A(F.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&F.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return F.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new F(e.slice()))}}function Rd(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=R.fromTimestamp(r===1e9?new K(t+1,0):new K(t,r));return new Me(s,A.empty(),e)}function Sd(n){return new Me(n.readTime,n.key,-1)}class Me{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Me(R.min(),A.empty(),-1)}static max(){return new Me(R.max(),A.empty(),-1)}}function Cd(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=A.comparator(n.documentKey,e.documentKey),t!==0?t:k(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ti(n){if(n.code!==y.FAILED_PRECONDITION||n.message!==bd)throw n;w("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new g((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof g?t:g.resolve(t)}catch(t){return g.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):g.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):g.reject(t)}static resolve(e){return new g((t,r)=>{t(e)})}static reject(e){return new g((t,r)=>{r(e)})}static waitFor(e){return new g((t,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&t()},l=>r(l))}),o=!0,i===s&&t()})}static or(e){let t=g.resolve(!1);for(const r of e)t=t.next(s=>s?g.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new g((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,t){return new g((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Le,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Bt(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=ri(r.target.error);this.V.reject(new Bt(e,s))}}static open(e,t,r,s){try{return new ni(t,e.transaction(s,r))}catch(i){throw new Bt(t,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(w("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Nd(t)}}class He{constructor(e,t,r){this.name=e,this.version=t,this.p=r,He.S(Bn())===12.2&&Re("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return w("SimpleDb","Removing database:",e),Ue(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ma())return!1;if(He.C())return!0;const e=Bn(),t=He.S(e),r=0<t&&t<10,s=He.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(w("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;t(o)},s.onblocked=()=>{r(new Bt(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new T(y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new T(y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Bt(e,o))},s.onupgradeneeded=i=>{w("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{w("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=ni.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),g.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(w("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Vd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ue(this.k.delete())}}class Bt extends T{constructor(e,t){super(y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mn(n){return n.name==="IndexedDbTransactionError"}class Nd{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(w("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(w("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ue(r)}add(e){return w("SimpleDb","ADD",this.store.name,e,e),Ue(this.store.add(e))}get(e){return Ue(this.store.get(e)).next(t=>(t===void 0&&(t=null),w("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return w("SimpleDb","DELETE",this.store.name,e),Ue(this.store.delete(e))}count(){return w("SimpleDb","COUNT",this.store.name),Ue(this.store.count())}W(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new g((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new g((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,t){w("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Z(e){const t=this.cursor({});return new g((r,s)=>{t.onerror=i=>{const o=ri(i.target.error);s(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){const r=[];return new g((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new Vd(a),c=t(a.primaryKey,a.value,l);if(c instanceof g){const h=c.catch(d=>(l.done(),g.reject(d)));r.push(h)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>g.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ue(n){return new g((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=ri(r.target.error);t(s)}})}let To=!1;function ri(n){const e=He.S(Bn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return To||(To=!0,setTimeout(()=>{throw r},0)),r}}return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.se(r),this.oe=r=>t.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}si._e=-1;function _r(n){return n==null}function Wn(n){return n===0&&1/n==-1/0}function Dd(n){return typeof n=="number"&&Number.isInteger(n)&&!Wn(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Il(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e,t){this.comparator=e,this.root=t||Y.EMPTY}insert(e,t){return new q(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Y.BLACK,null,null))}remove(e){return new q(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Y.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xn(this.root,e,this.comparator,!1)}getReverseIterator(){return new xn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xn(this.root,e,this.comparator,!0)}}class xn{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Y{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Y.RED,this.left=s??Y.EMPTY,this.right=i??Y.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Y(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Y.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Y.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Y.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Y.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();const e=this.left.check();if(e!==this.right.check())throw S();return e+(this.isRed()?0:1)}}Y.EMPTY=null,Y.RED=!0,Y.BLACK=!1;Y.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(e,t,r,s,i){return this}insert(e,t,r){return new Y(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.comparator=e,this.data=new q(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Io(this.data.getIterator())}getIteratorFrom(e){return new Io(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Z)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Z(this.comparator);return t.data=e,t}}class Io{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.fields=e,e.sort(se.comparator)}static empty(){return new De([])}unionWith(e){let t=new Z(se.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new De(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mt(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xl("Invalid base64 string: "+i):i}}(e);return new ae(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ae(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return k(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ae.EMPTY_BYTE_STRING=new ae("");const kd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fe(n){if(z(!!n),typeof n=="string"){let e=0;const t=kd.exec(n);if(z(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:U(n.seconds),nanos:U(n.nanos)}}function U(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xe(n){return typeof n=="string"?ae.fromBase64String(n):ae.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function oi(n){const e=n.mapValue.fields.__previous_value__;return ii(e)?oi(e):e}function nn(n){const e=Fe(n.mapValue.fields.__local_write_time__.timestampValue);return new K(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t,r,s,i,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class rn{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Je(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ii(n)?4:Ld(n)?9007199254740991:10:S()}function Se(n,e){if(n===e)return!0;const t=Je(n);if(t!==Je(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nn(n).isEqual(nn(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fe(s.timestampValue),a=Fe(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return Xe(s.bytesValue).isEqual(Xe(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return U(s.geoPointValue.latitude)===U(i.geoPointValue.latitude)&&U(s.geoPointValue.longitude)===U(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return U(s.integerValue)===U(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=U(s.doubleValue),a=U(i.doubleValue);return o===a?Wn(o)===Wn(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return mt(n.arrayValue.values||[],e.arrayValue.values||[],Se);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Ao(o)!==Ao(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Se(o[l],a[l])))return!1;return!0}(n,e);default:return S()}}function sn(n,e){return(n.values||[]).find(t=>Se(t,e))!==void 0}function pt(n,e){if(n===e)return 0;const t=Je(n),r=Je(e);if(t!==r)return k(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return k(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=U(i.integerValue||i.doubleValue),l=U(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return xo(n.timestampValue,e.timestampValue);case 4:return xo(nn(n),nn(e));case 5:return k(n.stringValue,e.stringValue);case 6:return function(i,o){const a=Xe(i),l=Xe(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=k(a[c],l[c]);if(h!==0)return h}return k(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=k(U(i.latitude),U(o.latitude));return a!==0?a:k(U(i.longitude),U(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=pt(a[c],l[c]);if(h)return h}return k(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Rn.mapValue&&o===Rn.mapValue)return 0;if(i===Rn.mapValue)return 1;if(o===Rn.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=k(l[d],h[d]);if(f!==0)return f;const m=pt(a[l[d]],c[h[d]]);if(m!==0)return m}return k(l.length,h.length)}(n.mapValue,e.mapValue);default:throw S()}}function xo(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return k(n,e);const t=Fe(n),r=Fe(e),s=k(t.seconds,r.seconds);return s!==0?s:k(t.nanos,r.nanos)}function gt(n){return ls(n)}function ls(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Fe(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xe(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return A.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=ls(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ls(t.fields[o])}`;return s+"}"}(n.mapValue):S()}function Ro(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cs(n){return!!n&&"integerValue"in n}function ai(n){return!!n&&"arrayValue"in n}function So(n){return!!n&&"nullValue"in n}function Co(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ur(n){return!!n&&"mapValue"in n}function qt(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qt(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qt(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ld(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.value=e}static empty(){return new we({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ur(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qt(t)}setAll(e){let t=se.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=qt(o):s.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());Ur(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Se(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ur(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){pn(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new we(qt(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new re(e,0,R.min(),R.min(),R.min(),we.empty(),0)}static newFoundDocument(e,t,r,s){return new re(e,1,t,R.min(),r,s,0)}static newNoDocument(e,t){return new re(e,2,t,R.min(),R.min(),we.empty(),0)}static newUnknownDocument(e,t){return new re(e,3,t,R.min(),R.min(),we.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(R.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=we.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=we.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=R.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof re&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t){this.position=e,this.inclusive=t}}function bo(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=A.comparator(A.fromName(o.referenceValue),t.key):r=pt(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Po(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Se(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t="asc"){this.field=e,this.dir=t}}function Md(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{}class j extends Rl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Bd(e,t,r):t==="array-contains"?new Ud(e,r):t==="in"?new jd(e,r):t==="not-in"?new zd(e,r):t==="array-contains-any"?new Hd(e,r):new j(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new qd(e,r):new $d(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(pt(t,this.value)):t!==null&&Je(this.value)===Je(t)&&this.matchesComparison(pt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return S()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ye extends Rl{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ye(e,t)}matches(e){return Sl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Sl(n){return n.op==="and"}function Cl(n){return Fd(n)&&Sl(n)}function Fd(n){for(const e of n.filters)if(e instanceof ye)return!1;return!0}function us(n){if(n instanceof j)return n.field.canonicalString()+n.op.toString()+gt(n.value);if(Cl(n))return n.filters.map(e=>us(e)).join(",");{const e=n.filters.map(t=>us(t)).join(",");return`${n.op}(${e})`}}function bl(n,e){return n instanceof j?function(r,s){return s instanceof j&&r.op===s.op&&r.field.isEqual(s.field)&&Se(r.value,s.value)}(n,e):n instanceof ye?function(r,s){return s instanceof ye&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&bl(o,s.filters[a]),!0):!1}(n,e):void S()}function Pl(n){return n instanceof j?function(t){return`${t.field.canonicalString()} ${t.op} ${gt(t.value)}`}(n):n instanceof ye?function(t){return t.op.toString()+" {"+t.getFilters().map(Pl).join(" ,")+"}"}(n):"Filter"}class Bd extends j{constructor(e,t,r){super(e,t,r),this.key=A.fromName(r.referenceValue)}matches(e){const t=A.comparator(e.key,this.key);return this.matchesComparison(t)}}class qd extends j{constructor(e,t){super(e,"in",t),this.keys=Vl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $d extends j{constructor(e,t){super(e,"not-in",t),this.keys=Vl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vl(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>A.fromName(r.referenceValue))}class Ud extends j{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ai(t)&&sn(t.arrayValue,this.value)}}class jd extends j{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sn(this.value.arrayValue,t)}}class zd extends j{constructor(e,t){super(e,"not-in",t)}matches(e){if(sn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!sn(this.value.arrayValue,t)}}class Hd extends j{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ai(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sn(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function Vo(n,e=null,t=[],r=[],s=null,i=null,o=null){return new Gd(n,e,t,r,s,i,o)}function li(n){const e=D(n);if(e.ce===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>us(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_r(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gt(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gt(r)).join(",")),e.ce=t}return e.ce}function ci(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Md(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bl(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Po(n.startAt,e.startAt)&&Po(n.endAt,e.endAt)}function hs(n){return A.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Kd(n,e,t,r,s,i,o,a){return new gn(n,e,t,r,s,i,o,a)}function Nl(n){return new gn(n)}function No(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Dl(n){return n.collectionGroup!==null}function $t(n){const e=D(n);if(e.le===null){e.le=[];const t=new Set;for(const i of e.explicitOrderBy)e.le.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Z(se.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new Xn(i,r))}),t.has(se.keyField().canonicalString())||e.le.push(new Xn(se.keyField(),r))}return e.le}function Ie(n){const e=D(n);return e.he||(e.he=Qd(e,$t(n))),e.he}function Qd(n,e){if(n.limitType==="F")return Vo(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Xn(s.field,i)});const t=n.endAt?new Yn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yn(n.startAt.position,n.startAt.inclusive):null;return Vo(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ds(n,e){const t=n.filters.concat([e]);return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fs(n,e,t){return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yr(n,e){return ci(Ie(n),Ie(e))&&n.limitType===e.limitType}function kl(n){return`${li(Ie(n))}|lt:${n.limitType}`}function nt(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>Pl(s)).join(", ")}]`),_r(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>gt(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>gt(s)).join(",")),`Target(${r})`}(Ie(n))}; limitType=${n.limitType})`}function vr(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):A.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of $t(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=bo(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,$t(r),s)||r.endAt&&!function(o,a,l){const c=bo(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,$t(r),s))}(n,e)}function Wd(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ol(n){return(e,t)=>{let r=!1;for(const s of $t(n)){const i=Yd(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Yd(n,e,t){const r=n.field.isKeyField()?A.comparator(e.key,t.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?pt(l,c):S()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return S()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){pn(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Il(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new q(A.comparator);function Be(){return Xd}const Ll=new q(A.comparator);function Ot(...n){let e=Ll;for(const t of n)e=e.insert(t.key,t);return e}function Jd(n){let e=Ll;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ge(){return Ut()}function Ml(){return Ut()}function Ut(){return new xt(n=>n.toString(),(n,e)=>n.isEqual(e))}new q(A.comparator);const Zd=new Z(A.comparator);function N(...n){let e=Zd;for(const t of n)e=e.add(t);return e}const ef=new Z(k);function tf(){return ef}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wn(e)?"-0":e}}function Bl(n){return{integerValue:""+n}}function nf(n,e){return Dd(e)?Bl(e):Fl(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this._=void 0}}function rf(n,e,t){return n instanceof ms?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ii(i)&&(i=oi(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Jn?ql(n,e):n instanceof Zn?$l(n,e):function(s,i){const o=of(s,i),a=Do(o)+Do(s.Ie);return cs(o)&&cs(s.Ie)?Bl(a):Fl(s.serializer,a)}(n,e)}function sf(n,e,t){return n instanceof Jn?ql(n,e):n instanceof Zn?$l(n,e):t}function of(n,e){return n instanceof ps?function(r){return cs(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ms extends Er{}class Jn extends Er{constructor(e){super(),this.elements=e}}function ql(n,e){const t=Ul(e);for(const r of n.elements)t.some(s=>Se(s,r))||t.push(r);return{arrayValue:{values:t}}}class Zn extends Er{constructor(e){super(),this.elements=e}}function $l(n,e){let t=Ul(e);for(const r of n.elements)t=t.filter(s=>!Se(s,r));return{arrayValue:{values:t}}}class ps extends Er{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Do(n){return U(n.integerValue||n.doubleValue)}function Ul(n){return ai(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function af(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Jn&&s instanceof Jn||r instanceof Zn&&s instanceof Zn?mt(r.elements,s.elements,Se):r instanceof ps&&s instanceof ps?Se(r.Ie,s.Ie):r instanceof ms&&s instanceof ms}(n.transform,e.transform)}class Qe{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qe}static exists(e){return new Qe(void 0,e)}static updateTime(e){return new Qe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bn(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ui{}function jl(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cf(n.key,Qe.none()):new hi(n.key,n.data,Qe.none());{const t=n.data,r=we.empty();let s=new Z(se.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new wr(n.key,r,new De(s.toArray()),Qe.none())}}function lf(n,e,t){n instanceof hi?function(s,i,o){const a=s.value.clone(),l=Oo(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof wr?function(s,i,o){if(!bn(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Oo(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(zl(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function jt(n,e,t,r){return n instanceof hi?function(i,o,a,l){if(!bn(i.precondition,o))return a;const c=i.value.clone(),h=Lo(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof wr?function(i,o,a,l){if(!bn(i.precondition,o))return a;const c=Lo(i.fieldTransforms,l,o),h=o.data;return h.setAll(zl(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(i,o,a){return bn(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function ko(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&mt(r,s,(i,o)=>af(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hi extends ui{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wr extends ui{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function zl(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Oo(n,e,t){const r=new Map;z(n.length===t.length);for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,sf(o,a,t[s]))}return r}function Lo(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,rf(i,o,e))}return r}class cf extends ui{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&lf(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=jt(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=jt(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ml();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const l=jl(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(R.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),N())}isEqual(e){return this.batchId===e.batchId&&mt(this.mutations,e.mutations,(t,r)=>ko(t,r))&&mt(this.baseMutations,e.baseMutations,(t,r)=>ko(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $,b;function Hl(n){if(n===void 0)return Re("GRPC error has no .code"),y.UNKNOWN;switch(n){case $.OK:return y.OK;case $.CANCELLED:return y.CANCELLED;case $.UNKNOWN:return y.UNKNOWN;case $.DEADLINE_EXCEEDED:return y.DEADLINE_EXCEEDED;case $.RESOURCE_EXHAUSTED:return y.RESOURCE_EXHAUSTED;case $.INTERNAL:return y.INTERNAL;case $.UNAVAILABLE:return y.UNAVAILABLE;case $.UNAUTHENTICATED:return y.UNAUTHENTICATED;case $.INVALID_ARGUMENT:return y.INVALID_ARGUMENT;case $.NOT_FOUND:return y.NOT_FOUND;case $.ALREADY_EXISTS:return y.ALREADY_EXISTS;case $.PERMISSION_DENIED:return y.PERMISSION_DENIED;case $.FAILED_PRECONDITION:return y.FAILED_PRECONDITION;case $.ABORTED:return y.ABORTED;case $.OUT_OF_RANGE:return y.OUT_OF_RANGE;case $.UNIMPLEMENTED:return y.UNIMPLEMENTED;case $.DATA_LOSS:return y.DATA_LOSS;default:return S()}}(b=$||($={}))[b.OK=0]="OK",b[b.CANCELLED=1]="CANCELLED",b[b.UNKNOWN=2]="UNKNOWN",b[b.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",b[b.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",b[b.NOT_FOUND=5]="NOT_FOUND",b[b.ALREADY_EXISTS=6]="ALREADY_EXISTS",b[b.PERMISSION_DENIED=7]="PERMISSION_DENIED",b[b.UNAUTHENTICATED=16]="UNAUTHENTICATED",b[b.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",b[b.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",b[b.ABORTED=10]="ABORTED",b[b.OUT_OF_RANGE=11]="OUT_OF_RANGE",b[b.UNIMPLEMENTED=12]="UNIMPLEMENTED",b[b.INTERNAL=13]="INTERNAL",b[b.UNAVAILABLE=14]="UNAVAILABLE",b[b.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new at([4294967295,4294967295],0);function Mo(n){const e=ff().encode(n),t=new pd;return t.update(e),new Uint8Array(t.digest())}function Fo(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new at([t,r],0),new at([s,i],0)]}class di{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lt(`Invalid padding: ${t}`);if(r<0)throw new Lt(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lt(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Lt(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=at.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(at.fromNumber(r)));return s.compare(mf)===1&&(s=new at([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Mo(e),[r,s]=Fo(t);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new di(i,s,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=Mo(e),[r,s]=Fo(t);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Lt extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,_n.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Tr(R.min(),s,new q(k),Be(),N())}}class _n{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _n(r,t,N(),N(),N())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t,r,s){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=s}}class Gl{constructor(e,t){this.targetId=e,this.fe=t}}class Kl{constructor(e,t,r=ae.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Bo{constructor(){this.ge=0,this.pe=$o(),this.ye=ae.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=N(),t=N(),r=N();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:S()}}),new _n(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=$o()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,z(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class pf{constructor(e){this.Le=e,this.ke=new Map,this.qe=Be(),this.Qe=qo(),this.Ke=new q(k)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:S()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.fe.count,s=this.Ye(t);if(s){const i=s.target;if(hs(i))if(r===0){const o=new A(i.path);this.We(t,o,re.newNoDocument(o,R.min()))}else z(r===1);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=Xe(r).toUint8Array()}catch(l){if(l instanceof xl)return en("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new di(o,s,i)}catch(l){return en(l instanceof Lt?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(t,i,null),s++)}),s}it(e){const t=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&hs(a.target)){const l=new A(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,re.newNoDocument(l,e))}i.De&&(t.set(o,i.ve()),i.Fe())}});let r=N();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new Tr(e,t,this.Ke,this.qe,r);return this.qe=Be(),this.Qe=qo(),this.Ke=new q(k),s}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,t)?s.Me(t,1):s.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Bo,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Z(k),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||w("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Bo),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function qo(){return new q(A.comparator)}function $o(){return new q(A.comparator)}const gf=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),_f=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),yf=(()=>({and:"AND",or:"OR"}))();class vf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gs(n,e){return n.useProto3Json||_r(e)?e:{value:e}}function _s(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ql(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lt(n){return z(!!n),R.fromTimestamp(function(t){const r=Fe(t);return new K(r.seconds,r.nanos)}(n))}function Wl(n,e){return ys(n,e).canonicalString()}function ys(n,e){const t=function(s){return new F(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Yl(n){const e=F.fromString(n);return z(tc(e)),e}function jr(n,e){const t=Yl(e);if(t.get(1)!==n.databaseId.projectId)throw new T(y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new T(y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new A(Jl(t))}function Xl(n,e){return Wl(n.databaseId,e)}function Ef(n){const e=Yl(n);return e.length===4?F.emptyPath():Jl(e)}function Uo(n){return new F(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Jl(n){return z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function wf(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:S()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(z(h===void 0||typeof h=="string"),ae.fromBase64String(h||"")):(z(h===void 0||h instanceof Uint8Array),ae.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?y.UNKNOWN:Hl(c.code);return new T(h,c.message||"")}(o);t=new Kl(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jr(n,r.document.name),i=lt(r.document.updateTime),o=r.document.createTime?lt(r.document.createTime):R.min(),a=new we({mapValue:{fields:r.document.fields}}),l=re.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];t=new Pn(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jr(n,r.document),i=r.readTime?lt(r.readTime):R.min(),o=re.newNoDocument(s,i),a=r.removedTargetIds||[];t=new Pn([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jr(n,r.document),i=r.removedTargetIds||[];t=new Pn([],i,s,null)}else{if(!("filter"in e))return S();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new df(s,i),a=r.targetId;t=new Gl(a,o)}}return t}function Tf(n,e){return{documents:[Xl(n,e.path)]}}function Af(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Xl(n,s);const i=function(c){if(c.length!==0)return ec(ye.create(c,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:rt(f.field),direction:Rf(f.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=gs(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:t,parent:s}}function If(n){let e=Ef(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){z(r===1);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=function(d){const f=Zl(d);return f instanceof ye&&Cl(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(f=>function(_){return new Xn(st(_.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,_r(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Yn(m,f)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new Yn(m,f)}(t.endAt)),Kd(e,s,o,i,a,"F",l,c)}function xf(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return S()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Zl(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=st(t.unaryFilter.field);return j.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=st(t.unaryFilter.field);return j.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=st(t.unaryFilter.field);return j.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=st(t.unaryFilter.field);return j.create(o,"!=",{nullValue:"NULL_VALUE"});default:return S()}}(n):n.fieldFilter!==void 0?function(t){return j.create(st(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ye.create(t.compositeFilter.filters.map(r=>Zl(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return S()}}(t.compositeFilter.op))}(n):S()}function Rf(n){return gf[n]}function Sf(n){return _f[n]}function Cf(n){return yf[n]}function rt(n){return{fieldPath:n.canonicalString()}}function st(n){return se.fromServerFormat(n.fieldPath)}function ec(n){return n instanceof j?function(t){if(t.op==="=="){if(Co(t.value))return{unaryFilter:{field:rt(t.field),op:"IS_NAN"}};if(So(t.value))return{unaryFilter:{field:rt(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Co(t.value))return{unaryFilter:{field:rt(t.field),op:"IS_NOT_NAN"}};if(So(t.value))return{unaryFilter:{field:rt(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rt(t.field),op:Sf(t.op),value:t.value}}}(n):n instanceof ye?function(t){const r=t.getFilters().map(s=>ec(s));return r.length===1?r[0]:{compositeFilter:{op:Cf(t.op),filters:r}}}(n):S()}function tc(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,t,r,s,i=R.min(),o=R.min(),a=ae.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ke(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ke(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ke(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ke(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this.ct=e}}function Pf(n){const e=If({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fs(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._n=new Nf}addToCollectionParentIndex(e,t){return this._n.add(t),g.resolve()}getCollectionParents(e,t){return g.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return g.resolve()}deleteFieldIndex(e,t){return g.resolve()}deleteAllFieldIndexes(e){return g.resolve()}createTargetIndexes(e,t){return g.resolve()}getDocumentsMatchingTarget(e,t){return g.resolve(null)}getIndexType(e,t){return g.resolve(0)}getFieldIndexes(e,t){return g.resolve([])}getNextCollectionGroupToUpdate(e){return g.resolve(null)}getMinOffset(e,t){return g.resolve(Me.min())}getMinOffsetFromCollectionGroup(e,t){return g.resolve(Me.min())}updateCollectionGroup(e,t,r){return g.resolve()}updateIndexEntries(e,t){return g.resolve()}}class Nf{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Z(F.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Z(F.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new _t(0)}static Bn(){return new _t(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this.changes=new xt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,re.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?g.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&jt(r.mutation,s,De.empty(),K.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,N()).next(()=>r))}getLocalViewOfDocuments(e,t,r=N()){const s=Ge();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=Ot();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ge();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,N()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,s){let i=Be();const o=Ut(),a=function(){return Ut()}();return t.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof wr)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),jt(h.mutation,c,h.mutation.getFieldMask(),K.now())):o.set(c.key,De.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var d;return a.set(c,new kf(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Ut();let s=new q((o,a)=>o-a),i=N();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=r.get(l)||De.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||N()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=Ml();h.forEach(f=>{if(!i.has(f)){const m=jl(t.get(f),r.get(f));m!==null&&d.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return g.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return A.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):g.resolve(Ge());let a=-1,l=i;return o.next(c=>g.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?g.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,N())).next(h=>({batchId:a,changes:Jd(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new A(t)).next(r=>{let s=Ot();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=Ot();return this.indexManager.getCollectionParents(e,i).next(a=>g.forEach(a,l=>{const c=function(d,f){return new gn(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,re.newInvalidDocument(h)))});let a=Ot();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&jt(h.mutation,c,De.empty(),K.now()),vr(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return g.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:lt(s.createTime)}}(t)),g.resolve()}getNamedQuery(e,t){return g.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(s){return{name:s.name,query:Pf(s.bundledQuery),readTime:lt(s.readTime)}}(t)),g.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this.overlays=new q(A.comparator),this.hr=new Map}getOverlay(e,t){return g.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ge();return g.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.ht(e,t,i)}),g.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),g.resolve()}getOverlaysForCollection(e,t,r){const s=Ge(),i=t.length+1,o=new A(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return g.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new q((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Ge(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ge(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return g.resolve(a)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hf(t,r));let i=this.hr.get(t);i===void 0&&(i=N(),this.hr.set(t,i)),this.hr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.Pr=new Z(G.Ir),this.Tr=new Z(G.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new G(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new G(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new A(new F([])),r=new G(t,e),s=new G(t,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new A(new F([])),r=new G(t,e),s=new G(t,e+1);let i=N();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new G(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class G{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return A.comparator(e.key,t.key)||k(e.pr,t.pr)}static Er(e,t){return k(e.pr,t.pr)||A.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Z(G.Ir)}checkEmpty(e){return g.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uf(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new G(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return g.resolve(o)}lookupMutationBatch(e,t){return g.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.br(r),i=s<0?0:s;return g.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return g.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return g.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new G(t,0),s=new G(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),g.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Z(k);return t.forEach(s=>{const i=new G(s,0),o=new G(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),g.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;A.isDocumentKey(i)||(i=i.child(""));const o=new G(new A(i),0);let a=new Z(k);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),g.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){z(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return g.forEach(t.mutations,s=>{const i=new G(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new G(t,0),s=this.wr.firstAfterOrEqual(r);return g.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,g.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.vr=e,this.docs=function(){return new q(A.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return g.resolve(r?r.document.mutableCopy():re.newInvalidDocument(t))}getEntries(e,t){let r=Be();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():re.newInvalidDocument(s))}),g.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=Be();const o=t.path,a=new A(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Cd(Sd(h),r)<=0||(s.has(h.key)||vr(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return g.resolve(i)}getAllFromCollectionGroup(e,t,r,s){S()}Fr(e,t){return g.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qf(this)}getSize(e){return g.resolve(this.size)}}class qf extends Df{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),g.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.persistence=e,this.Mr=new xt(t=>li(t),ci),this.lastRemoteSnapshotVersion=R.min(),this.highestTargetId=0,this.Or=0,this.Nr=new fi,this.targetCount=0,this.Br=_t.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,s)=>t(s)),g.resolve()}getLastRemoteSnapshotVersion(e){return g.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return g.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),g.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),g.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new _t(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,g.resolve()}updateTargetData(e,t){return this.qn(t),g.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,g.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),g.waitFor(i).next(()=>s)}getTargetCount(e){return g.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return g.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),g.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),g.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),g.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return g.resolve(r)}containsKey(e,t){return g.resolve(this.Nr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.Lr={},this.overlays={},this.kr=new si(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new $f(this),this.indexManager=new Vf,this.remoteDocumentCache=function(s){return new Bf(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new bf(t),this.$r=new Lf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new Ff(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){w("MemoryPersistence","Starting transaction:",e);const s=new jf(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,t){return g.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class jf extends Pd{constructor(e){super(),this.currentSequenceNumber=e}}class mi{constructor(e){this.persistence=e,this.zr=new fi,this.jr=null}static Hr(e){return new mi(e)}get Jr(){if(this.jr)return this.jr;throw S()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),g.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),g.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),g.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return g.forEach(this.Jr,r=>{const s=A.fromPath(r);return this.Yr(e,s).next(i=>{i||t.removeEntry(s,R.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return g.or([()=>g.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=s}static Ki(e,t){let r=N(),s=N();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pi(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ru()?8:He.v(Bn())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ji(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zf;return this.Ji(e,t,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>i.result)}Yi(e,t,r,s){return r.documentReadCount<this.Wi?(Nt()<=V.DEBUG&&w("QueryEngine","SDK will not create cache indexes for query:",nt(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),g.resolve()):(Nt()<=V.DEBUG&&w("QueryEngine","Query:",nt(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Nt()<=V.DEBUG&&w("QueryEngine","The SDK decides to create cache indexes for query:",nt(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ie(t))):g.resolve())}ji(e,t){if(No(t))return g.resolve(null);let r=Ie(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=fs(t,null,"F"),r=Ie(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=N(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,o,l.readTime)?this.ji(e,fs(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,r,s){return No(t)||s.isEqual(R.min())?g.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(t,i);return this.Xi(t,o,r,s)?g.resolve(null):(Nt()<=V.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),nt(t)),this.es(e,o,t,Rd(s,-1)).next(a=>a))})}Zi(e,t){let r=new Z(Ol(e));return t.forEach((s,i)=>{vr(e,i)&&(r=r.add(i))}),r}Xi(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,t,r){return Nt()<=V.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",nt(t)),this.zi.getDocumentsMatchingQuery(e,t,Me.min(),r)}es(e,t,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t,r,s){this.persistence=e,this.ts=t,this.serializer=s,this.ns=new q(k),this.rs=new xt(i=>li(i),ci),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Of(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function Kf(n,e,t,r){return new Gf(n,e,t,r)}async function nc(n,e){const t=D(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=N();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function rc(n){const e=D(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function Qf(n,e){const t=D(n),r=e.snapshotVersion;let s=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.os.newChangeBuffer({trackRemovals:!0});s=t.ns;const a=[];e.targetChanges.forEach((h,d)=>{const f=s.get(d);if(!f)return;a.push(t.Qr.removeMatchingKeys(i,h.removedDocuments,d).next(()=>t.Qr.addMatchingKeys(i,h.addedDocuments,d)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(ae.EMPTY_BYTE_STRING,R.min()).withLastLimboFreeSnapshotVersion(R.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(d,m),function(v,I,P){return v.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(f,m,h)&&a.push(t.Qr.updateTargetData(i,m))});let l=Be(),c=N();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(Wf(i,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(R.min())){const h=t.Qr.getLastRemoteSnapshotVersion(i).next(d=>t.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return g.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(t.ns=s,i))}function Wf(n,e,t){let r=N(),s=N();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=Be();return t.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(R.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):w("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function Yf(n,e){const t=D(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Qr.getTargetData(r,e).next(i=>i?(s=i,g.resolve(s)):t.Qr.allocateTargetId(r).next(o=>(s=new ke(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}async function vs(n,e,t){const r=D(n),s=r.ns.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!mn(o))throw o;w("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function jo(n,e,t){const r=D(n);let s=R.min(),i=N();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=D(l),f=d.rs.get(h);return f!==void 0?g.resolve(d.ns.get(f)):d.Qr.getTargetData(c,h)}(r,o,Ie(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?s:R.min(),t?i:N())).next(a=>(Xf(r,Wd(e),a),{documents:a,hs:i})))}function Xf(n,e,t){let r=n.ss.get(e)||R.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.ss.set(e,r)}class zo{constructor(){this.activeTargetIds=tf()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jf{constructor(){this.no=new zo,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new zo,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sn=null;function zr(){return Sn===null?Sn=function(){return 268435456+Math.round(2147483648*Math.random())}():Sn++,"0x"+Sn.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne="WebChannelConnection";class nm extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(t,r,s,i,o){const a=zr(),l=this.bo(t,r.toUriEncodedString());w("RestConnection",`Sending RPC '${t}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(t,l,c,s).then(h=>(w("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw en("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}vo(t,r,s,i,o,a){return this.So(t,r,s,i,o)}Do(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+It}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>t[o]=i),s&&s.headers.forEach((i,o)=>t[o]=i)}bo(t,r){const s=em[t];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,s){const i=zr();return new Promise((o,a)=>{const l=new md;l.setWithCredentials(!0),l.listenOnce(dd.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case $r.NO_ERROR:const h=l.getResponseJson();w(ne,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case $r.TIMEOUT:w(ne,`RPC '${e}' ${i} timed out`),a(new T(y.DEADLINE_EXCEEDED,"Request time out"));break;case $r.HTTP_ERROR:const d=l.getStatus();if(w(ne,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const _=function(I){const P=I.toLowerCase().replace(/_/g,"-");return Object.values(y).indexOf(P)>=0?P:y.UNKNOWN}(m.status);a(new T(_,m.message))}else a(new T(y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new T(y.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{w(ne,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);w(ne,`RPC '${e}' ${i} sending request:`,s),l.send(t,"POST",c,r,15)})}Fo(e,t,r){const s=zr(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ud(),a=hd(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=i.join("");w(ne,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const _=new tm({lo:I=>{m?w(ne,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(f||(w(ne,`Opening RPC '${e}' stream ${s} transport.`),d.open(),f=!0),w(ne,`RPC '${e}' stream ${s} sending:`,I),d.send(I))},ho:()=>d.close()}),v=(I,P,L)=>{I.listen(P,C=>{try{L(C)}catch(ue){setTimeout(()=>{throw ue},0)}})};return v(d,In.EventType.OPEN,()=>{m||w(ne,`RPC '${e}' stream ${s} transport opened.`)}),v(d,In.EventType.CLOSE,()=>{m||(m=!0,w(ne,`RPC '${e}' stream ${s} transport closed`),_.Vo())}),v(d,In.EventType.ERROR,I=>{m||(m=!0,en(ne,`RPC '${e}' stream ${s} transport errored:`,I),_.Vo(new T(y.UNAVAILABLE,"The operation could not be completed")))}),v(d,In.EventType.MESSAGE,I=>{var P;if(!m){const L=I.data[0];z(!!L);const C=L,ue=C.error||((P=C[0])===null||P===void 0?void 0:P.error);if(ue){w(ne,`RPC '${e}' stream ${s} received error:`,ue);const ee=ue.status;let te=function(H){const me=$[H];if(me!==void 0)return Hl(me)}(ee),de=ue.message;te===void 0&&(te=y.INTERNAL,de="Unknown error status: "+ee+" with message "+ue.message),m=!0,_.Vo(new T(te,de)),d.close()}else w(ne,`RPC '${e}' stream ${s} received:`,L),_.mo(L)}}),v(a,fd.STAT_EVENT,I=>{I.stat===Eo.PROXY?w(ne,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Eo.NOPROXY&&w(ne,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}}function Hr(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(n){return new vf(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,t-r);s>0&&w("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new sc(e,t)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():t&&t.code===y.RESOURCE_EXHAUSTED?(Re(t.toString()),Re("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===t&&this.o_(r,s)},r=>{e(()=>{const s=new T(y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sm extends rm{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=wf(this.serializer,e),r=function(i){if(!("targetChange"in i))return R.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?R.min():o.readTime?lt(o.readTime):R.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=Uo(this.serializer),t.addTarget=function(i,o){let a;const l=o.target;if(a=hs(l)?{documents:Tf(i,l)}:{query:Af(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ql(i,o.resumeToken);const c=gs(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(R.min())>0){a.readTime=_s(i,o.snapshotVersion.toTimestamp());const c=gs(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=xf(this.serializer,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=Uo(this.serializer),t.removeTarget=e,this.t_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new T(y.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,ys(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new T(y.UNKNOWN,i.toString())})}vo(e,t,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,ys(t,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new T(y.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class om{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Re(t),this.g_=!1):w("OnlineStateTracker",t)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{vn(this)&&(w("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=D(l);c.v_.add(4),await yn(c),c.x_.set("Unknown"),c.v_.delete(4),await Ir(c)}(this))})}),this.x_=new om(r,s)}}async function Ir(n){if(vn(n))for(const e of n.F_)await e(!0)}async function yn(n){for(const e of n.F_)await e(!1)}function ic(n,e){const t=D(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),yi(t)?_i(t):Rt(t).Jo()&&gi(t,e))}function oc(n,e){const t=D(n),r=Rt(t);t.C_.delete(e),r.Jo()&&ac(t,e),t.C_.size===0&&(r.Jo()?r.Xo():vn(t)&&t.x_.set("Unknown"))}function gi(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(R.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rt(n).c_(e)}function ac(n,e){n.O_.Oe(e),Rt(n).l_(e)}function _i(n){n.O_=new pf({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Rt(n).start(),n.x_.p_()}function yi(n){return vn(n)&&!Rt(n).Ho()&&n.C_.size>0}function vn(n){return D(n).v_.size===0}function lc(n){n.O_=void 0}async function lm(n){n.C_.forEach((e,t)=>{gi(n,e)})}async function cm(n,e){lc(n),yi(n)?(n.x_.S_(e),_i(n)):n.x_.set("Unknown")}async function um(n,e,t){if(n.x_.set("Online"),e instanceof Kl&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(n,e)}catch(r){w("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Go(n,r)}else if(e instanceof Pn?n.O_.$e(e):e instanceof Gl?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(R.min()))try{const r=await rc(n.localStore);t.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.C_.get(c);h&&i.C_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.C_.get(l);if(!h)return;i.C_.set(l,h.withResumeToken(ae.EMPTY_BYTE_STRING,h.snapshotVersion)),ac(i,l);const d=new ke(h.target,l,c,h.sequenceNumber);gi(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){w("RemoteStore","Failed to raise snapshot:",r),await Go(n,r)}}async function Go(n,e,t){if(!mn(e))throw e;n.v_.add(1),await yn(n),n.x_.set("Offline"),t||(t=()=>rc(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{w("RemoteStore","Retrying IndexedDB access"),await t(),n.v_.delete(1),await Ir(n)})}async function Ko(n,e){const t=D(n);t.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");const r=vn(t);t.v_.add(3),await yn(t),r&&t.x_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),await Ir(t)}async function hm(n,e){const t=D(n);e?(t.v_.delete(2),await Ir(t)):e||(t.v_.add(2),await yn(t),t.x_.set("Unknown"))}function Rt(n){return n.N_||(n.N_=function(t,r,s){const i=D(t);return i.R_(),new sm(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Po:lm.bind(null,n),To:cm.bind(null,n),u_:um.bind(null,n)}),n.F_.push(async e=>{e?(n.N_.Zo(),yi(n)?_i(n):n.x_.set("Unknown")):(await n.N_.stop(),lc(n))})),n.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new vi(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new T(y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cc(n,e){if(Re("AsyncQueue",`${e}: ${n}`),mn(n))return new T(y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e?(t,r)=>e(t,r)||A.comparator(t.key,r.key):(t,r)=>A.comparator(t.key,r.key),this.keyedMap=Ot(),this.sortedSet=new q(this.comparator)}static emptySet(e){return new ct(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`
`)+`
)`}copy(e,t){const r=new ct;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.L_=new q(A.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(t,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(t):e.type===1&&r.type===2?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):S():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class yt{constructor(e,t,r,s,i,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new yt(e,t,ct.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.q_=void 0,this.Q_=[]}}class fm{constructor(){this.queries=new xt(e=>kl(e),yr),this.onlineState="Unknown",this.K_=new Set}}async function mm(n,e){const t=D(n),r=e.query;let s=!1,i=t.queries.get(r);if(i||(s=!0,i=new dm),s)try{i.q_=await t.onListen(r)}catch(o){const a=cc(o,`Initialization of query '${nt(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,i),i.Q_.push(e),e.U_(t.onlineState),i.q_&&e.W_(i.q_)&&Ei(t)}async function pm(n,e){const t=D(n),r=e.query;let s=!1;const i=t.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),s=i.Q_.length===0)}if(s)return t.queries.delete(r),t.onUnlisten(r)}function gm(n,e){const t=D(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.Q_)a.W_(s)&&(r=!0);o.q_=s}}r&&Ei(t)}function _m(n,e,t){const r=D(n),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(t);r.queries.delete(e)}function Ei(n){n.K_.forEach(e=>{e.next()})}class ym{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yt(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const r=t!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Y_(e){e=yt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this.key=e}}class hc{constructor(e){this.key=e}}class vm{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=N(),this.mutatedKeys=N(),this.ua=Ol(e),this.ca=new ct(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new Qo,s=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const f=s.get(h),m=vr(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?_!==v&&(r.track({type:3,doc:m}),I=!0):this.Ia(f,m)||(r.track({type:2,doc:m}),I=!0,(l&&this.ua(m,l)>0||c&&this.ua(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),I=!0):f&&!m&&(r.track({type:1,doc:f}),I=!0,(l||c)&&(a=!0)),I&&(m?(o=o.add(m),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{ca:o,Pa:r,Xi:a,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((h,d)=>function(m,_){const v=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return v(m)-v(_)}(h.type,d.type)||this.ua(h.doc,d.doc)),this.Ta(r),s=s!=null&&s;const a=t&&!s?this.Ea():[],l=this.aa.size===0&&this.current&&!s?1:0,c=l!==this._a;return this._a=l,o.length!==0||c?{snapshot:new yt(this.query,e.ca,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Qo,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=N(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new hc(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new uc(r))}),t}Ra(e){this.oa=e.hs,this.aa=N();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return yt.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class Em{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wm{constructor(e){this.key=e,this.ma=!1}}class Tm{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new xt(a=>kl(a),yr),this.pa=new Map,this.ya=new Set,this.wa=new q(A.comparator),this.Sa=new Map,this.ba=new fi,this.Da={},this.Ca=new Map,this.va=_t.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function Am(n,e){const t=Pm(n);let r,s;const i=t.ga.get(e);if(i)r=i.targetId,t.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{const o=await Yf(t.localStore,Ie(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await Im(t,e,r,a==="current",o.resumeToken),t.isPrimaryClient&&ic(t.remoteStore,o)}return s}async function Im(n,e,t,r,s){n.Ma=(d,f,m)=>async function(v,I,P,L){let C=I.view.ha(P);C.Xi&&(C=await jo(v.localStore,I.query,!1).then(({documents:de})=>I.view.ha(de,C)));const ue=L&&L.targetChanges.get(I.targetId),ee=L&&L.targetMismatches.get(I.targetId)!=null,te=I.view.applyChanges(C,v.isPrimaryClient,ue,ee);return Yo(v,I.targetId,te.da),te.snapshot}(n,d,f,m);const i=await jo(n.localStore,e,!0),o=new vm(e,i.hs),a=o.ha(i.documents),l=_n.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),c=o.applyChanges(a,n.isPrimaryClient,l);Yo(n,t,c.da);const h=new Em(e,t,o);return n.ga.set(e,h),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),c.snapshot}async function xm(n,e){const t=D(n),r=t.ga.get(e),s=t.pa.get(r.targetId);if(s.length>1)return t.pa.set(r.targetId,s.filter(i=>!yr(i,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||await vs(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),oc(t.remoteStore,r.targetId),Es(t,r.targetId)}).catch(ti)):(Es(t,r.targetId),await vs(t.localStore,r.targetId,!0))}async function dc(n,e){const t=D(n);try{const r=await Qf(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t.Sa.get(i);o&&(z(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?z(o.ma):s.removedDocuments.size>0&&(z(o.ma),o.ma=!1))}),await mc(t,r,e)}catch(r){await ti(r)}}function Wo(n,e,t){const r=D(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ga.forEach((i,o)=>{const a=o.view.U_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=D(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Q_)f.U_(a)&&(c=!0)}),c&&Ei(l)}(r.eventManager,e),s.length&&r.fa.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Rm(n,e,t){const r=D(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Sa.get(e),i=s&&s.key;if(i){let o=new q(A.comparator);o=o.insert(i,re.newNoDocument(i,R.min()));const a=N().add(i),l=new Tr(R.min(),new Map,new q(k),o,a);await dc(r,l),r.wa=r.wa.remove(i),r.Sa.delete(e),wi(r)}else await vs(r.localStore,e,!1).then(()=>Es(r,e,t)).catch(ti)}function Es(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||fc(n,r)})}function fc(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);t!==null&&(oc(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),wi(n))}function Yo(n,e,t){for(const r of t)r instanceof uc?(n.ba.addReference(r.key,e),Sm(n,r)):r instanceof hc?(w("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||fc(n,r.key)):S()}function Sm(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(w("SyncEngine","New document in limbo: "+t),n.ya.add(r),wi(n))}function wi(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new A(F.fromString(e)),r=n.va.next();n.Sa.set(r,new wm(t)),n.wa=n.wa.insert(t,r),ic(n.remoteStore,new ke(Ie(Nl(t.path)),r,"TargetPurposeLimboResolution",si._e))}}async function mc(n,e,t){const r=D(n),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const h=pi.Ki(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.fa.u_(s),await async function(l,c){const h=D(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>g.forEach(c,f=>g.forEach(f.qi,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>g.forEach(f.Qi,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!mn(d))throw d;w("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.ns.get(f),_=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(_);h.ns=h.ns.insert(f,v)}}}(r.localStore,i))}async function Cm(n,e){const t=D(n);if(!t.currentUser.isEqual(e)){w("SyncEngine","User change. New user:",e.toKey());const r=await nc(t.localStore,e);t.currentUser=e,function(i,o){i.Ca.forEach(a=>{a.forEach(l=>{l.reject(new T(y.CANCELLED,o))})}),i.Ca.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mc(t,r.us)}}function bm(n,e){const t=D(n),r=t.Sa.get(e);if(r&&r.ma)return N().add(r.key);{let s=N();const i=t.pa.get(e);if(!i)return s;for(const o of i){const a=t.ga.get(o);s=s.unionWith(a.view.la)}return s}}function Pm(n){const e=D(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rm.bind(null,e),e.fa.u_=gm.bind(null,e.eventManager),e.fa.xa=_m.bind(null,e.eventManager),e}class Xo{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ar(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Kf(this.persistence,new Hf,e.initialUser,this.serializer)}createPersistence(e){return new Uf(mi.Hr,this.serializer)}createSharedClientState(e){return new Jf}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wo(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cm.bind(null,this.syncEngine),await hm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fm}()}createDatastore(e){const t=Ar(e.databaseInfo.databaseId),r=function(i){return new nm(i)}(e.databaseInfo);return function(i,o,a,l){return new im(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,a){return new am(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>Wo(this.syncEngine,t,0),function(){return Ho.D()?new Ho:new Zf}())}createSyncEngine(e,t){return function(s,i,o,a,l,c,h){const d=new Tm(s,i,o,a,l,c);return h&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(r){const s=D(r);w("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await yn(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Re("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=he.UNAUTHENTICATED,this.clientId=Id.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{w("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(w("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Le;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=cc(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gr(n,e){n.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nc(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Jo(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Om(n);w("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ko(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Ko(e.remoteStore,s)),n._onlineComponents=e}function km(n){return n.name==="FirebaseError"?n.code===y.FAILED_PRECONDITION||n.code===y.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function Om(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){w("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gr(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!km(t))throw t;en("Error using user provided cache. Falling back to memory cache: "+t),await Gr(n,new Xo)}}else w("FirestoreClient","Using default OfflineComponentProvider"),await Gr(n,new Xo);return n._offlineComponents}async function Lm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(w("FirestoreClient","Using user provided OnlineComponentProvider"),await Jo(n,n._uninitializedComponentsProvider._online)):(w("FirestoreClient","Using default OnlineComponentProvider"),await Jo(n,new Vm))),n._onlineComponents}async function Mm(n){const e=await Lm(n),t=e.eventManager;return t.onListen=Am.bind(null,e.syncEngine),t.onUnlisten=xm.bind(null,e.syncEngine),t}function Fm(n,e,t={}){const r=new Le;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new Nm({next:f=>{o.enqueueAndForget(()=>pm(i,d)),f.fromCache&&l.source==="server"?c.reject(new T(y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new ym(a,h,{includeMetadataChanges:!0,Z_:!0});return mm(i,d)}(await Mm(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n,e,t){if(!t)throw new T(y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qm(n,e,t,r){if(e===!0&&r===!0)throw new T(y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ea(n){if(A.isDocumentKey(n))throw new T(y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xr(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":S()}function ta(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new T(y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xr(n);throw new T(y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new T(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new T(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pc((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gc{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new na({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new T(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new na(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _d;switch(r.type){case"firstParty":return new Ed(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new T(y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Zo.get(t);r&&(w("ComponentProvider","Removing Datastore"),Zo.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new St(this.firestore,e,this._query)}}class Pe{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ut(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}}class ut extends St{constructor(e,t,r){super(e,t,Nl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new A(e))}withConverter(e){return new ut(this.firestore,e,this._path)}}function $m(n,e,...t){if(n=qn(n),Bm("collection","path",e),n instanceof gc){const r=F.fromString(e,...t);return ea(r),new ut(n,null,r)}{if(!(n instanceof Pe||n instanceof ut))throw new T(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(F.fromString(e,...t));return ea(r),new ut(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new sc(this,"async_queue_retry"),this._u=()=>{const t=Hr();t&&w("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=Hr();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Hr();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new Le;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!mn(e))throw e;w("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Re("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const s=vi.createAndSchedule(this,e,t,r,i=>this.lu(i));return this.nu.push(s),s}au(){this.ru&&S()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class _c extends gc{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=function(){return new Um}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||yc(this),this._firestoreClient.terminate()}}function jm(n){return n._firestoreClient||yc(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yc(n){var e,t,r;const s=n._freezeSettings(),i=function(a,l,c,h){return new Od(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,pc(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._firestoreClient=new Dm(n._authCredentials,n._appCheckCredentials,n._queue,i),((t=s.localCache)===null||t===void 0?void 0:t._offlineComponentProvider)&&((r=s.localCache)===null||r===void 0?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vt(ae.fromBase64String(e))}catch(t){throw new T(y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vt(ae.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new T(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return k(this._lat,e._lat)||k(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=/^__.*__$/;function wc(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}class Ai{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Ai(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.mu(e),s}fu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return ws(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(wc(this.du)&&zm.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Hm{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ar(e)}Su(e,t,r,s=!1){return new Ai({du:e,methodName:t,wu:r,path:se.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gm(n){const e=n._freezeSettings(),t=Ar(n._databaseId);return new Hm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Km(n,e,t,r=!1){return Ii(t,n.Su(r?4:3,e))}function Ii(n,e){if(Tc(n=qn(n)))return Wm("Unsupported field value:",e,n),Qm(n,e);if(n instanceof Ec)return function(r,s){if(!wc(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ii(a,s.gu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=qn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nf(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=K.fromDate(r);return{timestampValue:_s(s.serializer,i)}}if(r instanceof K){const i=new K(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_s(s.serializer,i)}}if(r instanceof Ti)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vt)return{bytesValue:Ql(s.serializer,r._byteString)};if(r instanceof Pe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wl(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${xr(r)}`)}(n,e)}function Qm(n,e){const t={};return Il(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pn(n,(r,s)=>{const i=Ii(s,e.Ru(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function Tc(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof K||n instanceof Ti||n instanceof vt||n instanceof Pe||n instanceof Ec)}function Wm(n,e,t){if(!Tc(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=xr(t);throw r==="an object"?e.pu(n+" a custom object"):e.pu(n+" "+r)}}const Ym=new RegExp("[~\\*/\\[\\]]");function Xm(n,e,t){if(e.search(Ym)>=0)throw ws(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vc(...e.split("."))._internalPath}catch{throw ws(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ws(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new T(y.INVALID_ARGUMENT,a+n+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Jm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ic("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Jm extends Ac{data(){return super.data()}}function Ic(n,e){return typeof e=="string"?Xm(n,e):e instanceof vc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new T(y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xi{}class ep extends xi{}function tp(n,e,...t){let r=[];e instanceof xi&&r.push(e),r=r.concat(t),function(i){const o=i.filter(l=>l instanceof Si).length,a=i.filter(l=>l instanceof Ri).length;if(o>1||o>0&&a>0)throw new T(y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Ri extends ep{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ri(e,t,r)}_apply(e){const t=this._parse(e);return xc(e._query,t),new St(e.firestore,e.converter,ds(e._query,t))}_parse(e){const t=Gm(e.firestore);return function(i,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new T(y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){sa(d,h);const m=[];for(const _ of d)m.push(ra(l,i,_));f={arrayValue:{values:m}}}else f=ra(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||sa(d,h),f=Km(a,o,d,h==="in"||h==="not-in");return j.create(c,h,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Si extends xi{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Si(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ye.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)xc(o,l),o=ds(o,l)}(e._query,t),new St(e.firestore,e.converter,ds(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ra(n,e,t){if(typeof(t=qn(t))=="string"){if(t==="")throw new T(y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dl(e)&&t.indexOf("/")!==-1)throw new T(y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(F.fromString(t));if(!A.isDocumentKey(r))throw new T(y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ro(n,new A(r))}if(t instanceof Pe)return Ro(n,t._key);throw new T(y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xr(t)}.`)}function sa(n,e){if(!Array.isArray(n)||n.length===0)throw new T(y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xc(n,e){const t=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new T(y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new T(y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class np{convertValue(e,t="none"){switch(Je(e)){case 0:return null;case 1:return e.booleanValue;case 2:return U(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xe(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw S()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return pn(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertGeoPoint(e){return new Ti(U(e.latitude),U(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=oi(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nn(e));default:return null}}convertTimestamp(e){const t=Fe(e);return new K(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=F.fromString(e);z(tc(r));const s=new rn(r.get(1),r.get(3)),i=new A(r.popFirst(5));return s.isEqual(t)||Re(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rp extends Ac{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ic("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vn extends rp{data(e={}){return super.data(e)}}class sp{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Cn(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vn(this._firestore,this._userDataWriter,r.key,r,new Cn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Vn(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Cn(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Vn(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Cn(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:ip(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ip(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}class op extends np{constructor(e){super(),this.firestore=e}convertBytes(e){return new vt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,t)}}function ap(n){n=ta(n,St);const e=ta(n.firestore,_c),t=jm(e),r=new op(e);return Zm(n._query),Fm(t,n._query).then(s=>new sp(e,r,n,s))}(function(e,t=!0){(function(s){It=s})(eh),Un(new $n("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new _c(new yd(r.getProvider("auth-internal")),new Td(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new T(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rn(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Mt(wo,"4.4.1",e),Mt(wo,"4.4.1","esm2017")})();const Ci={__name:"BlogHome",__ssrInlineRender:!0,setup(n){const e=u.ref([]),t=u.ref([]);pe.useMeta({title:"Ess\xEAncia BAHIANA | Blog",meta:{description:{name:"description",content:"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},keywords:{name:"keywords",content:"Porto Seguro, Pontos tur\xEDsticos em Porto Seguro, Passeios em Porto Seguro, Traslados em Porto Seguro, Turismo na Bahia, Viagens pela Bahia, Melhores experi\xEAncias em Porto Seguro, Roteiros de viagem em Porto Seguro, Atra\xE7\xF5es tur\xEDsticas na regi\xE3o, Servi\xE7o de transporte em Porto Seguro, Roteiro de viagem personalizado, Dicas de viagem para Porto Seguro, Destinos na Bahia, Planejamento de viagem, Experi\xEAncias memor\xE1veis na Bahia."},ogTitle:{property:"og:title",template(){return"Ess\xEAncia BAHIANA | Blog"}},ogDescription:{property:"og:description",template(){return"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"}},ogImage:{property:"og:image",template(){return"https://essenciabahiana.com.br/hero.webp"}},twitterTitle:{property:"twitter:title",template(){return"Ess\xEAncia BAHIANA | Blog"}},twitterDescription:{property:"twitter:description",template(){return"Descubra as maravilhas de Porto Seguro e seus arredores conosco. Nosso blog 'Ess\xEAncia Bahiaa' oferece informa\xE7\xF5es detalhadas sobre os melhores pontos tur\xEDsticos e experi\xEAncias imperd\xEDveis na regi\xE3o. Planeje sua viagem com facilidade, explore nossa sele\xE7\xE3o de passeios emocionantes e traslados confort\xE1veis. Sua aventura inesquec\xEDvel come\xE7a aqui!"}},twitterImage:{property:"twitter:image",template(){return"https://essenciabahiana.com.br/hero.webp"}}}}),u.onBeforeMount(()=>{e.value=[],t.value=[];const o=$m(bs,"blog"),a=tp(o);ap(a).then(l=>{l.forEach(c=>{c.data().featured?e.value.push({id:c.id,...c.data()}):t.value.push({id:c.id,...c.data()})})})});const r=u.ref("Ess\xEAncia"),s=u.ref("Bahiana"),i=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);return(o,a,l,c)=>{const h=u.resolveComponent("q-page");a(p.ssrRenderComponent(h,u.mergeProps({class:"blog-home"},c),{default:u.withCtx((d,f,m,_)=>{if(f)f(`<main class="my-28 md:mt-48 md:mb-10 flex flex-col"${_}>`),e.value.length>0?f(p.ssrRenderComponent(Mn,{dataHero:e.value},null,m,_)):f("<!---->"),f(`<div class="flex container mx-auto"${_}>`),t.value?(f(`<section class="w-full md:w-8/12 xl:w-9/12"${_}><!--[-->`),p.ssrRenderList(t.value,v=>{f(p.ssrRenderComponent(Fn,{article:v,key:v.title},null,m,_))}),f("<!--]--></section>")):f("<!---->"),f(`<aside class="w-full md:w-4/12 xl:w-3/12"${_}>`),f(p.ssrRenderComponent(dt,null,null,m,_)),f("</aside></div></main>"),f(p.ssrRenderComponent(xe,{firstTitle:r.value,secondTitle:s.value,copyRight:i.value},null,m,_));else return[u.createVNode("main",{class:"my-28 md:mt-48 md:mb-10 flex flex-col"},[e.value.length>0?(u.openBlock(),u.createBlock(Mn,{key:0,dataHero:e.value},null,8,["dataHero"])):u.createCommentVNode("",!0),u.createVNode("div",{class:"flex container mx-auto"},[t.value?(u.openBlock(),u.createBlock("section",{key:0,class:"w-full md:w-8/12 xl:w-9/12"},[(u.openBlock(!0),u.createBlock(u.Fragment,null,u.renderList(t.value,v=>(u.openBlock(),u.createBlock(Fn,{article:v,key:v.title},null,8,["article"]))),128))])):u.createCommentVNode("",!0),u.createVNode("aside",{class:"w-full md:w-4/12 xl:w-3/12"},[u.createVNode(dt)])])]),u.createVNode(xe,{firstTitle:r.value,secondTitle:s.value,copyRight:i.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},l))}}},ia=Ci.setup;Ci.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/BlogHome.vue"),ia?ia(n,e):void 0};var lp=Object.freeze(Object.defineProperty({__proto__:null,default:Ci},Symbol.toStringTag,{value:"Module"}));const Rc=la.defineStore("postStore",{state:()=>({post:{},isDataLoaded:!1,title:"Page",description:"Ess\xEAncia Bahiana Site",keywords:"",imageURL:"hero.webp"}),actions:{async fetchPost(n){const e=zt.doc(bs,"blog",n),t=await zt.getDoc(e);t.exists()&&(this.post={id:t.id,...t.data()},this.title=this.post.title,this.description=this.post.description,this.keywords=this.post.keywords,this.imageURL=this.post.imageURL),this.isDataLoaded=!0}}}),cp={preFetch({store:n,currentRoute:e}){const t=Rc(n),r=e.params.id;return t.fetchPost(r)}},bi=Object.assign(cp,{__name:"BlogPage",__ssrInlineRender:!0,setup(n){const e=ht.useRoute(),t=Rc(),r=u.ref("Ess\xEAncia"),s=u.ref("Bahiana"),i=u.ref(`\xA9 ${new Date().getFullYear()} Essencia Bahiana. Todos os direitos reservados.`);async function o(a){await t.fetchPost(a)}return u.onMounted(async()=>{await o(e.params.id)}),u.watch(()=>e.params.id,async a=>{await o(a)}),pe.useMeta(()=>({title:t.title,titleTemplate:a=>`Ess\xEAncia BAHIANA | Blog | ${a}`,meta:{description:{name:"description",content:t.description},keywords:{name:"keywords",content:t.keywords},"http-equiv":{"http-equiv":"Content-Type",content:"text/html charset=UTF-8"},ogTitle:{property:"og:title",content:`Ess\xEAncia BAHIANA | ${t.title}`},ogDescription:{property:"og:description",content:t.description},ogImage:{property:"og:image",content:`https://essenciabahiana.com.br/${t.imageURL}`},twitterTitle:{property:"twitter:title",content:`Ess\xEAncia BAHIANA | ${t.title}`},twitterDescription:{property:"twitter:description",content:t.description},twitterImage:{property:"twitter:image",content:`https://essenciabahiana.com.br/${t.imageURL}`}}})),(a,l,c,h)=>{const d=u.resolveComponent("q-page"),f=u.resolveComponent("q-img"),m=u.resolveComponent("q-separator"),_=u.resolveComponent("q-breadcrumbs"),v=u.resolveComponent("q-breadcrumbs-el");l(p.ssrRenderComponent(d,u.mergeProps({class:""},h),{default:u.withCtx((I,P,L,C)=>{if(P)P(`<header class="max-w-[1000px] min-h-[400px] mx-auto mt-28 md:mt-44 mb-10"${C}><figure${C}><div class="w-full"${C}>`),P(p.ssrRenderComponent(f,{class:"w-full max-h-[500px] object-cover",src:`/${u.unref(t).imageURL}`,alt:u.unref(t).post.title},null,L,C)),P(`</div><figcaption class="py-8 px-6 md:px-0 flex flex-col"${C}><h1 class="text-2xl md:text-5xl font-sans font-bold mb-6"${C}>${p.ssrInterpolate(u.unref(t).post.title)}</h1><p class="text-2xl"${C}>${p.ssrInterpolate(u.unref(t).post.excerpt)}</p><p class="ml-auto text-kg text-accent"${C}>Por Ess\xEAncia Bahiana</p></figcaption>`),P(p.ssrRenderComponent(m,{class:"max-w-[1000px] mx-auto mb-6"},null,L,C)),P(p.ssrRenderComponent(_,{class:"ml-6 md:ml-0"},{default:u.withCtx((ue,ee,te,de)=>{if(ee)ee(p.ssrRenderComponent(v,{label:"Home",to:"/"},null,te,de)),ee(p.ssrRenderComponent(v,{label:"Blog",to:"/blog"},null,te,de)),ee(p.ssrRenderComponent(v,{label:"O que fazer"},null,te,de)),ee(p.ssrRenderComponent(v,{label:u.unref(t).post.title},null,te,de));else return[u.createVNode(v,{label:"Home",to:"/"}),u.createVNode(v,{label:"Blog",to:"/blog"}),u.createVNode(v,{label:"O que fazer"}),u.createVNode(v,{label:u.unref(t).post.title},null,8,["label"])]}),_:1},L,C)),P(`</figure></header><main class="max-w-[1000px] mx-auto flex flex-col md:flex-row mb-6"${C}><section class="blog-content w-full md:w-8/12 px-6 md:pl-0"${C}>${u.unref(t).post.content}</section><aside class="w-full md:w-4/12"${C}>`),P(p.ssrRenderComponent(dt,null,null,L,C)),P("</aside></main>"),P(p.ssrRenderComponent(xe,{firstTitle:r.value,secondTitle:s.value,copyRight:i.value},null,L,C));else return[u.createVNode("header",{class:"max-w-[1000px] min-h-[400px] mx-auto mt-28 md:mt-44 mb-10"},[u.createVNode("figure",null,[u.createVNode("div",{class:"w-full"},[u.createVNode(f,{class:"w-full max-h-[500px] object-cover",src:`/${u.unref(t).imageURL}`,alt:u.unref(t).post.title},null,8,["src","alt"])]),u.createVNode("figcaption",{class:"py-8 px-6 md:px-0 flex flex-col"},[u.createVNode("h1",{class:"text-2xl md:text-5xl font-sans font-bold mb-6"},u.toDisplayString(u.unref(t).post.title),1),u.createVNode("p",{class:"text-2xl"},u.toDisplayString(u.unref(t).post.excerpt),1),u.createVNode("p",{class:"ml-auto text-kg text-accent"},"Por Ess\xEAncia Bahiana")]),u.createVNode(m,{class:"max-w-[1000px] mx-auto mb-6"}),u.createVNode(_,{class:"ml-6 md:ml-0"},{default:u.withCtx(()=>[u.createVNode(v,{label:"Home",to:"/"}),u.createVNode(v,{label:"Blog",to:"/blog"}),u.createVNode(v,{label:"O que fazer"}),u.createVNode(v,{label:u.unref(t).post.title},null,8,["label"])]),_:1})])]),u.createVNode("main",{class:"max-w-[1000px] mx-auto flex flex-col md:flex-row mb-6"},[u.createVNode("section",{innerHTML:u.unref(t).post.content,class:"blog-content w-full md:w-8/12 px-6 md:pl-0"},null,8,["innerHTML"]),u.createVNode("aside",{class:"w-full md:w-4/12"},[u.createVNode(dt)])]),u.createVNode(xe,{firstTitle:r.value,secondTitle:s.value,copyRight:i.value},null,8,["firstTitle","secondTitle","copyRight"])]}),_:1},c))}}}),oa=bi.setup;bi.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/BlogPage.vue"),oa?oa(n,e):void 0};var up=Object.freeze(Object.defineProperty({__proto__:null,default:bi},Symbol.toStringTag,{value:"Module"}));const Pi=u.defineComponent({name:"ErrorNotFound"});function hp(n,e,t,r,s,i,o,a){const l=u.resolveComponent("q-btn");e(`<div${p.ssrRenderAttrs(u.mergeProps({class:"fullscreen bg-blue text-white text-center q-pa-md flex flex-center"},r))}><div><div style="${p.ssrRenderStyle({"font-size":"30vh"})}"> 404 </div><div class="text-h2" style="${p.ssrRenderStyle({opacity:".4"})}"> Oops. Nothing here... </div>`),e(p.ssrRenderComponent(l,{class:"q-mt-xl",color:"white","text-color":"blue",unelevated:"",to:"/",label:"Go Home","no-caps":""},null,t)),e("</div></div>")}const aa=Pi.setup;Pi.setup=(n,e)=>{const t=u.useSSRContext();return(t.modules||(t.modules=new Set)).add("src/pages/ErrorNotFound.vue"),aa?aa(n,e):void 0};var dp=ua(Pi,[["ssrRender",hp]]),fp=Object.freeze(Object.defineProperty({__proto__:null,default:dp},Symbol.toStringTag,{value:"Module"})),mp={failed:"Action failed",success:"Action was successful"},pp={"en-US":mp},gp=er.boot(({app:n})=>{const e=Vc.createI18n({locale:"en-US",globalInjection:!0,messages:pp});n.use(e)}),_p=Object.freeze(Object.defineProperty({__proto__:null,default:gp},Symbol.toStringTag,{value:"Module"}));const Sc=ca.default.create({baseURL:"https://api.example.com"});var yp=er.boot(({app:n})=>{n.config.globalProperties.$axios=ca.default,n.config.globalProperties.$api=Sc}),vp=Object.freeze(Object.defineProperty({__proto__:null,default:yp,api:Sc},Symbol.toStringTag,{value:"Module"}));exports.default=Uc;
